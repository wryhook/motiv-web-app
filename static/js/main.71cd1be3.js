/*! For license information please see main.71cd1be3.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},509:function(e,t,n){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var a=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function i(e,t){if(t)e:{var n=a;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in n))break e;n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function u(e){if(!(e instanceof Array)){e=s(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}i("Symbol",(function(e){function t(e,t){this.g=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+a++,r)}})),i("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),i=0;i<n.length;i++){var s=a[n[i]];"function"===typeof s&&"function"!=typeof s.prototype[e]&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return e}));var c,l="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var h;e:{var f={};try{f.__proto__={a:!0},h=f.a;break e}catch(Tt){}h=!1}c=h?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=c;function p(e,t){if(e.prototype=l(t.prototype),e.prototype.constructor=e,d)d(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ea=t.prototype}function v(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function m(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function g(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function y(e,t,n){return e.g=n,{value:t}}function b(e){this.g=new v,this.h=e}function x(e,t,n,r){try{var a=t.call(e.g.i,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.l=!1,a;var i=a.value}catch(o){return e.g.i=null,g(e.g,o),k(e)}return e.g.i=null,r.call(e.g,i),k(e)}function k(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,g(e.g,n)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function w(e){this.next=function(t){return m(e.g),e.g.i?t=x(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=k(e)),t},this.throw=function(t){return m(e.g),e.g.i?t=x(e,e.g.i.throw,t,e.g.o):(g(e.g,t),t=k(e)),t},this.return=function(t){return function(e,t){m(e.g);var n=e.g.i;return n?x(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),k(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function S(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,a){!function e(i){i.done?r(i.value):Promise.resolve(i.value).then(t,n).then(e,a)}(e.next())}))}(new w(new b(e)))}v.prototype.o=function(e){this.h=e},v.prototype.return=function(e){this.j={return:e},this.g=this.s},i("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var i=a.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.m(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;i((function(){if(e.B()){var t=a.console;"undefined"!==typeof t&&t.error(e.i)}}),1)},t.prototype.B=function(){if(this.o)return!1;var e=a.CustomEvent,t=a.Event,n=a.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=a.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(n){i(n)}}:t}var a,i,o=new t((function(e,t){a=e,i=t}));return this.J(r(e,a),r(n,i)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var a=s(e),i=a.next();!i.done;i=a.next())r(i.value).J(t,n)}))},t.all=function(e){var n=s(e),a=n.next();return a.done?r([]):new t((function(e,t){function i(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,r(a.value).J(i(o.length-1),t),a=n.next()}while(!a.done)}))},t}));var E="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};i("Object.assign",(function(e){return e||E})),i("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),i("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var a=n[t];if(a===e||Object.is(a,e))return!0}return!1}})),i("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}})),i("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}(this,(function(e){return e}))}}));var T=this||self;function _(e,t){e=e.split(".");var n,r=T;e[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function C(e){!function(e){T.setTimeout((function(){throw e}),0)}(e)}function I(e,t){C(Error("Invalid wire type: "+e+" (at position "+t+")"))}function N(){C(Error("Failed to read varint, encoding is invalid."))}function A(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var R,O,D="undefined"!==typeof TextDecoder,M="undefined"!==typeof TextEncoder;function P(e){if(M)e=(O||(O=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var n=0,r=new Uint8Array(3*e.length),a=0;a<e.length;a++){var i=e.charCodeAt(a);if(128>i)r[n++]=i;else{if(2048>i)r[n++]=i>>6|192;else{if(55296<=i&&57343>=i){if(56319>=i&&a<e.length){var o=e.charCodeAt(++a);if(56320<=o&&57343>=o){i=1024*(i-55296)+o-56320+65536,r[n++]=i>>18|240,r[n++]=i>>12&63|128,r[n++]=i>>6&63|128,r[n++]=63&i|128;continue}a--}if(t)throw Error("Found an unpaired surrogate");i=65533}r[n++]=i>>12|224,r[n++]=i>>6&63|128}r[n++]=63&i|128}}e=r.subarray(0,n)}return e}var L={},F=null;function B(e){var t;void 0===t&&(t=0),U(),t=L[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",a=0,i=0;a<e.length-2;a+=3){var o=e[a],s=e[a+1],u=e[a+2],c=t[o>>2];o=t[(3&o)<<4|s>>4],s=t[(15&s)<<2|u>>6],u=t[63&u],n[i++]=c+o+s+u}switch(c=0,u=r,e.length-a){case 2:u=t[(15&(c=e[a+1]))<<2]||r;case 1:e=e[a],n[i]=t[e>>2]+t[(3&e)<<4|c>>4]+u+r}return n.join("")}function V(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),a=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),a=F[n];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}U();for(var r=0;;){var a=n(-1),i=n(0),o=n(64),s=n(64);if(64===s&&-1===a)break;t(a<<2|i>>4),64!=o&&(t(i<<4&240|o>>2),64!=s&&t(o<<6&192|s))}}(e,(function(e){r[a++]=e})),r.subarray(0,a)}function U(){if(!F){F={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));L[n]=r;for(var a=0;a<r.length;a++){var i=r[a];void 0===F[i]&&(F[i]=a)}}}}var j,z="function"===typeof Uint8Array;function W(e){if(this.g=e,null!==e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}W.prototype.toJSON=function(){if(null==this.g)var e="";else e=this.g,e=this.g=null==e||"string"===typeof e?e:z&&e instanceof Uint8Array?B(e):null;return e};var H="function"===typeof Uint8Array.prototype.slice;function G(e,t,n){return t===n?j||(j=new Uint8Array(0)):H?e.slice(t,n):new Uint8Array(e.subarray(t,n))}var K=0;function q(e,t){t=void 0!==(t=void 0===t?{}:t).u&&t.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=t,e&&X(this,e)}function X(e,t){e.h=function(e){if(e.constructor===Uint8Array)return e;if(e.constructor===ArrayBuffer)return new Uint8Array(e);if(e.constructor===Array)return new Uint8Array(e);if(e.constructor===String)return V(e);if(e.constructor===W){if(null==e.g)var t=j||(j=new Uint8Array(0));else{t=Uint8Array;var n=e.g;n=null==n||z&&null!=n&&n instanceof Uint8Array?n:"string"===typeof n?V(n):null,t=new t(e=e.g=n)}return t}if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(t),e.l=0,e.i=e.h.length,e.g=e.l}function Y(e){e.g>e.i&&(e.j=!0,C(Error("Tried to read past the end of the data "+e.g+" > "+e.i)))}function $(e){var t=e.h,n=t[e.g],r=127&n;return 128>n?(e.g+=1,Y(e),r):(r|=(127&(n=t[e.g+1]))<<7,128>n?(e.g+=2,Y(e),r):(r|=(127&(n=t[e.g+2]))<<14,128>n?(e.g+=3,Y(e),r):(r|=(127&(n=t[e.g+3]))<<21,128>n?(e.g+=4,Y(e),r):(r|=(15&(n=t[e.g+4]))<<28,128>n?(e.g+=5,Y(e),r>>>0):(e.g+=5,128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]?(e.j=!0,N(),r):(Y(e),r))))))}q.prototype.reset=function(){this.g=this.l};var Q=[];function J(){this.g=new Uint8Array(64),this.h=0}function Z(e,t){if(!(e.h+1<e.g.length)){var n=e.g;e.g=new Uint8Array(Math.ceil(1+2*e.g.length)),e.g.set(n)}e.g[e.h++]=t}function ee(e,t){for(;127<t;)Z(e,127&t|128),t>>>=7;Z(e,t)}function te(e){var t={},n=void 0!==t.N&&t.N;this.m={u:void 0!==t.u&&t.u},this.N=n,t=this.m,Q.length?(n=Q.pop(),t&&(n.u=t.u),e&&X(n,e),e=n):e=new q(e,t),this.g=e,this.l=this.g.g,this.h=this.i=-1,this.j=!1}function ne(e){var t=e.g;if((t=t.g==t.i)||(t=e.j)||(t=(t=e.g).j||0>t.g||t.g>t.i),t)return!1;e.l=e.g.g;var n=$(e.g);return t=n>>>3,0<=(n&=7)&&5>=n?(e.i=t,e.h=n,!0):(e.j=!0,I(n,e.l),!1)}function re(e){switch(e.h){case 0:if(0!=e.h)re(e);else e:{for(var t=(e=e.g).g,n=0;10>n;n++){if(0===(128&e.h[t])){e.g=t+1,Y(e);break e}t++}e.j=!0,N()}break;case 1:(e=e.g).g+=8,Y(e);break;case 2:2!=e.h?re(e):(t=$(e.g),(e=e.g).g+=t,Y(e));break;case 5:(e=e.g).g+=4,Y(e);break;case 3:for(t=e.i;;){if(!ne(e)){e.j=!0,C(Error("Unmatched start-group tag: stream EOF"));break}if(4==e.h){e.i!=t&&(e.j=!0,C(Error("Unmatched end-group tag")));break}re(e)}break;default:e.j=!0,I(e.h,e.l)}}function ae(e,t,n){e.N||(e=G(e.g.h,n,e.g.g),(n=t.m)?n.push(e):t.m=[e])}J.prototype.length=function(){return this.h},J.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,G(e,0,t)},te.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};var ie=[];function oe(){this.h=[],this.i=0,this.g=new J}function se(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function ue(e,t,n){ee(e.g,8*t+2),ee(e.g,n.length),se(e,e.g.end()),se(e,n)}var ce,le="function"===typeof Symbol&&"symbol"===typeof Symbol()?Symbol(void 0):void 0;function he(e,t){Object.isFrozen(e)||(le?e[le]|=t:void 0!==e.g?e.g|=t:Object.defineProperties(e,{g:{value:t,configurable:!0,writable:!0,enumerable:!1}}))}function fe(e){return e?null==(t=le?e[le]:e.g)?0:t:0;var t}function de(e){return Array.isArray(e)?(he(e,1),e):e}function pe(e){if(!Array.isArray(e))throw Error("cannot mark non-array as immutable");he(e,2)}function ve(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function me(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":return z&&null!=e&&e instanceof Uint8Array?B(e):e;default:return e}}function ge(e,t){if(null!=e)return Array.isArray(e)||ve(e)?ye(e,t):t(e)}function ye(e,t){if(Array.isArray(e)){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=ge(e[r],t);return 1&fe(e)&&de(n),n}for(r in n={},e)n[r]=ge(e[r],t);return n}function be(e,t,n){var r=ce;if(ce=null,e||(e=r),r=this.constructor.ca,e||(e=r?[r]:[]),this.j=(r?0:-1)-(this.constructor.aa||0),this.i=null,this.g=e,e=(r=this.g.length)-1,r&&ve(r=this.g[e])?(this.l=e-this.j,this.h=r):void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.h=null):this.l=Number.MAX_VALUE,n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(e+=this.j,(r=this.g[e])?de(r):this.g[e]=we):(Se(this),(r=this.h[e])?de(r):this.h[e]=we)}var xe,ke,we=Object.freeze(de([]));function Se(e){var t=e.l+e.j;e.g[t]||(e.h=e.g[t]={})}function Ee(e,t,n){return-1===t?null:void 0!==n&&n||t>=e.l?e.h?e.h[t]:void 0:e.g[t+e.j]}function Te(e,t,n){n=void 0===n||n;var r=void 0!==r&&r,a=Ee(e,t,r);return null==a&&(a=we),a===we?Ce(e,t,a=de([]),r):n&&Array.isArray(a)&&2&fe(a)&&Ce(e,t,a=a.slice(),r),a}function _e(e,t,n){return null==(e=null==(e=Ee(e,t))?e:+e)?void 0===n?0:n:e}function Ce(e,t,n,r){void 0!==r&&r||t>=e.l?(Se(e),e.h[t]=n):e.g[t+e.j]=n}function Ie(e,t,n){e.i||(e.i={});var r=e.i[n];if(!r){var a=Te(e,n,!1);r=[];for(var i=!!Array.isArray(a)&&!!(2&fe(a)),o=0;o<a.length;o++)r[o]=new t(a[o]),i&&pe(r[o].g);i&&(pe(r),Object.freeze(r)),e.i[n]=r}return r}function Ne(e,t,n,r,a){var i=Ie(e,r,t);n=n||new r,e=Te(e,t),void 0!=a?(i.splice(a,0,n),e.splice(a,0,Ae(n))):(i.push(n),e.push(Ae(n)))}function Ae(e){if(e.i)for(var t in e.i){var n=e.i[t];if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&Ae(n[r]);else n&&Ae(n)}return e.g}function Re(e,t){return null==(e=Ee(e,t))?0:e}function Oe(e,t){return null==(e=Ee(e,t))?"":e}function De(e,t){if(e=e.m){se(t,t.g.end());for(var n=0;n<e.length;n++)se(t,e[n])}}function Me(e){var t=e[0];switch(e.length){case 2:var n=e[1];return function(e,r,a){return t(e,r,a,n)};case 3:var r=e[1],a=e[2];return function(e,n,i){return t(e,n,i,r,a)};case 4:var i=e[1],o=e[2],s=e[3];return function(e,n,r){return t(e,n,r,i,o,s)};default:throw Error("unsupported number of parameters, expected [2-4], got "+e.length)}}function Pe(e,t,n){for(;ne(t)&&4!=t.h;){var r=t.i,a=n[r];if(a){if(Array.isArray(a)&&(a=n[r]=Me(a)),!a(t,e,r)){a=e;var i=(r=t).l;re(r),ae(r,a,i)}}else a=e,i=(r=t).l,re(r),ae(r,a,i)}return e}function Le(e,t){var n=new oe;if(t(e,n),0===(e=n.i+n.g.length()))n=new Uint8Array(0);else{e=new Uint8Array(e);for(var r=n.h,a=r.length,i=t=0;i<a;i++){var o=r[i];0!==o.length&&(e.set(o,t),t+=o.length)}0!==(a=(r=n.g).h)&&(e.set(r.g.subarray(0,a),t),r.h=0),n.h=[e],n=e}return n}function Fe(e,t,n){if(ie.length){var r=ie.pop();e&&(X(r.g,e),r.i=-1,r.h=-1),e=r}else e=new te(e);try{return n(new t,e)}finally{(t=e.g).h=null,t.l=0,t.i=0,t.g=0,t.j=!1,t.u=!1,e.i=-1,e.h=-1,e.j=!1,100>ie.length&&ie.push(e)}}function Be(e,t,n){if(null!=(t=Ee(t,n))){ee(e.g,8*n+5),e=e.g;var r=t;0===(r=(n=0>r?1:0)?-r:r)?0<1/r?K=0:(0,K=2147483648):isNaN(r)?(0,K=2147483647):34028234663852886e22<r?(0,K=(n<<31|2139095040)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),0,K=(n<<31|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,0,K=(n<<31|t+127<<23|8388607&r)>>>0),Z(e,(n=K)>>>0&255),Z(e,n>>>8&255),Z(e,n>>>16&255),Z(e,n>>>24&255)}}function Ve(e,t,n){if(5!==e.h)return!1;var r=(e=e.g).h[e.g],a=e.h[e.g+1],i=e.h[e.g+2],o=e.h[e.g+3];return e.g+=4,Y(e),e=2*((a=(r<<0|a<<8|i<<16|o<<24)>>>0)>>31)+1,r=a>>>23&255,a&=8388607,Ce(t,n,255==r?a?NaN:1/0*e:0==r?e*Math.pow(2,-149)*a:e*Math.pow(2,r-150)*(a+Math.pow(2,23))),!0}function Ue(e,t,n){if(0!==e.h)return!1;for(var r=e.g,a=128,i=0,o=e=0;4>o&&128<=a;o++)i|=(127&(a=r.h[r.g++]))<<7*o;if(128<=a&&(i|=(127&(a=r.h[r.g++]))<<28,e|=(127&a)>>4),128<=a)for(o=0;5>o&&128<=a;o++)e|=(127&(a=r.h[r.g++]))<<7*o+3;return 128>a?(r=i>>>0,(e=2147483648&(a=e>>>0))&&(a=~a>>>0,0==(r=1+~r>>>0)&&(a=a+1>>>0)),r=4294967296*a+(r>>>0),e=e?-r:r):(r.j=!0,N(),e=void 0),Ce(t,n,e),!0}function je(e,t,n){return 0===e.h&&(Ce(t,n,$(e.g)),!0)}function ze(e,t,n){if(2!==e.h)return!1;var r,a=$(e.g),i=(e=e.g).g;if(e.g+=a,Y(e),e=e.h,D)(r=R)||(r=R=new TextDecoder("utf-8",{fatal:!1})),r=r.decode(e.subarray(i,i+a));else{a=i+a;for(var o,s,u,c=[],l=null;i<a;)128>(o=e[i++])?c.push(o):224>o?i>=a?c.push(65533):(s=e[i++],194>o||128!==(192&s)?(i--,c.push(65533)):c.push((31&o)<<6|63&s)):240>o?i>=a-1?c.push(65533):128!==(192&(s=e[i++]))||224===o&&160>s||237===o&&160<=s||128!==(192&(r=e[i++]))?(i--,c.push(65533)):c.push((15&o)<<12|(63&s)<<6|63&r):244>=o?i>=a-2?c.push(65533):128!==(192&(s=e[i++]))||0!==s-144+(o<<28)>>30||128!==(192&(r=e[i++]))||128!==(192&(u=e[i++]))?(i--,c.push(65533)):(o=(7&o)<<18|(63&s)<<12|(63&r)<<6|63&u,o-=65536,c.push(55296+(o>>10&1023),56320+(1023&o))):c.push(65533),8192<=c.length&&(l=A(l,c),c.length=0);r=A(l,c)}return Ce(t,n,r),!0}function We(e,t,n,r,a){if(2!==e.h)return!1;var i=new r,o=e.g.i,s=$(e.g),u=e.g.g+s;if(e.g.i=u,a(i,e),0!==(a=u-e.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+s+" bytes, instead read "+(s-a)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=u,e.g.i=o,Ne(t,n,i,r,void 0),!0}function He(e){be.call(this,e)}function Ge(e,t){var n=Ee(e,1);if(null!=n&&null!=n){ee(t.g,8);var r=t.g;if(0<=n)ee(r,n);else{for(var a=0;9>a;a++)Z(r,127&n|128),n>>=7;Z(r,1)}}Be(t,e,2),null!=(r=Ee(e,3))&&ue(t,3,P(r)),null!=(r=Ee(e,4))&&ue(t,4,P(r)),De(e,t)}function Ke(e,t){return Pe(e,t,xe||(xe={1:je,2:Ve,3:ze,4:ze}))}function qe(e){be.call(this,e,-1,Qe)}function Xe(e,t){return Pe(e,t,ke||(ke={1:[We,He,Ke]}))}be.prototype.toJSON=function(){return ye(Ae(this),me)},be.prototype.toString=function(){return Ae(this).toString()},p(He,be),p(qe,be),qe.prototype.addClassification=function(e,t){return Ne(this,1,e,He,t),this};var Ye,$e,Qe=[1];function Je(e){be.call(this,e)}function Ze(e,t){Be(t,e,1),Be(t,e,2),Be(t,e,3),Be(t,e,4),Be(t,e,5),De(e,t)}function et(e,t){return Pe(e,t,Ye||(Ye={1:Ve,2:Ve,3:Ve,4:Ve,5:Ve}))}function tt(e){be.call(this,e,-1,at)}function nt(e,t){return Pe(e,t,$e||($e={1:[We,Je,et]}))}p(Je,be),p(tt,be);var rt,at=[1];function it(e){be.call(this,e)}function ot(e,t){Be(t,e,1),Be(t,e,2),Be(t,e,3),Be(t,e,4),Be(t,e,5);var n=Ee(e,6);if(null!=n&&null!=n){ee(t.g,48);var r=t.g,a=n;n=0>a;var i=(a=Math.abs(a))>>>0;for(a=Math.floor((a-i)/4294967296),a>>>=0,n&&(a=~a>>>0,4294967295<(i=1+(~i>>>0))&&(i=0,4294967295<++a&&(a=0))),n=K=i,i=a;0<i||127<n;)Z(r,127&n|128),n=(n>>>7|i<<25)>>>0,i>>>=7;Z(r,n)}De(e,t)}function st(e,t){return Pe(e,t,rt||(rt={1:Ve,2:Ve,3:Ve,4:Ve,5:Ve,6:Ue}))}function ut(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function ct(e){return Ie(e,He,1).map((function(e){return{index:Re(e,1),X:_e(e,2),label:null!=Ee(e,3)?Oe(e,3):void 0,displayName:null!=Ee(e,4)?Oe(e,4):void 0}}))}function lt(e){return{x:_e(e,1),y:_e(e,2),z:_e(e,3),visibility:null!=Ee(e,4)?_e(e,4):void 0}}function ht(e){return Ie(Fe(e,tt,nt),Je,1).map(lt)}function ft(e,t){this.h=e,this.g=t,this.l=0}function dt(e,t,n){return function(e,t){var n=e.g;if(void 0===e.m){var r=ut(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),a=ut(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),i=n.createProgram();if(n.attachShader(i,r),n.attachShader(i,a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(i));r=e.m=i,n.useProgram(r),a=n.getUniformLocation(r,"sampler0"),e.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),da:a},e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.I),n.vertexAttribPointer(e.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.enableVertexAttribArray(e.j.H),n.vertexAttribPointer(e.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(a,0)}r=e.j,n.useProgram(e.m),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"===typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"===typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise((function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)})))}function pt(e){this.g=e}p(it,be);var vt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function mt(e,t){return t+e}function gt(e,t){window[e]=t}function yt(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||mt,"object"===typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"===typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var n=(t=s(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var r=e.options[n].default;void 0!==r&&(this.j[n]="function"===typeof r?r():r)}}function bt(e){var t,n,r,a,i,o,s,c,l,h,f;return S((function(d){switch(d.g){case 1:return e.R?(t=void 0===e.g.files?[]:"function"===typeof e.g.files?e.g.files(e.j):e.g.files,y(d,S((function(e){switch(e.g){case 1:return e.m=2,y(e,WebAssembly.instantiate(vt),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})),2)):d.return();case 2:if(n=d.h,"object"===typeof window)return gt("createMediapipeSolutionsWasm",{locateFile:e.locateFile}),gt("createMediapipeSolutionsPackedAssets",{locateFile:e.locateFile}),o=t.filter((function(e){return void 0!==e.data})),s=t.filter((function(e){return void 0===e.data})),c=Promise.all(o.map((function(t){var n=xt(e,t.url);if(void 0!==t.path){var r=t.path;n=n.then((function(t){return e.overrideFile(r,t),Promise.resolve(t)}))}return n}))),l=Promise.all(s.map((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(e.locateFile(t.url,e.S)):Promise.resolve()}))).then((function(){var t,n,r;return S((function(a){if(1==a.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=e,y(a,t(n),2);r.h=a.h,a.g=0}))})),h=S((function(t){return e.g.graph&&e.g.graph.url?t=y(t,xt(e,e.g.graph.url),0):(t.g=0,t=void 0),t})),y(d,Promise.all([l,c,h]),7);if("function"!==typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=t.filter((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n})).map((function(t){return e.locateFile(t.url,e.S)})),importScripts.apply(null,u(r)),a=e,y(d,createMediapipeSolutionsWasm(Module),6);case 6:a.h=d.h,e.l=new OffscreenCanvas(1,1),e.h.canvas=e.l,i=e.h.GL.createContext(e.l,{antialias:!1,alpha:!1,ba:"undefined"!==typeof WebGL2RenderingContext?2:1}),e.h.GL.makeContextCurrent(i),d.g=4;break;case 7:if(e.l=document.createElement("canvas"),!(f=e.l.getContext("webgl2",{}))&&!(f=e.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),d.return();e.D=f,e.h.canvas=e.l,e.h.createContext(e.l,!0,!0,{});case 4:e.i=new e.h.SolutionWasm,e.R=!1,d.g=0}}))}function xt(e,t){var n,r;return S((function(a){return t in e.F?a.return(e.F[t]):(n=e.locateFile(t,""),r=fetch(n).then((function(e){return e.arrayBuffer()})),e.F[t]=r,a.return(r))}))}function kt(e,t,n){var r,a,i,o,u,c,l,h,f,d,p,v,m,g;return S((function(b){switch(b.g){case 1:if(!n)return b.return(t);for(r={},a=0,i=s(Object.keys(n)),o=i.next();!o.done;o=i.next())u=o.value,"string"!==typeof(c=n[u])&&"texture"===c.type&&void 0!==t[c.stream]&&++a;1<a&&(e.G=!1),l=s(Object.keys(n)),o=l.next();case 2:if(o.done){b.g=4;break}if(h=o.value,"string"===typeof(f=n[h]))return m=r,g=h,y(b,function(e,t,n){var r;return S((function(a){return"number"===typeof n||n instanceof Uint8Array||n instanceof e.h.Uint8BlobList?a.return(n):n instanceof e.h.Texture2dDataOut?((r=e.s[t])||(r=new ft(e.h,e.D),e.s[t]=r),a.return(dt(r,n,e.G))):a.return(void 0)}))}(e,h,t[f]),14);if(d=t[f.stream],"detection_list"===f.type){if(d){for(var x=d.getRectList(),k=d.getLandmarksList(),w=d.getClassificationsList(),E=[],T=0;T<x.size();++T){var _=Fe(x.get(T),it,st);_={T:{Y:_e(_,1),Z:_e(_,2),height:_e(_,3),width:_e(_,4),rotation:_e(_,5,0),W:Re(_,6)},O:ht(k.get(T)),M:ct(Fe(w.get(T),qe,Xe))},E.push(_)}x=E}else x=[];r[h]=x,b.g=7;break}if("proto_list"===f.type){if(d){for(x=Array(d.size()),k=0;k<d.size();k++)x[k]=d.get(k);d.delete()}else x=[];r[h]=x,b.g=7;break}if(void 0===d){b.g=3;break}if("float_list"===f.type){r[h]=d,b.g=7;break}if("proto"===f.type){r[h]=d,b.g=7;break}if("texture"!==f.type)throw Error("Unknown output config type: '"+f.type+"'");return(p=e.s[h])||(p=new ft(e.h,e.D),e.s[h]=p),y(b,dt(p,d,e.G),13);case 13:v=b.h,r[h]=v;case 7:f.transform&&r[h]&&(r[h]=f.transform(r[h])),b.g=3;break;case 14:m[g]=b.h;case 3:o=l.next(),b.g=2;break;case 4:return b.return(r)}}))}function wt(e,t){for(var n=t.name||"$",r=[].concat(u(t.wants)),a=new e.h.StringList,i=s(t.wants),o=i.next();!o.done;o=i.next())a.push_back(o.value);i=e.h.PacketListener.implement({onResults:function(a){for(var i={},o=0;o<t.wants.length;++o)i[r[o]]=a.get(o);var s=e.listeners[n];s&&(e.C=kt(e,i,t.outs).then((function(n){n=s(n);for(var a=0;a<t.wants.length;++a){var o=i[r[a]];"object"===typeof o&&o.hasOwnProperty&&o.hasOwnProperty("delete")&&o.delete()}n&&(e.C=n)})))}}),e.i.attachMultiListener(a,i),a.delete()}function St(e){switch(void 0===e&&(e=0),e){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function Et(e){var t=this;e=e||{},this.g=new yt({locateFile:e.locateFile,files:function(e){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:St(e.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:ht},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:ht},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(e){var n,r,a;return S((function(i){return 1==i.g?(n=St(e),r="third_party/mediapipe/modules/pose_landmark/"+n,y(i,xt(t.g,n),2)):(a=i.h,t.g.overrideFile(r,a),i.return(!0))}))}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}(e=yt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){var e=this;return S((function(t){e.i&&(e.i.reset(),e.m={},e.s={}),t.g=0}))},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var r=[],a=[],i={},o=s(Object.keys(e)),u=o.next();!u.done;i={K:i.K,L:i.L},u=o.next()){var c=u.value;c in this.j&&this.j[c]===e[c]||(this.j[c]=e[c],void 0!==(u=t[c])&&(u.onChange&&(i.K=u.onChange,i.L=e[c],r.push(function(e){return function(){return S((function(t){if(1==t.g)return y(t,e.K(e.L),2);!0===t.h&&(n.o=!0),t.g=0}))}}(i))),u.graphOptionXref&&(c={valueNumber:1===u.type?e[c]:0,valueBoolean:0===u.type&&e[c],valueString:2===u.type?e[c]:""},u=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),u.graphOptionXref),c),a.push(u))))}0===r.length&&0===a.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(a),this.v=(void 0===this.v?[]:this.v).concat(r))}},e.initialize=function(){var e=this;return S((function(t){return 1==t.g?y(t,bt(e),2):3!=t.g?y(t,function(e){var t,n,r,a,i,o,u,c;return S((function(l){if(1==l.g)return e.g.graph&&e.g.graph.url&&e.P===e.g.graph.url?l.return():(e.o=!0,e.g.graph&&e.g.graph.url?(e.P=e.g.graph.url,y(l,xt(e,e.g.graph.url),3)):void(l.g=2));for(2!=l.g&&(t=l.h,e.i.loadGraph(t)),n=s(Object.keys(e.B)),r=n.next();!r.done;r=n.next())a=r.value,e.i.overrideFile(a,e.B[a]);if(e.B={},e.g.listeners)for(i=s(e.g.listeners),o=i.next();!o.done;o=i.next())u=o.value,wt(e,u);c=e.j,e.j={},e.setOptions(c),l.g=0}))}(e),3):y(t,function(e){var t,n,r,a,i,o;return S((function(u){switch(u.g){case 1:if(!e.o)return u.return();if(!e.v){u.g=2;break}t=s(e.v),n=t.next();case 3:if(n.done){u.g=5;break}return y(u,(0,n.value)(),4);case 4:n=t.next(),u.g=3;break;case 5:e.v=void 0;case 2:if(e.A){for(r=new e.h.GraphOptionChangeRequestList,a=s(e.A),i=a.next();!i.done;i=a.next())o=i.value,r.push_back(o);e.i.changeOptions(r),r.delete(),e.A=void 0}e.o=!1,u.g=0}}))}(e),0)}))},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){var n,r,a,i,o,u,c,l,h,f=this;return S((function(d){switch(d.g){case 1:return f.g.inputs?(n=1e3*(void 0===t||null===t?performance.now():t),y(d,f.C,2)):d.return();case 2:return y(d,f.initialize(),3);case 3:for(r=new f.h.PacketDataList,a=s(Object.keys(e)),i=a.next();!i.done;i=a.next())if(o=i.value,u=f.g.inputs[o]){e:{var p=e[o];switch(u.type){case"video":var v=f.m[u.stream];if(v||(v=new ft(f.h,f.D),f.m[u.stream]=v),0===v.l&&(v.l=v.h.createTexture()),"undefined"!==typeof HTMLVideoElement&&p instanceof HTMLVideoElement)var m=p.videoWidth,g=p.videoHeight;else"undefined"!==typeof HTMLImageElement&&p instanceof HTMLImageElement?(m=p.naturalWidth,g=p.naturalHeight):(m=p.width,g=p.height);g={glName:v.l,width:m,height:g},(m=v.g).canvas.width=g.width,m.canvas.height=g.height,m.activeTexture(m.TEXTURE0),v.h.bindTexture2d(v.l),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,p),v.h.bindTexture2d(0),v=g;break e;case"detections":for((v=f.m[u.stream])||(v=new pt(f.h),f.m[u.stream]=v),v.data||(v.data=new v.g.DetectionListData),v.data.reset(p.length),g=0;g<p.length;++g){m=p[g];var b=v.data,x=b.setBoundingBox,k=g,w=m.T,S=new it;if(Ce(S,1,w.Y),Ce(S,2,w.Z),Ce(S,3,w.height),Ce(S,4,w.width),Ce(S,5,w.rotation),Ce(S,6,w.W),w=Le(S,ot),x.call(b,k,w),m.O)for(b=0;b<m.O.length;++b){var E=!!(S=m.O[b]).visibility;k=(x=v.data).addNormalizedLandmark,w=g,S=Object.assign(Object.assign({},S),{visibility:E?S.visibility:0}),Ce(E=new Je,1,S.x),Ce(E,2,S.y),Ce(E,3,S.z),S.visibility&&Ce(E,4,S.visibility),S=Le(E,Ze),k.call(x,w,S)}if(m.M)for(b=0;b<m.M.length;++b)k=(x=v.data).addClassification,w=g,S=m.M[b],Ce(E=new He,2,S.X),S.index&&Ce(E,1,S.index),S.label&&Ce(E,3,S.label),S.displayName&&Ce(E,4,S.displayName),S=Le(E,Ge),k.call(x,w,S)}v=v.data;break e;default:v={}}}switch(c=v,l=u.stream,u.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},c),{stream:l,timestamp:n}));break;case"detections":(h=c).stream=l,h.timestamp=n,r.pushDetectionList(h);break;default:throw Error("Unknown input config type: '"+u.type+"'")}}return f.i.send(r),y(d,f.C,4);case 4:r.delete(),d.g=0}}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},_("Solution",yt),_("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=Et.prototype).reset=function(){this.g.reset()},e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){var e=this;return S((function(t){return y(t,e.g.initialize(),0)}))},e.send=function(e,t){var n=this;return S((function(r){return y(r,n.g.send(e,t),0)}))},e.setOptions=function(e){this.g.setOptions(e)},_("Pose",Et),_("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),_("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),_("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),_("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),_("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),_("VERSION","0.5.1635988162")}).call(this)},948:function(e){"use strict";var t=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?u((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function a(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(n){return!1}}function s(e,t,n){var a={};return n.isMergeableObject(e)&&i(e).forEach((function(t){a[t]=r(e[t],n)})),i(t).forEach((function(i){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(o(e,i)&&n.isMergeableObject(t[i])?a[i]=function(e,t){if(!t.customMerge)return u;var n=t.customMerge(e);return"function"===typeof n?n:u}(i,n)(e[i],t[i],n):a[i]=r(t[i],n))})),a}function u(e,n,i){(i=i||{}).arrayMerge=i.arrayMerge||a,i.isMergeableObject=i.isMergeableObject||t,i.cloneUnlessOtherwiseSpecified=r;var o=Array.isArray(n);return o===Array.isArray(e)?o?i.arrayMerge(e,n,i):s(e,n,i):r(n,i)}u.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return u(e,n,t)}),{})};var c=u;e.exports=c},110:function(e,t,n){"use strict";var r=n(309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=d(n);a&&a!==p&&e(t,a,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var g=o[m];if(!i[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=f(n,g);try{c(t,g,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case i:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case v:case u:return e;default:return t}}case a:return t}}}function w(e){return k(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=m,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||k(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return k(e)===c},t.isContextProvider=function(e){return k(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return k(e)===f},t.isFragment=function(e){return k(e)===i},t.isLazy=function(e){return k(e)===m},t.isMemo=function(e){return k(e)===v},t.isPortal=function(e){return k(e)===a},t.isProfiler=function(e){return k(e)===s},t.isStrictMode=function(e){return k(e)===o},t.isSuspense=function(e){return k(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=k},309:function(e,t,n){"use strict";e.exports=n(746)},102:function(e){function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function n(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,r,a){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");"function"===typeof r&&(a=r,r={}),r=r||{},a=a||function(){},o.type=r.type||"text/javascript",o.charset=r.charset||"utf8",o.async=!("async"in r)||!!r.async,o.src=e,r.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(o,r.attrs),r.text&&(o.text=""+r.text),("onload"in o?t:n)(o,a),o.onload||t(o,a),i.appendChild(o)}},987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(T){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:m;if(t){if(e<0)return g;if(e>=d)return w}else{if(e<=-p)return S;if(e+1>=p)return k}return e<0?s(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),i=m,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),h=parseInt(e.substring(o,o+u),n);if(u<8){var f=s(c(n,u));i=i.mul(f).add(s(h))}else i=(i=i.mul(a)).add(s(h))}return i.unsigned=t,i}function h(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=h;var f=4294967296,d=f*f,p=d/2,v=o(1<<24),m=o(0);n.ZERO=m;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var k=u(-1,2147483647,!1);n.MAX_VALUE=k;var w=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var E=n.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),l=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1===(1&this.low)},E.isEven=function(){return 0===(1&this.low)},E.equals=function(e){return r(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(r(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},E.neg=E.negate,E.add=function(e){r(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,f=0,d=0,p=0;return d+=(p+=i+(65535&e.low))>>>16,f+=(d+=a+c)>>>16,l+=(f+=n+s)>>>16,l+=t+o,u((d&=65535)<<16|(p&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},E.subtract=function(e){return r(e)||(e=h(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=h(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(S))return e.isOdd()?S:m;if(e.eq(S))return this.isOdd()?S:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,l=65535&e.high,f=e.low>>>16,d=65535&e.low,p=0,g=0,y=0,b=0;return y+=(b+=o*d)>>>16,g+=(y+=i*d)>>>16,y&=65535,g+=(y+=o*f)>>>16,p+=(g+=a*d)>>>16,g&=65535,p+=(g+=i*f)>>>16,g&=65535,p+=(g+=o*l)>>>16,p+=n*d+a*f+i*l+o*c,u((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(r(e)||(e=h(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;i=g}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?g:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),f=s(n),d=f.mul(e);d.isNegative()||d.gt(a);)d=(f=s(n-=l,this.unsigned)).mul(e);f.isZero()&&(f=y),i=i.add(f),a=a.sub(d)}return i},E.div=E.divide,E.modulo=function(e){return r(e)||(e=h(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return u(~this.low,~this.high,this.unsigned)},E.and=function(e){return r(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return r(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return r(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},781:function(e,t,n){"use strict";n.r(t);var r=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function a(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(a=e[n],i=t[n],!(a===i||r(a)&&r(i)))return!1;var a,i;return!0}t.default=function(e,t){var n;void 0===t&&(t=a);var r,i=[],o=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o&&n===this&&t(a,i)||(r=e.apply(this,a),o=!0,n=this,i=a),r}}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,i){for(var o,s,u=a(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var h=0;h<s.length;h++)r.call(o,s[h])&&(u[s[h]]=o[s[h]])}}return u}},888:function(e,t,n){"use strict";var r=n(47);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),a=n(725),i=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,E=60107,T=60108,_=60114,C=60109,I=60110,N=60112,A=60113,R=60120,O=60115,D=60116,M=60121,P=60128,L=60129,F=60130,B=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;w=V("react.element"),S=V("react.portal"),E=V("react.fragment"),T=V("react.strict_mode"),_=V("react.profiler"),C=V("react.provider"),I=V("react.context"),N=V("react.forward_ref"),A=V("react.suspense"),R=V("react.suspense_list"),O=V("react.memo"),D=V("react.lazy"),M=V("react.block"),V("react.scope"),P=V("react.opaque.id"),L=V("react.debug_trace_mode"),F=V("react.offscreen"),B=V("react.legacy_hidden")}var U,j="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}function W(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var H=!1;function G(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s])return"\n"+a[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?W(e):""}function K(e){switch(e.tag){case 5:return W(e.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case _:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return q(e.type);case M:return q(e._render);case D:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=X(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=X(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+X(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:X(n)}}function ce(e,t){var n=X(t.value),r=X(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ge=(me=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function ke(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ke(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(be).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Se=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Ne=null;function Ae(e){if(e=ra(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=ia(t),Ce(e.stateNode,e.type,t))}}function Re(e){Ie?Ne?Ne.push(e):Ne=[e]:Ie=e}function Oe(){if(Ie){var e=Ie,t=Ne;if(Ne=Ie=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function De(e,t){return e(t)}function Me(e,t,n,r,a){return e(t,n,r,a)}function Pe(){}var Le=De,Fe=!1,Be=!1;function Ve(){null===Ie&&null===Ne||(Pe(),Oe())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ia(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var je=!1;if(h)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){je=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){je=!1}function We(e,t,n,r,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var He=!1,Ge=null,Ke=!1,qe=null,Xe={onError:function(e){He=!0,Ge=e}};function Ye(e,t,n,r,a,i,o,s,u){He=!1,Ge=null,We.apply(Xe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if($e(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Je(a),e;if(i===r)return Je(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,it=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ht=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function mt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=pt(t,n,r,a,i),null!==t&&(null!==(t=ra(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function gt(e){var t=na(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ra(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function xt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ra(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==ct&&yt(ct)&&(ct=null),lt.forEach(bt),ht.forEach(bt)}function kt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,xt)))}function wt(e){function t(t){return kt(t,e)}if(0<ot.length){kt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&kt(st,e),null!==ut&&kt(ut,e),null!==ct&&kt(ct,e),lt.forEach(t),ht.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)gt(n),null===n.blockedOn&&ft.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Tt={},_t={};function Ct(e){if(Tt[e])return Tt[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in _t)return Tt[e]=n[t];return e}h&&(_t=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var It=Ct("animationend"),Nt=Ct("animationiteration"),At=Ct("animationstart"),Rt=Ct("transitionend"),Ot=new Map,Dt=new Map,Mt=["abort","abort",It,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Pt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Dt.set(r,t),Ot.set(r,a),c(a,[r])}}(0,i.unstable_now)();var Lt=8;function Ft(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Bt(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,a=0,i=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==i)r=i,a=Lt=15;else if(0!==(i=134217727&n)){var u=i&~o;0!==u?(r=Ft(u),a=Lt):0!==(s&=i)&&(r=Ft(s),a=Lt)}else 0!==(i=n&~o)?(r=Ft(i),a=Lt):0!==s&&(r=Ft(s),a=Lt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),a<=Lt)return t;Lt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Ht(t)),r|=e[n],t&=~a;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=jt(24&~t))?Ut(10,t):e;case 10:return 0===(e=jt(192&~t))?Ut(8,t):e;case 8:return 0===(e=jt(3584&~t))&&(0===(e=jt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=jt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function jt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Kt|0)|0},Gt=Math.log,Kt=Math.LN2;var qt=i.unstable_UserBlockingPriority,Xt=i.unstable_runWithPriority,Yt=!0;function $t(e,t,n,r){Fe||Pe();var a=Jt,i=Fe;Fe=!0;try{Me(a,e,t,n,r)}finally{(Fe=i)||Ve()}}function Qt(e,t,n,r){Xt(qt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var a;if(Yt)if((a=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var i=Zt(e,t,n,r);if(null===i)a&&vt(e,r);else{if(a){if(-1<dt.indexOf(e))return e=pt(i,e,t,n,r),void ot.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return st=mt(st,e,t,n,r,a),!0;case"dragenter":return ut=mt(ut,e,t,n,r,a),!0;case"mouseover":return ct=mt(ct,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return lt.set(i,mt(lt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ht.set(i,mt(ht.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;vt(e,r)}Pr(e,t,r,null,n)}}}function Zt(e,t,n,r){var a=_e(r);if(null!==(a=na(a))){var i=$e(a);if(null===i)a=null;else{var o=i.tag;if(13===o){if(null!==(a=Qe(i)))return a;a=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Pr(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=a({},fn,{view:0,detail:0}),vn=un(pn),mn=a({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(cn=e.screenX-hn.screenX,ln=e.screenY-hn.screenY):ln=cn=0,hn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=un(mn),yn=un(a({},mn,{dataTransfer:0})),bn=un(a({},pn,{relatedTarget:0})),xn=un(a({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),kn=a({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=un(kn),Sn=un(a({},fn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function In(){return Cn}var Nn=a({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=un(Nn),Rn=un(a({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=un(a({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Dn=un(a({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=a({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=un(Mn),Ln=[9,13,27,32],Fn=h&&"CompositionEvent"in window,Bn=null;h&&"documentMode"in document&&(Bn=document.documentMode);var Vn=h&&"TextEvent"in window&&!Bn,Un=h&&(!Fn||Bn&&8<Bn&&11>=Bn),jn=String.fromCharCode(32),zn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Xn(e,t,n,r){Re(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,$n=null;function Qn(e){Nr(e,0)}function Jn(e){if(Q(aa(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ar(){Yn&&(Yn.detachEvent("onpropertychange",ir),$n=Yn=null)}function ir(e){if("value"===e.propertyName&&Jn($n)){var t=[];if(Xn(t,$n,e,_e(e)),e=Qn,Fe)e(t);else{Fe=!0;try{De(e,t)}finally{Fe=!1,Ve()}}}}function or(e,t,n){"focusin"===e?(ar(),$n=n,(Yn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&ar()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn($n)}function ur(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hr=Object.prototype.hasOwnProperty;function fr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,br=null,xr=null,kr=null,wr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==br||br!==J(r)||("selectionStart"in(r=br)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},kr&&fr(kr,r)||(kr=r,0<(r=Fr(xr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Pt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pt(Mt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Tr=0;Tr<Er.length;Tr++)Dt.set(Er[Tr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,u,c){if(Ye.apply(this,arguments),He){if(!He)throw Error(o(198));var l=Ge;He=!1,Ge=null,Ke||(Ke=!0,qe=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Ir(a,s,c),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Ir(a,s,c),i=u}}}if(Ke)throw e=qe,Ke=!1,qe=null,e}function Ar(e,t){var n=oa(t),r=e+"__bubble";n.has(r)||(Mr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Cr.has(t)||Dr(t,!1,e,null),Dr(t,!0,e,null)})))}function Dr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;a|=2,i=r}var o=oa(i),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(a|=4),Mr(i,e,a,t),o.add(s))}function Mr(e,t,n,r){var a=Dt.get(t);switch(void 0===a?2:a){case 0:a=$t;break;case 1:a=Qt;break;default:a=Jt}n=a.bind(null,t,n,e),a=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Pr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=na(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Be)return e(t,n);Be=!0;try{Le(e,t,n)}finally{Be=!1,Ve()}}((function(){var r=i,a=_e(n),o=[];e:{var s=Ot.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=On;break;case It:case Nt:case At:u=xn;break;case Rt:u=Dn;break;case"scroll":u=vn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ue(p,f))&&l.push(Lr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!na(c)&&!c[ea])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?na(c):null)&&(c!==(h=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=gn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:aa(u),d=null==c?s:aa(c),(s=new l(v,p+"leave",u,n,a)).target=h,s.relatedTarget=d,v=null,na(a)===r&&((l=new l(f,p+"enter",c,n,a)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Br(d))p++;for(d=0,v=f;v;v=Br(v))d++;for(;0<p-d;)l=Br(l),p--;for(;0<d-p;)f=Br(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Br(l),f=Br(f)}l=null}else l=null;null!==u&&Vr(o,s,u,l,!1),null!==c&&null!==h&&Vr(o,h,c,l,!0)}if("select"===(u=(s=r?aa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(qn(s))if(er)m=cr;else{m=sr;var g=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Xn(o,m,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ae(s,"number",s.value)),g=r?aa(r):window,e){case"focusin":(qn(g)||"true"===g.contentEditable)&&(br=g,xr=r,kr=null);break;case"focusout":kr=xr=br=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Sr(o,n,a);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Sr(o,n,a)}var y;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(y=rn()):(tn="value"in(en=a)?en.value:en.textContent,Gn=!0)),0<(g=Fr(r,b)).length&&(b=new Sn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=Vn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,jn);case"textInput":return(e=t.data)===jn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Fn&&Wn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(a=new Sn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Nr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Ue(e,n))&&r.unshift(Lr(e,i,a)),null!=(i=Ue(e,t))&&r.push(Lr(e,i,a))),e=e.return}return r}function Br(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=Ue(n,i))&&o.unshift(Lr(n,u,s)):a||null!=(u=Ue(n,i))&&o.push(Lr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var jr=null,zr=null;function Wr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function qr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Xr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Qr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Qr,Zr="__reactProps$"+Qr,ea="__reactContainer$"+Qr,ta="__reactEvents$"+Qr;function na(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ea]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Jr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ra(e){return!(e=e[Jr]||e[ea])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function aa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ia(e){return e[Zr]||null}function oa(e){var t=e[ta];return void 0===t&&(t=e[ta]=new Set),t}var sa=[],ua=-1;function ca(e){return{current:e}}function la(e){0>ua||(e.current=sa[ua],sa[ua]=null,ua--)}function ha(e,t){ua++,sa[ua]=e.current,e.current=t}var fa={},da=ca(fa),pa=ca(!1),va=fa;function ma(e,t){var n=e.type.contextTypes;if(!n)return fa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ga(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ya(){la(pa),la(da)}function ba(e,t,n){if(da.current!==fa)throw Error(o(168));ha(da,t),ha(pa,n)}function xa(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,q(t)||"Unknown",i));return a({},n,r)}function ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fa,va=da.current,ha(da,e),ha(pa,pa.current),!0}function wa(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=xa(e,t,va),r.__reactInternalMemoizedMergedChildContext=e,la(pa),la(da),ha(da,e)):la(pa),ha(pa,n)}var Sa=null,Ea=null,Ta=i.unstable_runWithPriority,_a=i.unstable_scheduleCallback,Ca=i.unstable_cancelCallback,Ia=i.unstable_shouldYield,Na=i.unstable_requestPaint,Aa=i.unstable_now,Ra=i.unstable_getCurrentPriorityLevel,Oa=i.unstable_ImmediatePriority,Da=i.unstable_UserBlockingPriority,Ma=i.unstable_NormalPriority,Pa=i.unstable_LowPriority,La=i.unstable_IdlePriority,Fa={},Ba=void 0!==Na?Na:function(){},Va=null,Ua=null,ja=!1,za=Aa(),Wa=1e4>za?Aa:function(){return Aa()-za};function Ha(){switch(Ra()){case Oa:return 99;case Da:return 98;case Ma:return 97;case Pa:return 96;case La:return 95;default:throw Error(o(332))}}function Ga(e){switch(e){case 99:return Oa;case 98:return Da;case 97:return Ma;case 96:return Pa;case 95:return La;default:throw Error(o(332))}}function Ka(e,t){return e=Ga(e),Ta(e,t)}function qa(e,t,n){return e=Ga(e),_a(e,t,n)}function Xa(){if(null!==Ua){var e=Ua;Ua=null,Ca(e)}Ya()}function Ya(){if(!ja&&null!==Va){ja=!0;var e=0;try{var t=Va;Ka(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Va=null}catch(n){throw null!==Va&&(Va=Va.slice(e+1)),_a(Oa,Xa),n}finally{ja=!1}}}var $a=k.ReactCurrentBatchConfig;function Qa(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ja=ca(null),Za=null,ei=null,ti=null;function ni(){ti=ei=Za=null}function ri(e){var t=Ja.current;la(Ja),e.type._context._currentValue=t}function ai(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ii(e,t){Za=e,ti=ei=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oi(e,t){if(ti!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ti=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ei){if(null===Za)throw Error(o(308));ei=t,Za.dependencies={lanes:0,firstContext:t,responders:null}}else ei=ei.next=t;return e._currentValue}var si=!1;function ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ci(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hi(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function di(e,t,n,r){var i=e.updateQueue;si=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==o){for(f=i.baseState,s=0,h=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=a({},f,u);break e;case 2:si=!0}}null!==o.callback&&(e.flags|=32,null===(u=i.effects)?i.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(l=h=d,c=f):h=h.next=d,s|=u;if(null===(o=o.next)){if(null===(u=i.shared.pending))break;o=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}null===h&&(c=f),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=h,js|=s,e.lanes=s,e.memoizedState=f}}function pi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var vi=(new r.Component).refs;function mi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gi={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),a=du(e),i=li(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),hi(e,i),pu(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),a=du(e),i=li(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),hi(e,i),pu(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=du(e),a=li(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),hi(e,a),pu(e,r,n)}};function yi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(a,i))}function bi(e,t,n){var r=!1,a=fa,i=t.contextType;return"object"===typeof i&&null!==i?i=oi(i):(a=ga(t)?va:da.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?ma(e,a):fa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function xi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gi.enqueueReplaceState(t,t.state,null)}function ki(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=vi,ui(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=oi(i):(i=ga(t)?va:da.current,a.context=ma(e,i)),di(e,n,a,r),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(mi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&gi.enqueueReplaceState(a,a.state,null),di(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var wi=Array.isArray;function Si(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===vi&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ei(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ti(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ku(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Si(e,t,n),r.return=e,r):((r=qu(n.type,n.key,n.props,null,e.mode,r)).ref=Si(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Qu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Xu(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=qu(t.type,t.key,t.props,null,e.mode,n)).ref=Si(e,null,t),n.return=e,n;case S:return(t=Qu(t,e.mode,n)).return=e,t}if(wi(t)||z(t))return(t=Xu(t,e.mode,n,null)).return=e,t;Ei(e,t)}return null}function d(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?n.type===E?h(e,t,n.props.children,r,a):c(e,t,n,r):null;case S:return n.key===a?l(e,t,n,r):null}if(wi(n)||z(n))return null!==a?null:h(e,t,n,r,null);Ei(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===E?h(t,e,r.props.children,a,r.key):c(t,e,r,a);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(wi(r)||z(r))return h(t,e=e.get(n)||null,r,a,null);Ei(t,r)}return null}function v(a,o,s,u){for(var c=null,l=null,h=o,v=o=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=d(a,h,s[v],u);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(a,h),o=i(g,o,v),null===l?c=g:l.sibling=g,l=g,h=m}if(v===s.length)return n(a,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(a,s[v],u))&&(o=i(h,o,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(a,h);v<s.length;v++)null!==(m=p(h,a,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),o=i(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(a,e)})),c}function m(a,s,u,c){var l=z(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var h=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=d(a,v,y.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(a,v),s=i(b,s,m),null===h?l=b:h.sibling=b,h=b,v=g}if(y.done)return n(a,v),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(a,y.value,c))&&(s=i(y,s,m),null===h?l=y:h.sibling=y,h=y);return l}for(v=r(a,v);!y.done;m++,y=u.next())null!==(y=p(v,a,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=i(y,s,m),null===h?l=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(a,e)})),l}return function(e,r,i,u){var c="object"===typeof i&&null!==i&&i.type===E&&null===i.key;c&&(i=i.props.children);var l="object"===typeof i&&null!==i;if(l)switch(i.$$typeof){case w:e:{for(l=i.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(i.type===E){n(e,c.sibling),(r=a(c,i.props.children)).return=e,e=r;break e}}else if(c.elementType===i.type){n(e,c.sibling),(r=a(c,i.props)).ref=Si(e,c,i),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}i.type===E?((r=Xu(i.props.children,e.mode,u,i.key)).return=e,e=r):((u=qu(i.type,i.key,i.props,null,e.mode,u)).ref=Si(e,r,i),u.return=e,e=u)}return s(e);case S:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Qu(i,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=$u(i,e.mode,u)).return=e,e=r),s(e);if(wi(i))return v(e,r,i,u);if(z(i))return m(e,r,i,u);if(l&&Ei(e,i),"undefined"===typeof i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,q(e.type)||"Component"))}return n(e,r)}}var _i=Ti(!0),Ci=Ti(!1),Ii={},Ni=ca(Ii),Ai=ca(Ii),Ri=ca(Ii);function Oi(e){if(e===Ii)throw Error(o(174));return e}function Di(e,t){switch(ha(Ri,t),ha(Ai,e),ha(Ni,Ii),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}la(Ni),ha(Ni,t)}function Mi(){la(Ni),la(Ai),la(Ri)}function Pi(e){Oi(Ri.current);var t=Oi(Ni.current),n=pe(t,e.type);t!==n&&(ha(Ai,e),ha(Ni,n))}function Li(e){Ai.current===e&&(la(Ni),la(Ai))}var Fi=ca(0);function Bi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vi=null,Ui=null,ji=!1;function zi(e,t){var n=Hu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Wi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Hi(e){if(ji){var t=Ui;if(t){var n=t;if(!Wi(e,t)){if(!(t=Xr(n.nextSibling))||!Wi(e,t))return e.flags=-1025&e.flags|2,ji=!1,void(Vi=e);zi(Vi,n)}Vi=e,Ui=Xr(t.firstChild)}else e.flags=-1025&e.flags|2,ji=!1,Vi=e}}function Gi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Vi=e}function Ki(e){if(e!==Vi)return!1;if(!ji)return Gi(e),ji=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=Ui;t;)zi(e,t),t=Xr(t.nextSibling);if(Gi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ui=Xr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ui=null}}else Ui=Vi?Xr(e.stateNode.nextSibling):null;return!0}function qi(){Ui=Vi=null,ji=!1}var Xi=[];function Yi(){for(var e=0;e<Xi.length;e++)Xi[e]._workInProgressVersionPrimary=null;Xi.length=0}var $i=k.ReactCurrentDispatcher,Qi=k.ReactCurrentBatchConfig,Ji=0,Zi=null,eo=null,to=null,no=!1,ro=!1;function ao(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,a,i){if(Ji=i,Zi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$i.current=null===e||null===e.memoizedState?Do:Mo,e=n(r,a),ro){i=0;do{if(ro=!1,!(25>i))throw Error(o(301));i+=1,to=eo=null,t.updateQueue=null,$i.current=Po,e=n(r,a)}while(ro)}if($i.current=Oo,t=null!==eo&&null!==eo.next,Ji=0,to=eo=Zi=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Zi.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Zi.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Zi.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Zi.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var u=s=i=null,c=a;do{var l=c.lane;if((Ji&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,i=r):u=u.next=h,Zi.lanes|=l,js|=l}c=c.next}while(null!==c&&c!==a);null===u?i=r:u.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ho(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);lr(i,t.memoizedState)||(Fo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Ji&e)===e)&&(t._workInProgressVersionPrimary=r,Xi.push(t))),e)return n(t._source);throw Xi.push(t),Error(o(350))}function po(e,t,n,r){var a=Ds;if(null===a)throw Error(o(349));var i=t._getVersion,s=i(t._source),u=$i.current,c=u.useState((function(){return fo(a,t,n)})),l=c[1],h=c[0];c=to;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var m=Zi;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=i(t._source);if(!lr(s,e)){e=n(t._source),lr(h,e)||(l(e),e=du(m),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,o=e;0<o;){var u=31-Ht(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);a.mutableReadLanes|=r&a.pendingLanes}catch(i){n((function(){throw i}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:h}).dispatch=l=Ro.bind(null,Zi,e),c.queue=e,c.baseQueue=null,h=fo(a,t,n),c.memoizedState=c.baseState=h),h}function vo(e,t,n){return po(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Zi,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Zi.updateQueue)?(t={lastEffect:null},Zi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},so().memoizedState=e}function bo(){return uo().memoizedState}function xo(e,t,n,r){var a=so();Zi.flags|=e,a.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function ko(e,t,n,r){var a=uo();r=void 0===r?null:r;var i=void 0;if(null!==eo){var o=eo.memoizedState;if(i=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,i,r)}Zi.flags|=e,a.memoizedState=go(1|t,n,i,r)}function wo(e,t){return xo(516,4,e,t)}function So(e,t){return ko(516,4,e,t)}function Eo(e,t){return ko(4,2,e,t)}function To(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _o(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,2,To.bind(null,t,e),n)}function Co(){}function Io(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Ha();Ka(98>n?98:n,(function(){e(!0)})),Ka(97<n?97:n,(function(){var n=Qi.transition;Qi.transition=1;try{e(!1),t()}finally{Qi.transition=n}}))}function Ro(e,t,n){var r=fu(),a=du(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Zi||null!==o&&o===Zi)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(i.eagerReducer=o,i.eagerState=u,lr(u,s))return}catch(c){}pu(e,a,r)}}var Oo={readContext:oi,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useOpaqueIdentifier:ao,unstable_isNewReconciler:!1},Do={readContext:oi,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oi,useEffect:wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xo(4,2,To.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Zi,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:Co,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return wo((function(){var t=Qi.transition;Qi.transition=1;try{r(e)}finally{Qi.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(ji){var e=!1,t=function(e){return{$$typeof:P,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Zi.mode)&&(Zi.flags|=516,go(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return mo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Mo={readContext:oi,useCallback:Io,useContext:oi,useEffect:So,useImperativeHandle:_o,useLayoutEffect:Eo,useMemo:No,useReducer:lo,useRef:bo,useState:function(){return lo(co)},useDebugValue:Co,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return So((function(){var t=Qi.transition;Qi.transition=1;try{r(e)}finally{Qi.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[bo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Po={readContext:oi,useCallback:Io,useContext:oi,useEffect:So,useImperativeHandle:_o,useLayoutEffect:Eo,useMemo:No,useReducer:ho,useRef:bo,useState:function(){return ho(co)},useDebugValue:Co,useDeferredValue:function(e){var t=ho(co),n=t[0],r=t[1];return So((function(){var t=Qi.transition;Qi.transition=1;try{r(e)}finally{Qi.transition=t}}),[e]),n},useTransition:function(){var e=ho(co)[0];return[bo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return ho(co)[0]},unstable_isNewReconciler:!1},Lo=k.ReactCurrentOwner,Fo=!1;function Bo(e,t,n,r){t.child=null===e?Ci(t,null,n,r):_i(t,e.child,n,r)}function Vo(e,t,n,r,a){n=n.render;var i=t.ref;return ii(t,a),r=oo(e,t,n,r,i,a),null===e||Fo?(t.flags|=1,Bo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function Uo(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!==typeof o||Gu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,jo(e,t,o,r,a,i))}return o=e.child,0===(a&i)&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:fr)(a,r)&&e.ref===t.ref)?is(e,t,i):(t.flags|=1,(e=Ku(o,r)).ref=t.ref,e.return=t,t.child=e)}function jo(e,t,n,r,a,i){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(i&a))return t.lanes=e.lanes,is(e,t,i);0!==(16384&e.flags)&&(Fo=!0)}return Ho(e,t,n,r,i)}function zo(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wu(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wu(t,e),null;t.memoizedState={baseLanes:0},wu(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,wu(t,r);return Bo(e,t,a,n),t.child}function Wo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ho(e,t,n,r,a){var i=ga(n)?va:da.current;return i=ma(t,i),ii(t,a),n=oo(e,t,n,r,i,a),null===e||Fo?(t.flags|=1,Bo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function Go(e,t,n,r,a){if(ga(n)){var i=!0;ka(t)}else i=!1;if(ii(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bi(t,n,r),ki(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oi(c):c=ma(t,c=ga(n)?va:da.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&xi(t,o,r,c),si=!1;var f=t.memoizedState;o.state=f,di(t,r,o,a),u=t.memoizedState,s!==r||f!==u||pa.current||si?("function"===typeof l&&(mi(t,n,l,r),u=t.memoizedState),(s=si||yi(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ci(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Qa(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oi(u):u=ma(t,u=ga(n)?va:da.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&xi(t,o,r,u),si=!1,f=t.memoizedState,o.state=f,di(t,r,o,a);var p=t.memoizedState;s!==h||f!==p||pa.current||si?("function"===typeof d&&(mi(t,n,d,r),p=t.memoizedState),(c=si||yi(t,n,c,r,f,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,i,a)}function Ko(e,t,n,r,a,i){Wo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return a&&wa(t,n,!1),is(e,t,i);r=t.stateNode,Lo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,s,i)):Bo(e,t,s,i),t.memoizedState=r.state,a&&wa(t,n,!0),t.child}function qo(e){var t=e.stateNode;t.pendingContext?ba(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ba(0,t.context,!1),Di(e,t.containerInfo)}var Xo,Yo,$o,Qo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,a=t.pendingProps,i=Fi.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),ha(Fi,1&i),null===e?(void 0!==a.fallback&&Hi(t),e=a.children,i=a.fallback,o?(e=Zo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qo,e):"number"===typeof a.unstable_expectedLoadTime?(e=Zo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qo,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(a=ts(e,t,a.children,a.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Qo,a):(n=es(e,t,a.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Yu(t,a,0,null),n=Xu(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function es(e,t,n,r){var a=e.child;return e=a.sibling,n=Ku(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,a){var i=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&i)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ku(o,s),null!==e?r=Ku(e,r):(r=Xu(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ai(e.return,t)}function rs(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.lastEffect=i)}function as(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Bo(e,t,r.children,n),0!==(2&(r=Fi.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ha(Fi,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Bi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),rs(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Bi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}rs(t,!0,n,null,i,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function is(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),js|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ku(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ku(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!ji)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ga(t.type)&&ya(),null;case 3:return Mi(),la(pa),la(da),Yi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ki(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Li(t);var i=Oi(Ri.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oi(Ni.current),Ki(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[Zr]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<_r.length;e++)Ar(_r[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":ue(r,s),Ar("invalid",r)}for(var c in Ee(n,s),e=null,s)s.hasOwnProperty(c)&&(i=s[c],"children"===c?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):u.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":$(r),re(r,s,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Xo(e,t),t.stateNode=e,c=Te(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),i=r;break;case"iframe":case"object":case"embed":Ar("load",e),i=r;break;case"video":case"audio":for(i=0;i<_r.length;i++)Ar(_r[i],e);i=r;break;case"source":Ar("error",e),i=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),i=r;break;case"details":Ar("toggle",e),i=r;break;case"input":ee(e,r),i=Z(e,r),Ar("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ue(e,r),i=se(e,r),Ar("invalid",e);break;default:i=r}Ee(n,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Ar("scroll",e):null!=h&&x(e,s,h,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+X(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Ur)}Wr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oi(Ri.current),Oi(Ni.current),Ki(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return la(Fi),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ki(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fi.current)?0===Bs&&(Bs=3):(0!==Bs&&3!==Bs||(Bs=4),null===Ds||0===(134217727&js)&&0===(134217727&zs)||yu(Ds,Ps))),(r||n)&&(t.flags|=4),null);case 4:return Mi(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ri(t),null;case 19:if(la(Fi),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==Bs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Bi(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ha(Fi,1&Fi.current|2),t.child}e=e.sibling}null!==r.tail&&Wa()>Ks&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Bi(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!ji)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Wa()-r.renderingStartTime>Ks&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Wa(),n.sibling=null,t=Fi.current,ha(Fi,s?1&t|2:1&t),n):null;case 23:case 24:return Su(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:ga(e.type)&&ya();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Mi(),la(pa),la(da),Yi(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Li(e),null;case 13:return la(Fi),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return la(Fi),null;case 4:return Mi(),null;case 10:return ri(e),null;case 23:case 24:return Su(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Xo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Oi(Ni.current);var o,s=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),s=[];break;case"option":i=ie(e,i),r=ie(e,r),s=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":i=se(e,i),r=se(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(h in Ee(n,r),n=null,i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&null!=i[h])if("style"===h){var c=i[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=i?i[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Ar("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===P?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$s||($s=!0,Qs=r),ls(0,t)},n}function ds(e,t,n){(n=li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return ls(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Uu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qa(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qr(t.stateNode.containerInfo))}throw Error(o(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Fu(n,e),Lu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Qa(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pi(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pi(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Wr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(o(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=ke("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(Ea&&"function"===typeof Ea.onCommitFiberUnmount)try{Ea.onCommitFiberUnmount(Sa,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Fu(t,n);else{r=t;try{a()}catch(i){Uu(r,i)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Uu(t,i)}break;case 5:vs(t);break;case 4:Ts(e,t)}}function xs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ks(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(ks(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ks(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ss(e,n,t):Es(e,n,t)}function Ss(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Ts(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(o(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var s=e,u=a,c=u;;)if(bs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=a.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(bs(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function _s(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,a),t=Te(e,r),a=0;a<i.length;a+=2){var s=i[a],u=i[a+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?ge(n,u):"children"===s?ye(n,u):x(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?oe(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gs=Wa(),ys(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(o(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=zu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Is(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,As=k.ReactCurrentDispatcher,Rs=k.ReactCurrentOwner,Os=0,Ds=null,Ms=null,Ps=0,Ls=0,Fs=ca(0),Bs=0,Vs=null,Us=0,js=0,zs=0,Ws=0,Hs=null,Gs=0,Ks=1/0;function qs(){Ks=Wa()+500}var Xs,Ys=null,$s=!1,Qs=null,Js=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],au=null,iu=0,ou=null,su=-1,uu=0,cu=0,lu=null,hu=!1;function fu(){return 0!==(48&Os)?Wa():-1!==su?su:su=Wa()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ha()?1:2;if(0===uu&&(uu=Us),0!==$a.transition){0!==cu&&(cu=null!==Hs?Hs.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ha(),0!==(4&Os)&&98===e?e=Ut(12,uu):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<iu)throw iu=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;Wt(e,t,n),e===Ds&&(zs|=t,4===Bs&&yu(e,Ps));var r=Ha();1===t?0!==(8&Os)&&0===(48&Os)?bu(e):(mu(e,n),0===Os&&(qs(),Xa())):(0===(4&Os)||98!==r&&99!==r||(null===au?au=new Set([e]):au.add(e)),mu(e,n)),Hs=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Ht(s),c=1<<u,l=i[u];if(-1===l){if(0===(c&r)||0!==(c&a)){l=t,Ft(c);var h=Lt;i[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Bt(e,e===Ds?Ps:0),t=Lt,0===r)null!==n&&(n!==Fa&&Ca(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fa&&Ca(n)}15===t?(n=bu.bind(null,e),null===Va?(Va=[n],Ua=_a(Oa,Ya)):Va.push(n),n=Fa):14===t?n=qa(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=qa(n,gu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gu(e){if(su=-1,cu=uu=0,0!==(48&Os))throw Error(o(327));var t=e.callbackNode;if(Pu()&&e.callbackNode!==t)return null;var n=Bt(e,e===Ds?Ps:0);if(0===n)return null;var r=n,a=Os;Os|=16;var i=_u();for(Ds===e&&Ps===r||(qs(),Eu(e,r));;)try{Nu();break}catch(u){Tu(e,u)}if(ni(),As.current=i,Os=a,null!==Ms?r=0:(Ds=null,Ps=0,r=Bs),0!==(Us&zs))Eu(e,0);else if(0!==r){if(2===r&&(Os|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(n=Vt(e))&&(r=Cu(e,n))),1===r)throw t=Vs,Eu(e,0),yu(e,n),mu(e,Wa()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ou(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Gs+500-Wa())){if(0!==Bt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Gr(Ou.bind(null,e),r);break}Ou(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var s=31-Ht(n);i=1<<s,(s=r[s])>a&&(a=s),n&=~i}if(n=a,10<(n=(120>(n=Wa()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Gr(Ou.bind(null,e),n);break}Ou(e);break;default:throw Error(o(329))}}return mu(e,Wa()),e.callbackNode===t?gu.bind(null,e):null}function yu(e,t){for(t&=~Ws,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Os))throw Error(o(327));if(Pu(),e===Ds&&0!==(e.expiredLanes&Ps)){var t=Ps,n=Cu(e,t);0!==(Us&zs)&&(n=Cu(e,t=Bt(e,t)))}else n=Cu(e,t=Bt(e,0));if(0!==e.tag&&2===n&&(Os|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(t=Vt(e))&&(n=Cu(e,t))),1===n)throw n=Vs,Eu(e,0),yu(e,t),mu(e,Wa()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ou(e),mu(e,Wa()),null}function xu(e,t){var n=Os;Os|=1;try{return e(t)}finally{0===(Os=n)&&(qs(),Xa())}}function ku(e,t){var n=Os;Os&=-2,Os|=8;try{return e(t)}finally{0===(Os=n)&&(qs(),Xa())}}function wu(e,t){ha(Fs,Ls),Ls|=t,Us|=t}function Su(){Ls=Fs.current,la(Fs)}function Eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Ms)for(n=Ms.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ya();break;case 3:Mi(),la(pa),la(da),Yi();break;case 5:Li(r);break;case 4:Mi();break;case 13:case 19:la(Fi);break;case 10:ri(r);break;case 23:case 24:Su()}n=n.return}Ds=e,Ms=Ku(e.current,null),Ps=Ls=Us=t,Bs=0,Vs=null,Ws=zs=js=0}function Tu(e,t){for(;;){var n=Ms;try{if(ni(),$i.current=Oo,no){for(var r=Zi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}no=!1}if(Ji=0,to=eo=Zi=null,ro=!1,Rs.current=null,null===n||null===n.return){Bs=1,Vs=t,Ms=null;break}e:{var i=e,o=n.return,s=n,u=t;if(t=Ps,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Fi.current),f=o;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var m=f.updateQueue;if(null===m){var g=new Set;g.add(c),f.updateQueue=g}else m.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=li(-1,1);y.tag=2,hi(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=i.pingCache;if(null===b?(b=i.pingCache=new hs,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var x=ju.bind(null,i,c,s);c.then(x,x)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((q(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Bs&&(Bs=2),u=cs(u,s),f=o;do{switch(f.tag){case 3:i=u,f.flags|=4096,t&=-t,f.lanes|=t,fi(f,fs(0,i,t));break e;case 1:i=u;var k=f.type,w=f.stateNode;if(0===(64&f.flags)&&("function"===typeof k.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Js||!Js.has(w)))){f.flags|=4096,t&=-t,f.lanes|=t,fi(f,ds(f,i,t));break e}}f=f.return}while(null!==f)}Ru(n)}catch(S){t=S,Ms===n&&null!==n&&(Ms=n=n.return);continue}break}}function _u(){var e=As.current;return As.current=Oo,null===e?Oo:e}function Cu(e,t){var n=Os;Os|=16;var r=_u();for(Ds===e&&Ps===t||Eu(e,t);;)try{Iu();break}catch(a){Tu(e,a)}if(ni(),Os=n,As.current=r,null!==Ms)throw Error(o(261));return Ds=null,Ps=0,Bs}function Iu(){for(;null!==Ms;)Au(Ms)}function Nu(){for(;null!==Ms&&!Ia();)Au(Ms)}function Au(e){var t=Xs(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?Ru(e):Ms=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ls)))return void(Ms=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ls)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ms=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ms=t);Ms=t=e}while(null!==t);0===Bs&&(Bs=5)}function Ou(e){var t=Ha();return Ka(99,Du.bind(null,e,t)),null}function Du(e,t){do{Pu()}while(null!==eu);if(0!==(48&Os))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<i;){var c=31-Ht(i),l=1<<c;a[c]=0,s[c]=-1,u[c]=-1,i&=~l}if(null!==au&&0===(24&r)&&au.has(e)&&au.delete(e),e===Ds&&(Ms=Ds=null,Ps=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Os,Os|=32,Rs.current=null,jr=Yt,gr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,i=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(_){u=null;break e}var h=0,f=-1,d=-1,p=0,v=0,m=s,g=null;t:for(;;){for(var y;m!==u||0!==i&&3!==m.nodeType||(f=h+i),m!==c||0!==l&&3!==m.nodeType||(d=h+l),3===m.nodeType&&(h+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break t;if(g===u&&++p===i&&(f=h),g===c&&++v===l&&(d=h),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;zr={focusedElem:s,selectionRange:u},Yt=!1,lu=null,hu=!1,Ys=r;do{try{Mu()}catch(_){if(null===Ys)throw Error(o(330));Uu(Ys,_),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var b=Ys.flags;if(16&b&&ye(Ys.stateNode,""),128&b){var x=Ys.alternate;if(null!==x){var k=x.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(1038&b){case 2:ws(Ys),Ys.flags&=-3;break;case 6:ws(Ys),Ys.flags&=-3,_s(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,_s(Ys.alternate,Ys);break;case 4:_s(Ys.alternate,Ys);break;case 8:Ts(s,u=Ys);var w=u.alternate;xs(u),null!==w&&xs(w)}Ys=Ys.nextEffect}}catch(_){if(null===Ys)throw Error(o(330));Uu(Ys,_),Ys=Ys.nextEffect}}while(null!==Ys);if(k=zr,x=mr(),b=k.focusedElem,s=k.selectionRange,x!==b&&b&&b.ownerDocument&&vr(b.ownerDocument.documentElement,b)){null!==s&&gr(b)&&(x=s.start,void 0===(k=s.end)&&(k=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(k,b.value.length)):(k=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(k=k.getSelection(),u=b.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!k.extend&&w>s&&(u=s,s=w,w=u),u=pr(b,w),i=pr(b,s),u&&i&&(1!==k.rangeCount||k.anchorNode!==u.node||k.anchorOffset!==u.offset||k.focusNode!==i.node||k.focusOffset!==i.offset)&&((x=x.createRange()).setStart(u.node,u.offset),k.removeAllRanges(),w>s?(k.addRange(x),k.extend(i.node,i.offset)):(x.setEnd(i.node,i.offset),k.addRange(x))))),x=[];for(k=b;k=k.parentNode;)1===k.nodeType&&x.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<x.length;b++)(k=x[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Yt=!!jr,zr=jr=null,e.current=n,Ys=r;do{try{for(b=e;null!==Ys;){var S=Ys.flags;if(36&S&&gs(b,Ys.alternate,Ys),128&S){x=void 0;var E=Ys.ref;if(null!==E){var T=Ys.stateNode;Ys.tag,x=T,"function"===typeof E?E(x):E.current=x}}Ys=Ys.nextEffect}}catch(_){if(null===Ys)throw Error(o(330));Uu(Ys,_),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Ba(),Os=a}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((S=Ys).sibling=null,S.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===ou?iu++:(iu=0,ou=e):iu=0,n=n.stateNode,Ea&&"function"===typeof Ea.onCommitFiberRoot)try{Ea.onCommitFiberRoot(Sa,n,void 0,64===(64&n.current.flags))}catch(_){}if(mu(e,Wa()),$s)throw $s=!1,e=Qs,Qs=null,e;return 0!==(8&Os)||Xa(),null}function Mu(){for(;null!==Ys;){var e=Ys.alternate;hu||null===lu||(0!==(8&Ys.flags)?et(Ys,lu)&&(hu=!0):13===Ys.tag&&Is(e,Ys)&&et(Ys,lu)&&(hu=!0));var t=Ys.flags;0!==(256&t)&&ms(e,Ys),0===(512&t)||Zs||(Zs=!0,qa(97,(function(){return Pu(),null}))),Ys=Ys.nextEffect}}function Pu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ka(e,Bu)}return!1}function Lu(e,t){nu.push(t,e),Zs||(Zs=!0,qa(97,(function(){return Pu(),null})))}function Fu(e,t){ru.push(t,e),Zs||(Zs=!0,qa(97,(function(){return Pu(),null})))}function Bu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Os))throw Error(o(331));var t=Os;Os|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],s=a.destroy;if(a.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===i)throw Error(o(330));Uu(i,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var u=a.create;a.destroy=u()}catch(c){if(null===i)throw Error(o(330));Uu(i,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Os=t,Xa(),!0}function Vu(e,t,n){hi(e,t=fs(0,t=cs(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(Wt(e,1,t),mu(e,t))}function Uu(e,t){if(3===e.tag)Vu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var a=ds(n,e=cs(t,e),1);if(hi(n,a),a=fu(),null!==(n=vu(n,1)))Wt(n,1,a),mu(n,a);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function ju(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ps&n)===n&&(4===Bs||3===Bs&&(62914560&Ps)===Ps&&500>Wa()-Gs?Eu(e,0):Ws|=n),mu(e,t)}function zu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ha()?1:2:(0===uu&&(uu=Us),0===(t=jt(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(Wt(e,t,n),mu(e,n))}function Wu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hu(e,t,n,r){return new Wu(e,t,n,r)}function Gu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ku(e,t){var n=e.alternate;return null===n?((n=Hu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qu(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Gu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Xu(n.children,a,i,t);case L:s=8,a|=16;break;case T:s=8,a|=1;break;case _:return(e=Hu(12,n,t,8|a)).elementType=_,e.type=_,e.lanes=i,e;case A:return(e=Hu(13,n,t,a)).type=A,e.elementType=A,e.lanes=i,e;case R:return(e=Hu(19,n,t,a)).elementType=R,e.lanes=i,e;case F:return Yu(n,a,i,t);case B:return(e=Hu(24,n,t,a)).elementType=B,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case I:s=9;break e;case N:s=11;break e;case O:s=14;break e;case D:s=16,r=null;break e;case M:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Hu(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Xu(e,t,n,r){return(e=Hu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Hu(23,e,r,t)).elementType=F,e.lanes=n,e}function $u(e,t,n){return(e=Hu(6,e,null,t)).lanes=n,e}function Qu(e,t,n){return(t=Hu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var a=t.current,i=fu(),s=du(a);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(ga(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(ga(c)){n=xa(n,c,u);break e}}n=u}else n=fa;return null===t.context?t.context=n:t.pendingContext=n,(t=li(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),hi(a,t),pu(a,s,i),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ac(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=Hu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ui(t),e[ea]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i._internalRoot;if("function"===typeof a){var s=a;a=function(){var e=tc(o);s.call(e)}}ec(t,o,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ac(e,0,t?{hydrate:!0}:void 0)}(n,r),o=i._internalRoot,"function"===typeof a){var u=a;a=function(){var e=tc(o);u.call(e)}}ku((function(){ec(t,o,e,a)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return Zu(e,t,null,n)}Xs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pa.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:qo(t),qi();break;case 5:Pi(t);break;case 1:ga(t.type)&&ka(t);break;case 4:Di(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;ha(Ja,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(ha(Fi,1&Fi.current),null!==(t=is(e,t,n))?t.sibling:null);ha(Fi,1&Fi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return as(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),ha(Fi,Fi.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return is(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ma(t,da.current),ii(t,n),a=oo(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ga(r)){var i=!0;ka(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ui(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&mi(t,r,s,e),a.updater=gi,t.stateNode=a,a._reactInternals=t,ki(t,r,e,n),t=Ko(null,t,r,!0,i,n)}else t.tag=0,Bo(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Gu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===O)return 14}return 2}(a),e=Qa(a,e),i){case 0:t=Ho(null,t,a,e,n);break e;case 1:t=Go(null,t,a,e,n);break e;case 11:t=Vo(null,t,a,e,n);break e;case 14:t=Uo(null,t,a,Qa(a.type,e),r,n);break e}throw Error(o(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ho(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 1:return r=t.type,a=t.pendingProps,Go(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 3:if(qo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,ci(e,t),di(t,r,null,n),(r=t.memoizedState.element)===a)qi(),t=is(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(Ui=Xr(t.stateNode.containerInfo.firstChild),Vi=t,i=ji=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],Xi.push(i);for(n=Ci(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Bo(e,t,r,n),qi();t=t.child}return t;case 5:return Pi(t),null===e&&Hi(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,Hr(r,a)?s=null:null!==i&&Hr(r,i)&&(t.flags|=16),Wo(e,t),Bo(e,t,s,n),t.child;case 6:return null===e&&Hi(t),null;case 13:return Jo(e,t,n);case 4:return Di(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_i(t,null,r,n):Bo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Vo(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 7:return Bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value;var u=t.type._context;if(ha(Ja,u._currentValue),u._currentValue=i,null!==s)if(u=s.value,0===(i=lr(u,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,i):1073741823))){if(s.children===a.children&&!pa.current){t=is(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&i)){1===u.tag&&((l=li(-1,n&-n)).tag=2,hi(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ai(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Bo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ii(t,n),r=r(a=oi(a,i.unstable_observedBits)),t.flags|=1,Bo(e,t,r,n),t.child;case 14:return i=Qa(a=t.type,t.pendingProps),Uo(e,t,a,i=Qa(a.type,i),r,n);case 15:return jo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Qa(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ga(r)?(e=!0,ka(t)):e=!1,ii(t,n),bi(t,r,a),ki(t,r,a,n),Ko(null,t,r,!0,e,n);case 19:return as(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},ac.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ac.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ea]=null}))},tt=function(e){13===e.tag&&(pu(e,4,fu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,fu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=fu(),n=du(e);pu(e,n,t),rc(e,n)}},at=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ia(r);if(!a)throw Error(o(90));Q(r),ne(r,a)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},De=xu,Me=function(e,t,n,r,a){var i=Os;Os|=4;try{return Ka(98,e.bind(null,t,n,r,a))}finally{0===(Os=i)&&(qs(),Xa())}},Pe=function(){0===(49&Os)&&(function(){if(null!==au){var e=au;au=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,Wa())}))}Xa()}(),Pu())},Le=function(e,t){var n=Os;Os|=2;try{return e(t)}finally{0===(Os=n)&&(qs(),Xa())}};var uc={Events:[ra,aa,ia,Re,Oe,Pu,{current:!1}]},cc={findFiberByHostInstance:na,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Sa=hc.inject(lc),Ea=hc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Os;if(0!==(48&n))return e(t);Os|=1;try{if(e)return Ka(99,e.bind(null,t))}finally{Os=n,Xa()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(ku((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ea]=null}))})),!0)},t.unstable_batchedUpdates=xu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},77:function(e){var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,a="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var s,u,c,l;if(Array.isArray(e)){if((s=e.length)!=o.length)return!1;for(u=s;0!==u--;)if(!i(e[u],o[u]))return!1;return!0}if(n&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(l=e.entries();!(u=l.next()).done;)if(!o.has(u.value[0]))return!1;for(l=e.entries();!(u=l.next()).done;)if(!i(u.value[1],o.get(u.value[0])))return!1;return!0}if(r&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(l=e.entries();!(u=l.next()).done;)if(!o.has(u.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((s=e.length)!=o.length)return!1;for(u=s;0!==u--;)if(e[u]!==o[u])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((s=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(u=s;0!==u--;)if(!Object.prototype.hasOwnProperty.call(o,c[u]))return!1;if(t&&e instanceof Element)return!1;for(u=s;0!==u--;)if(("_owner"!==c[u]&&"__v"!==c[u]&&"__o"!==c[u]||!e.$$typeof)&&!i(e[c[u]],o[c[u]]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return i(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},372:function(e,t){"use strict";var n=60103,r=60106,a=60107,i=60108,o=60114,s=60109,u=60110,c=60112,l=60113,h=60120,f=60115,d=60116,p=60121,v=60122,m=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),a=b("react.fragment"),i=b("react.strict_mode"),o=b("react.profiler"),s=b("react.provider"),u=b("react.context"),c=b("react.forward_ref"),l=b("react.suspense"),h=b("react.suspense_list"),f=b("react.memo"),d=b("react.lazy"),p=b("react.block"),v=b("react.server.block"),m=b("react.fundamental"),g=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case o:case i:case l:case h:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case f:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===o||e===g||e===i||e===l||e===h||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===f||e.$$typeof===s||e.$$typeof===u||e.$$typeof===c||e.$$typeof===m||e.$$typeof===p||e[0]===v)},t.typeOf=x},441:function(e,t,n){"use strict";e.exports=n(372)},434:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(791)),o=(a=n(77))&&a.__esModule?a:{default:a},s=n(174),u=n(135);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,n,r,a=p(s);function s(){var e;h(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(m(e=a.call.apply(a,[this].concat(n))),"mounted",!1),y(m(e),"isReady",!1),y(m(e),"isPlaying",!1),y(m(e),"isLoading",!0),y(m(e),"loadOnReady",null),y(m(e),"startOnPlay",!0),y(m(e),"seekOnPlay",null),y(m(e),"onDurationCalled",!1),y(m(e),"handlePlayerMount",(function(t){e.player=t,e.player.load(e.props.url),e.progress()})),y(m(e),"getInternalPlayer",(function(t){return e.player?e.player[t]:null})),y(m(e),"progress",(function(){if(e.props.url&&e.player&&e.isReady){var t=e.getCurrentTime()||0,n=e.getSecondsLoaded(),r=e.getDuration();if(r){var a={playedSeconds:t,played:t/r};null!==n&&(a.loadedSeconds=n,a.loaded=n/r),a.playedSeconds===e.prevPlayed&&a.loadedSeconds===e.prevLoaded||e.props.onProgress(a),e.prevPlayed=a.playedSeconds,e.prevLoaded=a.loadedSeconds}}e.progressTimeout=setTimeout(e.progress,e.props.progressFrequency||e.props.progressInterval)})),y(m(e),"handleReady",(function(){if(e.mounted){e.isReady=!0,e.isLoading=!1;var t=e.props,n=t.onReady,r=t.playing,a=t.volume,i=t.muted;n(),i||null===a||e.player.setVolume(a),e.loadOnReady?(e.player.load(e.loadOnReady,!0),e.loadOnReady=null):r&&e.player.play(),e.handleDurationCheck()}})),y(m(e),"handlePlay",(function(){e.isPlaying=!0,e.isLoading=!1;var t=e.props,n=t.onStart,r=t.onPlay,a=t.playbackRate;e.startOnPlay&&(e.player.setPlaybackRate&&1!==a&&e.player.setPlaybackRate(a),n(),e.startOnPlay=!1),r(),e.seekOnPlay&&(e.seekTo(e.seekOnPlay),e.seekOnPlay=null),e.handleDurationCheck()})),y(m(e),"handlePause",(function(t){e.isPlaying=!1,e.isLoading||e.props.onPause(t)})),y(m(e),"handleEnded",(function(){var t=e.props,n=t.activePlayer,r=t.loop,a=t.onEnded;n.loopOnEnded&&r&&e.seekTo(0),r||(e.isPlaying=!1,a())})),y(m(e),"handleError",(function(){var t;e.isLoading=!1,(t=e.props).onError.apply(t,arguments)})),y(m(e),"handleDurationCheck",(function(){clearTimeout(e.durationCheckTimeout);var t=e.getDuration();t?e.onDurationCalled||(e.props.onDuration(t),e.onDurationCalled=!0):e.durationCheckTimeout=setTimeout(e.handleDurationCheck,100)})),y(m(e),"handleLoaded",(function(){e.isLoading=!1})),e}return t=s,n=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.player){var n=this.props,r=n.url,a=n.playing,i=n.volume,s=n.muted,c=n.playbackRate,l=n.pip,h=n.loop,f=n.activePlayer,d=n.disableDeferredLoading;if(!(0,o.default)(e.url,r)){if(this.isLoading&&!f.forceLoad&&!d&&!(0,u.isMediaStream)(r))return console.warn("ReactPlayer: the attempt to load ".concat(r," is being deferred until the player has loaded")),void(this.loadOnReady=r);this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(r,this.isReady)}e.playing||!a||this.isPlaying||this.player.play(),e.playing&&!a&&this.isPlaying&&this.player.pause(),!e.pip&&l&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!l&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==i&&null!==i&&this.player.setVolume(i),e.muted!==s&&(s?this.player.mute():(this.player.unmute(),null!==i&&setTimeout((function(){return t.player.setVolume(i)})))),e.playbackRate!==c&&this.player.setPlaybackRate&&this.player.setPlaybackRate(c),e.loop!==h&&this.player.setLoop&&this.player.setLoop(h)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(e,t){var n=this;if(this.isReady){if(t?"fraction"===t:e>0&&e<1){var r=this.player.getDuration();return r?void this.player.seekTo(r*e):void console.warn("ReactPlayer: could not seek using fraction \u2013\xa0duration not yet available")}this.player.seekTo(e)}else 0!==e&&(this.seekOnPlay=e,setTimeout((function(){n.seekOnPlay=null}),5e3))}},{key:"render",value:function(){var e=this.props.activePlayer;return e?i.default.createElement(e,l({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}],n&&f(t.prototype,n),r&&f(t,r),s}(i.Component);t.default=b,y(b,"displayName","Player"),y(b,"propTypes",s.propTypes),y(b,"defaultProps",s.defaultProps)},275:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(791));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m="64px",g={},y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,e);var t,n,r,i=h(o);function o(){var e;u(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(d(e=i.call.apply(i,[this].concat(n))),"mounted",!1),v(d(e),"state",{image:null}),v(d(e),"handleKeyPress",(function(t){"Enter"!==t.key&&" "!==t.key||e.props.onClick()})),e}return t=o,(n=[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.url,r=t.light;e.url===n&&e.light===r||this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(e){var t=this,n=e.url,r=e.light,a=e.oEmbedUrl;if("string"!==typeof r){if(!g[n])return this.setState({image:null}),window.fetch(a.replace("{url}",n)).then((function(e){return e.json()})).then((function(e){if(e.thumbnail_url&&t.mounted){var r=e.thumbnail_url.replace("height=100","height=480");t.setState({image:r}),g[n]=r}}));this.setState({image:g[n]})}else this.setState({image:r})}},{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.playIcon,r=e.previewTabIndex,i=this.state.image,o={display:"flex",alignItems:"center",justifyContent:"center"},u={preview:s({width:"100%",height:"100%",backgroundImage:i?"url(".concat(i,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},o),shadow:s({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:m,width:m,height:m},o),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},c=a.default.createElement("div",{style:u.shadow,className:"react-player__shadow"},a.default.createElement("div",{style:u.playIcon,className:"react-player__play-icon"}));return a.default.createElement("div",{style:u.preview,className:"react-player__preview",onClick:t,tabIndex:r,onKeyPress:this.handleKeyPress},n||c)}}])&&c(t.prototype,n),r&&c(t,r),o}(a.Component);t.default=y},646:function(e,t,n){"use strict";t.e=void 0;var r=_(n(791)),a=l(n(948)),i=l(n(781)),o=l(n(77)),s=n(174),u=n(135),c=l(n(434));function l(e){return e&&e.__esModule?e:{default:e}}function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function v(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return T=function(){return e},e}function _(e){if(e&&e.__esModule)return e;if(null===e||"object"!==h(e)&&"function"!==typeof e)return{default:e};var t=T();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}var C=(0,r.lazy)((function(){return Promise.resolve().then((function(){return _(n(275))}))})),I="undefined"!==typeof window&&window.document,N="undefined"!==typeof n.g&&n.g.window&&n.g.window.document,A=Object.keys(s.propTypes),R=I||N?r.Suspense:function(){return null},O=[];t.e=function(e,t){var n,l;return l=n=function(n){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(k,n);var l,h,f,m=x(k);function k(){var n;g(this,k);for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];return E(w(n=m.call.apply(m,[this].concat(l))),"state",{showPreview:!!n.props.light}),E(w(n),"references",{wrapper:function(e){n.wrapper=e},player:function(e){n.player=e}}),E(w(n),"handleClickPreview",(function(e){n.setState({showPreview:!1}),n.props.onClickPreview(e)})),E(w(n),"showPreview",(function(){n.setState({showPreview:!0})})),E(w(n),"getDuration",(function(){return n.player?n.player.getDuration():null})),E(w(n),"getCurrentTime",(function(){return n.player?n.player.getCurrentTime():null})),E(w(n),"getSecondsLoaded",(function(){return n.player?n.player.getSecondsLoaded():null})),E(w(n),"getInternalPlayer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return n.player?n.player.getInternalPlayer(e):null})),E(w(n),"seekTo",(function(e,t){if(!n.player)return null;n.player.seekTo(e,t)})),E(w(n),"handleReady",(function(){n.props.onReady(w(n))})),E(w(n),"getActivePlayer",(0,i.default)((function(n){for(var r=0,a=[].concat(O,v(e));r<a.length;r++){var i=a[r];if(i.canPlay(n))return i}return t||null}))),E(w(n),"getConfig",(0,i.default)((function(e,t){var r=n.props.config;return a.default.all([s.defaultProps.config,s.defaultProps.config[t]||{},r,r[t]||{}])}))),E(w(n),"getAttributes",(0,i.default)((function(e){return(0,u.omit)(n.props,A)}))),E(w(n),"renderActivePlayer",(function(e){if(!e)return null;var t=n.getActivePlayer(e);if(!t)return null;var a=n.getConfig(e,t.key);return r.default.createElement(c.default,p({},n.props,{key:t.key,ref:n.references.player,config:a,activePlayer:t.lazyPlayer||t,onReady:n.handleReady}))})),n}return l=k,h=[{key:"shouldComponentUpdate",value:function(e,t){return!(0,o.default)(this.props,e)||!(0,o.default)(this.state,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.light;!e.light&&t&&this.setState({showPreview:!0}),e.light&&!t&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(e){if(!e)return null;var t=this.props,n=t.light,a=t.playIcon,i=t.previewTabIndex,o=t.oEmbedUrl;return r.default.createElement(C,{url:e,light:n,playIcon:a,previewTabIndex:i,oEmbedUrl:o,onClick:this.handleClickPreview})}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.style,a=e.width,i=e.height,o=e.fallback,s=e.wrapper,u=this.state.showPreview,c=this.getAttributes(t);return r.default.createElement(s,p({ref:this.references.wrapper,style:d(d({},n),{},{width:a,height:i})},c),r.default.createElement(R,{fallback:o},u?this.renderPreview(t):this.renderActivePlayer(t)))}}],h&&y(l.prototype,h),f&&y(l,f),k}(r.Component),E(n,"displayName","ReactPlayer"),E(n,"propTypes",s.propTypes),E(n,"defaultProps",s.defaultProps),E(n,"addCustomPlayer",(function(e){O.push(e)})),E(n,"removeCustomPlayers",(function(){O.length=0})),E(n,"canPlay",(function(t){for(var n=0,r=[].concat(O,v(e));n<r.length;n++){if(r[n].canPlay(t))return!0}return!1})),E(n,"canEnablePIP",(function(t){for(var n=0,r=[].concat(O,v(e));n<r.length;n++){var a=r[n];if(a.canEnablePIP&&a.canEnablePIP(t))return!0}return!1})),l}},365:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canPlay=t.FLV_EXTENSIONS=t.DASH_EXTENSIONS=t.HLS_EXTENSIONS=t.VIDEO_EXTENSIONS=t.AUDIO_EXTENSIONS=t.MATCH_URL_KALTURA=t.MATCH_URL_VIDYARD=t.MATCH_URL_MIXCLOUD=t.MATCH_URL_DAILYMOTION=t.MATCH_URL_TWITCH_CHANNEL=t.MATCH_URL_TWITCH_VIDEO=t.MATCH_URL_WISTIA=t.MATCH_URL_STREAMABLE=t.MATCH_URL_FACEBOOK_WATCH=t.MATCH_URL_FACEBOOK=t.MATCH_URL_VIMEO=t.MATCH_URL_SOUNDCLOUD=t.MATCH_URL_YOUTUBE=void 0;var r=n(135);function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;t.MATCH_URL_YOUTUBE=o;var s=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;t.MATCH_URL_SOUNDCLOUD=s;var u=/vimeo\.com\/(?!progressive_redirect).+/;t.MATCH_URL_VIMEO=u;var c=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;t.MATCH_URL_FACEBOOK=c;var l=/^https?:\/\/fb\.watch\/.+$/;t.MATCH_URL_FACEBOOK_WATCH=l;var h=/streamable\.com\/([a-z0-9]+)$/;t.MATCH_URL_STREAMABLE=h;var f=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?(.*)$/;t.MATCH_URL_WISTIA=f;var d=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;t.MATCH_URL_TWITCH_VIDEO=d;var p=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;t.MATCH_URL_TWITCH_CHANNEL=p;var v=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?$/;t.MATCH_URL_DAILYMOTION=v;var m=/mixcloud\.com\/([^/]+\/[^/]+)/;t.MATCH_URL_MIXCLOUD=m;var g=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;t.MATCH_URL_VIDYARD=g;var y=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_]+)$/;t.MATCH_URL_KALTURA=y;var b=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;t.AUDIO_EXTENSIONS=b;var x=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;t.VIDEO_EXTENSIONS=x;var k=/\.(m3u8)($|\?)/i;t.HLS_EXTENSIONS=k;var w=/\.(mpd)($|\?)/i;t.DASH_EXTENSIONS=w;var S=/\.(flv)($|\?)/i;t.FLV_EXTENSIONS=S;var E={youtube:function(e){return e instanceof Array?e.every((function(e){return o.test(e)})):o.test(e)},soundcloud:function(e){return s.test(e)&&!b.test(e)},vimeo:function(e){return u.test(e)&&!x.test(e)&&!k.test(e)},facebook:function(e){return c.test(e)||l.test(e)},streamable:function(e){return h.test(e)},wistia:function(e){return f.test(e)},twitch:function(e){return d.test(e)||p.test(e)},dailymotion:function(e){return v.test(e)},mixcloud:function(e){return m.test(e)},vidyard:function(e){return g.test(e)},kaltura:function(e){return y.test(e)},file:function e(t){if(t instanceof Array){var n,i=a(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("string"===typeof o&&e(o))return!0;if(e(o.src))return!0}}catch(s){i.e(s)}finally{i.f()}return!1}return!(!(0,r.isMediaStream)(t)&&!(0,r.isBlobUrl)(t))||(b.test(t)||x.test(t)||k.test(t)||w.test(t)||S.test(t))}};t.canPlay=E},322:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.Z=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(791)),i=n(135),o=n(365);function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x="YT",k=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,w=/user\/([a-zA-Z0-9_-]+)\/?/,S=/youtube-nocookie\.com/,E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,r,s=v(u);function u(){var e;f(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(g(e=s.call.apply(s,[this].concat(n))),"callPlayer",i.callPlayer),b(g(e),"parsePlaylist",(function(t){return t instanceof Array?{listType:"playlist",playlist:t.map(e.getID).join(",")}:k.test(t)?{listType:"playlist",list:l(t.match(k),2)[1].replace(/^UC/,"UU")}:w.test(t)?{listType:"user_uploads",list:l(t.match(w),2)[1]}:{}})),b(g(e),"onStateChange",(function(t){var n=t.data,r=e.props,a=r.onPlay,i=r.onPause,o=r.onBuffer,s=r.onBufferEnd,u=r.onEnded,c=r.onReady,l=r.loop,h=r.config,f=h.playerVars,d=h.onUnstarted,p=window.YT.PlayerState,v=p.UNSTARTED,m=p.PLAYING,g=p.PAUSED,y=p.BUFFERING,b=p.ENDED,x=p.CUED;if(n===v&&d(),n===m&&(a(),s()),n===g&&i(),n===y&&o(),n===b){var k=!!e.callPlayer("getPlaylist");l&&!k&&(f.start?e.seekTo(f.start):e.play()),u()}n===x&&c()})),b(g(e),"mute",(function(){e.callPlayer("mute")})),b(g(e),"unmute",(function(){e.callPlayer("unMute")})),b(g(e),"ref",(function(t){e.container=t})),e}return t=u,(n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(e){return!e||e instanceof Array||k.test(e)?null:e.match(o.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(e,t){var n=this,r=this.props,a=r.playing,o=r.muted,s=r.playsinline,u=r.controls,l=r.loop,h=r.config,f=r.onError,d=h.playerVars,p=h.embedOptions,v=this.getID(e);if(t)return k.test(e)||w.test(e)||e instanceof Array?void this.player.loadPlaylist(this.parsePlaylist(e)):void this.player.cueVideoById({videoId:v,startSeconds:(0,i.parseStartTime)(e)||d.start,endSeconds:(0,i.parseEndTime)(e)||d.end});(0,i.getSDK)("https://www.youtube.com/iframe_api",x,"onYouTubeIframeAPIReady",(function(e){return e.loaded})).then((function(t){n.container&&(n.player=new t.Player(n.container,c({width:"100%",height:"100%",videoId:v,playerVars:c(c({autoplay:a?1:0,mute:o?1:0,controls:u?1:0,start:(0,i.parseStartTime)(e),end:(0,i.parseEndTime)(e),origin:window.location.origin,playsinline:s?1:0},n.parsePlaylist(e)),d),events:{onReady:function(){l&&n.player.setLoop(!0),n.props.onReady()},onPlaybackRateChange:function(e){return n.props.onPlaybackRateChange(e.data)},onStateChange:n.onStateChange,onError:function(e){return f(e.data)}},host:S.test(e)?"https://www.youtube-nocookie.com":void 0},p)))}),f),p.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayer\u2019s callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",e),this.props.playing||this.pause()}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return a.default.createElement("div",{style:e},a.default.createElement("div",{ref:this.ref}))}}])&&d(t.prototype,n),r&&d(t,r),u}(a.Component);t.Z=E,b(E,"displayName","YouTube"),b(E,"canPlay",o.canPlay.youtube)},174:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=t.propTypes=void 0;var r,a=(r=n(7))&&r.__esModule?r:{default:r};var i=a.default.string,o=a.default.bool,s=a.default.number,u=a.default.array,c=a.default.oneOfType,l=a.default.shape,h=a.default.object,f=a.default.func,d=a.default.node,p={url:c([i,u,h]),playing:o,loop:o,controls:o,volume:s,muted:o,playbackRate:s,width:c([i,s]),height:c([i,s]),style:h,progressInterval:s,playsinline:o,pip:o,stopOnUnmount:o,light:c([o,i]),playIcon:d,previewTabIndex:s,fallback:d,oEmbedUrl:i,wrapper:c([i,f,l({render:f.isRequired})]),config:l({soundcloud:l({options:h}),youtube:l({playerVars:h,embedOptions:h,onUnstarted:f}),facebook:l({appId:i,version:i,playerId:i,attributes:h}),dailymotion:l({params:h}),vimeo:l({playerOptions:h,title:i}),file:l({attributes:h,tracks:u,forceVideo:o,forceAudio:o,forceHLS:o,forceDASH:o,forceFLV:o,hlsOptions:h,hlsVersion:i,dashVersion:i,flvVersion:i}),wistia:l({options:h,playerId:i,customControls:u}),mixcloud:l({options:h}),twitch:l({options:h,playerId:i}),vidyard:l({options:h})}),onReady:f,onStart:f,onPlay:f,onPause:f,onBuffer:f,onBufferEnd:f,onEnded:f,onError:f,onDuration:f,onSeek:f,onPlaybackRateChange:f,onProgress:f,onClickPreview:f,onEnablePIP:f,onDisablePIP:f};t.propTypes=p;var v=function(){},m={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:v},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0"},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:v,onStart:v,onPlay:v,onPause:v,onBuffer:v,onBufferEnd:v,onEnded:v,onError:v,onDuration:v,onSeek:v,onPlaybackRateChange:v,onProgress:v,onClickPreview:v,onEnablePIP:v,onDisablePIP:v};t.defaultProps=m},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStartTime=function(e){return f(e,u)},t.parseEndTime=function(e){return f(e,c)},t.randomString=function(){return Math.random().toString(36).substr(2,5)},t.queryString=function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},t.getSDK=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.default,o=d(t);if(o&&a(o))return Promise.resolve(o);return new Promise((function(r,a){if(p[e])p[e].push({resolve:r,reject:a});else{p[e]=[{resolve:r,reject:a}];var o=function(t){p[e].forEach((function(e){return e.resolve(t)}))};if(n){var s=window[n];window[n]=function(){s&&s(),o(d(t))}}i(e,(function(r){r?(p[e].forEach((function(e){return e.reject(r)})),p[e]=null):n||o(d(t))}))}}))},t.getConfig=function(e,t){return(0,a.default)(t.config,e.config)},t.omit=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var i=(t=[]).concat.apply(t,r),o={},s=Object.keys(e),u=0,c=s;u<c.length;u++){var l=c[u];-1===i.indexOf(l)&&(o[l]=e[l])}return o},t.callPlayer=function(e){var t;if(!this.player||!this.player[e]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c \u2013 ");return this.player?this.player[e]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return(t=this.player)[e].apply(t,a)},t.isMediaStream=function(e){return"undefined"!==typeof window&&"undefined"!==typeof window.MediaStream&&e instanceof window.MediaStream},t.isBlobUrl=function(e){return/^blob:/.test(e)},t.supportsWebKitPresentationMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("video"),t=!1===/iPhone|iPod/.test(navigator.userAgent);return e.webkitSupportsPresentationMode&&"function"===typeof e.webkitSetPresentationMode&&t};var r=i(n(102)),a=i(n(948));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=/[?&#](?:start|t)=([0-9hms]+)/,c=/[?&#]end=([0-9hms]+)/,l=/(\d+)(h|m|s)/g,h=/^\d+$/;function f(e,t){if(!(e instanceof Array)){var n=e.match(t);if(n){var r=n[1];if(r.match(l))return function(e){var t=0,n=l.exec(e);for(;null!==n;){var r=o(n,3),a=r[1],i=r[2];"h"===i&&(t+=60*parseInt(a,10)*60),"m"===i&&(t+=60*parseInt(a,10)),"s"===i&&(t+=parseInt(a,10)),n=l.exec(e)}return t}(r);if(h.test(r))return parseInt(r)}}}function d(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}var p={}},134:function(e,t,n){var r=n(646).e,a=n(322).Z;e.exports=r([{key:"youtube",canPlay:a.canPlay,lazyPlayer:a}])},97:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;s()?e.hasUserMedia||this.requestUserMedia():t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||i)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/i,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var o=this.ctx,s=this.canvas;return o&&s&&(n.mirrored&&(o.translate(s.width,0),o.scale(-1,1)),o.imageSmoothingEnabled=n.imageSmoothing,o.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(o.scale(-1,1),o.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var i={video:"undefined"===typeof a||a};n.audio&&(i.audio="undefined"===typeof r||r),navigator.mediaDevices.getUserMedia(i).then((function(n){e.unmounted?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,o=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(o=e.id)}));var s=i(n.audioConstraints);s&&(t=s);var u=i(n.videoConstraints);u&&(o=u),r(a(t),a(o))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),u=n.style,c=void 0===u?{}:u,l=o(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style"]),h=s?i(i({},c),{transform:(c.transform||"")+" scaleX(-1)"}):c;return r.createElement("video",i({autoPlay:!0,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:h},l))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=u},react:function(t,n){t.exports=e}}).default},e.exports=r(n(791))},374:function(e,t,n){"use strict";n(725);var r=n(791),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;a=i("react.element"),t.Fragment=i("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;a=h("react.element"),i=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=y.prototype=new g;b.constructor=y,r(b,m.prototype),b.isPureReactComponent=!0;var x={current:null},k=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&!w.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var T=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case i:u=!0}}if(u)return o=o(u=e),e=""===r?"."+_(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+_(s=e[c],c);u+=C(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,l=r+_(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function I(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function R(){var e=A.current;if(null===e)throw Error(d(321));return e}var O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var i=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)k.call(t,l)&&!w.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new I(r||[]);return i._invoke=function(e,t,n){var r=h;return function(a,i){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===a)throw i;return A()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};u(b,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(N([])));k&&k!==n&&r.call(k,i)&&(b=k);var w=y.prototype=m.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(a,i,o,s){var u=l(e[a],e,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function N(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return g.prototype=y,u(w,"constructor",y),u(y,"constructor",g),g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(E.prototype),u(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new E(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(w),u(w,s,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,a,i;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,h=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){l=setTimeout(e,t)},a=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,g=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,k=x.port2;x.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+y;try{m(!0,e)?k.postMessage(null):(v=!1,m=null)}catch(n){throw k.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,k.postMessage(null))},r=function(e,n){g=f((function(){e(t.unstable_now())}),n)},a=function(){d(g),g=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<T(a,t)))break e;e[r]=t,e[n]=a,n=r}}function S(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],s=i+1,u=e[s];if(void 0!==o&&0>T(o,n))void 0!==u&&0>T(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==u&&0>T(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var _=[],C=[],I=1,N=null,A=3,R=!1,O=!1,D=!1;function M(e){for(var t=S(C);null!==t;){if(null===t.callback)E(C);else{if(!(t.startTime<=e))break;E(C),t.sortIndex=t.expirationTime,w(_,t)}t=S(C)}}function P(e){if(D=!1,M(e),!O)if(null!==S(_))O=!0,n(L);else{var t=S(C);null!==t&&r(P,t.startTime-e)}}function L(e,n){O=!1,D&&(D=!1,a()),R=!0;var i=A;try{for(M(n),N=S(_);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===S(_)&&E(_),M(n)}else E(_);N=S(_)}if(null!==N)var u=!0;else{var c=S(C);null!==c&&r(P,c.startTime-n),u=!1}return u}finally{N=null,A=i,R=!1}}var F=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||R||(O=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return S(_)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:I++,callback:i,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,w(C,e),null===S(_)&&e===S(C)&&(D?a():D=!0,r(P,o-s))):(e.sortIndex=u,w(_,e),O||R||(O=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},699:function(e,t,n){var r=n(501),a=n(112),i=n(132),o=n(890),s=n(113),u=n(350),c=n(411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},350:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},411:function(e,t,n){var r;!function(a,i){var o,s=this,u=256,c=i.pow(u,6),l=i.pow(2,52),h=2*l,f=255;function d(e,t,n){var r=[],f=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(a)]}}():e,3),r),d=new p(r),b=function(){for(var e=d.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=d.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,g(y(d.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,d),e.state=function(){return v(d,{})}),n?(i.random=e,t):e})(b,f,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=f&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=f&a+1],n=n*u+o[f&(o[a]=o[i=f&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=d,g(i.random(),a),e.exports){e.exports=d;try{o=n(42)}catch(b){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}([],Math)},613:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var c=i[u];if(!s(c))return!1;var l=e[c],h=t[c];if(!1===(a=n?n.call(r,l,h,c):void 0)||void 0===a&&l!==h)return!1}return!0}},410:function(){},628:function(){},42:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".37b32fba.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="motiv:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+i){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,i,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkmotiv=self.webpackChunkmotiv||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{conv2d:function(){return ad},depthwiseConv2d:function(){return sd},matMul:function(){return ud}});var t={};n.r(t),n.d(t,{json:function(){return $p}});var r={};n.r(r),n.d(r,{json:function(){return Qp}});var a={};n.r(a),n.d(a,{json:function(){return Jp}});var i={};n.r(i),n.d(i,{json:function(){return Zp}});var o={};n.r(o),n.d(o,{json:function(){return ev}});var s={};n.r(s),n.d(s,{json:function(){return tv}});var u={};n.r(u),n.d(u,{json:function(){return nv}});var c={};n.r(c),n.d(c,{json:function(){return rv}});var l={};n.r(l),n.d(l,{json:function(){return av}});var h={};n.r(h),n.d(h,{json:function(){return iv}});var f={};n.r(f),n.d(f,{json:function(){return ov}});var d={};n.r(d),n.d(d,{json:function(){return sv}});var p={};n.r(p),n.d(p,{json:function(){return uv}});var v={};n.r(v),n.d(v,{json:function(){return cv}});var m={};n.r(m),n.d(m,{json:function(){return lv}});var g={};n.r(g),n.d(g,{json:function(){return hv}});var y={};n.r(y),n.d(y,{json:function(){return fv}});var b={};n.r(b),n.d(b,{json:function(){return dv}});var x={};n.r(x),n.d(x,{json:function(){return pv}});var k={};n.r(k),n.d(k,{OP_SCOPE_SUFFIX:function(){return Ts},abs:function(){return Wu},acos:function(){return Hu},acosh:function(){return Gu},add:function(){return Ku},addN:function(){return qu},all:function(){return Xu},any:function(){return Yu},argMax:function(){return $u},argMin:function(){return Qu},asin:function(){return Ju},asinh:function(){return Zu},atan:function(){return ec},atan2:function(){return tc},atanh:function(){return nc},avgPool:function(){return bc},avgPool3d:function(){return xc},basicLSTMCell:function(){return Cc},batchNorm:function(){return Nc},batchNorm2d:function(){return Ac},batchNorm3d:function(){return Rc},batchNorm4d:function(){return Oc},batchToSpaceND:function(){return Ic},bincount:function(){return Dc},booleanMaskAsync:function(){return Ff},broadcastArgs:function(){return Mc},broadcastTo:function(){return Pc},buffer:function(){return mu},cast:function(){return gu},ceil:function(){return Lc},clipByValue:function(){return Fc},clone:function(){return yu},complex:function(){return Cs},concat:function(){return kc},concat1d:function(){return Bc},concat2d:function(){return Vc},concat3d:function(){return Uc},concat4d:function(){return jc},conv1d:function(){return Wc},conv2d:function(){return zc},conv2dTranspose:function(){return Gc},conv3d:function(){return Kc},conv3dTranspose:function(){return Xc},cos:function(){return Yc},cosh:function(){return $c},cosineWindow:function(){return $f},cumsum:function(){return Qc},denseBincount:function(){return Jc},depthToSpace:function(){return Zc},depthwiseConv2d:function(){return el},diag:function(){return tl},dilation2d:function(){return nl},div:function(){return al},divNoNan:function(){return ul},dot:function(){return cl},dropout:function(){return Xf},einsum:function(){return ll},elu:function(){return hl},enclosingPowerOfTwo:function(){return Yf},equal:function(){return il},erf:function(){return fl},exp:function(){return dl},expandDims:function(){return pl},expm1:function(){return vl},eye:function(){return gl},fft:function(){return lf},fill:function(){return yl},floor:function(){return bl},floorDiv:function(){return rl},fused:function(){return e},gather:function(){return xl},gatherND:function(){return qf},greater:function(){return kl},greaterEqual:function(){return wl},ifft:function(){return hf},imag:function(){return Sl},image:function(){return yp},inTopKAsync:function(){return Jf},irfft:function(){return ff},isFinite:function(){return El},isInf:function(){return Tl},isNaN:function(){return _l},leakyRelu:function(){return Cl},less:function(){return Il},lessEqual:function(){return Nl},linalg:function(){return bp},linspace:function(){return Al},localResponseNormalization:function(){return Rl},log:function(){return Ol},log1p:function(){return Dl},logSigmoid:function(){return Fl},logSoftmax:function(){return jl},logSumExp:function(){return Yl},logicalAnd:function(){return $l},logicalNot:function(){return Ql},logicalOr:function(){return Jl},logicalXor:function(){return Zl},losses:function(){return xp},matMul:function(){return wc},max:function(){return Bl},maxPool:function(){return eh},maxPool3d:function(){return th},maxPoolWithArgmax:function(){return nh},maximum:function(){return rh},mean:function(){return ah},meshgrid:function(){return sh},min:function(){return uh},minimum:function(){return ch},mirrorPad:function(){return lh},mod:function(){return hh},moments:function(){return dh},movingAverage:function(){return jf},mul:function(){return Sc},multiRNNCell:function(){return ph},multinomial:function(){return vh},neg:function(){return Pl},norm:function(){return Uf},notEqual:function(){return mh},oneHot:function(){return gh},ones:function(){return oh},onesLike:function(){return yh},op:function(){return _s},outerProduct:function(){return bh},pad:function(){return xh},pad1d:function(){return kh},pad2d:function(){return wh},pad3d:function(){return Sh},pad4d:function(){return Eh},pool:function(){return _h},pow:function(){return Ch},prelu:function(){return Ih},print:function(){return bu},prod:function(){return Nh},rand:function(){return Ah},randomGamma:function(){return Ph},randomNormal:function(){return Lh},randomUniform:function(){return Fh},range:function(){return Bh},real:function(){return Vh},reciprocal:function(){return Uh},relu:function(){return jh},relu6:function(){return zh},reshape:function(){return yc},reverse:function(){return Wh},reverse1d:function(){return Hh},reverse2d:function(){return Gh},reverse3d:function(){return Kh},reverse4d:function(){return qh},rfft:function(){return pf},round:function(){return Xh},rsqrt:function(){return Yh},scalar:function(){return $h},scatterND:function(){return Hf},selu:function(){return Qh},separableConv2d:function(){return Jh},setdiff1dAsync:function(){return ef},sigmoid:function(){return Ec},sign:function(){return tf},signal:function(){return gp},sin:function(){return nf},sinh:function(){return rf},slice:function(){return Tc},slice1d:function(){return af},slice2d:function(){return of},slice3d:function(){return sf},slice4d:function(){return uf},softmax:function(){return cf},softplus:function(){return Ll},spaceToBatchND:function(){return Th},sparse:function(){return kp},sparseToDense:function(){return Kf},spectral:function(){return mp},split:function(){return df},sqrt:function(){return vf},square:function(){return fh},squaredDifference:function(){return mf},squeeze:function(){return gf},stack:function(){return yf},step:function(){return bf},stridedSlice:function(){return xf},string:function(){return wp},sub:function(){return Vl},sum:function(){return Ul},tan:function(){return kf},tanh:function(){return _c},tensor:function(){return Ns},tensor1d:function(){return wf},tensor2d:function(){return Sf},tensor3d:function(){return Mu},tensor4d:function(){return Ef},tensor5d:function(){return Tf},tensor6d:function(){return _f},tile:function(){return ml},topk:function(){return Cf},transpose:function(){return Bf},truncatedNormal:function(){return If},unique:function(){return Nf},unsortedSegmentSum:function(){return Af},unstack:function(){return Rf},variable:function(){return Of},where:function(){return ol},whereAsync:function(){return Pf},zeros:function(){return ih},zerosLike:function(){return sl}});var w=n(791),S=n(164);function E(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=n(441),_=n(613),C=n.n(_);var I=function(e){function t(e,r,u,c,f){for(var d,p,v,m,x,w=0,S=0,E=0,T=0,_=0,O=0,M=v=d=0,L=0,F=0,B=0,V=0,U=u.length,j=U-1,z="",W="",H="",G="";L<U;){if(p=u.charCodeAt(L),L===j&&0!==S+T+E+w&&(0!==S&&(p=47===S?10:47),T=E=w=0,U++,j++),0===S+T+E+w){if(L===j&&(0<F&&(z=z.replace(h,"")),0<z.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:z+=u.charAt(L)}p=59}switch(p){case 123:for(d=(z=z.trim()).charCodeAt(0),v=1,V=++L;L<U;){switch(p=u.charCodeAt(L)){case 123:v++;break;case 125:v--;break;case 47:switch(p=u.charCodeAt(L+1)){case 42:case 47:e:{for(M=L+1;M<j;++M)switch(u.charCodeAt(M)){case 47:if(42===p&&42===u.charCodeAt(M-1)&&L+2!==M){L=M+1;break e}break;case 10:if(47===p){L=M+1;break e}}L=M}}break;case 91:p++;case 40:p++;case 34:case 39:for(;L++<j&&u.charCodeAt(L)!==p;);}if(0===v)break;L++}if(v=u.substring(V,L),0===d&&(d=(z=z.replace(l,"").trim()).charCodeAt(0)),64===d){switch(0<F&&(z=z.replace(h,"")),p=z.charCodeAt(1)){case 100:case 109:case 115:case 45:F=r;break;default:F=R}if(V=(v=t(r,F,v,p,f+1)).length,0<D&&(x=s(3,v,F=n(R,z,B),r,I,C,V,p,f,c),z=F.join(""),void 0!==x&&0===(V=(v=x.trim()).length)&&(p=0,v="")),0<V)switch(p){case 115:z=z.replace(k,o);case 100:case 109:case 45:v=z+"{"+v+"}";break;case 107:v=(z=z.replace(g,"$1 $2"))+"{"+v+"}",v=1===A||2===A&&i("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=z+v,112===c&&(W+=v,v="")}else v=""}else v=t(r,n(r,z,B),v,c,f+1);H+=v,v=B=F=M=d=0,z="",p=u.charCodeAt(++L);break;case 125:case 59:if(1<(V=(z=(0<F?z.replace(h,""):z).trim()).length))switch(0===M&&(d=z.charCodeAt(0),45===d||96<d&&123>d)&&(V=(z=z.replace(" ",":")).length),0<D&&void 0!==(x=s(1,z,r,e,I,C,W.length,c,f,c))&&0===(V=(z=x.trim()).length)&&(z="\0\0"),d=z.charCodeAt(0),p=z.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){G+=z+u.charAt(L);break}default:58!==z.charCodeAt(V-1)&&(W+=a(z,d,p,z.charCodeAt(2)))}B=F=M=d=0,z="",p=u.charCodeAt(++L)}}switch(p){case 13:case 10:47===S?S=0:0===1+d&&107!==c&&0<z.length&&(F=1,z+="\0"),0<D*P&&s(0,z,r,e,I,C,W.length,c,f,c),C=1,I++;break;case 59:case 125:if(0===S+T+E+w){C++;break}default:switch(C++,m=u.charAt(L),p){case 9:case 32:if(0===T+w+S)switch(_){case 44:case 58:case 9:case 32:m="";break;default:32!==p&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===T+S+w&&(F=B=1,m="\f"+m);break;case 108:if(0===T+S+w+N&&0<M)switch(L-M){case 2:112===_&&58===u.charCodeAt(L-3)&&(N=_);case 8:111===O&&(N=O)}break;case 58:0===T+S+w&&(M=L);break;case 44:0===S+E+T+w&&(F=1,m+="\r");break;case 34:case 39:0===S&&(T=T===p?0:0===T?p:T);break;case 91:0===T+S+E&&w++;break;case 93:0===T+S+E&&w--;break;case 41:0===T+S+w&&E--;break;case 40:if(0===T+S+w){if(0===d)if(2*_+3*O===533);else d=1;E++}break;case 64:0===S+E+T+w+M+v&&(v=1);break;case 42:case 47:if(!(0<T+w+E))switch(S){case 0:switch(2*p+3*u.charCodeAt(L+1)){case 235:S=47;break;case 220:V=L,S=42}break;case 42:47===p&&42===_&&V+2!==L&&(33===u.charCodeAt(V+2)&&(W+=u.substring(V,L+1)),m="",S=0)}}0===S&&(z+=m)}O=_,_=p,L++}if(0<(V=W.length)){if(F=r,0<D&&(void 0!==(x=s(2,W,F,e,I,C,V,c,f,c))&&0===(W=x).length))return G+W+H;if(W=F.join(",")+"{"+W+"}",0!==A*N){switch(2!==A||i(W,2)||(N=0),N){case 111:W=W.replace(b,":-moz-$1")+W;break;case 112:W=W.replace(y,"::-webkit-input-$1")+W.replace(y,"::-moz-$1")+W.replace(y,":-ms-input-$1")+W}N=0}}return G+W+H}function n(e,t,n){var a=t.trim().split(v);t=a;var i=a.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<i;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<i;++s)for(var c=0;c<o;++c)t[u++]=r(e[c]+" ",a[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function a(e,t,n,r){var o=e+";",s=2*t+3*n+4*r;if(944===s){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===A||2===A&&i(u,1)?"-webkit-"+u+u:u}if(0===A||2===A&&!i(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(_,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return d.test(o)?o.replace(f,":-webkit-")+o.replace(f,":-moz-")+o:o;case 1e3:switch(t=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=o.replace(x,"tb");break;case 232:u=o.replace(x,"tb-rl");break;case 220:u=o.replace(x,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(u=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(S,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(S,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===T.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function i(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),M(2!==t?r:r.replace(E,"$1"),n,t)}function o(e,t){var n=a(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,a,i,o,s,u,l){for(var h,f=0,d=t;f<D;++f)switch(h=O[f].call(c,e,d,n,r,a,i,o,s,u,l)){case void 0:case!1:case!0:case null:break;default:d=h}if(d!==t)return d}function u(e){return void 0!==(e=e.prefix)&&(M=null,e?"function"!==typeof e?A=1:(A=2,M=e):A=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<D){var a=s(-1,n,r,r,I,C,0,0,0,0);void 0!==a&&"string"===typeof a&&(n=a)}var i=t(R,r,n,0,0);return 0<D&&(void 0!==(a=s(-2,i,r,r,I,C,i.length,0,0,0))&&(i=a)),"",N=0,C=I=1,i}var l=/^\0+/g,h=/[\0\r\f]/g,f=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,k=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=/stretch|:\s*\w+\-(?:conte|avail)/,_=/([^-])(image-set\()/,C=1,I=1,N=0,A=1,R=[],O=[],D=0,M=null,P=0;return c.use=function e(t){switch(t){case void 0:case null:D=O.length=0;break;default:if("function"===typeof t)O[D++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else P=0|!!t}return e},c.set=u,void 0!==e&&u(e),c},N={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var A=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},R=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,O=A((function(e){return R.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),D=n(110),M=n.n(D);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var L=function(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n},F=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,T.typeOf)(e)},B=Object.freeze([]),V=Object.freeze({});function U(e){return"function"==typeof e}function j(e){return e.displayName||e.name||"Component"}function z(e){return e&&"string"==typeof e.styledComponentId}var W="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",H="undefined"!=typeof window&&"HTMLElement"in window,G=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY));function K(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var q=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)(a<<=1)<0&&K(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var i=r;i<a;i++)this.groupSizes[i]=0}for(var o=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,i=r;i<a;i++)t+=this.tag.getRule(i)+"/*!sc*/\n";return t},e}(),X=new Map,Y=new Map,$=1,Q=function(e){if(X.has(e))return X.get(e);for(;Y.has($);)$++;var t=$++;return X.set(e,t),Y.set(t,e),t},J=function(e){return Y.get(e)},Z=function(e,t){t>=$&&($=t+1),X.set(e,t),Y.set(t,e)},ee="style["+W+'][data-styled-version="5.3.3"]',te=new RegExp("^"+W+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),ne=function(e,t,n){for(var r,a=n.split(","),i=0,o=a.length;i<o;i++)(r=a[i])&&e.registerName(t,r)},re=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],a=0,i=n.length;a<i;a++){var o=n[a].trim();if(o){var s=o.match(te);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(Z(c,u),ne(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},ae=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},ie=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(W))return r}}(n),i=void 0!==a?a.nextSibling:null;r.setAttribute(W,"active"),r.setAttribute("data-styled-version","5.3.3");var o=ae();return o&&r.setAttribute("nonce",o),n.insertBefore(r,i),r},oe=function(){function e(e){var t=this.element=ie(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}K(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),se=function(){function e(e){var t=this.element=ie(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),ue=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),ce=H,le={isServer:!H,useCSSOMInjection:!G},he=function(){function e(e,t,n){void 0===e&&(e=V),void 0===t&&(t={}),this.options=P({},le,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&H&&ce&&(ce=!1,function(e){for(var t=document.querySelectorAll(ee),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute(W)&&(re(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return Q(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(P({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,a=t.target,e=n?new ue(a):r?new oe(a):new se(a),new q(e)));var e,t,n,r,a},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(Q(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Q(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(Q(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=0;a<n;a++){var i=J(a);if(void 0!==i){var o=e.names.get(i),s=t.getGroup(a);if(o&&s&&o.size){var u=W+".g"+a+'[id="'+i+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),fe=/(a)(d)/gi,de=function(e){return String.fromCharCode(e+(e>25?39:97))};function pe(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=de(t%52)+n;return(de(t%52)+n).replace(fe,"$1-$2")}var ve=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},me=function(e){return ve(5381,e)};function ge(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(U(n)&&!z(n))return!1}return!0}var ye=me("5.3.3"),be=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&ge(e),this.componentId=t,this.baseHash=ve(ye,t),this.baseStyle=n,he.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var i=Fe(this.rules,e,t,n).join(""),o=pe(ve(this.baseHash,i)>>>0);if(!t.hasNameForId(r,o)){var s=n(i,"."+o,void 0,r);t.insertRules(r,o,s)}a.push(o),this.staticRulesId=o}else{for(var u=this.rules.length,c=ve(this.baseHash,n.hash),l="",h=0;h<u;h++){var f=this.rules[h];if("string"==typeof f)l+=f;else if(f){var d=Fe(f,e,t,n),p=Array.isArray(d)?d.join(""):d;c=ve(c,p+h),l+=p}}if(l){var v=pe(c>>>0);if(!t.hasNameForId(r,v)){var m=n(l,"."+v,void 0,r);t.insertRules(r,v,m)}a.push(v)}}return a.join(" ")},e}(),xe=/^\s*\/\/.*$/gm,ke=[":","[",".","#"];function we(e){var t,n,r,a,i=void 0===e?V:e,o=i.options,s=void 0===o?V:o,u=i.plugins,c=void 0===u?B:u,l=new I(s),h=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,i,o,s,u,c,l,h){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(a[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),d=function(e,r,i){return 0===r&&-1!==ke.indexOf(i[n.length])||i.match(a)?e:"."+t};function p(e,i,o,s){void 0===s&&(s="&");var u=e.replace(xe,""),c=i&&o?o+" "+i+" { "+u+" }":u;return t=s,n=i,r=new RegExp("\\"+n+"\\b","g"),a=new RegExp("(\\"+n+"\\b){2,}"),l(o||!i?"":i,c)}return l.use([].concat(c,[function(e,t,a){2===e&&a.length&&a[0].lastIndexOf(n)>0&&(a[0]=a[0].replace(r,d))},f,function(e){if(-2===e){var t=h;return h=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||K(15),ve(e,t.name)}),5381).toString():"",p}var Se=w.createContext(),Ee=(Se.Consumer,w.createContext()),Te=(Ee.Consumer,new he),_e=we();function Ce(){return(0,w.useContext)(Se)||Te}function Ie(){return(0,w.useContext)(Ee)||_e}function Ne(e){var t=(0,w.useState)(e.stylisPlugins),n=t[0],r=t[1],a=Ce(),i=(0,w.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),o=(0,w.useMemo)((function(){return we({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,w.useEffect)((function(){C()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),w.createElement(Se.Provider,{value:i},w.createElement(Ee.Provider,{value:o},e.children))}var Ae=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=_e);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return K(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=_e),this.name+e.hash},e}(),Re=/([A-Z])/,Oe=/([A-Z])/g,De=/^ms-/,Me=function(e){return"-"+e.toLowerCase()};function Pe(e){return Re.test(e)?e.replace(Oe,Me).replace(De,"-ms-"):e}var Le=function(e){return null==e||!1===e||""===e};function Fe(e,t,n,r){if(Array.isArray(e)){for(var a,i=[],o=0,s=e.length;o<s;o+=1)""!==(a=Fe(e[o],t,n,r))&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));return i}return Le(e)?"":z(e)?"."+e.styledComponentId:U(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:Fe(e(t),t,n,r):e instanceof Ae?n?(e.inject(n,r),e.getName(r)):e:F(e)?function e(t,n){var r,a,i=[];for(var o in t)t.hasOwnProperty(o)&&!Le(t[o])&&(Array.isArray(t[o])&&t[o].isCss||U(t[o])?i.push(Pe(o)+":",t[o],";"):F(t[o])?i.push.apply(i,e(t[o],o)):i.push(Pe(o)+": "+(r=o,(null==(a=t[o])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in N?String(a).trim():a+"px")+";")));return n?[n+" {"].concat(i,["}"]):i}(e):e.toString();var u}var Be=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Ve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return U(e)||F(e)?Be(Fe(L(B,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:Be(Fe(L(e,n)))}new Set;var Ue=function(e,t,n){return void 0===n&&(n=V),e.theme!==n.theme&&e.theme||t||n.theme},je=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ze=/(^-|-$)/g;function We(e){return e.replace(je,"-").replace(ze,"")}var He=function(e){return pe(me(e)>>>0)};function Ge(e){return"string"==typeof e&&!0}var Ke=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},qe=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Xe(e,t,n){var r=e[n];Ke(t)&&Ke(r)?Ye(r,t):e[n]=t}function Ye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];if(Ke(o))for(var s in o)qe(s)&&Xe(e,o[s],s)}return e}var $e=w.createContext();$e.Consumer;var Qe={};function Je(e,t,n){var r=z(e),a=!Ge(e),i=t.attrs,o=void 0===i?B:i,s=t.componentId,u=void 0===s?function(e,t){var n="string"!=typeof e?"sc":We(e);Qe[n]=(Qe[n]||0)+1;var r=n+"-"+He("5.3.3"+n+Qe[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):s,c=t.displayName,l=void 0===c?function(e){return Ge(e)?"styled."+e:"Styled("+j(e)+")"}(e):c,h=t.displayName&&t.componentId?We(t.displayName)+"-"+t.componentId:t.componentId||u,f=r&&e.attrs?Array.prototype.concat(e.attrs,o).filter(Boolean):o,d=t.shouldForwardProp;r&&e.shouldForwardProp&&(d=t.shouldForwardProp?function(n,r,a){return e.shouldForwardProp(n,r,a)&&t.shouldForwardProp(n,r,a)}:e.shouldForwardProp);var p,v=new be(n,h,r?e.componentStyle:void 0),m=v.isStatic&&0===o.length,g=function(e,t){return function(e,t,n,r){var a=e.attrs,i=e.componentStyle,o=e.defaultProps,s=e.foldedComponentIds,u=e.shouldForwardProp,c=e.styledComponentId,l=e.target,h=function(e,t,n){void 0===e&&(e=V);var r=P({},t,{theme:e}),a={};return n.forEach((function(e){var t,n,i,o=e;for(t in U(o)&&(o=o(r)),o)r[t]=a[t]="className"===t?(n=a[t],i=o[t],n&&i?n+" "+i:n||i):o[t]})),[r,a]}(Ue(t,(0,w.useContext)($e),o)||V,t,a),f=h[0],d=h[1],p=function(e,t,n,r){var a=Ce(),i=Ie();return t?e.generateAndInjectStyles(V,a,i):e.generateAndInjectStyles(n,a,i)}(i,r,f),v=n,m=d.$as||t.$as||d.as||t.as||l,g=Ge(m),y=d!==t?P({},t,{},d):t,b={};for(var x in y)"$"!==x[0]&&"as"!==x&&("forwardedAs"===x?b.as=y[x]:(u?u(x,O,m):!g||O(x))&&(b[x]=y[x]));return t.style&&d.style!==t.style&&(b.style=P({},t.style,{},d.style)),b.className=Array.prototype.concat(s,c,p!==c?p:null,t.className,d.className).filter(Boolean).join(" "),b.ref=v,(0,w.createElement)(m,b)}(p,e,t,m)};return g.displayName=l,(p=w.forwardRef(g)).attrs=f,p.componentStyle=v,p.displayName=l,p.shouldForwardProp=d,p.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):B,p.styledComponentId=h,p.target=r?e.target:e,p.withComponent=function(e){var r=t.componentId,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["componentId"]),i=r&&r+"-"+(Ge(e)?e:We(j(e)));return Je(e,P({},a,{attrs:f,componentId:i}),n)},Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Ye({},e.defaultProps,t):t}}),p.toString=function(){return"."+p.styledComponentId},a&&M()(p,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),p}var Ze=function(e){return function e(t,n,r){if(void 0===r&&(r=V),!(0,T.isValidElementType)(n))return K(1,String(n));var a=function(){return t(n,r,Ve.apply(void 0,arguments))};return a.withConfig=function(a){return e(t,n,P({},r,{},a))},a.attrs=function(a){return e(t,n,P({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},a}(Je,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Ze[e]=Ze(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=ge(e),he.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var a=r(Fe(this.rules,t,n,r).join(""),""),i=this.componentId+e;n.insertRules(i,i,a)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&he.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=ae();return"<style "+[n&&'nonce="'+n+'"',W+'="true"','data-styled-version="5.3.3"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?K(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return K(2);var n=((t={})[W]="",t["data-styled-version"]="5.3.3",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=ae();return r&&(n.nonce=r),[w.createElement("style",P({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new he({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?K(2):w.createElement(Ne,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return K(3)}}();var et,tt,nt=Ze,rt=n(184);function at(e){var t=nt.div(et||(et=E(["\n        width: 100%;\n        height: 5rem;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-direction: column;\n        padding: 5px 5px 5px 5px;\n    "])));return(0,rt.jsx)(t,{children:e.children})}function it(){var e=nt.div(tt||(tt=E(["\n        height: 100vh;\n        width: 6rem;\n        border-right: 1px solid grey;\n    "])));return(0,rt.jsx)(rt.Fragment,{children:(0,rt.jsxs)(e,{children:[(0,rt.jsxs)(at,{children:[(0,rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:ht.icon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Home"]}),(0,rt.jsxs)(at,{children:[(0,rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:ht.icon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"Progress"]}),(0,rt.jsxs)(at,{children:[(0,rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:ht.icon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Profile"]})]})})}var ot,st,ut,ct,lt,ht={icon:{height:40,width:40,color:"#4f4f4f"}};function ft(){var e=nt.div(ot||(ot=E(["\n        height: 15rem;\n        width: 25rem;\n        background: #d4f0ff;\n        color: #4f4f4f;\n        border: 1px solid #4f4f4f;\n        border-radius: 2rem;\n        padding: 1.5rem;\n        font-size: 2rem;\n        font-weight: 600;\n\n        &:hover {\n            cursor: pointer;\n            background: #abd4eb;\n        }\n    "]))),t=nt.div(st||(st=E(["\n        font-size: 1.25rem;\n        font-weight: 500;\n        display: flex;\n        align-items: center;\n        margin-top: 1rem;\n    "]))),n=nt.div(ut||(ut=E(["\n        font-size: 1.25rem;\n        display: flex;\n        flex-direction: column;\n        margin-top: 2rem;\n    "]))),r=nt.div(ct||(ct=E(["\n        display: flex;\n        margin-top: 1rem;\n        justify-content: space-between;\n    "]))),a=nt.div(lt||(lt=E(["\n        height: 5rem;\n        width: 5rem;\n        background: white;\n        border: 1px solid grey;\n        border-radius: 0.5rem;\n    "])));return(0,rt.jsx)(rt.Fragment,{children:(0,rt.jsxs)(e,{children:["Today's Session",(0,rt.jsxs)(t,{children:[(0,rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:pt.icon,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,rt.jsx)("div",{style:{paddingLeft:7},children:"10 mins"})]}),(0,rt.jsxs)(n,{children:["Exercises",(0,rt.jsxs)(r,{children:[(0,rt.jsx)(a,{}),(0,rt.jsx)(a,{}),(0,rt.jsx)(a,{}),(0,rt.jsx)(a,{})]})]})]})})}var dt,pt={icon:{height:25,width:25,color:"#4f4f4f"}};function vt(e){if(Array.isArray(e))return e}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gt(e,t){if(e){if("string"===typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mt(e,t):void 0}}function yt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bt(e,t){return vt(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||gt(e,t)||yt()}function xt(){return xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xt.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(dt||(dt={}));var kt=function(e){return e};var wt="beforeunload",St="popstate";function Et(e){e.preventDefault(),e.returnValue=""}function Tt(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function _t(){return Math.random().toString(36).substr(2,8)}function Ct(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function It(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var Nt=(0,w.createContext)(null);var At=(0,w.createContext)(null);var Rt=(0,w.createContext)({outlet:null,matches:[]});function Ot(e,t){if(!e)throw new Error(t)}function Dt(e,t,n){void 0===n&&(n="/");var r=jt(("string"===typeof t?It(t):t).pathname||"/",n);if(null==r)return null;var a=Mt(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=Bt(a[o],r);return i}function Mt(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,a){var i={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(i.relativePath.startsWith(r)||Ot(!1),i.relativePath=i.relativePath.slice(r.length));var o=zt([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(!0===e.index&&Ot(!1),Mt(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:Ft(o,e.index),routesMeta:s})})),t}var Pt=/^:\w+$/,Lt=function(e){return"*"===e};function Ft(e,t){var n=e.split("/"),r=n.length;return n.some(Lt)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!Lt(e)})).reduce((function(e,t){return e+(Pt.test(t)?3:""===t?1:10)}),r)}function Bt(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",l=Vt({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;i.push({params:r,pathname:zt([a,l.pathname]),pathnameBase:Wt(zt([a,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(a=zt([a,l.pathnameBase]))}return i}function Vt(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=bt(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=i.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{});return{params:l,pathname:s,pathnameBase:u,pattern:e}}function Ut(e,t,n){var r,a="string"===typeof e?It(e):e,i=""===e||""===a.pathname?"/":a.pathname;if(null==i)r=n;else{var o=t.length-1;if(i.startsWith("..")){for(var s=i.split("/");".."===s[0];)s.shift(),o-=1;a.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?It(e):e,r=n.pathname,a=n.search,i=void 0===a?"":a,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:Ht(i),hash:Gt(s)}}(a,r);return i&&"/"!==i&&i.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function jt(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var zt=function(e){return e.join("/").replace(/\/\/+/g,"/")},Wt=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Ht=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Gt=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function Kt(e){qt()||Ot(!1);var t=(0,w.useContext)(Nt),n=t.basename,r=t.navigator,a=$t(e),i=a.hash,o=a.pathname,s=a.search,u=o;if("/"!==n){var c=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?It(e).pathname:e.pathname}(e),l=null!=c&&c.endsWith("/");u="/"===o?n+(l?"/":""):zt([n,o])}return r.createHref({pathname:u,search:s,hash:i})}function qt(){return null!=(0,w.useContext)(At)}function Xt(){return qt()||Ot(!1),(0,w.useContext)(At).location}function Yt(){qt()||Ot(!1);var e=(0,w.useContext)(Nt),t=e.basename,n=e.navigator,r=(0,w.useContext)(Rt).matches,a=Xt().pathname,i=JSON.stringify(r.map((function(e){return e.pathnameBase}))),o=(0,w.useRef)(!1);(0,w.useEffect)((function(){o.current=!0}));var s=(0,w.useCallback)((function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var s=Ut(e,JSON.parse(i),a);"/"!==t&&(s.pathname=zt([t,s.pathname])),(r.replace?n.replace:n.push)(s,r.state)}else n.go(e)}),[t,n,i,a]);return s}function $t(e){var t=(0,w.useContext)(Rt).matches,n=Xt().pathname,r=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,w.useMemo)((function(){return Ut(e,JSON.parse(r),n)}),[e,r,n])}function Qt(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,r,a){return(0,w.createElement)(Rt.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function Jt(e){Ot(!1)}function Zt(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,i=e.location,o=e.navigationType,s=void 0===o?dt.Pop:o,u=e.navigator,c=e.static,l=void 0!==c&&c;qt()&&Ot(!1);var h=Wt(n),f=(0,w.useMemo)((function(){return{basename:h,navigator:u,static:l}}),[h,u,l]);"string"===typeof i&&(i=It(i));var d=i,p=d.pathname,v=void 0===p?"/":p,m=d.search,g=void 0===m?"":m,y=d.hash,b=void 0===y?"":y,x=d.state,k=void 0===x?null:x,S=d.key,E=void 0===S?"default":S,T=(0,w.useMemo)((function(){var e=jt(v,h);return null==e?null:{pathname:e,search:g,hash:b,state:k,key:E}}),[h,v,g,b,k,E]);return null==T?null:(0,w.createElement)(Nt.Provider,{value:f},(0,w.createElement)(At.Provider,{children:a,value:{location:T,navigationType:s}}))}function en(e){var t=e.children,n=e.location;return function(e,t){qt()||Ot(!1);var n,r=(0,w.useContext)(Rt).matches,a=r[r.length-1],i=a?a.params:{},o=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,Xt());if(t){var u,c="string"===typeof t?It(t):t;"/"===o||(null==(u=c.pathname)?void 0:u.startsWith(o))||Ot(!1),n=c}else n=s;var l=n.pathname||"/",h=Dt(e,{pathname:"/"===o?l:l.slice(o.length)||"/"});return Qt(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},i,e.params),pathname:zt([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:zt([o,e.pathnameBase])})})),r)}(tn(t),n)}function tn(e){var t=[];return w.Children.forEach(e,(function(e){if((0,w.isValidElement)(e))if(e.type!==w.Fragment){e.type!==Jt&&Ot(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=tn(e.props.children)),t.push(n)}else t.push.apply(t,tn(e.props.children))})),t}function nn(){return nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nn.apply(this,arguments)}function rn(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var an=["onClick","reloadDocument","replace","state","target","to"];function on(e){var t=e.basename,n=e.children,r=e.window,a=(0,w.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function a(){var e=n.location,t=e.pathname,a=e.search,i=e.hash,o=r.state||{};return[o.idx,kt({pathname:t,search:a,hash:i,state:o.usr||null,key:o.key||"default"})]}var i=null;n.addEventListener(St,(function(){if(i)h.call(i),i=null;else{var e=dt.Pop,t=a(),n=t[0],r=t[1];if(h.length){if(null!=n){var o=u-n;o&&(i={action:e,location:r,retry:function(){g(-1*o)}},g(o))}}else m(e)}}));var o=dt.Pop,s=a(),u=s[0],c=s[1],l=Tt(),h=Tt();function f(e){return"string"===typeof e?e:Ct(e)}function d(e,t){return void 0===t&&(t=null),kt(xt({pathname:c.pathname,hash:"",search:""},"string"===typeof e?It(e):e,{state:t,key:_t()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},f(e)]}function v(e,t,n){return!h.length||(h.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=a();u=t[0],c=t[1],l.call({action:o,location:c})}function g(e){r.go(e)}null==u&&(u=0,r.replaceState(xt({},r.state,{idx:u}),""));var y={get action(){return o},get location(){return c},createHref:f,push:function e(t,a){var i=dt.Push,o=d(t,a);if(v(i,o,(function(){e(t,a)}))){var s=p(o,u+1),c=s[0],l=s[1];try{r.pushState(c,"",l)}catch(h){n.location.assign(l)}m(i)}},replace:function e(t,n){var a=dt.Replace,i=d(t,n);if(v(a,i,(function(){e(t,n)}))){var o=p(i,u),s=o[0],c=o[1];r.replaceState(s,"",c),m(a)}},go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(e){return l.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&n.addEventListener(wt,Et),function(){t(),h.length||n.removeEventListener(wt,Et)}}};return y}({window:r}));var i=a.current,o=bt((0,w.useState)({action:i.action,location:i.location}),2),s=o[0],u=o[1];return(0,w.useLayoutEffect)((function(){return i.listen(u)}),[i]),(0,w.createElement)(Zt,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:i})}var sn=(0,w.forwardRef)((function(e,t){var n=e.onClick,r=e.reloadDocument,a=e.replace,i=void 0!==a&&a,o=e.state,s=e.target,u=e.to,c=rn(e,an),l=Kt(u),h=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,i=n.state,o=Yt(),s=Xt(),u=$t(e);return(0,w.useCallback)((function(t){if(0===t.button&&(!r||"_self"===r)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||Ct(s)===Ct(u);o(e,{replace:n,state:i})}}),[s,o,u,a,i,r,e])}(u,{replace:i,state:o,target:s});return(0,w.createElement)("a",nn({},c,{href:l,onClick:function(e){n&&n(e),e.defaultPrevented||r||h(e)},ref:t,target:s}))}));var un,cn,ln,hn=n(97),fn=n.n(hn);function dn(){var e=nt.div(un||(un=E(["\n        margin: 2rem;\n        margin-left: 3rem;\n        color: #4f4f4f;\n        \n    "]))),t=nt.div(cn||(cn=E(["\n        font-size: 3rem;\n        margin-bottom: 3rem;\n    "]))),n=nt.div(ln||(ln=E(["\n        display: flex;\n        flex-direction: row;\n    "])));return(0,rt.jsxs)(n,{children:[(0,rt.jsx)(it,{}),(0,rt.jsx)(fn(),{}),(0,rt.jsxs)(e,{children:[(0,rt.jsxs)(t,{children:["Good Evening, ",(0,rt.jsx)("span",{style:{fontWeight:600},children:"IGEN 430"})]}),(0,rt.jsx)(sn,{to:"/tutorial",style:{textDecoration:"none"},children:(0,rt.jsx)(ft,{})})]})]})}function pn(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function vn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){pn(i,r,a,o,s,"next",e)}function s(e){pn(i,r,a,o,s,"throw",e)}o(void 0)}))}}var mn=n(757),gn=n.n(mn),yn=n(509);function bn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=gt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function xn(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function kn(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||xn(e)||gt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function En(e,t,n){return t&&Sn(e.prototype,t),n&&Sn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Tn=function(){function e(t,n){wn(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return En(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),_n=function(){function e(){wn(this,e)}return En(e,[{key:"refCount",value:function(e){return Cn("refCount")}},{key:"incRef",value:function(e){return Cn("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return Cn("time")}},{key:"read",value:function(e){return Cn("read")}},{key:"readSync",value:function(e){return Cn("readSync")}},{key:"readToGPU",value:function(e,t){return Cn("readToGPU")}},{key:"numDataIds",value:function(){return Cn("numDataIds")}},{key:"disposeData",value:function(e,t){return Cn("disposeData")}},{key:"write",value:function(e,t,n){return Cn("write")}},{key:"move",value:function(e,t,n,r,a){return Cn("move")}},{key:"memory",value:function(){return Cn("memory")}},{key:"floatPrecision",value:function(){return Cn("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return Cn("dispose")}}]),e}();function Cn(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function In(e){return e%2===0?e:e+1}function Nn(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function An(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Rn(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function On(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Rn(Ln(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function Dn(e){Rn(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||Kn(e)&&!n)for(var r=0;r<e.length;++r)Mn(e[r],t,n);else t.push(e);return t}function Pn(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Ln(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Fn(e){return e%1===0}function Bn(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Vn(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function jn(e,t){var n=t.length;return Rn((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),Rn(e.every((function(e){return Fn(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function zn(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:jn(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Wn(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function Hn(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Gn(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function Kn(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function qn(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Xn(e){return"string"===typeof e||e instanceof String}function Yn(e){return Array.isArray(e)?Yn(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":"number"===typeof e?"float32":Xn(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function $n(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Qn(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Jn(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Zn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=Zn(e+l*c,u,n,r);return a}function er(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Zn(0,e,t,n)}function tr(e,t){for(var n=nr(e,t),r=0;r<n.length;r++)n[r]=1;return n}function nr(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function rr(e){e.forEach((function(t){Rn(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function ar(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function ir(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function or(e){return e&&e.then&&"function"===typeof e.then}var sr="tfjsflags",ur=function(){function e(t){wn(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=cr,this.populateURLFlags()}return En(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(hr().getBool("IS_TEST")||hr().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];hr().getBool("IS_TEST")||hr().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=vn(gn().mark((function e(t){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(or(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(sr in t)t.tfjsflags.split(",").forEach((function(t){var n=bt(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}}]),e}();function cr(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return lr(t,r[0],r[1]),r.join("=")})),t}function lr(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function hr(){return dr}var fr,dr=null;function pr(){if(null==fr){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}fr=e}return fr}function vr(e,t){var n=function(){var e=pr();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var mr="Abs",gr="Acos",yr="Acosh",br="Add",xr="AddN",kr="All",wr="Any",Sr="ArgMax",Er="ArgMin",Tr="Asin",_r="Asinh",Cr="Atan",Ir="Atanh",Nr="Atan2",Ar="AvgPool",Rr="AvgPool3D",Or="BatchMatMul",Dr="BatchToSpaceND",Mr="Bincount",Pr="BroadcastArgs",Lr="Cast",Fr="Ceil",Br="ClipByValue",Vr="Complex",Ur="ComplexAbs",jr="Concat",zr="Conv2D",Wr="Conv2DBackpropFilter",Hr="Conv2DBackpropInput",Gr="Conv3D",Kr="Conv3DBackpropInputV2",qr="Cosh",Xr="Cumsum",Yr="CropAndResize",$r="DenseBincount",Qr="DepthToSpace",Jr="DepthwiseConv2dNative",Zr="DepthwiseConv2dNativeBackpropFilter",ea="DepthwiseConv2dNativeBackpropInput",ta="Diag",na="Dilation2D",ra="RealDiv",aa="Einsum",ia="Equal",oa="Exp",sa="ExpandDims",ua="Expm1",ca="Fill",la="FlipLeftRight",ha="Floor",fa="FloorDiv",da="FusedBatchNorm",pa="GatherV2",va="GatherNd",ma="Greater",ga="GreaterEqual",ya="Identity",ba="IFFT",xa="Imag",ka="IsFinite",wa="IsInf",Sa="IsNan",Ea="LeakyRelu",Ta="Less",_a="LessEqual",Ca="LinSpace",Ia="Log",Na="Log1p",Aa="LogicalAnd",Ra="LogicalNot",Oa="LogicalOr",Da="LRN",Ma="Max",Pa="Maximum",La="MaxPool",Fa="MaxPool3D",Ba="MaxPoolWithArgmax",Va="Mean",Ua="Min",ja="Minimum",za="MirrorPad",Wa="Multinomial",Ha="Multiply",Ga="Neg",Ka="NotEqual",qa="NonMaxSuppressionV3",Xa="NonMaxSuppressionV4",Ya="NonMaxSuppressionV5",$a="OnesLike",Qa="OneHot",Ja="Pack",Za="PadV2",ei="Prelu",ti="Prod",ni="Range",ri="Real",ai="Reciprocal",ii="Relu",oi="Reshape",si="ResizeNearestNeighbor",ui="ResizeBilinear",ci="Relu6",li="Reverse",hi="Round",fi="Rsqrt",di="ScatterNd",pi="Select",vi="Selu",mi="Slice",gi="Sinh",yi="Sign",bi="Sigmoid",xi="Softplus",ki="Sqrt",wi="Sum",Si="SpaceToBatchND",Ei="SplitV",Ti="Softmax",_i="SparseFillEmptyRows",Ci="SparseReshape",Ii="SparseSegmentMean",Ni="SparseSegmentSum",Ai="SparseToDense",Ri="SquaredDifference",Oi="StridedSlice",Di="StringNGrams",Mi="StringSplit",Pi="StringToHashBucketFast",Li="Sub",Fi="Tanh",Bi="Tile",Vi="TopK",Ui="Transform",ji="Transpose",zi="Unique",Wi="Unpack",Hi="UnsortedSegmentSum",Gi="ZerosLike",Ki="Step",qi="FromPixels",Xi="RotateWithOffset",Yi="_FusedMatMul",$i="FusedConv2D",Qi="FusedDepthwiseConv2D";function Ji(){var e;hr().getBool("IS_TEST")||hr().getBool("PROD")||(e=console).warn.apply(e,arguments)}var Zi=vr("kernelRegistry",(function(){return new Map})),eo=vr("gradRegistry",(function(){return new Map}));function to(e,t){var n=io(e,t);return Zi.get(n)}function no(e){return eo.get(e)}function ro(e){for(var t=Zi.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=bt(i,2),s=o[0],u=o[1];bt(s.split("_"),1)[0]===e&&n.push(u)}return n}function ao(e){var t=e.kernelName,n=e.backendName,r=io(t,n);Zi.has(r)&&Ji("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Zi.set(r,e)}function io(e,t){return"".concat(t,"_").concat(e)}var oo=n(987),so=n.n(oo)()||oo;function uo(e){return so.fromString(e,!0,16)}var co=uo("c3a5c85c97cb3127"),lo=uo("b492b66fbe98f273"),ho=uo("9ae16a3b2f90404f");function fo(e){return e.xor(e.shru(47))}function po(e,t,n){var r=e.slice(t,t+n);return so.fromBytes(Array.from(r),!0,!0)}function vo(e,t){return po(e,t,8)}function mo(e,t){return po(e,t,4)}function go(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function yo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uo("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function bo(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=go(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(go(a,44)),[a.add(r),i.add(o)]}(vo(e,t),vo(e,t+8),vo(e,t+16),vo(e,t+24),n,r)}function xo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=ho.add(2*t),r=vo(e,0).add(ho),a=vo(e,t-8),i=go(a,37).mul(n).add(r),o=go(r,25).add(a).mul(n);return yo(i,o,n)}if(t>=4){var s=ho.add(2*t),u=mo(e,0);return yo(u.shl(3).add(t),mo(e,t-4),s)}if(t>0){var c=e[0],l=e[t>>1],h=e[t-1],f=c+(l<<8),d=t+(h<<2);return fo(ho.mul(f).xor(co.mul(d))).mul(ho)}return ho}function ko(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=ho.add(2*t),r=vo(e,0).mul(lo),a=vo(e,8),i=vo(e,t-8).mul(n),o=vo(e,t-16).mul(ho);return yo(go(r.add(a),43).add(go(i,30)).add(o),r.add(go(a.add(ho),18)).add(i),n)}function wo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=ho.add(2*t),r=vo(e,0).mul(ho),a=vo(e,8),i=vo(e,t-8).mul(n),o=vo(e,t-16).mul(ho),s=go(r.add(a),43).add(go(i,30)).add(o),u=yo(s,r.add(go(a.add(ho),18)).add(i),n),c=vo(e,16).mul(n),l=vo(e,24),h=s.add(vo(e,t-32)).mul(n),f=u.add(vo(e,t-24)).mul(n);return yo(go(c.add(l),43).add(go(h,30)).add(f),c.add(go(l.add(r),18)).add(h),n)}function So(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=so.fromNumber(81,!0);if(t<=32)return t<=16?xo(e,t):ko(e,t);if(t<=64)return wo(e,t);var r=n,a=n.mul(lo).add(113),i=fo(a.mul(ho).add(113)).mul(ho),o=[so.UZERO,so.UZERO],s=[so.UZERO,so.UZERO];r=r.mul(ho).add(vo(e,0));var u=0,c=64*(t-1>>6),l=c+(t-1&63)-63;do{r=go(r.add(a).add(o[0]).add(vo(e,u+8)),37).mul(lo),a=go(a.add(o[1]).add(vo(e,u+48)),42).mul(lo),r=r.xor(s[1]),a=a.add(o[0]).add(vo(e,u+40)),i=go(i.add(s[0]),33).mul(lo),o=bo(e,u,o[1].mul(lo),r.add(s[0])),s=bo(e,u+32,i.add(s[1]),a.add(vo(e,u+16)));var h=[r,i];i=h[0],r=h[1],u+=64}while(u!==c);var f=lo.add(i.and(255).shl(1));u=l,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=go(r.add(a).add(o[0]).add(vo(e,u+8)),37).mul(f),a=go(a.add(o[1]).add(vo(e,u+48)),42).mul(f),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(vo(e,u+40))),i=go(i.add(s[0]),33).mul(f),o=bo(e,u,o[1].mul(f),r.add(s[0])),s=bo(e,u+32,i.add(s[1]),a.add(vo(e,u+16)));var d=[r,i];return i=d[0],r=d[1],yo(yo(o[0],s[0],f).add(fo(a).mul(co)).add(i),yo(o[1],s[1],f).add(r),f)}function Eo(e,t){return"string"===t?Co(e):To([e],t)}function To(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Mn(e)),hr().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function _o(){return hr().platform.now()}function Co(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",hr().platform.encode(e,t)}function Io(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",hr().platform.decode(e,t)}var No=function(){function e(t,n){wn(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new Ao)}return En(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=_o();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=bn(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(h){u.e(h)}finally{u.f()}a=Promise.resolve({kernelMs:_o()-o})}if(hr().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var Ao=function(){function e(){wn(this,e)}return En(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?Vn("".concat(r,"ms"),9):r.error,s=Vn(e,25),u=t.rank,c=t.size,l=Vn(t.shape.toString(),14),h="";for(var f in a){var d=a[f];if(null!=d){var p=d.shape||t.shape,v=p.length;h+="".concat(f,": ").concat(v,"D ").concat(v>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(h,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function Ro(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],h=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),h=!0,a[s.id]=!0;break}if(h)break}}var d={};d[n.id]=!0;for(var p={},v=e.length-1;v>=0;v--)for(var m=e[v],g=m.inputs,y=0;y<m.outputs.length;y++)if(d[m.outputs[y].id]){for(var b in g)d[g[b].id]=!0,p[m.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&p[w.id]){var S={};for(var E in w.inputs){var T=w.inputs[E];r[T.id]&&(S[E]=T)}var _=Object.assign({},w);_.inputs=S,_.outputs=w.outputs,x.push(_)}}return x}function Oo(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!Ln(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=t.length-1;i>=0;i--)a(i)}function Do(e,t){return Do=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Do(e,t)}function Mo(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Do(e,t)}function Po(e){return Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Po(e)}function Lo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Fo(e){return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(e)}function Bo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vo(e,t){if(t&&("object"===Fo(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bo(e)}function Uo(e){var t=Lo();return function(){var n,r=Po(e);if(t){var a=Po(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Vo(this,n)}}function jo(e,t,n,r){var a=Jn(t),i=function(e,t,n,r){var a=Pn(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?Go(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,h=0;h<i;h++)o[h]=Math.max(o[h],zo(u[l+h],0,n).length);return o}(e,t,n,a),o=t.length,s=Ho(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function zo(e,t,n){return Vn(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):Xn(e)?"'".concat(e,"'"):"bool"===n?Wo(e):parseFloat(e.toFixed(7)).toString(),t)}function Wo(e){return 0===e?"false":"true"}function Ho(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=Go(e);return[zo(c[0],0,n)]}return"bool"===n?[Wo(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*o,h=Array.from(e.slice(0,l)),f=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(h=Go(h),f=Go(f)),["["+h.map((function(e,t){return zo(e,a[t],n)})).join(", ")+", ..., "+f.map((function(e,t){return zo(e,a[s-3+t],n)})).join(", ")+"]"]}var d="complex64"===n?Go(e):Array.from(e);return["["+d.map((function(e,t){return zo(e,a[t],n)})).join(", ")+"]"]}var p=t.slice(1),v=r.slice(1),m=r[0]*o,g=[];if(s>20){for(var y=0;y<3;y++){var b=y*m,x=b+m;g.push.apply(g,kn(Ho(e.slice(b,x),p,n,v,a,!1)))}g.push("...");for(var k=s-3;k<s;k++){var w=k*m,S=w+m;g.push.apply(g,kn(Ho(e.slice(w,S),p,n,v,a,k===s-1)))}}else for(var E=0;E<s;E++){var T=E*m,_=T+m;g.push.apply(g,kn(Ho(e.slice(T,_),p,n,v,a,E===s-1)))}var C=2===u?",":"";g[0]="["+g[0]+C;for(var I=1;I<g.length-1;I++)g[I]=" "+g[I]+C;for(var N=",\n",A=2;A<u;A++)N+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":N),g}function Go(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Ko=function(){function e(t,n,r){var a=this;if(wn(this,e),this.dtype=n,this.shape=t.slice(),this.size=Pn(t),null!=r){var i=r.length;Rn(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Hn(n,this.size),this.strides=Jn(t)}return En(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),Rn(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return qo().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),qo=null,Xo=null;var Yo=function(){function e(t,n,r,a){wn(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Pn(t),this.strides=Jn(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return En(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=vn(gn().mark((function e(){var t;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Xo.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return Xo.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=vn(gn().mark((function e(){var t;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",er(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return er(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=vn(gn().mark((function e(){var t,n;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=qo().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return Io(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),qo().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=qo().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Io(e)}))}catch(jU){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=vn(gn().mark((function e(){var t;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,qo().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(qo().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Xo.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),Xo.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return jo(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),Xo.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),qo().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(Yo,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),vr("Tensor",(function(){return Yo}));var $o,Qo,Jo,Zo,es,ts=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a,i){var o;return wn(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return En(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Ln(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));qo().disposeTensor(this),this.dataId=e.dataId,qo().incRef(this,null)}},{key:"dispose",value:function(){qo().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(Yo);Object.defineProperty(ts,Symbol.hasInstance,{value:function(e){return e instanceof Yo&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}($o||($o={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Qo||(Qo={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Jo||(Jo={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Zo||(Zo={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(es||(es={}));var ns={float32:Zo,int32:Qo,bool:Jo,complex64:es};function rs(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return ns[e][t]}function as(e){return rs(e,"int32")}function is(e,t){if(e.dtype===t.dtype)return[e,t];var n=rs(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function os(e,t){Rn(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function ss(e){var t=[];return us(e,t,new Set),t}function us(e,t,n){if(null!=e)if(e instanceof Yo)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),us(o,t,n))}}}function cs(e){return null!=e.kernelName}var ls=function(){function e(){wn(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return En(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),hs=function(){function e(t){wn(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ls}return En(e,[{key:"ready",value:function(){var e=vn(gn().mark((function e(){var t,n,r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Ji("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=vn(gn().mark((function e(t){var n,r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new No(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;ro(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;ro(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof _n||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,Ji("Initialization of backend ".concat(e," failed")),Ji(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return Ji("Initialization of backend ".concat(e," failed")),Ji(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=vs.runKernel(ya,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return vs.runKernel(Lr,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=to(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=cs(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(cs(e)){var l=e.kernelName,h=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var d=to(l,this.backendName);Rn(null!=d,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=d.kernelFunc({inputs:h,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(o){var s=a.getTensorsForGradient(l,h,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var p=e.forwardFunc,v=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return p(a.backend,v)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var m,g=e.inputs,y=e.attrs,b=cs(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(m=a.profiler.profileKernel(c,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(m),t=m.outputs):t=n()})),o&&this.addTapeNode(c,g,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=no(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(Rn(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&Xn(e[0])&&(a=e.map((function(e){return Co(e)})));var i=r.write(a,t,n),o=new Yo(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new Yo(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new ts(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*qn(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof ts||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*qn(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=vn(gn().mark((function e(t){var n,r,a,i,o;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,kn(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=bn(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=no(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=nr(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=ss(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Rn(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));Rn(i instanceof Yo,(function(){return"The result y returned by f() must be a tensor."}));var o=Ro(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?fs(i.shape):n,Oo(e,o,(function(e){return r.tidy(e)}),ms);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=bn(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return Rn($n(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;Rn(r.every((function(e){return e instanceof Yo})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return Rn((i=e.apply(void 0,[].concat(r,[n]))).value instanceof Yo,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Rn($n(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Rn(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Rn(a.every((function(e){return e instanceof Yo})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=vn(gn().mark((function e(t){var n,r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_o(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=_o()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ls,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function fs(e){var t=tr(Pn(e),"float32");return vs.makeTensor(t,e,"float32")}function ds(){var e=pr();if(null==e._tfengine){var t=new ur(e);e._tfengine=new hs(t)}return function(e){dr=e}(e._tfengine.ENV),function(e){qo=e}((function(){return e._tfengine})),e._tfengine}hs.nextTensorId=0,hs.nextVariableId=0;var ps,vs=ds();function ms(e,t){var n={a:e,b:t};return vs.runKernel(br,n)}function gs(e){if(void 0!==ps)return ps;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function ys(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var bs=hr();function xs(e,t){var n=e;if(Kn(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Kn(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&hr().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&ks(e,r,[]),r}function ks(e,t,n){if(n=n||[],Array.isArray(e)||Kn(e)){Rn(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Rn(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)ks(e[a],r,n.concat(a))}else Rn(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function ws(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function Ss(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Yo)return ws(r,e.dtype,t,n),e;var a=Yn(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),ws(r,a,t,n),null==e||!Kn(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=xs(e,a);Kn(e)||Array.isArray(e)||(e=[e]);var s=!0,u="string"!==a?To(e,a):Mn(e,[],s);return vs.makeTensor(u,o,a)}function Es(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return Ss(e,"".concat(t,"[").concat(a,"]"),n,r)}))}bs.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),bs.registerFlag("IS_BROWSER",(function(){return ys()})),bs.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),bs.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),bs.registerFlag("PROD",(function(){return!1})),bs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return bs.getBool("DEBUG")})),bs.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),bs.registerFlag("IS_TEST",(function(){return!1})),bs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),bs.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1}));var Ts="__op";function _s(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Ts;var a=function(){vs.startScope(n);try{var e=r.apply(void 0,arguments);return or(e)&&console.error("Cannot return a Promise inside of tidy."),vs.endScope(e),e}catch(t){throw vs.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var Cs=_s({complex_:function(e,t){var n=Ss(e,"real","complex"),r=Ss(t,"imag","complex");On(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return vs.runKernel(Vr,a)}});function Is(e,t,n,r){if(null==r&&(r=Yn(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Kn(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){rr(t);var a=Pn(t),i=Pn(n);Rn(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==Pn(t.slice(o));Rn(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Kn(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?To(e,r):Mn(e,[],!0),vs.makeTensor(e,t,r)}function Ns(e,t,n){return Is(e,t,xs(e,n),n)}var As={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function Rs(e,t){var n,r,a={},i=0,o=bn(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,h=Pn(l),f=void 0;if("quantization"in s){var d=s.quantization;if("uint8"===d.dtype||"uint16"===d.dtype){if(!("min"in d)||!("scale"in d))throw new Error("Weight ".concat(s.name," with quantization ").concat(d.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==d.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(d.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(d.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var p=As[d.dtype],v=e.slice(i,i+h*p),m="uint8"===d.dtype?new Uint8Array(v):new Uint16Array(v);if("float32"===c)if("uint8"===d.dtype||"uint16"===d.dtype){f=new Float32Array(m.length);for(var g=0;g<m.length;g++){var y=m[g];f[g]=y*d.scale+d.min}}else{if("float16"!==d.dtype)throw new Error("Unsupported quantization type ".concat(d.dtype," ")+"for weight type float32.");void 0===n&&(n=js()),f=n(m)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==d.dtype&&"uint16"!==d.dtype)throw new Error("Unsupported quantization type ".concat(d.dtype," ")+"for weight type int32.");f=new Int32Array(m.length);for(var b=0;b<m.length;b++){var x=m[b];f[b]=Math.round(x*d.scale+d.min)}}i+=h*p}else if("string"===c){var k=Pn(s.shape);f=[];for(var w=0;w<k;w++){var S=new Uint32Array(e.slice(i,i+4))[0];i+=4;var E=new Uint8Array(e.slice(i,i+S));f.push(E),i+=S}}else{var T=As[c],_=e.slice(i,i+h*T);if("float32"===c)f=new Float32Array(_);else if("int32"===c)f=new Int32Array(_);else if("bool"===c)f=new Uint8Array(_);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));f=new Float32Array(_);for(var C=new Float32Array(f.length/2),I=new Float32Array(f.length/2),N=0;N<C.length;N++)C[N]=f[2*N],I[N]=f[2*N+1];var A=Ns(C,l,"float32"),R=Ns(I,l,"float32");a[u]=Cs(A,R),A.dispose(),R.dispose()}i+=h*T}"complex64"!==c&&(a[u]=Ns(f,l,c))}}catch(O){o.e(O)}finally{o.f()}return a}var Os="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function Ds(e){return Os?Buffer.byteLength(e):new Blob([e]).size}function Ms(e){if(Os)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function Ps(e){if(Os){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function Ls(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Fs(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Bs(e,t){return Vs.apply(this,arguments)}function Vs(){return Vs=vn(gn().mark((function e(t,n){var r,a,i,o,s;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,i=bt(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),Vs.apply(this,arguments)}function Us(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Ds(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Ds(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function js(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var zs=function(){function e(){wn(this,e),this.saveRouters=[],this.loadRouters=[]}return En(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),Ws="tensorflowjs",Hs="models_store",Gs="model_info_store";function Ks(){if(!hr().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function qs(e){var t=e.result;t.createObjectStore(Hs,{keyPath:"modelPath"}),t.createObjectStore(Gs,{keyPath:"modelPath"})}var Xs=function(){function e(t){if(wn(this,e),this.indexedDB=Ks(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return En(e,[{key:"save",value:function(){var e=vn(gn().mark((function e(t){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=vn(gn().mark((function e(){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(Ws,1);a.onupgradeneeded=function(){return qs(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(Hs,"readonly"),s=o.objectStore(Hs).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=Us(t),l=i.transaction(Gs,"readwrite"),h=l.objectStore(Gs),f=h.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=i.transaction(Hs,"readwrite")).objectStore(Hs).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(h=l.objectStore(Gs)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},f.onerror=function(e){return i.close(),r(f.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();Xs.URL_SCHEME="indexeddb://";var Ys=function(e){return hr().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Xs.URL_SCHEME)?(t=e.slice(Xs.URL_SCHEME.length),new Xs(t)):null;var t};zs.registerSaveRouter(Ys),zs.registerLoadRouter(Ys);var $s=function(){function e(){wn(this,e),this.indexedDB=Ks()}return En(e,[{key:"listModels",value:function(){var e=vn(gn().mark((function e(){var t=this;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(Ws,1);r.onupgradeneeded=function(){return qs(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(Gs,"readonly"),i=a.objectStore(Gs).getAll();i.onsuccess=function(){var t,n={},r=bn(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=vn(gn().mark((function e(t){var n=this;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(Xs.URL_SCHEME)?r.slice(Xs.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(Ws,1);a.onupgradeneeded=function(){return qs(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(Gs,"readwrite"),s=o.objectStore(Gs),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(Hs,"readwrite")).objectStore(Hs).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Qs="/",Js="tensorflowjs_models",Zs="info",eu="model_topology",tu="weight_specs",nu="weight_data",ru="model_metadata";function au(e){return{info:[Js,e,Zs].join(Qs),topology:[Js,e,eu].join(Qs),weightSpecs:[Js,e,tu].join(Qs),weightData:[Js,e,nu].join(Qs),modelMetadata:[Js,e,ru].join(Qs)}}function iu(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function ou(e){var t=e.split(Qs);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(Qs)}var su=function(){function e(t){if(wn(this,e),!hr().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=au(this.modelPath)}return En(e,[{key:"save",value:function(){var e=vn(gn().mark((function e(t){var n,r,a,i;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Us(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Ms(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),iu(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=vn(gn().mark((function e(){var t,n,r,a,i,o,s;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Ps(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();su.URL_SCHEME="localstorage://";var uu=function(e){return hr().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(su.URL_SCHEME)?(t=e.slice(su.URL_SCHEME.length),new su(t)):null;var t};zs.registerSaveRouter(uu),zs.registerLoadRouter(uu);var cu=function(){function e(){wn(this,e),Rn(hr().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Rn("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return En(e,[{key:"listModels",value:function(){var e=vn(gn().mark((function e(){var t,n,r,a,i,o;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=Js+Qs,r=Qs+Zs,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=ou(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=vn(gn().mark((function e(t){var n,r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(su.URL_SCHEME)?a.slice(su.URL_SCHEME.length):a,n=au(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),iu(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),lu="://",hu=function(){function e(){wn(this,e),this.managers={}}return En(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Rn(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(lu)&&(t=t.slice(0,t.indexOf(lu))),Rn(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Rn(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();var fu=function(){function e(){wn(this,e)}return En(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(hr().get("IS_BROWSER")){hr().setPlatform("browser",new fu);try{hu.registerManager(su.URL_SCHEME,new cu)}catch(BZ){}try{hu.registerManager(Xs.URL_SCHEME,new $s)}catch(BZ){}}var du,pu=function(){return n(410)};var vu=function(){function e(){wn(this,e),this.util=n(628),this.textEncoder=new this.util.TextEncoder}return En(e,[{key:"fetch",value:function(e,t){return null!=hr().global.fetch?hr().global.fetch(e,t):(null==du&&(du=pu()),du(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function mu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",rr(e),new Ko(e,t,n)}hr().get("IS_NODE")&&hr().setPlatform("node",new vu);var gu=_s({cast_:function(e,t){var n=Ss(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return vs.runKernel(Lr,r,a)}});var yu=_s({clone_:function(e){var t={x:Ss(e,"x","clone","string_or_numeric")};return vs.runKernel(ya,t)}});function bu(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}ds(),Xo={buffer:mu,cast:gu,clone:yu,print:bu};function xu(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var ku=function(){function e(t){if(wn(this,e),!hr().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return En(e,[{key:"save",value:function(){var e=vn(gn().mark((function e(t){var n,r,a,i,o,s;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Fs(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,xu((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,xu((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:Us(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ku.URL_SCHEME="downloads://";function wu(e,t,n,r){!function(e){Rn(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Rn(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Rn(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Rn(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function Su(e,t){return Eu.apply(this,arguments)}function Eu(){return(Eu=vn(gn().mark((function e(t,n){var r,a,i,o,s,u,c,l,h;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?hr().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,wu(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,wu(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return h=e.t1,e.abrupt("return",h);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}zs.registerSaveRouter((function(e){return hr().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ku.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new ku(e)}(e.slice(ku.URL_SCHEME.length)):null}));var Tu=function(){function e(t,n){if(wn(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Rn("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=hr().platform.fetch,Rn(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Rn(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return En(e,[{key:"save",value:function(){var e=vn(gn().mark((function e(t){var n,r,a,i;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Fs(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:Us(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=vn(gn().mark((function e(){var t,n,r,a,i,o=this;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",Bs(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=vn(gn().mark((function e(t){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,m,g,y,b,x;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=_u(n),a=bt(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],c=bn(t);try{for(c.s();!(l=c.n()).done;)h=l.value,u.push.apply(u,kn(h.weights))}catch(BZ){c.e(BZ)}finally{c.f()}f=[],d=[],p=bn(t);try{for(p.s();!(v=p.n()).done;){m=v.value,g=bn(m.paths);try{for(g.s();!(y=g.n()).done;)b=y.value,null!=this.weightUrlConverter?d.push(this.weightUrlConverter(b)):f.push(s+b+o)}catch(BZ){g.e(BZ)}finally{g.f()}}}catch(BZ){p.e(BZ)}finally{p.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=f.push,e.t1=f,e.t2=kn,e.next=16,Promise.all(d);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,Su(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return x=e.sent,e.abrupt("return",[u,Ls(x)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function _u(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Cu(e){return null!=e.match(Tu.URL_SCHEME_REGEX)}Tu.URL_SCHEME_REGEX=/^https?:\/\//;var Iu=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return Cu(e)})):Cu(e))?Nu(e,t):null};function Nu(e,t){return new Tu(e,t)}function Au(e,t){return Nu(e,t)}zs.registerSaveRouter(Iu),zs.registerLoadRouter(Iu);var Ru;function Ou(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function Du(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function Mu(e,t,n){if(Dn(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=xs(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Is(e,t,r,n)}function Pu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){var u=2;if(a&&e.readyState<u)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var c=to(qi,vs.backendName);if(null!=c){var l={pixels:e},h={numChannels:t};return vs.runKernel(qi,l,h)}var f,d,p=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],v=bt(p,2),m=v[0],g=v[1];if(o)f=e.getContext("2d").getImageData(0,0,m,g).data;else if(r||n)f=e.data;else if(i||a||s){if(null==Ru)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Ru=new OffscreenCanvas(1,1).getContext("2d")}else Ru=document.createElement("canvas").getContext("2d");Ru.canvas.width=m,Ru.canvas.height=g,Ru.drawImage(e,0,0,m,g),f=Ru.getImageData(0,0,m,g).data}if(4===t)d=new Int32Array(f);else{var y=m*g;d=new Int32Array(y*t);for(var b=0;b<y;b++)for(var x=0;x<t;++x)d[b*t+x]=f[4*b+x]}var k=[g,m,t];return Mu(d,k,"int32")}var Lu=_s({fromPixels_:Pu});function Fu(e,t,n){var r=e.shape.length;Rn(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),Rn(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){Rn(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function Bu(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Vu(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Uu(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat(kn(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){Rn(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat(kn(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(Rn(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function ju(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,h={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},f=0;f<h.dims;f++)l&&0!==(1<<f&s)&&h.numAddAxisAfterEllipsis++,1<<f&o&&(l=!0);l||(h.ellipsisMask|=1<<h.dims,h.dims++);var d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(h,d);for(var p=!0,v=!0,m=!0,g=[],y=[],b=0;b<e.length;++b){if(0===d.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(d.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var w=[d.beginMask&1<<b,d.endMask&1<<b],S=[d.strides[b]>0?0:-1,d.strides[b]>0?k:k-1];if(x&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[b];var E=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(x){var T=d.begin[b]<0?k+d.begin[b]:d.begin[b];if(d.begin[b]=T,d.end[b]=d.begin[b]+1,T<0||T>=k)throw Error("slice index ".concat(d.begin[b]," of dimension ").concat(b," out of bounds."))}else d.begin[b]=zu(d.begin[b],0,d.strides[b],k,w,S),d.end[b]=zu(d.end[b],1,d.strides[b],k,w,S);var _=1===d.strides[b]&&0===d.begin[b]&&d.end[b]===k;p=p&&_,v=v&&(0===b&&1===d.strides[b]||_)}else p=p&&1===d.strides[b]&&E,v=v&&(0===b&&1===d.strides[b]||E);var C=void 0,I=!1;if(d.beginValid&&d.endValid?(C=d.end[b]-d.begin[b],I=!0):x?(C=1,I=!0):E&&k>=0&&(C=d.strides[b]<0?-k:k,I=!0),I){var N=void 0;N=0===C||C<0!==d.strides[b]<0?0:Math.trunc(C/d.strides[b])+(C%d.strides[b]!==0?1:0),g.push(N)}else g.push(-1)}else g.push(x?1:-1)}for(var A=0;A<d.finalShapeGatherIndices.length;++A){var R=d.finalShapeGatherIndices[A];R>=0?y.push(g[R]):-2===R&&y.push(1)}var O=y.filter((function(e,t){return-2!==d.finalShapeGatherIndices[t]}));return{finalShapeSparse:O,finalShape:y,isIdentity:p,sliceDim0:v,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function zu(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var Wu=_s({abs_:function(e){var t=Ss(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return vs.runKernel(Ur,n)}var r={x:t};return vs.runKernel(mr,r)}});var Hu=_s({acos_:function(e){var t={x:Ss(e,"x","acos")};return vs.runKernel(gr,t)}});var Gu=_s({acosh_:function(e){var t={x:Ss(e,"x","acosh")};return vs.runKernel(yr,t)}});var Ku=_s({add_:function(e,t){var n=Ss(e,"a","add"),r=Ss(t,"b","add"),a=bt(is(n,r),2),i={a:n=a[0],b:r=a[1]};return vs.runKernel(br,i)}});var qu=_s({addN_:function(e){Rn(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Rn(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return Ss(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Ln(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return vs.runKernel(xr,r)}});var Xu=_s({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ss(e,"x","all","bool"),a={x:r},i={axis:t,keepDims:n};return vs.runKernel(kr,a,i)}});var Yu=_s({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ss(e,"x","any","bool"),a={x:r},i={axis:t,keepDims:n};return vs.runKernel(wr,a,i)}});var $u=_s({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ss(e,"x","argMax"),r={x:n},a={axis:t};return vs.runKernel(Sr,r,a)}});var Qu=_s({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ss(e,"x","argMin"),r={x:n},a={axis:t};return vs.runKernel(Er,r,a)}});var Ju=_s({asin_:function(e){var t={x:Ss(e,"x","asin")};return vs.runKernel(Tr,t)}});var Zu=_s({asinh_:function(e){var t={x:Ss(e,"x","asinh")};return vs.runKernel(_r,t)}});var ec=_s({atan_:function(e){var t={x:Ss(e,"x","atan")};return vs.runKernel(Cr,t)}});var tc=_s({atan2_:function(e,t){var n=Ss(e,"a","atan2"),r=Ss(t,"b","atan2"),a=bt(is(n,r),2),i={a:n=a[0],b:r=a[1]};return vs.runKernel(Nr,i)}});var nc=_s({atanh_:function(e){var t={x:Ss(e,"x","atanh")};return vs.runKernel(Ir,t)}});function rc(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=uc(t),c=bt(u,2),l=c[0],h=c[1];if("channelsLast"===s)o=[l,h,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[l,h,e[1],e[1]]}return ic(e,o,n,r,a,i,!1,s)}function ac(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=cc(t),l=bt(c,3),h=l[0],f=l[1],d=l[2];if("NDHWC"===u)s="channelsLast",o=[h,f,d,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[h,f,d,e[1],e[1]]}return oc(e,o,n,r,a,!1,s,i)}function ic(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,h=-1;if("channelsLast"===s){var f=bt(e,4);u=f[0],c=f[1],l=f[2],h=f[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var d=bt(e,4);u=d[0],h=d[1],c=d[2],l=d[3]}var p,v=bt(t,4),m=v[0],g=v[1],y=v[3],b=uc(n),x=bt(b,2),k=x[0],w=x[1],S=uc(r),E=bt(S,2),T=E[0],_=E[1],C=lc(m,T),I=lc(g,_),N=hc(a,c,l,k,w,C,I,i,s),A=N.padInfo,R=N.outHeight,O=N.outWidth,D=o?y*h:y;return"channelsFirst"===s?p=[u,D,R,O]:"channelsLast"===s&&(p=[u,R,O,D]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:h,outHeight:R,outWidth:O,outChannels:D,padInfo:A,strideHeight:k,strideWidth:w,filterHeight:m,filterWidth:g,effectiveFilterHeight:C,effectiveFilterWidth:I,dilationHeight:T,dilationWidth:_,inShape:e,outShape:p,filterShape:t}}function oc(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,h=-1,f=-1;if("channelsLast"===o){var d=bt(e,5);u=d[0],c=d[1],l=d[2],h=d[3],f=d[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var p=bt(e,5);u=p[0],f=p[1],c=p[2],l=p[3],h=p[4]}var v,m=bt(t,5),g=m[0],y=m[1],b=m[2],x=m[4],k=cc(n),w=bt(k,3),S=w[0],E=w[1],T=w[2],_=cc(r),C=bt(_,3),I=C[0],N=C[1],A=C[2],R=lc(g,I),O=lc(y,N),D=lc(b,A),M=fc(a,c,l,h,S,E,T,R,O,D,s),P=M.padInfo,L=M.outDepth,F=M.outHeight,B=M.outWidth,V=i?x*f:x;return"channelsFirst"===o?v=[u,V,L,F,B]:"channelsLast"===o&&(v=[u,L,F,B,V]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:h,inChannels:f,outDepth:L,outHeight:F,outWidth:B,outChannels:V,padInfo:P,strideDepth:S,strideHeight:E,strideWidth:T,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:R,effectiveFilterHeight:O,effectiveFilterWidth:D,dilationDepth:I,dilationHeight:N,dilationWidth:A,inShape:e,outShape:v,filterShape:t}}function sc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=lc(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function uc(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function cc(e){return"number"===typeof e?[e,e,e]:e}function lc(e,t){return t<=1?e:e+(e-1)*(t-1)}function hc(e,t,n,r,a,i,o,s,u){var c,l,h;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=sc(e,t,n));var i=e[0],o=e[1];return[dc((i-t+2*r)/n+1,a),dc((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=f[0],h=f[1]}else if("same"===e){l=Math.ceil(t/r),h=Math.ceil(n/a);var d=Math.max(0,(l-1)*r+i-t),p=Math.max(0,(h-1)*a+o-n),v=Math.floor(d/2),m=d-v,g=Math.floor(p/2);c={top:v,bottom:m,left:g,right:p-g,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),h=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],k="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:k,type:0===y&&0===b&&0===x&&0===k?"VALID":"EXPLICIT"},l=dc((t-i+y+b)/r+1,s),h=dc((n-o+x+k)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:h}}function fc(e,t,n,r,a,i,o,s,u,c,l){var h,f,d,p;if("number"===typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,i){null==a&&(a=sc(e,t,r));var o=e[0],s=e[1],u=e[2];return[dc((o-t+2*a)/r+1,i),dc((s-t+2*a)/r+1,i),dc((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,l);f=v[0],d=v[1],p=v[2]}else if("same"===e){var m=((f=Math.ceil(t/a))-1)*a+s-t,g=((d=Math.ceil(n/i))-1)*i+u-n,y=((p=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(m/2),x=m-b,k=Math.floor(g/2),w=g-k,S=Math.floor(y/2);h={top:k,bottom:w,left:S,right:y-S,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),d=Math.ceil((n-u+1)/i),p=Math.ceil((r-c+1)/o)}return{padInfo:h,outDepth:f,outHeight:d,outWidth:p}}function dc(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function pc(e){var t=bt(uc(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function vc(e,t){return pc(e)||pc(t)}function mc(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function gc(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)Rn(Fn(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){Rn(Fn(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var yc=_s({reshape_:function(e,t){var n={x:Ss(e,"x","reshape","string_or_numeric")},r={shape:t};return vs.runKernel(oi,n,r)}});var bc=_s({avgPool_:function(e,t,n,r,a){var i=Ss(e,"x","avgPool","float32");Rn(vc(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=yc(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Rn(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),gc("avgPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=vs.runKernel(Ar,u,c);return l=gu(l,i.dtype),s?yc(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var xc=_s({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Ss(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=yc(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Rn(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Rn("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),gc("avgPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},h=vs.runKernel(Rr,c,l);return h=gu(h,s.dtype),u?yc(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var kc=_s({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Rn(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Es(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return yu(n[0]);var r=n,a={axis:t};return vs.runKernel(jr,r,a)}});var wc=_s({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Ss(e,"a","matMul"),i=Ss(t,"b","matMul"),o=is(a,i),s=bt(o,2),u={a:a=s[0],b:i=s[1]},c={transposeA:n,transposeB:r};return vs.runKernel(Or,u,c)}});var Sc=_s({mul_:function(e,t){var n=Ss(e,"a","mul"),r=Ss(t,"b","mul"),a=bt(is(n,r),2),i={a:n=a[0],b:r=a[1]};return vs.runKernel(Ha,i)}});var Ec=_s({sigmoid_:function(e){var t={x:Ss(e,"x","sigmoid","float32")};return vs.runKernel(bi,t)}});var Tc=_s({slice_:function(e,t,n){var r=Ss(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return vs.runKernel(mi,a,i)}});var _c=_s({tanh_:function(e){var t={x:Ss(e,"x","tanh","float32")};return vs.runKernel(Fi,t)}});var Cc=_s({basicLSTMCell_:function(e,t,n,r,a,i){var o=Ss(e,"forgetBias","basicLSTMCell"),s=Ss(t,"lstmKernel","basicLSTMCell"),u=Ss(n,"lstmBias","basicLSTMCell"),c=Ss(r,"data","basicLSTMCell"),l=Ss(a,"c","basicLSTMCell"),h=Ss(i,"h","basicLSTMCell"),f=kc([c,h],1),d=wc(f,s),p=Ku(d,u),v=p.shape[0],m=p.shape[1]/4,g=[v,m],y=Tc(p,[0,0],g),b=Tc(p,[0,m],g),x=Tc(p,[0,2*m],g),k=Tc(p,[0,3*m],g),w=Ku(Sc(Ec(y),_c(b)),Sc(l,Ec(Ku(o,x))));return[w,Sc(_c(w),Ec(k))]}});var Ic=_s({batchToSpaceND_:function(e,t,n){var r=Ss(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));Rn(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),Rn(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),Rn(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return vs.runKernel(Dr,i,o)}});var Nc=_s({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=Ss(e,"x","batchNorm"),c=Ss(t,"mean","batchNorm"),l=Ss(n,"variance","batchNorm");null!=a&&(o=Ss(a,"scale","batchNorm")),null!=r&&(s=Ss(r,"offset","batchNorm")),Rn(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Rn(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Rn(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var h=function(e){return 0===e.rank||1===e.rank?yc(e,[1,1,1,e.size]):2===e.rank?yc(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?yc(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),f={x:h,scale:o,offset:s,mean:c,variance:l},d={varianceEpsilon:i},p=vs.runKernel(da,f,d);return yc(p,u.shape)}});var Ac=_s({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=Ss(e,"x","batchNorm"),c=Ss(t,"mean","batchNorm"),l=Ss(n,"variance","batchNorm");return null!=a&&(o=Ss(a,"scale","batchNorm")),null!=r&&(s=Ss(r,"offset","batchNorm")),Rn(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),Rn(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),Rn(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Rn(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Rn(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),Nc(u,c,l,s,o,i)}});var Rc=_s({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=Ss(e,"x","batchNorm"),c=Ss(t,"mean","batchNorm"),l=Ss(n,"variance","batchNorm");return null!=a&&(o=Ss(a,"scale","batchNorm")),null!=r&&(s=Ss(r,"offset","batchNorm")),Rn(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),Rn(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),Rn(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Rn(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Rn(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),Nc(u,c,l,s,o,i)}});var Oc=_s({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=Ss(e,"x","batchNorm"),c=Ss(t,"mean","batchNorm"),l=Ss(n,"variance","batchNorm");return null!=a&&(o=Ss(a,"scale","batchNorm")),null!=r&&(s=Ss(r,"offset","batchNorm")),Rn(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),Rn(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),Rn(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Rn(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Rn(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),Nc(u,c,l,s,o,i)}});var Dc=_s({bincount_:function(e,t,n){var r=Ss(e,"x","bincount"),a=Ss(t,"weights","bincount");Rn("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),Rn(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Rn(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return vs.runKernel(Mr,i,o)}});var Mc=_s({broadcastArgs_:function(e,t){var n=Ss(e,"s0","broadcastArgs","int32"),r=Ss(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return vs.runKernel(Pr,a)}});var Pc=_s({broadcastTo_:function(e,t){var n=Ss(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=yc(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return yu(n);var c={x:n},l={reps:o};return vs.runKernel(Bi,c,l)}});var Lc=_s({ceil_:function(e){var t={x:Ss(e,"x","ceil","float32")};return vs.runKernel(Fr,t)}});var Fc=_s({clipByValue_:function(e,t,n){var r=Ss(e,"x","clipByValue");Rn(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var a={x:r},i={clipValueMin:t,clipValueMax:n};return vs.runKernel(Br,a,i)}});var Bc=_s({concat1d_:function(e){return kc(e,0)}});var Vc=_s({concat2d_:function(e,t){return kc(e,t)}});var Uc=_s({concat3d_:function(e,t){return kc(e,t)}});var jc=_s({concat4d_:function(e,t){return kc(e,t)}});var zc=_s({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Ss(e,"x","conv2d","float32"),u=Ss(t,"filter","conv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=yc(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Rn(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),Rn(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),gc("conv2d",r,o);var h="NHWC"===a?c.shape[3]:c.shape[1];Rn(h===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(h,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),Rn(vc(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var f={x:c,filter:u},d={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=vs.runKernel(zr,f,d);return l?yc(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Wc=_s({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=Ss(e,"x","conv1d"),u=Ss(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=yc(s,[1,s.shape[0],s.shape[1]])),Rn(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),Rn(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),gc("conv1d",r,o),Rn(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),Rn(vc(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),Rn("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var h=yc(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=yc(c,[c.shape[0],1,c.shape[1],c.shape[2]]),d=[1,n],p=[1,i],v="NHWC",m=zc(f,h,d,r,v,p,o);return yc(m,l?[m.shape[2],m.shape[3]]:[m.shape[0],m.shape[2],m.shape[3]])}});var Hc=_s({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;Rn(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=yc(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Rn(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),Rn(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),Rn(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],h="NHWC"===i?u.shape[3]:u.shape[1];Rn(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),Rn(h===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),gc("conv2dDerInput",a,o);var f={dy:u,filter:n},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},p=vs.runKernel(Hr,f,d);return c?yc(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Gc=_s({conv2dTranspose_:function(e,t,n,r,a,i){var o=Ss(e,"x","conv2dTranspose"),s=Ss(t,"filter","conv2dTranspose");return Hc(n,o,s,r,a,"NHWC",i)}});var Kc=_s({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=Ss(e,"x","conv3d"),s=Ss(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=yc(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Rn(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),Rn(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),Rn(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),Rn(vc(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),Rn("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l={x:u,filter:s},h={strides:n,pad:r,dataFormat:a,dilations:i},f=vs.runKernel(Gr,l,h);return c?yc(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var qc=_s({conv3DBackpropInput_:function(e,t,n,r,a){Rn(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=yc(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];Rn(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),Rn(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),Rn(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),Rn(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),Rn(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l={dy:o,filter:n},h={pad:a,strides:r,inputShape:i},f=vs.runKernel(Kr,l,h);return s?yc(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var Xc=_s({conv3dTranspose_:function(e,t,n,r,a){var i=Ss(e,"x","conv3dTranspose"),o=Ss(t,"filter","conv3dTranspose");return qc(n,i,o,r,a)}});var Yc=_s({cos_:function(e){var t={x:Ss(e,"x","cos","float32")};return vs.runKernel("Cos",t)}});var $c=_s({cosh_:function(e){var t={x:Ss(e,"x","cosh","float32")};return vs.runKernel(qr,t)}});var Qc=_s({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Ss(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return vs.runKernel(Xr,i,o)}});var Jc=_s({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Ss(e,"x","denseBincount"),i=Ss(t,"weights","denseBincount");Rn("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),Rn(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),Rn(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Rn(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return vs.runKernel($r,o,s)}});var Zc=_s({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=Ss(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];Rn(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),Rn(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),Rn(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),Rn(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return vs.runKernel(Qr,s,u)}});var el=_s({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Ss(e,"x","depthwiseConv2d","float32"),u=Ss(t,"filter","depthwiseConv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=yc(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Rn(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),Rn(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),Rn(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(c.shape[3],") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),gc("depthwiseConv2d",r,o);var h={x:c,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},d=vs.runKernel(Jr,h,f);return l?yc(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var tl=_s({diag_:function(e){var t={x:Ss(e,"x","diag")};return vs.runKernel(ta,t)}});var nl=_s({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=Ss(e,"x","dilation2d"),s=Ss(t,"filter","dilation2d");Rn(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),Rn(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),Rn("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=yc(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0);var l={x:u,filter:s},h={strides:n,pad:r,dilations:a},f=vs.runKernel(na,l,h);return c?yc(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var rl=_s({floorDiv_:function(e,t){var n=Ss(e,"a","floorDiv"),r=Ss(t,"b","floorDiv"),a=bt(is(n,r),2),i={a:n=a[0],b:r=a[1]};return vs.runKernel(fa,i)}});var al=_s({div_:function(e,t){var n=Ss(e,"a","div"),r=Ss(t,"b","div"),a=bt(is(n,r),2);if(n=a[0],r=a[1],"int32"===n.dtype&&"int32"===r.dtype)return rl(n,r);var i={a:n,b:r};return vs.runKernel(ra,i,{})}});var il=_s({equal_:function(e,t){var n=Ss(e,"a","equal","string_or_numeric"),r=Ss(t,"b","equal","string_or_numeric"),a=bt(is(n,r),2);n=a[0],r=a[1],Du(n.shape,r.shape);var i={a:n,b:r};return vs.runKernel(ia,i)}});var ol=_s({where_:function(e,t,n){var r=Ss(t,"a","where"),a=Ss(n,"b","where"),i=Ss(e,"condition","where","bool"),o=Du(Du(i.shape,r.shape),a.shape),s={condition:Pc(i,o),t:Pc(r,o),e:Pc(a,o)};return vs.runKernel(pi,s)}});var sl=_s({zerosLike_:function(e){var t={x:Ss(e,"x","zerosLike")};return vs.runKernel(Gi,t)}});var ul=_s({divNoNan_:function(e,t){var n=Ss(e,"a","div"),r=Ss(t,"b","div"),a=bt(is(n,r),2);n=a[0],r=a[1];var i=al(n,r),o=sl(i),s=il(r,o);return ol(s,o,i)}});var cl=_s({dot_:function(e,t){var n=Ss(e,"t1","dot"),r=Ss(t,"t2","dot");Rn((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(Rn(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=yc(n,[1,-1]),s=yc(r,[-1,1]),u=wc(o,s);return yc(u,[])}if(1===n.rank&&2===r.rank){var c=yc(n,[1,-1]),l=yc(r,[r.shape[0],r.shape[1]]),h=wc(c,l);return yc(h,[h.size])}if(2===n.rank&&1===r.rank){var f=yc(r,[-1,1]),d=wc(n,f);return yc(d,[d.size])}var p=yc(r,[r.shape[0],r.shape[1]]);return wc(n,p)}});var ll=_s({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return Ss(e,"tensors".concat(t),"einsum")})),i={equation:e};return vs.runKernel(aa,a,i)}});var hl=_s({elu_:function(e){var t={x:Ss(e,"x","elu","float32")};return vs.runKernel("Elu",t)}});var fl=_s({erf_:function(e){var t=Ss(e,"x","erf");Rn("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=gu(t,"float32"));var n={x:t};return vs.runKernel("Erf",n)}});var dl=_s({exp_:function(e){var t={x:Ss(e,"x","exp")};return vs.runKernel(oa,t)}});var pl=_s({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ss(e,"x","expandDims","string_or_numeric");Rn(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return vs.runKernel(sa,r,a)}});var vl=_s({expm1_:function(e){var t={x:Ss(e,"x","expm1")};return vs.runKernel(ua,t)}});var ml=_s({tile_:function(e,t){var n=Ss(e,"x","tile","string_or_numeric");Rn(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return vs.runKernel(Bi,r,a)}});var gl=_s({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=mu([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=yc(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return ml(pl(s,0),[n[0],1,1]);if(2===n.length)return ml(pl(pl(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return ml(pl(pl(pl(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});function yl(e,t,n){var r={shape:e,value:t,dtype:n};return vs.runKernel(ca,{},r)}var bl=_s({floor_:function(e){var t={x:Ss(e,"x","floor","float32")};return vs.runKernel(ha,t)}});var xl=_s({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Ss(e,"x","gather"),i=Ss(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return vs.runKernel(pa,o,s)}});var kl=_s({greater_:function(e,t){var n=Ss(e,"a","greater","string_or_numeric"),r=Ss(t,"b","greater","string_or_numeric"),a=bt(is(n,r),2);n=a[0],r=a[1],Du(n.shape,r.shape);var i={a:n,b:r};return vs.runKernel(ma,i)}});var wl=_s({greaterEqual_:function(e,t){var n=Ss(e,"a","greaterEqual","string_or_numeric"),r=Ss(t,"b","greaterEqual","string_or_numeric"),a=bt(is(n,r),2);n=a[0],r=a[1],Du(n.shape,r.shape);var i={a:n,b:r};return vs.runKernel(ga,i)}});var Sl=_s({imag_:function(e){var t={input:Ss(e,"input","imag")};return vs.runKernel(xa,t)}});var El=_s({isFinite_:function(e){var t={x:Ss(e,"x","isFinite")};return vs.runKernel(ka,t)}});var Tl=_s({isInf_:function(e){var t={x:Ss(e,"x","isInf")};return vs.runKernel(wa,t)}});var _l=_s({isNaN_:function(e){var t={x:Ss(e,"x","isNaN")};return vs.runKernel(Sa,t)}});var Cl=_s({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=Ss(e,"x","leakyRelu"),r={x:n},a={alpha:t};return vs.runKernel(Ea,r,a)}});var Il=_s({less_:function(e,t){var n=Ss(e,"a","less","string_or_numeric"),r=Ss(t,"b","less","string_or_numeric"),a=bt(is(n,r),2);n=a[0],r=a[1],Du(n.shape,r.shape);var i={a:n,b:r};return vs.runKernel(Ta,i)}});var Nl=_s({lessEqual_:function(e,t){var n=Ss(e,"a","lessEqual","string_or_numeric"),r=Ss(t,"b","lessEqual","string_or_numeric"),a=bt(is(n,r),2);n=a[0],r=a[1],Du(n.shape,r.shape);var i={a:n,b:r};return vs.runKernel(_a,i)}});function Al(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return vs.runKernel(Ca,{},r)}var Rl=_s({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=Ss(e,"x","localResponseNormalization");Rn(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),Rn(Fn(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=yc(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},l=vs.runKernel(Da,u,c);return s?yc(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var Ol=_s({log_:function(e){var t={x:Ss(e,"x","log","float32")};return vs.runKernel(Ia,t)}});var Dl=_s({log1p_:function(e){var t={x:Ss(e,"x","log1p")};return vs.runKernel(Na,t)}});function Ml(e){return vs.customGrad(e)}var Pl=_s({neg_:function(e){var t={x:Ss(e,"x","neg")};return vs.runKernel(Ga,t)}});var Ll=_s({softplus_:function(e){var t={x:Ss(e,"x","softplus")};return vs.runKernel(xi,t)}});var Fl=_s({logSigmoid_:function(e){var t=Ss(e,"x","logSigmoid"),n=Ml((function(e){return{value:Pl(Ll(Pl(e))),gradFunc:function(t){return Sc(t,Ec(Pl(e)))}}}));return n(t)}});var Bl=_s({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ss(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return vs.runKernel(Ma,a,i)}});var Vl=_s({sub_:function(e,t){var n=Ss(e,"a","sub"),r=Ss(t,"b","sub"),a=bt(is(n,r),2),i={a:n=a[0],b:r=a[1]};return vs.runKernel(Li,i)}});var Ul=_s({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ss(e,"x","sum");"bool"===r.dtype&&(r=gu(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return vs.runKernel(wi,a,i)}});var jl=_s({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Ss(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=Ml((function(e,n){var r=Bl(e,t,!0),a=Vl(e,r),i=Vl(gu(a,"float32"),Ol(Ul(dl(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=bt(n,1)[0],a=dl(r);return Vl(e,Sc(Ul(e,t,!0),a))}}}));return r(n)}});function zl(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Wl(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function Hl(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function Gl(e,t,n){Rn(zl(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Kl(e,t){if(zl(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function ql(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Xl(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var Yl=_s({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ss(e,"x","logSumExp"),a=jn(t,r.shape),i=Bl(r,a,!0),o=Vl(r,i),s=dl(o),u=Ul(s,a),c=Ol(u),l=Ku(yc(i,c.shape),c);if(n){var h=Hl(l.shape,a);return yc(l,h)}return l}});var $l=_s({logicalAnd_:function(e,t){var n=Ss(e,"a","logicalAnd","bool"),r=Ss(t,"b","logicalAnd","bool");Du(n.shape,r.shape);var a={a:n,b:r};return vs.runKernel(Aa,a)}});var Ql=_s({logicalNot_:function(e){var t={x:Ss(e,"x","logicalNot","bool")};return vs.runKernel(Ra,t)}});var Jl=_s({logicalOr_:function(e,t){var n=Ss(e,"a","logicalOr","bool"),r=Ss(t,"b","logicalOr","bool");Du(n.shape,r.shape);var a={a:n,b:r};return vs.runKernel(Oa,a)}});var Zl=_s({logicalXor_:function(e,t){var n=Ss(e,"a","logicalXor","bool"),r=Ss(t,"b","logicalXor","bool");return Du(n.shape,r.shape),$l(Jl(e,t),Ql($l(e,t)))}});var eh=_s({maxPool_:function(e,t,n,r,a){var i=Ss(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=yc(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Rn(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),Rn(vc(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),gc("maxPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=vs.runKernel(La,u,c);return s?yc(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var th=_s({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Ss(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=yc(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Rn(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Rn("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),gc("maxPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},h=vs.runKernel(Fa,c,l);return u?yc(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var nh=_s({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=Ss(e,"x","maxPoolWithArgmax"),o={x:i},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},u=vs.runKernel(Ba,o,s);return{result:u[0],indexes:u[1]}}});var rh=_s({maximum_:function(e,t){var n=Ss(e,"a","maximum"),r=Ss(t,"b","maximum"),a=bt(is(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=gu(n,"int32"),r=gu(r,"int32")),Du(n.shape,r.shape);var i={a:n,b:r};return vs.runKernel(Pa,i)}});var ah=_s({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ss(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return vs.runKernel(Va,a,i)}});function ih(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=ih(e,"float32"),r=ih(e,"float32");return Cs(n,r)}var a=nr(Pn(e),t);return vs.makeTensor(a,e,t)}function oh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=oh(e,"float32"),r=ih(e,"float32");return Cs(n,r)}var a=tr(Pn(e),t);return vs.makeTensor(a,e,t)}function sh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=Ss(e,"x","meshgrid",e instanceof Yo?e.dtype:"float32");if(void 0===t)return[i];var o=Ss(t,"y","meshgrid",t instanceof Yo?t.dtype:"float32"),s=Pn(i.shape),u=Pn(o.shape);return"xy"===a?(i=yc(i,[1,-1]),o=yc(o,[-1,1]),[wc(oh([u,1],i.dtype),i),wc(o,oh([1,s],o.dtype))]):(i=yc(i,[-1,1]),o=yc(o,[1,-1]),[wc(i,oh([1,u],i.dtype)),wc(oh([s,1],o.dtype),o)])}var uh=_s({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ss(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return vs.runKernel(Ua,a,i)}});var ch=_s({minimum_:function(e,t){var n=Ss(e,"a","minimum"),r=Ss(t,"b","minimum"),a=bt(is(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=gu(n,"int32"),r=gu(r,"int32")),Du(n.shape,r.shape);var i={a:n,b:r};return vs.runKernel(ja,i)}});var lh=_s({mirrorPad_:function(e,t,n){Rn("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=Ss(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Rn(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){Rn(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Rn(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return vs.runKernel(za,u,s)}});var hh=_s({mod_:function(e,t){var n=Ss(e,"a","mod"),r=Ss(t,"b","mod"),a=bt(is(n,r),2),i={a:n=a[0],b:r=a[1]};return vs.runKernel("Mod",i)}});var fh=_s({square_:function(e){var t=Ss(e,"x","square");return vs.runKernel("Square",{x:t},{})}});var dh=_s({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jn(t,(e=Ss(e,"x","moments")).shape),a=ah(e,r,n),i=a.shape;n||(i=Hl(a.shape,r));var o=fh(Vl(gu(e,"float32"),yc(a,i))),s=ah(o,r,n);return{mean:a,variance:s}}});var ph=_s({multiRNNCell_:function(e,t,n,r){for(var a=Ss(t,"data","multiRNNCell"),i=Es(n,"c","multiRNNCell"),o=Es(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var h=[],f=[],d=0;d<u.length;d+=2)h.push(u[d]),f.push(u[d+1]);return[h,f]}});var vh=_s({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Ss(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s=1===o?yc(a,[1,-1]):a,u={logits:s},c={numSamples:t,seed:n,normalized:r},l=vs.runKernel(Wa,u,c);return 1===o?yc(l,[l.size]):l}});var mh=_s({notEqual_:function(e,t){var n=Ss(e,"a","notEqual","string_or_numeric"),r=Ss(t,"b","notEqual","string_or_numeric"),a=bt(is(n,r),2);n=a[0],r=a[1],Du(n.shape,r.shape);var i={a:n,b:r};return vs.runKernel(Ka,i)}});var gh=_s({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a=Ss(e,"indices","oneHot","int32"),i={indices:a},o={depth:t,onValue:n,offValue:r};return vs.runKernel(Qa,i,o)}});var yh=_s({onesLike_:function(e){var t={x:Ss(e,"x","onesLike")};return vs.runKernel($a,t)}});var bh=_s({outerProduct_:function(e,t){var n=Ss(e,"v1","outerProduct"),r=Ss(t,"v2","outerProduct");Rn(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=yc(n,[-1,1]),i=yc(r,[1,-1]);return wc(a,i)}});var xh=_s({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Ss(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return vs.runKernel(Za,i,a)}});var kh=_s({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Rn(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),xh(e,[t],n)}});var wh=_s({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Rn(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),xh(e,t,n)}});var Sh=_s({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Rn(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),xh(e,t,n)}});var Eh=_s({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Rn(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),xh(e,t,n)}});var Th=_s({spaceToBatchND_:function(e,t,n){var r=Ss(e,"x","spaceToBatchND");Rn(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),Rn(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),Rn(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return vs.runKernel(Si,a,i)}});var _h=_s({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=Ss(e,"x","maxPool"),u=s,c=!1;3===s.rank&&(c=!0,u=yc(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Rn(vc(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var l,h=rc(u.shape,t,i,a,r),f=[h.dilationHeight,h.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([h.filterHeight,h.filterWidth],f):[[0,0],[0,0]];var d=1===f[0]&&1===f[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([h.inHeight,h.inWidth],f,l),v=bt(p,2),m=v[0],g=v[1],y=d?r:"valid",b=d?u:Th(u,f,m),x=("avg"===n?function(){return bc(b,t,i,y,o)}:function(){return eh(b,t,i,y,o)})(),k=d?x:Ic(x,f,g);return c?yc(k,[k.shape[1],k.shape[2],k.shape[3]]):k}});var Ch=_s({pow_:function(e,t){var n=Ss(e,"base","pow"),r=Ss(t,"exp","pow"),a=bt(is(n,r),2),i={a:n=a[0],b:r=a[1]};return vs.runKernel("Pow",i)}});var Ih=_s({prelu_:function(e,t){var n={x:Ss(e,"x","prelu"),alpha:Ss(t,"alpha","prelu")};return vs.runKernel(ei,n)}});var Nh=_s({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ss(e,"x","prod");"bool"===r.dtype&&(r=gu(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return vs.runKernel(ti,a,i)}});var Ah=_s({rand_:function(e,t,n){var r=Pn(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return vs.makeTensor(a,e,n)}}),Rh=n(699),Oh=function(){function e(t,n,r,a,i){wn(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Rh.alea(o.toString())}return En(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Dh=function(){function e(t,n,r,a){wn(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=Rh.alea(i.toString()),this.randn=new Oh(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return En(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),Mh=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(wn(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=Rh.alea(i)}return En(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var Ph=_s({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Dh(t,n,r,a),o=mu(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Lh=_s({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new Oh(t,n,r,!1,a),o=mu(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Fh=_s({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=mu(e,r),o=new Mh(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});function Bh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return vs.runKernel(ni,{},a)}var Vh=_s({real_:function(e){var t={input:Ss(e,"input","real")};return vs.runKernel(ri,t)}});var Uh=_s({reciprocal_:function(e){var t={x:Ss(e,"x","reciprocal")};return vs.runKernel(ai,t)}});var jh=_s({relu_:function(e){var t={x:Ss(e,"x","relu")};return vs.runKernel(ii,t)}});var zh=_s({relu6_:function(e){var t={x:Ss(e,"x","relu6")};return vs.runKernel(ci,t)}});var Wh=_s({reverse_:function(e,t){var n={x:Ss(e,"x","reverse")},r={dims:t};return vs.runKernel(li,n,r)}});var Hh=_s({reverse1d_:function(e){var t=Ss(e,"x","reverse");return Rn(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),Wh(t,0)}});var Gh=_s({reverse2d_:function(e,t){var n=Ss(e,"x","reverse");return Rn(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),Wh(n,t)}});var Kh=_s({reverse3d_:function(e,t){var n=Ss(e,"x","reverse");return Rn(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),Wh(n,t)}});var qh=_s({reverse4d_:function(e,t){var n=Ss(e,"x","reverse");return Rn(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),Wh(n,t)}});var Xh=_s({round_:function(e){var t={x:Ss(e,"x","round")};return vs.runKernel(hi,t)}});var Yh=_s({rsqrt_:function(e){var t={x:Ss(e,"x","rsqrt","float32")};return vs.runKernel(fi,t)}});function $h(e,t){if((Kn(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Kn(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Is(e,[],[],t)}var Qh=_s({selu_:function(e){var t={x:Ss(e,"x","selu")};return vs.runKernel(vi,t)}});var Jh=_s({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=Ss(e,"x","separableConv2d"),u=Ss(t,"depthwiseFilter","separableConv2d"),c=Ss(n,"pointwiseFilter","separableConv2d"),l=s,h=!1;if(3===s.rank&&(h=!0,l=yc(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Rn(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),Rn(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Rn(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Rn(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),Rn(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var f=u.shape[2],d=u.shape[3];Rn(c.shape[2]===f*d,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(f*d,", ")+"but got ".concat(c.shape[2],".")}));var p=el(l,u,r,a,o,i),v=1,m=zc(p,c,v,"valid",o);return h?yc(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function Zh(){return Zh=vn(gn().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ss(t,"x","setdiff1d"),a=Ss(n,"y","setdiff1d"),Rn(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),Rn(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),Rn(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,s=new Set(o),u=0,c=0;c<i.length;c++)s.has(i[c])||u++;for(l=new Ko([u],r.dtype),h=new Ko([u],"int32"),f=0,d=0;f<i.length;f++)s.has(i[f])||(l.values[d]=i[f],h.values[d]=f,d++);return e.abrupt("return",[l.toTensor(),h.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),Zh.apply(this,arguments)}var ef=function(e,t){return Zh.apply(this,arguments)};var tf=_s({sign_:function(e){var t={x:Ss(e,"x","sign")};return vs.runKernel(yi,t)}});var nf=_s({sin_:function(e){var t={x:Ss(e,"x","sin","float32")};return vs.runKernel("Sin",t)}});var rf=_s({sinh_:function(e){var t={x:Ss(e,"x","sinh")};return vs.runKernel(gi,t)}});var af=_s({slice1d_:function(e,t,n){var r=Ss(e,"x","slice1d");return Rn(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Tc(r,[t],[n])}});var of=_s({slice2d_:function(e,t,n){var r=Ss(e,"x","slice2d");return Rn(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Tc(r,t,n)}});var sf=_s({slice3d_:function(e,t,n){var r=Ss(e,"x","slice3d");return Rn(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Tc(r,t,n)}});var uf=_s({slice4d_:function(e,t,n){var r=Ss(e,"x","slice4d");return Rn(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Tc(r,t,n)}});var cf=_s({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Ss(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return vs.runKernel(Ti,r,a)}});var lf=_s({fft_:function(e){Rn("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return vs.runKernel("FFT",t)}});var hf=_s({ifft_:function(e){Rn("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return vs.runKernel(ba,t)}});var ff=_s({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=yc(e,[r,n]);t=hf(a)}else{var i=[r,2*(n-1)],o=yc(Vh(e),[r,n]),s=yc(Sl(e),[r,n]),u=Wh(Tc(o,[0,1],[r,n-2]),1),c=Sc(Wh(Tc(s,[0,1],[r,n-2]),1),$h(-1)),l=kc([o,u],1),h=kc([s,c],1),f=yc(Cs(l,h),[i[0],i[1]]);t=hf(f)}if(t=Vh(t),3===e.rank&&0!==e.shape[0]){var d=t,p=e.shape[0];t=yc(t,[p,t.shape[0]/p,t.shape[1]]),d.dispose()}return t}});var df=_s({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Ss(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return vs.runKernel(Ei,a,i)}});var pf=_s({rfft_:function(e,t){Rn("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Tc(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=kc([e,ih(s)],e.shape.length-1),r=t}else n=e;var u=sl(n),c=yc(Cs(n,u),[a,r]),l=lf(c),h=Math.floor(r/2)+1,f=Vh(l),d=Sl(l),p=df(f,[h,r-h],f.shape.length-1),v=df(d,[h,r-h],d.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=h,yc(Cs(p[0],v[0]),m)}});var vf=_s({sqrt_:function(e){var t={x:Ss(e,"x","sqrt","float32")};return vs.runKernel(ki,t)}});var mf=_s({squaredDifference_:function(e,t){var n=Ss(e,"a","squaredDifference"),r=Ss(t,"b","squaredDifference"),a=bt(is(n,r),2);n=a[0],r=a[1],Du(n.shape,r.shape);var i={a:n,b:r};return vs.runKernel(Ri,i,{})}});var gf=_s({squeeze_:function(e,t){var n=Ss(e,"x","squeeze");return yc(n,zn(n.shape,t).newShape)}});var yf=_s({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Es(e,"tensors","stack","string_or_numeric");Rn(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&Rn(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return vs.runKernel(Ja,r,a)}});var bf=_s({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ss(e,"x","step"),r={x:n},a={alpha:t};return vs.runKernel(Ki,r,a)}});var xf=_s({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=Ss(e,"x","stridedSlice","string_or_numeric"),l={x:c},h={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return vs.runKernel(Oi,l,h)}});var kf=_s({tan_:function(e){var t={x:Ss(e,"x","tan","float32")};return vs.runKernel("Tan",t)}});function wf(e,t){Dn(e);var n=xs(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Is(e,null,n,t)}function Sf(e,t,n){if(Dn(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=xs(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Is(e,t,r,n)}function Ef(e,t,n){if(Dn(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=xs(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Is(e,t,r,n)}function Tf(e,t,n){if(Dn(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=xs(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Is(e,t,r,n)}function _f(e,t,n){if(Dn(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=xs(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Is(e,t=t||r,r,n)}var Cf=_s({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Ss(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=vs.runKernel(Vi,i,o),u=bt(s,2),c=u[0],l=u[1];return{values:c,indices:l}}});var If=_s({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new Oh(t,n,r,!0,a),o=mu(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Nf=_s({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ss(e,"x","unique","string_or_numeric");Rn(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=vs.runKernel(zi,r,a),o=bt(i,2),s=o[0],u=o[1];return{values:s,indices:u}}});var Af=_s({unsortedSegmentSum_:function(e,t,n){var r=Ss(e,"x","unsortedSegmentSum"),a=Ss(t,"segmentIds","unsortedSegmentSum","int32");Rn(Fn(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return vs.runKernel(Hi,i,o)}});var Rf=_s({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ss(e,"x","unstack","string_or_numeric");Rn(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return vs.runKernel(Wi,r,a)}});function Of(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return vs.makeVariable(e,t,n,r)}function Df(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=mu(e,"int32"),i=mu([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function Mf(){return(Mf=vn(gn().mark((function e(t){var n,r,a;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ss(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=Df(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pf=function(e){return Mf.apply(this,arguments)};function Lf(){return Lf=vn(gn().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,m;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Ss(t,"tensor","boolMask"),i=Ss(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,Rn(s>0,(function(){return"mask cannot be scalar"})),On(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+s;l++)c*=u[l];return h=u.slice(0,o).concat([c],u.slice(o+s)),f=yc(a,h),d=yc(i,[-1]),e.next=14,Pf(d);case 14:return p=e.sent,v=gf(p,[1]),m=xl(f,v,o),t!==a&&a.dispose(),n!==i&&i.dispose(),v.dispose(),f.dispose(),d.dispose(),p.dispose(),e.abrupt("return",m);case 24:case"end":return e.stop()}}),e)}))),Lf.apply(this,arguments)}var Ff=function(e,t,n){return Lf.apply(this,arguments)};var Bf=_s({transpose_:function(e,t){var n=Ss(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Rn(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){Rn(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return vs.runKernel(ji,r,a)}});function Vf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Wu(e);if(1!==e.rank&&null===n)return Vf(yc(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Ul(Wu(e),n);if(t===1/0)return Bl(Wu(e),n);if(t===-1/0)return uh(Wu(e),n);if("euclidean"===t||2===t)return vf(Ul(Ch(Wu(e),$h(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Bl(Ul(Wu(e),n[0]),n[1]-1);if(t===1/0)return Bl(Ul(Wu(e),n[1]),n[0]);if(t===-1/0)return uh(Ul(Wu(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return vf(Ul(fh(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Uf=_s({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Vf(e=Ss(e,"x","norm"),t,n),i=a.shape;if(r){var o=jn(n,e.shape);i=Hl(a.shape,o)}return yc(a,i)}});var jf=_s({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Ss(e,"v","movingAverage"),o=Ss(t,"x","movingAverage"),s=Ss(n,"decay","movingAverage");os(i,o),Rn(Ln(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=$h(1),c=Vl(u,s),l=Sc(Vl(o,i),c);if(a){Rn(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var h=Ss(r,"step","movingAverage");l=al(l,Vl(u,Ch(s,h)))}return Ku(i,l)}});function zf(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}(n,t,e)}function Wf(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Pn(t.shape)/u,sliceSize:o,strides:[].concat(kn(Jn(n.slice(0,a))),[1]),outputSize:Pn(n)}}var Hf=_s({scatterND_:function(e,t,n){var r=Ss(e,"indices","scatterND","int32"),a=Ss(t,"updates","scatterND");zf(a,r,n);var i={indices:r,updates:a},o={shape:n};return vs.runKernel(di,i,o)}});function Gf(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var Kf=_s({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Ss(e,"sparseIndices","sparseToDense","int32"),i=Ss(t,"sparseValues","sparseToDense"),o=Ss(r,"defaultValue","sparseToDense",i.dtype);Gf(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return vs.runKernel(Ai,s,u)}});var qf=_s({gatherND_:function(e,t){var n=Ss(t,"indices","gatherND","int32"),r={params:Ss(e,"x","gatherND","string_or_numeric"),indices:n};return vs.runKernel(va,r)}});var Xf=_s({dropout_:function(e,t,n,r){var a=Ss(e,"x","dropout");if(Rn("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),Rn(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Yo?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(Ln(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=al(bl(Ku(Fh(i,0,1,"float32",r),o)),o);return Sc(a,s)}});function Yf(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function $f(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return wf(a,"float32")}function Qf(){return Qf=vn(gn().mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d,p,v,m,g,y=arguments;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=Ss(t,"predictions","inTopK"),i=Ss(n,"targets","inTopK"),Rn(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),Rn(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),On(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],Rn(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:u=e.sent,c=s.length/o,l=o,h=Wn("bool",c),f=0;case 17:if(!(f<c)){e.next=35;break}for(d=f*l,p=s.subarray(d,d+l),v=[],m=0;m<p.length;m++)v.push({value:p[m],index:m});v.sort((function(e,t){return t.value-e.value})),h[f]=0,g=0;case 25:if(!(g<r)){e.next=32;break}if(v[g].index!==u[f]){e.next=29;break}return h[f]=1,e.abrupt("break",32);case 29:g++,e.next=25;break;case 32:f++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",Ns(h,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),Qf.apply(this,arguments)}var Jf=function(e,t){return Qf.apply(this,arguments)};var Zf=_s({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=yc(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=yc(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Rn(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),Rn(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),Rn(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];Rn(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),Rn(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),gc("conv2dDerFilter",a,o);var h={x:s,dy:u},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return vs.runKernel(Wr,h,f)}});function ed(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Sc(e,bf(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function td(e,t){var n=t,r=function(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}(e.shape,t.shape);return r.length>0&&(n=Ul(n,r)),yc(n,e.shape)}function nd(e,t,n,r){if("linear"===t)return e;if("relu"===t)return jh(e);if("elu"===t)return hl(e);if("relu6"===t)return zh(e);if("prelu"===t)return Ih(e,n);if("leakyrelu"===t)return Cl(e,r);if("sigmoid"===t)return Ec(e);throw new Error("Unknown fused activation ".concat(t,"."))}var rd=function(e,t){return!(e>0)||"linear"===t};var ad=_s({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,h=e.activation,f=void 0===h?"linear":h,d=e.preluActivationWeights,p=e.leakyreluAlpha;if(f=f||"linear",!1===rd(vs.state.gradientDepth,f)){var v=zc(t,n,r,a,o,u,c);return null!=l&&(v=Ku(v,l)),nd(v,f,d,p)}var m=Ss(t,"x","conv2d","float32"),g=Ss(n,"filter","conv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=yc(m,[1,m.shape[0],m.shape[1],m.shape[2]])),Rn(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),Rn(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),gc("fused conv2d",a,c),Rn(y.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input (".concat(y.shape[3],") must match ")+"input depth for filter ".concat(g.shape[2],".")})),Rn(vc(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")})),Rn("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var x,k,w=ic(y.shape,g.shape,r,u,a,c);null!=l&&(x=bt(is(x=Ss(l,"bias","fused conv2d"),m),1)[0],Du(w.outShape,x.shape)),null!=d&&(k=Ss(d,"prelu weights","fused conv2d"));var S=function(e,t){var n=bt(t,4),i=n[0],o=n[1],s=n[2],c=n[3],l=ed(e,s,f);Rn(pc(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var h=[Hc(o.shape,l,i,r,a),Zf(o,l,i.shape,r,a)];if(null!=c){var d=td(c,l);h.push(d)}return h},E={x:y,filter:g,bias:x,preluActivationWeights:k},T={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:p};if(null==l){var _=Ml((function(e,t,n){var r=vs.runKernel($i,E,T);return n([t,e,r]),b&&(r=yc(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:S}}));return _(y,g)}var C=Ml((function(e,t,n,r){var a=vs.runKernel($i,E,T);return r([t,e,a,n]),b&&(a=yc(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:S}}));return C(y,g,x)}});var id=_s({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=yc(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=yc(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return vs.runKernel(Zr,c,l)}});var od=_s({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=yc(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},h=vs.runKernel(ea,c,l);return u?yc(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var sd=_s({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,h=e.activation,f=void 0===h?"linear":h,d=e.preluActivationWeights,p=e.leakyreluAlpha;if(!1===rd(vs.state.gradientDepth,f)){var v=el(t,n,r,a,o,u,c);return null!=l&&(v=Ku(v,l)),nd(v,f,d,p)}var m=Ss(t,"x","depthwiseConv2d","float32"),g=Ss(n,"filter","depthwiseConv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=yc(m,[1,m.shape[0],m.shape[1],m.shape[2]])),Rn(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),Rn(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(g.rank,".")})),Rn(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(g.shape[2],".")})),null==u&&(u=[1,1]),Rn(vc(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),gc("fused depthwiseConv2d",a,c);var x,k,w=ic(y.shape,g.shape,r,u,a,c,!0);if(null!=l){var S=bt(is(x=Ss(l,"bias","fused conv2d"),m),1);x=S[0],Du(w.outShape,x.shape)}null!=d&&(k=Ss(d,"prelu weights","fused depthwiseConv2d"));var E=function(e,t){Rn(pc(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=bt(t,4),i=n[0],o=n[1],s=n[2],l=n[3],h=ed(e,s,f),d=od(o.shape,h,i,r,a,u,c),p=id(o,h,i.shape,r,a,u,c);return null!=l?[d,p,td(x,h)]:[d,p]},T={x:y,filter:g,bias:x,preluActivationWeights:k},_={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:p};if(null==l){var C=Ml((function(e,t,n){var r=vs.runKernel(Qi,T,_);return n([t,e,r]),b&&(r=yc(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:E}}));return C(y,g)}var I=Ml((function(e,t,n,r){var a=vs.runKernel(Qi,T,_);return r([t,e,a,n]),b&&(a=yc(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:E}}));return I(y,g,x)}});var ud=_s({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,h=e.leakyreluAlpha;if(!1===rd(vs.state.gradientDepth,c)){var f=wc(t,n,a,o);return null!=s&&(f=Ku(f,s)),nd(f,c,l,h)}var d=Ss(t,"a","fused matMul"),p=Ss(n,"b","fused matMul"),v=bt(is(d,p),2);d=v[0],p=v[1];var m=a?d.shape[d.rank-2]:d.shape[d.rank-1],g=o?p.shape[p.rank-1]:p.shape[p.rank-2],y=a?d.shape[d.rank-1]:d.shape[d.rank-2],b=o?p.shape[p.rank-2]:p.shape[p.rank-1],x=d.shape.slice(0,-2),k=p.shape.slice(0,-2),w=Pn(x),S=Pn(k);Rn(m===g,(function(){return"Error in fused matMul: inner shapes (".concat(m,") and (")+"".concat(g,") of Tensors with shapes ").concat(d.shape," and ")+"".concat(p.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var E,T,_=Du(d.shape.slice(0,-2),p.shape.slice(0,-2)).concat([y,b]),C=yc(d,a?[w,m,y]:[w,y,m]),I=yc(p,o?[S,b,g]:[S,g,b]);null!=s&&(E=bt(is(E=Ss(s,"bias","fused matMul"),d),1)[0],Du(_,E.shape)),null!=l&&(T=Ss(l,"prelu weights","fused matMul"));var N=function(e,t){var n,r,i=bt(t,4),u=i[0],l=i[1],h=i[2],f=i[3],d=ed(yc(e,h.shape),h,c);return a||o?!a&&o?(n=wc(d,l,!1,!1),r=wc(d,u,!0,!1)):a&&!o?(n=wc(l,d,!1,!0),r=wc(u,d,!1,!1)):(n=wc(l,d,!0,!0),r=wc(d,u,!0,!0)):(n=wc(d,l,!1,!0),r=wc(u,d,!0,!1)),null!=s?[n,r,td(f,d)]:[n,r]},A={a:C,b:I,bias:E,preluActivationWeights:T},R={transposeA:a,transposeB:o,activation:c,leakyreluAlpha:h};if(null==s){var O=Ml((function(e,t,n){var r=vs.runKernel(Yi,A,R);return n([e,t,r]),{value:yc(r,_),gradFunc:N}}));return O(C,I)}var D=Ml((function(e,t,n,r){var a=vs.runKernel(Yi,A,R);return r([e,t,a,n]),{value:yc(a,_),gradFunc:N}}));return D(C,I,E)}});var cd=_s({hammingWindow_:function(e){return $f(e,.54,.46)}});var ld=_s({hannWindow_:function(e){return $f(e,.5,.5)}});var hd=_s({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Tc(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=kc([Tc(e,i,t-s),yl([s],a)]);o.push(u),i+=n}return 0===o.length?Sf([],[0,t]):yc(kc(o),[o.length,t])}});var fd=_s({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ld;null==r&&(r=Yf(t));var i=hd(e,t,n),o=Sc(i,a(t));return pf(o,r)}});var dd=_s({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Ss(e,"image","cropAndResize"),s=Ss(t,"boxes","cropAndResize","float32"),u=Ss(n,"boxInd","cropAndResize","int32"),c=s.shape[0];Rn(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Rn(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),Rn(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),Rn(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),Rn(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),Rn("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},h={method:a,extrapolationValue:i,cropSize:r},f=vs.runKernel(Yr,l,h);return f}});var pd=_s({flipLeftRight_:function(e){var t=Ss(e,"image","flipLeftRight","float32");Rn(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return vs.runKernel(la,n,{})}});var vd=_s({grayscaleToRGB_:function(e){var t=Ss(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Rn(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),Rn(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,ml(t,a)}});var md=_s({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Ss(e,"image","rotateWithOffset","float32");Rn(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=vs.runKernel(Xi,i,o);return s}});function gd(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),Rn(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),Rn(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),Rn(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),Rn(1===t.rank,(function(){return"scores must be a 1D tensor"})),Rn(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),Rn(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var yd=_s({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Ss(e,"boxes","nonMaxSuppression","float32"),o=Ss(t,"scores","nonMaxSuppression","float32"),s=gd(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return vs.runKernel(qa,{boxes:i,scores:o},u)}});function bd(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||xd)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function xd(e,t){return e>t?1:e<t?-1:0}function kd(e,t,n,r,a){return Ed(e,t,n,r,a,0)}function wd(e,t,n,r,a,i){return Ed(e,t,n,r,a,0,!1,i,!0)}function Sd(e,t,n,r,a,i){return Ed(e,t,n,r,a,i,!0)}function Ed(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(Cd);for(var h=i>0?-.5/i:0,f=[],d=[];f.length<n&&c.length>0;){var p=c.pop(),v=p.score,m=p.boxIndex,g=p.suppressBeginIndex;if(v<a)break;for(var y=!1,b=f.length-1;b>=g;--b){var x=Td(e,m,f[b]);if(x>=r){y=!0;break}if(p.score=p.score*_d(r,h,x),p.score<=a)break}p.suppressBeginIndex=f.length,y||(p.score===v?(f.push(m),d.push(p.score)):p.score>a&&bd(c,p,Cd))}var k=f.length,w=n-k;s&&w>0&&(f.push.apply(f,kn(new Array(w).fill(0))),d.push.apply(d,kn(new Array(w).fill(0))));var S={selectedIndices:f};return o&&(S.selectedScores=d),u&&(S.validOutputs=k),S}function Td(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),d=(s-i)*(u-o),p=(h-c)*(f-l);if(d<=0||p<=0)return 0;var v=Math.max(i,c),m=Math.max(o,l),g=Math.min(s,h),y=Math.min(u,f),b=Math.max(g-v,0)*Math.max(y-m,0);return b/(d+p-b)}function _d(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Cd(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Id(){return Id=vn(gn().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p=arguments;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=Ss(t,"boxes","nonMaxSuppressionAsync"),s=Ss(n,"scores","nonMaxSuppressionAsync"),u=gd(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return c=e.sent,l=c[0],h=c[1],f=kd(l,h,r,a,i),d=f.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",wf(d,"int32"));case 17:case"end":return e.stop()}}),e)}))),Id.apply(this,arguments)}var Nd=function(e,t,n){return Id.apply(this,arguments)};var Ad=_s({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Ss(e,"boxes","nonMaxSuppression"),s=Ss(t,"scores","nonMaxSuppression"),u=gd(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},h=vs.runKernel(Ya,c,l);return{selectedIndices:h[0],selectedScores:h[1]}}});function Rd(){return Rd=vn(gn().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,m=arguments;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,s=Ss(t,"boxes","nonMaxSuppressionAsync"),u=Ss(n,"scores","nonMaxSuppressionAsync"),c=gd(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return l=e.sent,h=l[0],f=l[1],d=Sd(h,f,r,a,i,o),p=d.selectedIndices,v=d.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:wf(p,"int32"),selectedScores:wf(v)});case 19:case"end":return e.stop()}}),e)}))),Rd.apply(this,arguments)}var Od=function(e,t,n){return Rd.apply(this,arguments)};var Dd=_s({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Ss(e,"boxes","nonMaxSuppression"),s=Ss(t,"scores","nonMaxSuppression"),u=gd(o,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,h=u.scoreThreshold,f={boxes:o,scores:s},d={maxOutputSize:c,iouThreshold:l,scoreThreshold:h,padToMaxOutputSize:i},p=vs.runKernel(Xa,f,d);return{selectedIndices:p[0],validOutputs:p[1]}}});function Md(){return Md=vn(gn().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,m,g,y,b,x=arguments;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],s=Ss(t,"boxes","nonMaxSuppressionAsync"),u=Ss(n,"scores","nonMaxSuppressionAsync"),c=gd(s,u,r,a,i,null),l=c.maxOutputSize,h=c.iouThreshold,f=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return d=e.sent,p=bt(d,2),v=p[0],m=p[1],g=wd(v,m,l,h,f,o),y=g.selectedIndices,b=g.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:wf(y,"int32"),validOutputs:$h(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),Md.apply(this,arguments)}var Pd=function(e,t,n){return Md.apply(this,arguments)};function Ld(e){return vt(e)||xn(e)||gt(e)||yt()}var Fd=_s({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Ss(e,"images","resizeBilinear");Rn(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Rn(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),Rn(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=yc(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Ld(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=vs.runKernel(ui,s,u);return o?yc(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Bd=_s({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Ss(e,"images","resizeNearestNeighbor");Rn(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Rn(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),Rn("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),Rn(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=yc(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Ld(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=vs.runKernel(si,s,u);return o?yc(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});function Vd(e,t){for(var n,r,a,i,o,s,u=wf([-1]),c=wf([0]),l=wf([0]),h=0;h<e.size-1;h++){n=Tc(e,0,h+1),r=Tc(e,h+1),o=al(Ul(n),t),s=al(Ul(r),t);var f=Ul(Sc(n,Bh(0,n.size)));a=al(f,Ul(n));var d=yl(r.shape,n.size),p=Ku(Bh(0,r.size),d),v=Sc(r,p);i=al(Ul(v),Ul(r));var m=Vl(a,i),g=Vl(a,i),y=Sc(o,s);l=Sc(Sc(y,m),g);var b=kl(l,c);c=ol(b,l,c),u=ol(b,wf([h]),u)}return u}var Ud=_s({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=Ss(e,"image","threshold"),c=.2989,l=.587,h=.114,f=u.shape[0]*u.shape[1],d=Sc(wf([s]),255);if(Rn(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),Rn(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),Rn("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),Rn("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var p=df(u,[1,1,1],-1),v=bt(p,3);t=v[0],n=v[1],r=v[2];var m=Sc(t,c),g=Sc(n,l),y=Sc(r,h);a=Ku(Ku(m,g),y)}else a=e;if("otsu"===i){var b=Dc(gu(Xh(a),"int32"),Ns([]),256);d=Vd(b,f)}var x=o?Nl(a,d):kl(a,d),k=gu(Sc(x,255),"int32");return k}});var jd=_s({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=Ss(e,"image","transform","float32"),s=Ss(t,"transforms","transform","float32");Rn(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Rn(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),Rn(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return vs.runKernel(Ui,u,c)}});var zd=_s({bandPart_:function(e,t,n){Rn(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Rn(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=Ss(e,"a","bandPart");Rn(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=bt(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=o),n<0&&(n=s);var u=yc(Bh(0,o,1,"int32"),[-1,1]),c=Bh(0,s,1,"int32"),l=Vl(u,c),h=$l(Nl(l,$h(+t,"int32")),wl(l,$h(-n,"int32"))),f=ih([o,s],r.dtype);return yc(yf(Rf(yc(r,[-1,o,s])).map((function(e){return ol(h,e,f)}))),a)}});var Wd=_s({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,Rn(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Rn(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=df(e,e.shape[0],0).map((function(e){return gf(e,[0])}))),Rn(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(vs.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=Sc(Ul(Sc(n[a],t)),n[a]);t=Vl(t,i)}return al(t,Uf(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?yf(n,0):n}});function Hd(){return vs}function Gd(e,t){return vs.tidy(e,t)}function Kd(e){ss(e).forEach((function(e){return e.dispose()}))}function qd(e){return vs.keep(e)}function Xd(){return vs.backendName}function Yd(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return vs.tidy((function(){Rn(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=gl(n),i=yu(e),o=Sf([[1]],[1,1]),s=yu(o),u=n>=r?r:n,c=function(e){var t=i,u=s,c=a,l=bt(vs.tidy((function(){var t=Tc(i,[e,e],[n-e,1]),u=Uf(t),c=Tc(i,[e,e],[1,1]),l=ol(kl(c,0),Sf([[-1]]),Sf([[1]])),h=Vl(c,Sc(l,u)),f=al(t,h);s=1===f.shape[0]?yu(o):kc([o,Tc(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var d=Pl(al(wc(l,h),u)),p=Tc(i,[e,0],[n-e,r]),v=Sc(d,s),m=Bf(s);if(0===e)i=Vl(p,wc(v,wc(m,p)));else{var g=Vl(p,wc(v,wc(m,p)));i=kc([Tc(i,[0,0],[e,r]),g],0)}var y=Bf(v),b=Tc(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Vl(b,wc(wc(b,s),y));else{var x=Vl(b,wc(wc(b,s),y));a=kc([Tc(a,[0,0],[n,e]),x],1)}return[s,i,a]})),3);s=l[0],i=l[1],a=l[2],Kd([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=Tc(a,[0,0],[n,r]),i=Tc(i,[0,0],[r,r])),[a,i]}))}!function(e){e}((function(e){hr().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));var $d,Qd=_s({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Rn(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Yd(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Rf(yc(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=bt(Yd(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)}));var o=yc(yf(a,0),e.shape),s=yc(yf(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}($d||($d={}));var Jd=_s({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$d.SUM_BY_NONZERO_WEIGHTS,r=Ss(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Ss(t,"weights","computeWeightedLoss"));var i=null==a?r:Sc(r,a);if(n===$d.NONE)return i;if(n===$d.SUM)return Ul(i);if(n===$d.MEAN){if(null==a)return ah(i);var o=r.size/a.size,s=al(Ul(i),Ul(a));return o>1?al(s,$h(o)):s}if(n===$d.SUM_BY_NONZERO_WEIGHTS){if(null==a)return al(Ul(i),$h(r.size));var u=Sc(a,oh(r.shape)),c=gu(Ul(mh(u,$h(0))),"float32");return al(Ul(i),c)}throw Error("Unknown reduction: ".concat(n))}});var Zd=_s({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$d.SUM_BY_NONZERO_WEIGHTS,a=Ss(e,"labels","absoluteDifference"),i=Ss(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Ss(n,"weights","absoluteDifference")),On(a.shape,i.shape,"Error in absoluteDifference: ");var s=Wu(Vl(a,i));return Jd(s,o,r)}});var ep=_s({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$d.SUM_BY_NONZERO_WEIGHTS,i=Ss(e,"labels","cosineDistance"),o=Ss(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Ss(r,"weights","cosineDistance")),On(i.shape,o.shape,"Error in cosineDistance: ");var u=$h(1),c=Vl(u,Ul(Sc(i,o),n,!0));return Jd(c,s,a)}});var tp=_s({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$d.SUM_BY_NONZERO_WEIGHTS,a=Ss(e,"labels","hingeLoss"),i=Ss(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Ss(n,"weights","hingeLoss")),On(a.shape,i.shape,"Error in hingeLoss: ");var s=$h(1);a=Vl(Sc($h(2),a),s);var u=jh(Vl(s,Sc(a,i)));return Jd(u,o,r)}});var np=_s({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$d.SUM_BY_NONZERO_WEIGHTS,i=Ss(e,"labels","huberLoss"),o=Ss(t,"predictions","huberLoss"),s=null;null!=n&&(s=Ss(n,"weights","huberLoss")),On(i.shape,o.shape,"Error in huberLoss: ");var u=$h(r),c=Wu(Vl(o,i)),l=ch(c,u),h=Vl(c,l),f=Ku(Sc($h(.5),fh(l)),Sc(u,h));return Jd(f,s,a)}});var rp=_s({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$d.SUM_BY_NONZERO_WEIGHTS,i=Ss(e,"labels","logLoss"),o=Ss(t,"predictions","logLoss"),s=null;null!=n&&(s=Ss(n,"weights","logLoss")),On(i.shape,o.shape,"Error in logLoss: ");var u=$h(1),c=$h(r),l=Pl(Sc(i,Ol(Ku(o,c)))),h=Sc(Vl(u,i),Ol(Ku(Vl(u,o),c))),f=Vl(l,h);return Jd(f,s,a)}});var ap=_s({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$d.SUM_BY_NONZERO_WEIGHTS,a=Ss(e,"labels","meanSquaredError"),i=Ss(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Ss(n,"weights","meanSquaredError")),On(a.shape,i.shape,"Error in meanSquaredError: ");var s=mf(a,i);return Jd(s,o,r)}});function ip(e,t){var n=Ss(e,"labels","sigmoidCrossEntropyWithLogits"),r=Ss(t,"logits","sigmoidCrossEntropyWithLogits");On(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=jh(r),i=Sc(r,n),o=Dl(dl(Pl(Wu(r))));return Ku(Vl(a,i),o)}var op=_s({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$d.SUM_BY_NONZERO_WEIGHTS,i=Ss(e,"multiClassLabels","sigmoidCrossEntropy"),o=Ss(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Ss(n,"weights","sigmoidCrossEntropy")),On(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=$h(r),c=$h(1),l=$h(.5);i=Ku(Sc(i,Vl(c,u)),Sc(l,u))}var h=ip(i,o);return Jd(h,s,a)}});function sp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=Ml((function(e,t,r){var a=Yl(t,[n],!0),i=Vl(gu(t,"float32"),a);r([e,i]);var o=Pl(Sc(i,e));return{value:Ul(o,[n]),gradFunc:function(e,t){var r=bt(t,2),a=r[0],i=r[1],o=Hl(e.shape,[n]);return[Sc(yc(e,o),Vl(gu(a,"float32"),dl(i))),Sc(yc(e,o),Vl(dl(i),gu(a,"float32")))]}}}));return r(e,t)}var up=_s({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$d.SUM_BY_NONZERO_WEIGHTS,i=Ss(e,"onehotLabels","softmaxCrossEntropy"),o=Ss(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Ss(n,"weights","softmaxCrossEntropy")),On(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=$h(r),c=$h(1),l=$h(i.shape[1]);i=Ku(Sc(i,Vl(c,u)),al(u,l))}var h=sp(i,o);return Jd(h,s,a)}});var cp=_s({sparseFillEmptyRows_:function(e,t,n,r){var a=Ss(e,"indices","sparseFillEmptyRows","int32"),i=Ss(t,"values","sparseFillEmptyRows"),o=Ss(n,"denseShape","sparseFillEmptyRows","int32"),s=Ss(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=vs.runKernel(_i,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var lp=_s({sparseReshape_:function(e,t,n){var r=Ss(e,"inputIndices","sparseReshape","int32"),a=Ss(t,"inputShape","sparseReshape","int32"),i=Ss(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=vs.runKernel(Ci,o);return{outputIndices:s[0],outputShape:s[1]}}});var hp=_s({sparseSegmentMean_:function(e,t,n){var r=Ss(e,"data","sparseSegmentMean"),a=Ss(t,"indices","sparseSegmentMean","int32"),i=Ss(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return vs.runKernel(Ii,o)}});var fp=_s({sparseSegmentSum_:function(e,t,n){var r=Ss(e,"data","sparseSegmentSum"),a=Ss(t,"indices","sparseSegmentSum","int32"),i=Ss(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return vs.runKernel(Ni,o)}});var dp=_s({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=Ss(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=Ss(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},h={data:u,dataSplits:c},f=vs.runKernel(Di,h,l);return{nGrams:f[0],nGramsSplits:f[1]}}});var pp=_s({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Ss(e,"input","stringSplit","string"),a=Ss(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=vs.runKernel(Mi,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var vp=_s({stringToHashBucketFast_:function(e,t){var n=Ss(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return vs.runKernel(Pi,a,r)}}),mp={fft:lf,ifft:hf,rfft:pf,irfft:ff},gp={hammingWindow:cd,hannWindow:ld,frame:hd,stft:fd},yp={flipLeftRight:pd,grayscaleToRGB:vd,resizeNearestNeighbor:Bd,resizeBilinear:Fd,rotateWithOffset:md,cropAndResize:dd,nonMaxSuppression:yd,nonMaxSuppressionAsync:Nd,nonMaxSuppressionWithScore:Ad,nonMaxSuppressionWithScoreAsync:Od,nonMaxSuppressionPadded:Dd,nonMaxSuppressionPaddedAsync:Pd,threshold:Ud,transform:jd},bp={bandPart:zd,gramSchmidt:Wd,qr:Qd},xp={absoluteDifference:Zd,computeWeightedLoss:Jd,cosineDistance:ep,hingeLoss:tp,huberLoss:np,logLoss:rp,meanSquaredError:ap,sigmoidCrossEntropy:op,softmaxCrossEntropy:up},kp={sparseFillEmptyRows:cp,sparseReshape:lp,sparseSegmentMean:hp,sparseSegmentSum:fp},wp={stringNGrams:dp,stringSplit:pp,stringToHashBucketFast:vp};function Sp(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Ep(e){return e<=30?e:Qn(e,Math.floor(Math.sqrt(e)))}function Tp(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function _p(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Cp(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Ip(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}var Np,Ap,Rp="->",Op=/->/g;function Dp(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function Mp(e){return e.every((function(e,t){return e===t}))}function Pp(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function Lp(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function Fp(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Bp(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Vp(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Up(e){try{return e.map((function(e){return Io(e)}))}catch(BZ){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(BZ))}}hr().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(Np||(Np={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(Ap||(Ap={}));var jp={};function zp(e){return jp[e]}function Wp(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return Hp(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return Hp(e,n,r,a)}));var u=Hp(t.inputNames.slice(o)[0],n,r,a),c=u.dataSync();return"number"===i.type?c[0]:er(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function Hp(e,t,n,r){var a=bt(qp(e),2),i=a[0],o=a[1];if(null!=r){var s=r.getHashTableHandleByName(i);if(null!=s)return s}var u=n.currentContextIds.find((function(e){return!!t[Kp(i,e)]}));return void 0!==u?t[Kp(i,u)][o]:void 0}function Gp(e,t){var n=bt(qp(e),3),r=n[0],a=n[1],i=n[2];return[Kp(r,t&&t.currentContextId),a,i]}function Kp(e,t){return t?"".concat(e,"-").concat(t):e}function qp(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function Xp(e,t,n){var r=Wp("pad",e,t,n);if("explicit"===r){r=Wp("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function Yp(e){return e.kept?e:yu(e)}var $p=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Qp=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Jp=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],Zp=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],ev=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],tv=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],nv=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],rv=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],av=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],iv=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],ov=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],sv=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],uv=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],cv=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],lv=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],hv=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],fv=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],dv=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],pv=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],vv=function(){function e(){var n;wn(this,e);var k=[t,r,a,i,o,s,u,c,l,h,f,d,p,v,m,g,y,b,x],w=(n=[]).concat.apply(n,kn(k.map((function(e){return e.json}))));this.opMappers=w.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return En(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),u=[],c=[],l={},h={};null!=n&&(l=this.mapSignatureEntries(n.inputs),h=this.mapSignatureEntries(n.outputs));var f=Object.keys(s);f.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=bt(Gp(e),3),a=r[0],i=r[2],o=s[a];if(null!=o.outputs){var u=o.outputs.indexOf(i);if(-1!==u){var c="".concat(a,":").concat(u);t.inputNames[n]=c}}t.inputs.push(o),o.children.push(t)}))})),0===Object.keys(h).length?f.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(h).forEach((function(e){var t=bt(Gp(e),1)[0],n=s[t];null!=n&&(n.signatureKey=h[e],c.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=bt(Gp(e),1)[0],n=s[t];n&&(n.signatureKey=l[e],u.push(n))})):u=a;var d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var p={nodes:s,inputs:u,outputs:c,weights:i,placeholders:a,signature:n,functions:d};return o.length>0&&(p.initNodes=o),p}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=zp(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=gv(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=gv(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=Cv(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Cv(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=bv(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=bv(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=_v(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=_v(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=yv(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=yv(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=Nv(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Nv(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=Tv(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Tv(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=Iv(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Iv(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=wv(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=wv(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=Sv(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Sv(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=kv(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=kv(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=bt(Gp(e.name),1)[0],n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:xv(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),a[t]=n})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=bt(Gp(e),3),i=r[0],o=r[2],s=a[i];if(null!=s.outputs){var u=s.outputs.indexOf(o);if(-1!==u){var c="".concat(i,":").concat(u);t.inputNames[n]=c}}t.inputs.push(s),s.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=bt(Gp(s[e.name]),2),n=t[0],r=t[1],i=a[n];null!=i&&(i.defaultOutput=r,o.push(i))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function mv(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=hr().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function gv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?mv(a.s,r):n}function yv(e,t,n){var r=e[t];return r?r.b:n}function bv(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function xv(e){switch("string"===typeof e&&(e=Np[e]),e){case Np.DT_FLOAT:case Np.DT_HALF:return"float32";case Np.DT_INT32:case Np.DT_INT64:case Np.DT_INT8:case Np.DT_UINT8:return"int32";case Np.DT_BOOL:return"bool";case Np.DT_DOUBLE:return"float32";case Np.DT_STRING:return"string";default:return null}}function kv(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function wv(e,t,n){var r=e[t];return r&&r.type?xv(r.type):n}function Sv(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return xv(e)})):n}function Ev(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function Tv(e,t,n){var r=e[t];return r&&r.shape?Ev(r.shape):n}function _v(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function Cv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return mv(e,r)})):n}function Iv(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return Ev(e)})):n}function Nv(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var Av=function(){function e(t,n,r){var a=this;wn(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return En(e,[{key:"getInput",value:function(e){return Hp(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return Hp(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return bv(this.node.rawAttrs,e,t);if(null!=n.s)return gv(this.node.rawAttrs,e,t);if(null!=n.b)return yv(this.node.rawAttrs,e,t);if(null!=n.shape)return Tv(this.node.rawAttrs,e,t);if(null!=n.type)return wv(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return _v(this.node.rawAttrs,e,t);if(null!=n.list.s)return Cv(this.node.rawAttrs,e,t);if(null!=n.list.shape)return Iv(this.node.rawAttrs,e,t);if(null!=n.list.b)return Nv(this.node.rawAttrs,e,t);if(null!=n.list.type)return Sv(this.node.rawAttrs,e,t)}return t}}]),e}();function Rv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){Rn(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];Rn(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function Ov(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function Dv(e,t,n){var r=Mv(e,n),a=!Ov(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=Mv(e.shape,r)})),!Ov(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function Mv(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var Pv=function(){function e(t,n,r,a,i,o,s){wn(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=$h(0),qd(this.idTensor)}return En(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),Rv(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,qd(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return Ns([],[0].concat(this.elementShape));var r=this.readMany(e);return Rv(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),yf(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return Ns([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return Rv(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),kc(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,kn(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,Rf(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];Gd((function(){t=yc(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=yc(Tc(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),Lv=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;wn(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));Rv(n,e.shape,"TensorList shape mismatch: "),qd(e)})),this.idTensor=$h(0),this.maxNumElements=a,qd(this.idTensor)}return En(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e(kn(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));Rv(e,this.elementShape,"TensorList shape mismatch: ");var a=Dv(this.elementShape,this.tensors,e);return Gd((function(){var e=n.tensors.map((function(e){return yc(e,a)}));return yf(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=Dv(this.elementShape,this.tensors,e),r=this.tensors.pop();return Rv(r.shape,e,"TensorList shape mismatch: "),yc(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(Rv(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");qd(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));Rv(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=Dv(this.elementShape,this.tensors,t);return yc(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));Rv(this.elementShape,t.shape,"TensorList shape mismatch: "),qd(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));Rv(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=Dv(this.elementShape,this.tensors,n);return 0===e.length?Ns([],[0].concat(a)):Gd((function(){var t=e.map((function(e){return yc(r.tensors[e],a)}));return yf(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));Rv(this.elementShape,t,"TensorList shape mismatch: ");var r=Dv(this.elementShape,this.tensors,t);return 0===this.size()?Ns([],[0].concat(r)):Gd((function(){var e=n.tensors.map((function(e){return yc(e,r)}));return kc(e,0)}))}}]),e}();function Fv(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));Rv(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=Rf(e);return new Lv(a,t,r)}function Bv(e,t,n){return new Lv([],e,t,n)}function Vv(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,kn(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new Lv([],n,e.dtype,r),o=Rf(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function Uv(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=Mv(e.shape.slice(1),n),o=0===r?0:e.size/r,s=Gd((function(){var n=[];e=yc(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=yc(Tc(e,u,c),i)}return e.dispose(),n})),u=new Lv([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var jv=function(){var e=vn(gn().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,m,g,y,b,x,k,w,S,E,T,_,C,I,N,A,R,O,D,M,P,L,F,B,V,U,j,z,W,H,G,K,q,X,Y,$,Q,J,Z,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,he,fe,de,pe,ve,me,ge,ye,be,xe,ke,we,Se,Ee,Te,_e,Ce,Ie,Ne,Ae,Re,Oe,De,Me,Pe,Le,Fe,Be,Ve,Ue,je,ze,We,He,Ge;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?121:"TensorListStack"===e.t0?127:"TensorListFromTensor"===e.t0?133:"TensorListConcat"===e.t0?139:"TensorListPushBack"===e.t0?144:"TensorListPopBack"===e.t0?149:"TensorListSplit"===e.t0?154:160;break;case 3:return a=Wp("thenBranch",t,n,r),i=Wp("elseBranch",t,n,r),o=Wp("cond",t,n,r),s=Wp("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield(gn().mark((function e(){var a,i,o,s,u,c,l,h;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Wp("body",t,n,r),i=Wp("cond",t,n,r),o=Wp("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=o,h=gn().mark((function e(){var t,n,o;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:c=e.sent,o.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(h(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(u=e.t1)){e.next=19;break}return e.abrupt("return",u.v);case 19:return c=Wp("pred",t,n,r),e.abrupt("return",[Yp(c)]);case 21:return l=Wp("pred",t,n,r),(h=Wp("data",t,n,r)).kept||(h=Yp(h)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,h],e.next=31;break;case 30:e.t2=[h,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(f=t.inputNames.find((function(e){return void 0!==Hp(e,n,r)})),!f){e.next=36;break}return d=Hp(f,n,r),e.abrupt("return",[Yp(d)]);case 36:return e.abrupt("return",void 0);case 37:return p=Wp("frameName",t,n,r),v=Wp("tensor",t,n,r),r.enterFrame(p),e.abrupt("return",[Yp(v)]);case 41:return m=Wp("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[Yp(m)]);case 44:return g=Wp("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[Yp(g)]);case 47:return y=Wp("size",t,n,r),b=Wp("dtype",t,n,r),x=Wp("elementShape",t,n,r),k=Wp("dynamicSize",t,n,r),w=Wp("clearAfterRead",t,n,r),S=Wp("identicalElementShapes",t,n,r),E=Wp("name",t,n,r),T=new Pv(E,b,y,x,S,k,w),r.addTensorArray(T),e.abrupt("return",[T.idTensor,$h(1)]);case 57:return _=Wp("tensorArrayId",t,n,r),C=Wp("index",t,n,r),I=Wp("tensor",t,n,r),(N=r.getTensorArray(_.id)).write(C,I),e.abrupt("return",[N.idTensor]);case 63:return A=Wp("tensorArrayId",t,n,r),R=Wp("index",t,n,r),O=r.getTensorArray(A.id),e.abrupt("return",[O.read(R)]);case 67:return D=Wp("tensorArrayId",t,n,r),M=Wp("indices",t,n,r),P=Wp("dtype",t,n,r),L=r.getTensorArray(D.id),e.abrupt("return",[L.gather(M,P)]);case 72:return F=Wp("tensorArrayId",t,n,r),B=Wp("indices",t,n,r),V=Wp("tensor",t,n,r),(U=r.getTensorArray(F.id)).scatter(B,V),e.abrupt("return",[U.idTensor]);case 78:return j=Wp("tensorArrayId",t,n,r),z=r.getTensorArray(j.id),W=Wp("dtype",t,n,r),e.abrupt("return",[z.concat(W)]);case 82:return H=Wp("tensorArrayId",t,n,r),G=Wp("tensor",t,n,r),K=Wp("lengths",t,n,r),(q=r.getTensorArray(H.id)).split(K,G),e.abrupt("return",[q.idTensor]);case 88:return X=Wp("tensorArrayId",t,n,r),Y=r.getTensorArray(X.id),e.abrupt("return",[$h(Y.size(),"int32")]);case 91:return $=Wp("tensorArrayId",t,n,r),(Q=r.getTensorArray($.id)).clearAndClose(),e.abrupt("return",[Q.idTensor]);case 95:return J=Wp("tensorListId",t,n,r),Z=Wp("index",t,n,r),ee=Wp("tensor",t,n,r),(te=r.getTensorList(J.id)).setItem(Z,ee),e.abrupt("return",[te.idTensor]);case 101:return ne=Wp("tensorListId",t,n,r),re=Wp("index",t,n,r),ae=Wp("elementShape",t,n,r),ie=Wp("elementDType",t,n,r),oe=r.getTensorList(ne.id),e.abrupt("return",[oe.getItem(re,ae,ie)]);case 107:return se=Wp("indices",t,n,r),ue=Wp("tensor",t,n,r),ce=Wp("elementShape",t,n,r),le=Wp("numElements",t,n,r),he=Vv(ue,se,ce,le),r.addTensorList(he),e.abrupt("return",[he.idTensor]);case 114:return fe=Wp("elementShape",t,n,r),de=Wp("elementDType",t,n,r),pe="TensorListReserve"===t.op?"numElements":"maxNumElements",ve=Wp(pe,t,n,r),me=Bv(fe,de,ve),r.addTensorList(me),e.abrupt("return",[me.idTensor]);case 121:return ge=Wp("tensorListId",t,n,r),ye=Wp("indices",t,n,r),be=Wp("elementShape",t,n,r),xe=Wp("elementDType",t,n,r),ke=r.getTensorList(ge.id),e.abrupt("return",[ke.gather(ye,xe,be)]);case 127:return we=Wp("tensorListId",t,n,r),Se=Wp("elementShape",t,n,r),Ee=Wp("elementDType",t,n,r),Te=Wp("numElements",t,n,r),_e=r.getTensorList(we.id),e.abrupt("return",[_e.stack(Se,Ee,Te)]);case 133:return Ce=Wp("tensor",t,n,r),Ie=Wp("elementShape",t,n,r),Ne=Wp("elementDType",t,n,r),Ae=Fv(Ce,Ie,Ne),r.addTensorList(Ae),e.abrupt("return",[Ae.idTensor]);case 139:return Re=Wp("tensorListId",t,n,r),Oe=r.getTensorList(Re.id),De=Wp("dtype",t,n,r),Me=Wp("elementShape",t,n,r),e.abrupt("return",[Oe.concat(De,Me)]);case 144:return Pe=Wp("tensorListId",t,n,r),Le=Wp("tensor",t,n,r),(Fe=r.getTensorList(Pe.id)).pushBack(Le),e.abrupt("return",[Fe.idTensor]);case 149:return Be=Wp("tensorListId",t,n,r),Ve=Wp("elementShape",t,n,r),Ue=Wp("elementDType",t,n,r),je=r.getTensorList(Be.id),e.abrupt("return",[je.popBack(Ve,Ue)]);case 154:return ze=Wp("tensor",t,n,r),We=Wp("elementShape",t,n,r),He=Wp("lengths",t,n,r),Ge=Uv(ze,He,We),r.addTensorList(Ge),e.abrupt("return",[Ge.idTensor]);case 160:throw TypeError("Node type ".concat(t.op," is not implemented"));case 161:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function zv(e,t,n){var r=bt(Wp("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s=!o,u="prelu"===i,c="fusedbatchnorm"===a,l=Wp("numArgs",e,t,n);if(o){if(u&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&o&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var h=Wp("strides",e,t,n),f=Xp(e,t,n),d=Wp("dataFormat",e,t,n).toUpperCase(),p=Wp("dilations",e,t,n),v=bt(Wp("args",e,t,n),2),m=v[0],g=v[1];return s&&(g=m,m=void 0),{stride:h,pad:f,dataFormat:d,dilations:p,biasArg:m,preluArg:g,activationFunc:i,leakyreluAlpha:Wp("leakyreluAlpha",e,t,n)}}function Wv(e,t,n){return{boxes:Wp("boxes",e,t,n),scores:Wp("scores",e,t,n),maxOutputSize:Wp("maxOutputSize",e,t,n),iouThreshold:Wp("iouThreshold",e,t,n),scoreThreshold:Wp("scoreThreshold",e,t,n),softNmsSigma:Wp("softNmsSigma",e,t,n)}}var Hv=function(){var e=vn(gn().mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f,d,p,v,m,g,y,b,x,k,w,S,E,T,_,C;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?8:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?14:"Where"===e.t0?19:"ListDiff"===e.t0?26:27;break;case 3:return a=Wv(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,u=a.iouThreshold,c=a.scoreThreshold,l=a.softNmsSigma,e.next=6,yp.nonMaxSuppressionWithScoreAsync(i,o,s,u,c,l);case 6:return h=e.sent,e.abrupt("return",[h.selectedIndices,h.selectedScores]);case 8:return f=Wv(t,n,r),d=f.boxes,p=f.scores,v=f.maxOutputSize,m=f.iouThreshold,g=f.scoreThreshold,y=Wp("padToMaxOutputSize",t,n,r),e.next=12,yp.nonMaxSuppressionPaddedAsync(d,p,v,m,g,y);case 12:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 14:return x=Wv(t,n,r),k=x.boxes,w=x.scores,S=x.maxOutputSize,E=x.iouThreshold,T=x.scoreThreshold,e.next=17,yp.nonMaxSuppressionAsync(k,w,S,E,T);case 17:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 19:return _=gu(Wp("condition",t,n,r),"bool"),e.next=22,Pf(_);case 22:return e.t2=e.sent,C=[e.t2],_.dispose(),e.abrupt("return",C);case 26:return e.abrupt("return",ef(Wp("x",t,n,r),Wp("y",t,n,r)));case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Gv=function(){function e(t,n){wn(this,e),this.keyDType=t,this.valueDType=n,this.handle=$h(0),this.tensorMap=new Map,qd(this.handle)}return En(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return $h(this.size(),"int32")}},{key:"import",value:function(){var e=vn(gn().mark((function e(t,n){var r,a=this;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",Gd((function(){var e=Rf(n),t=r.length,i=e.length;Rn(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];qd(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=vn(gn().mark((function e(t,n){var r,a=this;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",Gd((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return yf(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),Kv=function(){var e=vn(gn().mark((function e(t,n,r,a){var i,o,s,u,c,l,h,f,d,p,v,m,g;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?24:27;break;case 3:return i=Wp("keyDType",t,n,r),o=Wp("valueDType",t,n,r),s=new Gv(i,o),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return u=Wp("tableHandle",t,n,r,a),c=Wp("keys",t,n,r),l=Wp("values",t,n,r),h=a.getHashTableById(u.id),e.next=14,h.import(c,l);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return f=Wp("tableHandle",t,n,r,a),d=Wp("keys",t,n,r),p=Wp("defaultValue",t,n,r),v=a.getHashTableById(f.id),e.next=22,v.find(d,p);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:return m=Wp("tableHandle",t,n,r,a),g=a.getHashTableById(m.id),e.abrupt("return",[g.tensorSize()]);case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function qv(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return Gd((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[Ku(Wp("a",e,t,n),Wp("b",e,t,n))];case"AddN":return[qu(Wp("tensors",e,t,n))];case"FloorMod":case"Mod":return[hh(Wp("a",e,t,n),Wp("b",e,t,n))];case"Mul":return[Sc(Wp("a",e,t,n),Wp("b",e,t,n))];case"RealDiv":case"Div":return[al(Wp("a",e,t,n),Wp("b",e,t,n))];case"DivNoNan":return[ul(Wp("a",e,t,n),Wp("b",e,t,n))];case"FloorDiv":return[rl(Wp("a",e,t,n),Wp("b",e,t,n))];case"Sub":return[Vl(Wp("a",e,t,n),Wp("b",e,t,n))];case"Minimum":return[ch(Wp("a",e,t,n),Wp("b",e,t,n))];case"Maximum":return[rh(Wp("a",e,t,n),Wp("b",e,t,n))];case"Pow":return[Ch(Wp("a",e,t,n),Wp("b",e,t,n))];case"SquaredDifference":return[mf(Wp("a",e,t,n),Wp("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return Gd((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[Wu(Wp("x",e,t,n))];case"Acos":return[Hu(Wp("x",e,t,n))];case"Acosh":return[Gu(Wp("x",e,t,n))];case"Asin":return[Ju(Wp("x",e,t,n))];case"Asinh":return[Zu(Wp("x",e,t,n))];case"Atan":return[ec(Wp("x",e,t,n))];case"Atan2":return[tc(Wp("x",e,t,n),Wp("y",e,t,n))];case"Atanh":return[nc(Wp("x",e,t,n))];case"Ceil":return[Lc(Wp("x",e,t,n))];case"Complex":return[Cs(Wp("real",e,t,n),Wp("imag",e,t,n))];case"Cos":return[Yc(Wp("x",e,t,n))];case"Cosh":return[$c(Wp("x",e,t,n))];case"Elu":return[hl(Wp("x",e,t,n))];case"Erf":return[fl(Wp("x",e,t,n))];case"Exp":return[dl(Wp("x",e,t,n))];case"Expm1":return[vl(Wp("x",e,t,n))];case"Floor":return[bl(Wp("x",e,t,n))];case"Log":return[Ol(Wp("x",e,t,n))];case"Log1p":return[Dl(Wp("x",e,t,n))];case"Imag":return[Sl(Wp("x",e,t,n))];case"Neg":return[Pl(Wp("x",e,t,n))];case"Reciprocal":return[Uh(Wp("x",e,t,n))];case"Real":return[Vh(Wp("x",e,t,n))];case"Relu":return[jh(Wp("x",e,t,n))];case"Round":return[Xh(Wp("x",e,t,n))];case"Selu":return[Qh(Wp("x",e,t,n))];case"Sigmoid":return[Ec(Wp("x",e,t,n))];case"Sin":return[nf(Wp("x",e,t,n))];case"Sign":return[tf(Wp("x",e,t,n))];case"Sinh":return[rf(Wp("x",e,t,n))];case"Softplus":return[Ll(Wp("x",e,t,n))];case"Sqrt":return[vf(Wp("x",e,t,n))];case"Square":return[fh(Wp("x",e,t,n))];case"Tanh":return[_c(Wp("x",e,t,n))];case"Tan":return[kf(Wp("x",e,t,n))];case"ClipByValue":return[Fc(Wp("x",e,t,n),Wp("clipValueMin",e,t,n),Wp("clipValueMax",e,t,n))];case"Relu6":return[zh(Wp("x",e,t,n))];case"Rsqrt":return[Yh(Hp(e.inputNames[0],t,n))];case"Prod":return[Nh(Wp("x",e,t,n),Wp("axes",e,t,n))];case"LeakyRelu":return[Cl(Wp("x",e,t,n),Wp("alpha",e,t,n))];case"Prelu":return[Ih(Wp("x",e,t,n),Wp("alpha",e,t,n))];case"IsNan":return[_l(Hp(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return jv(e,t,n);case"convolution":return Gd((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=Wp("stride",e,t,n),a=Wp("pad",e,t,n),i=Wp("dataFormat",e,t,n).toUpperCase(),o=Wp("dilation",e,t,n);return[Wc(Wp("x",e,t,n),Wp("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=Wp("strides",e,t,n),u=Xp(e,t,n),c=Wp("dataFormat",e,t,n).toUpperCase(),l=Wp("dilations",e,t,n);return[zc(Wp("x",e,t,n),Wp("filter",e,t,n),[s[1],s[2]],u,c,[l[1],l[2]])];case"_FusedConv2D":var h=zv(e,t,n),f=h.stride,d=h.pad,p=h.dataFormat,v=h.dilations,m=h.biasArg,g=h.preluArg,y=h.activationFunc,b=h.leakyreluAlpha;return[ad({x:Wp("x",e,t,n),filter:Wp("filter",e,t,n),strides:[f[1],f[2]],pad:d,dataFormat:p,dilations:[v[1],v[2]],bias:m,activation:y,preluActivationWeights:g,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=zv(e,t,n),k=x.stride,w=x.pad,S=x.dataFormat,E=x.dilations,T=x.biasArg,_=x.preluArg,C=x.activationFunc,I=x.leakyreluAlpha;return[sd({x:Wp("x",e,t,n),filter:Wp("filter",e,t,n),strides:[k[1],k[2]],pad:w,dataFormat:S,dilations:[E[1],E[2]],bias:T,activation:C,preluActivationWeights:_,leakyreluAlpha:I})];case"Conv2DBackpropInput":case"Conv2dTranspose":var N=Wp("outputShape",e,t,n),A=Wp("strides",e,t,n),R=Xp(e,t,n);return[Gc(Wp("x",e,t,n),Wp("filter",e,t,n),N,[A[1],A[2]],R)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var O=Wp("strides",e,t,n),D=Xp(e,t,n),M=Wp("dilations",e,t,n),P=Wp("dataFormat",e,t,n).toUpperCase();return[el(Wp("input",e,t,n),Wp("filter",e,t,n),[O[1],O[2]],D,P,[M[1],M[2]])];case"Conv3D":var L=Wp("strides",e,t,n),F=Wp("pad",e,t,n),B=Wp("dataFormat",e,t,n).toUpperCase(),V=Wp("dilations",e,t,n);return[Kc(Wp("x",e,t,n),Wp("filter",e,t,n),[L[1],L[2],L[3]],F,B,[V[1],V[2],V[3]])];case"AvgPool":var U=Wp("strides",e,t,n),j=Wp("pad",e,t,n),z=Wp("kernelSize",e,t,n);return[bc(Wp("x",e,t,n),[z[1],z[2]],[U[1],U[2]],j)];case"MaxPool":var W=Wp("strides",e,t,n),H=Wp("pad",e,t,n),G=Wp("kernelSize",e,t,n);return[eh(Wp("x",e,t,n),[G[1],G[2]],[W[1],W[2]],H)];case"MaxPoolWithArgmax":var K=Wp("strides",e,t,n),q=Wp("pad",e,t,n),X=Wp("kernelSize",e,t,n),Y=Wp("includeBatchInIndex",e,t,n),$=nh(Wp("x",e,t,n),[X[1],X[2]],[K[1],K[2]],q,Y);return[$.result,$.indexes];case"AvgPool3D":var Q=Wp("strides",e,t,n),J=Wp("pad",e,t,n),Z=Wp("kernelSize",e,t,n);return[xc(Wp("x",e,t,n),[Z[1],Z[2],Z[3]],[Q[1],Q[2],Q[3]],J)];case"MaxPool3D":var ee=Wp("strides",e,t,n),te=Wp("pad",e,t,n),ne=Wp("kernelSize",e,t,n);return[th(Wp("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=Wp("strides",e,t,n),ae=Wp("pad",e,t,n),ie=Wp("dilations",e,t,n),oe=re[1],se=re[2],ue=ie[1],ce=ie[2];return[nl(Wp("x",e,t,n),Wp("filter",e,t,n),[oe,se],ae,[ue,ce],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return Gd((function(){return function(e,t,n){switch(e.op){case"Fill":var r=Wp("shape",e,t,n),a=Wp("dtype",e,t,n);return[yl(r,Wp("value",e,t,n),a)];case"LinSpace":return[Al(Wp("start",e,t,n),Wp("stop",e,t,n),Wp("num",e,t,n))];case"Multinomial":var i=Wp("logits",e,t,n),o=Wp("numSamples",e,t,n),s=Wp("seed",e,t,n);return[vh(i,o,s)];case"OneHot":var u=Wp("indices",e,t,n),c=Wp("depth",e,t,n),l=Wp("onValue",e,t,n),h=Wp("offValue",e,t,n);return[gh(u,c,l,h)];case"Ones":return[oh(Wp("shape",e,t,n),Wp("dtype",e,t,n))];case"OnesLike":return[yh(Wp("x",e,t,n))];case"RandomUniform":return[Fh(Wp("shape",e,t,n),Wp("minval",e,t,n),Wp("maxval",e,t,n),Wp("dtype",e,t,n))];case"Range":return[Bh(Wp("start",e,t,n),Wp("stop",e,t,n),Wp("step",e,t,n),Wp("dtype",e,t,n))];case"TruncatedNormal":var f=Wp("shape",e,t,n),d=Wp("mean",e,t,n),p=Wp("stdDev",e,t,n),v=Wp("seed",e,t,n);return[If(f,d,p,Wp("dtype",e,t,n),v)];case"Zeros":return[ih(Wp("shape",e,t,n),Wp("dtype",e,t,n))];case"ZerosLike":return[sl(Wp("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return Hv(e,t,n);case"evaluation":return Gd((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=Wp("x",e,t,n),a=Wp("k",e,t,n),i=Wp("sorted",e,t,n),o=Cf(r,a,i);return[o.values,o.indices];case"Unique":var s=Wp("x",e,t,n),u=Nf(s);return[u.values,u.indices];case"UniqueV2":var c=Wp("x",e,t,n),l=Wp("axis",e,t,n),h=Nf(c,l);return[h.values,h.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return Gd((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=Wp("images",e,t,n),a=Wp("size",e,t,n),i=Wp("alignCorners",e,t,n),o=Wp("halfPixelCenters",e,t,n);return[yp.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=Wp("images",e,t,n),u=Wp("size",e,t,n),c=Wp("alignCorners",e,t,n),l=Wp("halfPixelCenters",e,t,n);return[yp.resizeNearestNeighbor(s,[u[0],u[1]],c,l)];case"CropAndResize":var h=Wp("image",e,t,n),f=Wp("boxes",e,t,n),d=Wp("boxInd",e,t,n),p=Wp("cropSize",e,t,n),v=Wp("method",e,t,n),m=Wp("extrapolationValue",e,t,n);return[yp.cropAndResize(h,f,d,p,v,m)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return Gd((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=Wp("default",e,t,n);return[Hp(e.name,t,n)||r];case"Placeholder":return[Hp(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[Yp(Wp("x",e,t,n))];case"IdentityN":return Wp("x",e,t,n).map((function(e){return Yp(e)}));case"Shape":return[wf(Wp("x",e,t,n).shape,"int32")];case"ShapeN":return Wp("x",e,t,n).map((function(e){return wf(e.shape)}));case"Size":return[$h(Wp("x",e,t,n).size,"int32")];case"Rank":return[$h(Wp("x",e,t,n).rank,"int32")];case"NoOp":return[$h(1)];case"Print":var a=Wp("x",e,t,n),i=Wp("data",e,t,n),o=Wp("message",e,t,n),s=Wp("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return Gd((function(){return function(e,t,n){switch(e.op){case"Equal":return[il(Wp("a",e,t,n),Wp("b",e,t,n))];case"NotEqual":return[mh(Wp("a",e,t,n),Wp("b",e,t,n))];case"Greater":return[kl(Wp("a",e,t,n),Wp("b",e,t,n))];case"GreaterEqual":return[wl(Wp("a",e,t,n),Wp("b",e,t,n))];case"Less":return[Il(Wp("a",e,t,n),Wp("b",e,t,n))];case"LessEqual":return[Nl(Wp("a",e,t,n),Wp("b",e,t,n))];case"LogicalAnd":return[$l(Wp("a",e,t,n),Wp("b",e,t,n))];case"LogicalNot":return[Ql(Wp("a",e,t,n))];case"LogicalOr":return[Jl(Wp("a",e,t,n),Wp("b",e,t,n))];case"Select":case"SelectV2":return[ol(Wp("condition",e,t,n),Wp("a",e,t,n),Wp("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return Gd((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[wc(Wp("a",e,t,n),Wp("b",e,t,n),Wp("transposeA",e,t,n),Wp("transposeB",e,t,n))];case"Einsum":return[ll.apply(k,[Wp("equation",e,t,n)].concat(kn(Wp("tensors",e,t,n))))];case"Transpose":return[Bf(Wp("x",e,t,n),Wp("perm",e,t,n))];case"_FusedMatMul":var r=bt(Wp("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s="prelu"===i,u=Wp("numArgs",e,t,n),c=Wp("leakyreluAlpha",e,t,n);if(o){if(s&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var l=bt(Wp("args",e,t,n),2),h=l[0],f=l[1];return[ud({a:Wp("a",e,t,n),b:Wp("b",e,t,n),transposeA:Wp("transposeA",e,t,n),transposeB:Wp("transposeB",e,t,n),bias:h,activation:i,preluActivationWeights:f,leakyreluAlpha:c})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return Gd((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Nc(Wp("x",e,t,n),Wp("mean",e,t,n),Wp("variance",e,t,n),Wp("offset",e,t,n),Wp("scale",e,t,n),Wp("epsilon",e,t,n))];case"LRN":return[Rl(Wp("x",e,t,n),Wp("radius",e,t,n),Wp("bias",e,t,n),Wp("alpha",e,t,n),Wp("beta",e,t,n))];case"Softmax":return[cf(Wp("x",e,t,n))];case"LogSoftmax":return[jl(Wp("x",e,t,n))];case"SparseToDense":return[Kf(Wp("sparseIndices",e,t,n),Wp("outputShape",e,t,n),Wp("sparseValues",e,t,n),Wp("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return Gd((function(){return function(e,t,n){switch(e.op){case"Max":var r=Wp("axis",e,t,n),a=Wp("keepDims",e,t,n);return[Bl(Wp("x",e,t,n),r,a)];case"Mean":var i=Wp("axis",e,t,n),o=Wp("keepDims",e,t,n);return[ah(Wp("x",e,t,n),i,o)];case"Min":var s=Wp("axis",e,t,n),u=Wp("keepDims",e,t,n);return[uh(Wp("x",e,t,n),s,u)];case"Sum":var c=Wp("axis",e,t,n),l=Wp("keepDims",e,t,n);return[Ul(Wp("x",e,t,n),c,l)];case"All":var h=Wp("axis",e,t,n),f=Wp("keepDims",e,t,n);return[Xu(Wp("x",e,t,n),h,f)];case"Any":var d=Wp("axis",e,t,n),p=Wp("keepDims",e,t,n);return[Yu(Wp("x",e,t,n),d,p)];case"ArgMax":var v=Wp("axis",e,t,n);return[$u(Wp("x",e,t,n),v)];case"ArgMin":var m=Wp("axis",e,t,n);return[Qu(Wp("x",e,t,n),m)];case"Prod":var g=Wp("axis",e,t,n),y=Wp("keepDims",e,t,n);return[Nh(Wp("x",e,t,n),g,y)];case"Cumsum":var b=Wp("axis",e,t,n),x=Wp("exclusive",e,t,n),k=Wp("reverse",e,t,n);return[Qc(Wp("x",e,t,n),b,x,k)];case"Bincount":var w=Wp("x",e,t,n),S=Wp("weights",e,t,n),E=Wp("size",e,t,n);return[Dc(w,S,E)];case"DenseBincount":var T=Wp("x",e,t,n),_=Wp("weights",e,t,n),C=Wp("size",e,t,n),I=Wp("binaryOutput",e,t,n);return[Jc(T,_,C,I)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return Gd((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=Wp("n",e,t,n),a=Wp("axis",e,t,n),i=Wp("tensors",e,t,n);return i=i.slice(0,r),[kc(i,a)];case"Gather":var o=Wp("x",e,t,n),s=Wp("indices",e,t,n);return[xl(o,gu(s,"int32"),0)];case"GatherV2":var u=Wp("axis",e,t,n),c=Wp("batchDims",e,t,n),l=Wp("x",e,t,n),h=Wp("indices",e,t,n);return[xl(l,gu(h,"int32"),u,c)];case"Reverse":for(var f=Wp("dims",e,t,n),d=[],p=0;p<f.length;p++)f[p]&&d.push(p);var v=Wp("x",e,t,n);return[Wh(v,d)];case"ReverseV2":var m=Wp("axis",e,t,n),g=Wp("x",e,t,n);return[Wh(g,m)];case"Slice":var y=Wp("begin",e,t,n),b=Wp("size",e,t,n);return[Tc(Wp("x",e,t,n),y,b)];case"StridedSlice":var x=Wp("begin",e,t,n),k=Wp("end",e,t,n),w=Wp("strides",e,t,n),S=Wp("beginMask",e,t,n),E=Wp("endMask",e,t,n),T=Wp("ellipsisMask",e,t,n),_=Wp("newAxisMask",e,t,n),C=Wp("shrinkAxisMask",e,t,n),I=Wp("x",e,t,n);return[xf(I,x,k,w,S,E,T,_,C)];case"Pack":return Gd((function(){var r=Wp("axis",e,t,n),a=Wp("tensors",e,t,n),i=a[0].shape,o=gf(a[0]).shape,s=a.map((function(e){var t=Ln(e.shape,i);if(!t&&!Ln(gf(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:yc(e,i)}));return[yf(s,r)]}));case"Unpack":var N=Wp("axis",e,t,n),A=Wp("tensor",e,t,n);return Rf(A,N);case"Tile":var R=Wp("reps",e,t,n);return[ml(Wp("x",e,t,n),R)];case"Split":case"SplitV":var O=Wp("axis",e,t,n),D=Wp("numOrSizeSplits",e,t,n),M=Wp("x",e,t,n);return df(M,D,O);case"ScatterNd":var P=Wp("indices",e,t,n),L=Wp("values",e,t,n),F=Wp("shape",e,t,n);return[Hf(P,L,F)];case"GatherNd":var B=Wp("x",e,t,n),V=Wp("indices",e,t,n);return[qf(B,V)];case"SparseToDense":var U=Wp("sparseIndices",e,t,n),j=Wp("outputShape",e,t,n),z=Wp("sparseValues",e,t,n),W=Wp("defaultValue",e,t,n);return[Kf(U,z,j,z.dtype===W.dtype?W:gu(W,z.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"sparse":return Gd((function(){return function(e,t,n){switch(e.op){case"SparseFillEmptyRows":var r=kp.sparseFillEmptyRows(Wp("indices",e,t,n),Wp("values",e,t,n),Wp("denseShape",e,t,n),Wp("defaultValue",e,t,n));return[r.outputIndices,r.outputValues,r.emptyRowIndicator,r.reverseIndexMap];case"SparseReshape":var a=kp.sparseReshape(Wp("inputIndices",e,t,n),Wp("inputShape",e,t,n),Wp("newShape",e,t,n));return[a.outputIndices,a.outputShape];case"SparseSegmentMean":return[kp.sparseSegmentMean(Wp("data",e,t,n),Wp("indices",e,t,n),Wp("segmentIds",e,t,n))];case"SparseSegmentSum":return[kp.sparseSegmentSum(Wp("data",e,t,n),Wp("indices",e,t,n),Wp("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return Gd((function(){return function(e,t,n){switch(e.op){case"FFT":return[lf(Wp("x",e,t,n))];case"IFFT":return[hf(Wp("x",e,t,n))];case"RFFT":return[pf(Wp("x",e,t,n))];case"IRFFT":return[ff(Wp("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"string":return Gd((function(){return function(e,t,n){switch(e.op){case"StringNGrams":var r=wp.stringNGrams(Wp("data",e,t,n),Wp("dataSplits",e,t,n),Wp("separator",e,t,n),Wp("nGramWidths",e,t,n),Wp("leftPad",e,t,n),Wp("rightPad",e,t,n),Wp("padWidth",e,t,n),Wp("preserveShortSequences",e,t,n));return[r.nGrams,r.nGramsSplits];case"StringSplit":var a=wp.stringSplit(Wp("input",e,t,n),Wp("delimiter",e,t,n),Wp("skipEmpty",e,t,n));return[a.indices,a.values,a.shape];case"StringToHashBucketFast":return[wp.stringToHashBucketFast(Wp("input",e,t,n),Wp("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return Gd((function(){return function(e,t,n){switch(e.op){case"Cast":return[gu(Wp("x",e,t,n),Wp("dtype",e,t,n))];case"ExpandDims":var r=Wp("axis",e,t,n);return[pl(Wp("x",e,t,n),r)];case"Squeeze":var a=Wp("axis",e,t,n);return[gf(Wp("x",e,t,n),a)];case"Reshape":return[yc(Wp("x",e,t,n),Wp("shape",e,t,n))];case"MirrorPad":return[lh(Wp("x",e,t,n),Wp("padding",e,t,n),Wp("mode",e,t,n))];case"PadV2":case"Pad":return[xh(Wp("x",e,t,n),Wp("padding",e,t,n),Wp("constantValue",e,t,n))];case"SpaceToBatchND":var i=Wp("blockShape",e,t,n),o=Wp("paddings",e,t,n);return[Th(Wp("x",e,t,n),i,o)];case"BatchToSpaceND":var s=Wp("blockShape",e,t,n),u=Wp("crops",e,t,n);return[Ic(Wp("x",e,t,n),s,u)];case"DepthToSpace":var c=Wp("blockSize",e,t,n),l=Wp("dataFormat",e,t,n).toUpperCase();return[Zc(Wp("x",e,t,n),c,l)];case"BroadcastTo":return[Pc(Wp("x",e,t,n),Wp("shape",e,t,n))];case"BroadcastArgs":return[Mc(Wp("s0",e,t,n),Wp("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return Kv(e,t,n,r);case"custom":var a=zp(e.op);if(a&&a.customExecutor)return a.customExecutor(new Av(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return or(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var Xv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};wn(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return En(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function Yv(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return qp(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return qp(e.name)[0]})));for(var h=kn(t);h.length>0;){var f=h.pop();(Zv(f)||em(f)||tm(f))&&null==o&&(s=(o=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&(-1===c.indexOf(f.name)&&-1===l.indexOf(f.name)&&(0!==f.inputs.length?f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),h.push(e))})):i.push(f.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var $v=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],Qv=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],Jv=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function Zv(e){return $v.indexOf(e.op)>=0}function em(e){return Qv.indexOf(e.op)>=0}function tm(e){return Jv.indexOf(e.op)>=0}var nm=function(){function e(t,n){var r=this;wn(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return En(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,kn(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=Yv(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return qp(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,c=[];i.length>0;){var l=i.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[qp(e)[0]]})),i=t.map((function(e){return qp(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,o),this.compiledMap.set(s,u));var c={},l={};return Gd((function(){var r=new Xv(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=bt(qp(t),2),r=n[0],i=[];i[n[1]]=e[t],a[r]=i}));for(var o=n.getFrozenTensorIds(a),s={},h=0;h<u.length;h++){var f=u[h];if(!a[f.name]){var d=qv(f,a,r,n._resourceManager);if(or(d))throw new Error("The execution of the op '".concat(f.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[f.name]=d,n.checkTensorForDisposal(f.name,f,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return Hp(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){var s=this;"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var i=function(e,t,n){return t[Kp(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=o[e.id];if(1===n){if(s.keepTensorForDebug){var i=bt(Gp(t.name,r),2),u=i[0],c=i[1];s.intermediateTensors[u]||(s.intermediateTensors[u]=[]),s.intermediateTensors[u][c]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=vn(gn().mark((function e(t,n){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;this.tensorsMap&&Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){!t||t.kept||t.isDisposed||e.keepIds.has(t.id)||t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=vn(gn().mark((function e(t,n){var r,a,i,o,s,u,c,l=this,h=arguments;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=h.length>2&&void 0!==h[2]&&h[2],a=h.length>3&&void 0!==h[3]?h[3]:{},i=h.length>4&&void 0!==h[4]?h[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=hr().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){console.warn(f.message)}return this.resetIntermediateTensors(),o=new Xv(this.weightMap,a,i,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,o,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return Hp(e,l.tensorsMap,o)})),u=s.map((function(e){return e.id})),c=Object.keys(t).map((function(e){return t[e].id})),this.keepIds=new Set([].concat(kn(u),kn(c),kn(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=vn(gn().mark((function e(t,n,r){var a,i=this;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=vn(gn().mark((function e(t,n,r,a){var i,o,s,u,c,l,h,f,d,p,v,m,g,y,b,x,k,w=this;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return w.graph.nodes[qp(e)[0]]})),s=r.map((function(e){return qp(e)[0]})),0===(u=s.map((function(e){return w.graph.nodes[e]}))).length&&(u=this._outputs),c=Yv(t,u,this.weightMap,this._initNodes),l=c.usedNodes,h=c.missingInputs,f=c.dynamicNode,d=c.syncInputs,p=[].concat(kn(o),kn(this.graph.weights),kn(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),v=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=bt(qp(e),2),r=n[0],a=[];a[n[1]]=t[e],v[r]=a})),m={},g=this.getFrozenTensorIds(v),y={};case 12:if(!(p.length>0)){e.next=18;break}return b=this.processStack(o,p,n,v,y,g,s,m,l),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=f||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=u.filter((function(e){return!Zv(e)&&!Hp(e.name,v,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw k="",null!=f&&(k="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(d,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(h,"]. ").concat(k));case 24:return e.abrupt("return",v);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var c=this,l=[],h=function(){var e=t.pop();n.currentContext=e.contexts;var h="";if("Enter"===e.node.op&&Wp("isConstant",e.node,r,n)){var f=bt(Gp(e.node.name,n),1);h=f[0]}if(null==r[e.node.name]){var d=qv(e.node,r,n,c._resourceManager);if(!h){var p=bt(Gp(e.node.name,n),1);h=p[0]}var v=n.currentContext;or(d)?l.push(d.then((function(l){return r[h]=l,n.currentContext=v,c.checkTensorForDisposal(h,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[h]=d,c.checkTensorForDisposal(h,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)h();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=bt(Gp(e.name,n),1)[0];!a[o]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!Hp(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!Hp(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=bt(qp(n),1)[0],i=t.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){var o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((function(e,t){return-1===o[t]||o[t]===e}));Rn(s,(function(){return"The shape of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be [".concat(o,"], but was ")+"[".concat(r.shape,"]")}))}i.attrParams.dtype&&i.attrParams.dtype.value&&Rn(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(i.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=bt(qp(e),1)[0];return null==t.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=bt(qp(e),1)[0];if(!t.graph.nodes[n])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),rm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wn(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return En(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),am="?tfjs-format=file",im="model.json",om=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wn(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new rm}return En(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e,t,n=this.modelUrl;if(null!=n.load)this.handler=n;else if(null!=this.loadOptions.requestInit)this.handler=Au(n,this.loadOptions);else{var r=(e=n,t=this.loadOptions,zs.getLoadHandlers(e,t));if(0===r.length)r.push(Au(n,this.loadOptions));else if(r.length>1)throw new Error("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat([n],"'"));this.handler=r[0]}}},{key:"load",value:function(){var e=vn(gn().mark((function e(){var t;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=3;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,this.handler.load();case 5:return t=e.sent,e.abrupt("return",this.loadSync(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=Rs(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new nm(vv.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=vv.Instance.transformGraph(e.modelInitializer);this.initializer=new nm(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=vn(gn().mark((function e(t,n){var r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(n=t,0!==(r=zs.getSaveHandlers(n)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}var n}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof Yo)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=vn(gn().mark((function e(t,n){var r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function sm(e){return um.apply(this,arguments)}function um(){return um=vn(gn().mark((function e(t){var n,r,a=arguments;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t).concat(im).concat(am)),r=new om(t,n),e.next=8,r.load();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),um.apply(this,arguments)}var cm=function(e,t){return(cm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function lm(e,t){function n(){this.constructor=e}cm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var hm=function(){return(hm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function fm(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function dm(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var pm=["nose","left_eye","right_eye","left_ear","right_ear","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle"],vm=["nose","left_eye_inner","left_eye","left_eye_outer","right_eye_inner","right_eye","right_eye_outer","left_ear","right_ear","mouth_left","mouth_right","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_pinky","right_pinky","left_index","right_index","left_thumb","right_thumb","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle","left_heel","right_heel","left_foot_index","right_foot_index"],mm={left:[1,2,3,7,9,11,13,15,17,19,21,23,25,27,29,31],right:[4,5,6,8,10,12,14,16,18,20,22,24,26,28,30,32],middle:[0]},gm={left:[1,3,5,7,9,11,13,15],right:[2,4,6,8,10,12,14,16],middle:[0]},ym=[[0,1],[0,2],[1,3],[2,4],[5,6],[5,7],[5,11],[6,8],[6,12],[7,9],[8,10],[11,12],[11,13],[12,14],[13,15],[14,16]],bm=[[0,1],[0,4],[1,2],[2,3],[3,7],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[11,23],[12,14],[14,16],[12,24],[13,15],[15,17],[16,18],[16,20],[15,17],[15,19],[15,21],[16,22],[17,19],[18,20],[23,25],[23,24],[24,26],[25,27],[26,28],[27,29],[28,30],[27,31],[28,32],[29,31],[30,32]],xm={runtime:"mediapipe",enableSmoothing:!0,modelType:"full"},km=function(){function e(e){var t,n=this;switch(this.width=0,this.height=0,this.selfieMode=!1,this.poseSolution=new yn.Pose({locateFile:function(t,n){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+t:n+"/"+t}}),e.modelType){case"lite":t=0;break;case"heavy":t=2;break;default:t=1}this.poseSolution.setOptions({modelComplexity:t,smoothLandmarks:e.enableSmoothing||!0,selfieMode:this.selfieMode}),this.poseSolution.onResults((function(e){n.height=e.image.height,n.width=e.image.width,null==e.poseLandmarks?n.poses=[]:n.poses=[n.translateOutput(e.poseLandmarks,e.poseWorldLandmarks)]}))}return e.prototype.translateOutput=function(e,t){var n=this,r={keypoints:e.map((function(e,t){return{x:e.x*n.width,y:e.y*n.height,z:e.z,score:e.visibility,name:vm[t]}}))};return null!=t&&(r.keypoints3D=t.map((function(e,t){return{x:e.x,y:e.y,z:e.z,score:e.visibility,name:vm[t]}}))),r},e.prototype.estimatePoses=function(e,t,n){return fm(this,void 0,void 0,(function(){return dm(this,(function(r){switch(r.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.poseSolution.setOptions({selfieMode:this.selfieMode})),[4,this.poseSolution.send({image:e},n)];case 1:return r.sent(),[2,this.poses]}}))}))},e.prototype.dispose=function(){this.poseSolution.close()},e.prototype.reset=function(){this.poseSolution.reset()},e.prototype.initialize=function(){return this.poseSolution.initialize()},e}();function wm(e){return fm(this,void 0,void 0,(function(){var t,n;return dm(this,(function(r){switch(r.label){case 0:return t=function(e){if(null==e)return hm({},xm);var t=hm({},e);return t.runtime="mediapipe",null==t.enableSmoothing&&(t.enableSmoothing=xm.enableSmoothing),null==t.modelType&&(t.modelType=xm.modelType),t}(e),[4,(n=new km(t)).initialize()];case 1:return r.sent(),[2,n]}}))}))}function Sm(e){return e instanceof Yo?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function Em(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function Tm(e){return e instanceof Yo?e:Lu(e)}function _m(e,t){Rn(0!==e.width,(function(){return t+" width cannot be 0."})),Rn(0!==e.height,(function(){return t+" height cannot be 0."}))}function Cm(e,t,n){var r=t.inputResolution,a=t.keepAspectRatio,i=Sm(e),o=function(e,t){return t?{xCenter:t.xCenter*e.width,yCenter:t.yCenter*e.height,width:t.width*e.width,height:t.height*e.height,rotation:t.rotation}:{xCenter:.5*e.width,yCenter:.5*e.height,width:e.width,height:e.height,rotation:0}}(i,n),s=function(e,t,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var r=t.height,a=t.width;_m(t,"targetSize"),_m(e,"roi");var i,o,s=r/a,u=e.height/e.width,c=0,l=0;return s>u?(i=e.width,o=e.width*s,l=(1-u/s)/2):(i=e.height/s,o=e.height,c=(1-s/u)/2),e.width=i,e.height=o,{top:l,left:c,right:c,bottom:l}}(o,r,a);return{imageTensor:Gd((function(){var t=Tm(e),n=Sf(function(e,t,n,r){_m(r,"inputResolution");var a=1/t.width,i=1/t.height,o=e.xCenter,s=e.yCenter,u=Math.cos(e.rotation),c=Math.sin(e.rotation),l=e.width,h=e.height;return[1/r.width*l*u*1*a*t.width,1/r.height*-h*c*a*t.width,(-.5*l*u*1+.5*h*c+o)*a*t.width,1/r.width*l*c*1*i*t.height,1/r.height*h*u*i*t.height,(-.5*h*u-.5*l*c*1+s)*i*t.height,0,0]}(o,i,0,r),[1,8]);return yp.transform(pl(gu(t,"float32")),n,"bilinear","nearest",0,[r.height,r.width])})),padding:s}}function Im(e){return null!=e&&null!=e.currentTime}var Nm=function(){function e(e){this.alpha=e,this.initialized=!1}return e.prototype.apply=function(e,t){var n;return this.initialized?n=null==t?this.storedValue+this.alpha*(e-this.storedValue):this.storedValue+this.alpha*t*Math.asinh((e-this.storedValue)/t):(n=e,this.initialized=!0),this.rawValue=e,this.storedValue=n,n},e.prototype.applyWithAlpha=function(e,t,n){return this.alpha=t,this.apply(e,n)},e.prototype.hasLastRawValue=function(){return this.initialized},e.prototype.lastRawValue=function(){return this.rawValue},e.prototype.reset=function(){this.initialized=!1},e}(),Am=function(){function e(e){this.frequency=e.frequency,this.minCutOff=e.minCutOff,this.beta=e.beta,this.thresholdCutOff=e.thresholdCutOff,this.thresholdBeta=e.thresholdBeta,this.derivateCutOff=e.derivateCutOff,this.x=new Nm(this.getAlpha(this.minCutOff)),this.dx=new Nm(this.getAlpha(this.derivateCutOff)),this.lastTimestamp=0}return e.prototype.apply=function(e,t,n){if(null==e)return e;var r=Math.trunc(t);if(this.lastTimestamp>=r)return e;0!==this.lastTimestamp&&0!==r&&(this.frequency=1/(1e-6*(r-this.lastTimestamp))),this.lastTimestamp=r;var a=this.x.hasLastRawValue()?(e-this.x.lastRawValue())*n*this.frequency:0,i=this.dx.applyWithAlpha(a,this.getAlpha(this.derivateCutOff)),o=this.minCutOff+this.beta*Math.abs(i),s=null!=this.thresholdCutOff?this.thresholdCutOff+this.thresholdBeta*Math.abs(i):null;return this.x.applyWithAlpha(e,this.getAlpha(o),s)},e.prototype.getAlpha=function(e){return 1/(1+this.frequency/(2*Math.PI*e))},e}(),Rm=function(){function e(e){this.config=e}return e.prototype.apply=function(e,t,n){var r=this;if(null==e)return this.reset(),null;this.initializeFiltersIfEmpty(e);var a=1;if(!this.config.disableValueScaling){if(n<this.config.minAllowedObjectScale)return e.slice();a=1/n}return e.map((function(e,n){var i=hm({},e,{x:r.xFilters[n].apply(e.x,t,a),y:r.yFilters[n].apply(e.y,t,a)});return null!=e.z&&(i.z=r.zFilters[n].apply(e.z,t,a)),i}))},e.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},e.prototype.initializeFiltersIfEmpty=function(e){var t=this;null!=this.xFilters&&this.xFilters.length===e.length||(this.xFilters=e.map((function(e){return new Am(t.config)})),this.yFilters=e.map((function(e){return new Am(t.config)})),this.zFilters=e.map((function(e){return new Am(t.config)})))},e}();function Om(e,t){return e.map((function(e){var n=hm({},e,{x:e.x/t.width,y:e.y/t.height});return null!=e.z&&(e.z=e.z/t.width),n}))}var Dm=function(){function e(e){this.config=e,this.window=[],this.lowPassFilter=new Nm(1),this.lastValue=0,this.lastValueScale=1,this.lastTimestamp=-1}return e.prototype.apply=function(e,t,n){if(null==e)return e;var r,a=Math.trunc(t);if(this.lastTimestamp>=a)return e;if(-1===this.lastTimestamp)r=1;else{for(var i=e*n-this.lastValue*this.lastValueScale,o=a-this.lastTimestamp,s=i,u=o,c=(1+this.window.length)*(1e6/30),l=0,h=this.window;l<h.length;l++){var f=h[l];if(u+f.duration>c)break;s+=f.distance,u+=f.duration}var d=s/(1e-6*u);r=1-1/(1+this.config.velocityScale*Math.abs(d)),this.window.unshift({distance:i,duration:o}),this.window.length>this.config.windowSize&&this.window.pop()}return this.lastValue=e,this.lastValueScale=n,this.lastTimestamp=a,this.lowPassFilter.applyWithAlpha(e,r)},e}(),Mm=function(){function e(e){this.config=e}return e.prototype.apply=function(e,t,n){var r=this;if(null==e)return this.reset(),null;var a=1;if(!this.config.disableValueScaling){if(n<this.config.minAllowedObjectScale)return e.slice();a=1/n}return this.initializeFiltersIfEmpty(e),e.map((function(e,n){var i=hm({},e,{x:r.xFilters[n].apply(e.x,t,a),y:r.yFilters[n].apply(e.y,t,a)});return null!=e.z&&(i.z=r.zFilters[n].apply(e.z,t,a)),i}))},e.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},e.prototype.initializeFiltersIfEmpty=function(e){var t=this;null!=this.xFilters&&this.xFilters.length===e.length||(this.xFilters=e.map((function(e){return new Dm(t.config)})),this.yFilters=e.map((function(e){return new Dm(t.config)})),this.zFilters=e.map((function(e){return new Dm(t.config)})))},e}();function Pm(e,t){return e.map((function(e){var n=hm({},e,{x:e.x*t.width,y:e.y*t.height});return null!=e.z&&(n.z=e.z*t.width),n}))}var Lm=function(){function e(e){if(null!=e.velocityFilter)this.keypointsFilter=new Mm(e.velocityFilter);else{if(null==e.oneEuroFilter)throw new Error("Either configure velocityFilter or oneEuroFilter, but got "+e+".");this.keypointsFilter=new Rm(e.oneEuroFilter)}}return e.prototype.apply=function(e,t,n,r,a){if(void 0===r&&(r=!1),null==e)return this.keypointsFilter.reset(),null;var i=null!=a?function(e,t){return(e.width*t.width+e.height*t.height)/2}(a,n):1,o=r?Pm(e,n):e,s=this.keypointsFilter.apply(o,t,i);return r?Om(s,n):s},e}();function Fm(e,t){var n=function(e,t,n,r){var a=(r-n)/255;return{scale:a,offset:n-0*a}}(0,0,t[0],t[1]);return Gd((function(){return Ku(Sc(e,n.scale),n.offset)}))}function Bm(e,t,n){var r=n.rotationVectorStartKeypointIndex,a=n.rotationVectorEndKeypointIndex,i=e.locationData,o=i.relativeKeypoints[r].x*t.width,s=i.relativeKeypoints[r].y*t.height,u=i.relativeKeypoints[a].x*t.width,c=i.relativeKeypoints[a].y*t.height,l=2*Math.sqrt((u-o)*(u-o)+(c-s)*(c-s)),h=function(e,t,n){var r,a=e.locationData,i=n.rotationVectorStartKeypointIndex,o=n.rotationVectorEndKeypointIndex;r=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var s=a.relativeKeypoints[i].x*t.width,u=a.relativeKeypoints[i].y*t.height,c=a.relativeKeypoints[o].x*t.width,l=a.relativeKeypoints[o].y*t.height;return Em(r-Math.atan2(-(l-u),c-s))}(e,t,n);return{xCenter:o/t.width,yCenter:s/t.height,width:l/t.width,height:l/t.height,rotation:h}}function Vm(e,t,n,r){return 1===r?.5*(e+t):e+(t-e)*n/(r-1)}function Um(e){for(var t={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=0;o<e.length;++o){var s=e[o];n=Math.min(n,s.x),r=Math.max(r,s.x),a=Math.min(a,s.y),i=Math.max(i,s.y),t.locationData.relativeKeypoints.push({x:s.x,y:s.y})}return t.locationData.relativeBoundingBox={xMin:n,yMin:a,xMax:r,yMax:i,width:r-n,height:i-a},t}function jm(e,t,n,r){return fm(this,void 0,void 0,(function(){var a,i,o,s,u;return dm(this,(function(c){switch(c.label){case 0:return a=Sf(e.map((function(e){return[e.locationData.relativeBoundingBox.yMin,e.locationData.relativeBoundingBox.xMin,e.locationData.relativeBoundingBox.yMax,e.locationData.relativeBoundingBox.xMax]}))),i=wf(e.map((function(e){return e.score[0]}))),[4,yp.nonMaxSuppressionAsync(a,i,t,n,r)];case 1:return[4,(o=c.sent()).array()];case 2:return s=c.sent(),u=e.filter((function(e,t){return s.indexOf(t)>-1})),Kd([a,i,o]),[2,u]}}))}))}function zm(e,t,n){return fm(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,h,f,d,p,v,m,g,y,b,x,k,w,S,E,T,_;return dm(this,(function(C){switch(C.label){case 0:if(r=gf(t,[0]),a=r.shape,i=a[0],o=a[1],s=a[2],e.length!==s)throw new Error("Expected heatmap to have same number of channels as the number of landmarks. But got landmarks length: "+e.length+", heatmap length: "+s);return u=[],[4,r.buffer()];case 1:for(c=C.sent(),l=0;l<e.length;l++)if(h=e[l],f=hm({},h),u.push(f),d=Math.trunc(f.x*o),p=Math.trunc(f.y*i),!(d<0||d>=o||p<0||d>=i)){for(v=Math.trunc((n.kernelSize-1)/2),m=Math.max(0,d-v),g=Math.min(o,d+v+1),y=Math.max(0,p-v),b=Math.min(i,p+v+1),x=0,k=0,w=0,S=0,E=y;E<b;++E)for(T=m;T<g;++T)_=c.get(E,T,l),x+=_,S=Math.max(S,_),k+=T*_,w+=E*_;S>=n.minConfidenceToRefine&&x>0&&(f.x=k/o/x,f.y=w/i/x)}return r.dispose(),[2,u]}}))}))}function Wm(e,t,n){return fm(this,void 0,void 0,(function(){var r,a,i,o,s;return dm(this,(function(u){switch(u.label){case 0:return r=e[0],a=e[1],i=function(e,t,n){return Gd((function(){var r,a,i,o;n.reverseOutputOrder?(a=gf(Tc(e,[0,n.boxCoordOffset+0],[-1,1])),r=gf(Tc(e,[0,n.boxCoordOffset+1],[-1,1])),o=gf(Tc(e,[0,n.boxCoordOffset+2],[-1,1])),i=gf(Tc(e,[0,n.boxCoordOffset+3],[-1,1]))):(r=gf(Tc(e,[0,n.boxCoordOffset+0],[-1,1])),a=gf(Tc(e,[0,n.boxCoordOffset+1],[-1,1])),i=gf(Tc(e,[0,n.boxCoordOffset+2],[-1,1])),o=gf(Tc(e,[0,n.boxCoordOffset+3],[-1,1]))),a=Ku(Sc(al(a,n.xScale),t.w),t.x),r=Ku(Sc(al(r,n.yScale),t.h),t.y),n.applyExponentialOnBoxSize?(i=Sc(dl(al(i,n.hScale)),t.h),o=Sc(dl(al(o,n.wScale)),t.w)):(i=Sc(al(i,n.hScale),t.h),o=Sc(al(o,n.wScale),t.h));var s=Vl(r,al(i,2)),u=Vl(a,al(o,2)),c=Ku(r,al(i,2)),l=Ku(a,al(o,2)),h=kc([yc(s,[n.numBoxes,1]),yc(u,[n.numBoxes,1]),yc(c,[n.numBoxes,1]),yc(l,[n.numBoxes,1])],1);if(n.numKeypoints)for(var f=0;f<n.numKeypoints;++f){var d=n.keypointCoordOffset+f*n.numValuesPerKeypoint,p=void 0,v=void 0;n.reverseOutputOrder?(p=gf(Tc(e,[0,d],[-1,1])),v=gf(Tc(e,[0,d+1],[-1,1]))):(v=gf(Tc(e,[0,d],[-1,1])),p=gf(Tc(e,[0,d+1],[-1,1])));var m=Ku(Sc(al(p,n.xScale),t.w),t.x),g=Ku(Sc(al(v,n.yScale),t.h),t.y);h=kc([h,yc(m,[n.numBoxes,1]),yc(g,[n.numBoxes,1])],1)}return h}))}(a,t,n),o=Gd((function(){var e=r;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(e=Fc(r,-n.scoreClippingThresh,n.scoreClippingThresh)),e=Ec(e)):e})),[4,Hm(i,o,n)];case 1:return s=u.sent(),Kd([i,o]),[2,s]}}))}))}function Hm(e,t,n){return fm(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,h,f,d,p;return dm(this,(function(v){switch(v.label){case 0:return r=[],[4,e.data()];case 1:return a=v.sent(),[4,t.data()];case 2:for(i=v.sent(),o=0;o<n.numBoxes;++o)if(!(null!=n.minScoreThresh&&i[o]<n.minScoreThresh||(s=o*n.numCoords,u=Gm(a[s+0],a[s+1],a[s+2],a[s+3],i[o],n.flipVertically,o),(c=u.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((l=u.locationData).relativeKeypoints=[],h=n.numKeypoints*n.numValuesPerKeypoint,f=0;f<h;f+=n.numValuesPerKeypoint)d=s+n.keypointCoordOffset+f,p={x:a[d+0],y:n.flipVertically?1-a[d+1]:a[d+1]},l.relativeKeypoints.push(p);r.push(u)}return[2,r]}}))}))}function Gm(e,t,n,r,a,i,o){return{score:[a],ind:o,locationData:{relativeBoundingBox:{xMin:t,yMin:i?1-n:e,xMax:r,yMax:i?1-e:n,width:r-t,height:n-e}}}}function Km(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),fm(this,void 0,void 0,(function(){var a,i,o,s,u,c,l,h;return dm(this,(function(f){switch(f.label){case 0:return a=e.size,i=a/t.numLandmarks,[4,e.data()];case 1:for(o=f.sent(),s=[],u=0;u<t.numLandmarks;++u)c=u*i,(h={x:0,y:0}).x=n?t.inputImageWidth-o[c]:o[c],i>1&&(h.y=r?t.inputImageHeight-o[c+1]:o[c+1]),i>2&&(h.z=o[c+2]),i>3&&(h.score=(d=o[c+3],1/(1+Math.exp(-d)))),s.push(h);for(l=0;l<s.length;++l)(h=s[l]).x=h.x/t.inputImageWidth,h.y=h.y/t.inputImageHeight,h.z=h.z/t.inputImageWidth/(t.normalizeZ||1);return[2,s]}var d}))}))}function qm(e,t,n){var r=e.width,a=e.height,i=e.rotation;if(null==n.rotation&&null==n.rotationDegree||(i=function(e,t){return null!=t.rotation?e+=t.rotation:null!=t.rotationDegree&&(e+=Math.PI*t.rotationDegree/180),Em(e)}(i,n)),0===i)e.xCenter=e.xCenter+r*n.shiftX,e.yCenter=e.yCenter+a*n.shiftY;else{var o=(t.width*r*n.shiftX*Math.cos(i)-t.height*a*n.shiftY*Math.sin(i))/t.width,s=(t.width*r*n.shiftX*Math.sin(i)+t.height*a*n.shiftY*Math.cos(i))/t.height;e.xCenter=e.xCenter+o,e.yCenter=e.yCenter+s}if(n.squareLong){var u=Math.max(r*t.width,a*t.height);r=u/t.width,a=u/t.height}else if(n.squareShort){var c=Math.min(r*t.width,a*t.height);r=c/t.width,a=c/t.height}return e.width=r*n.scaleX,e.height=a*n.scaleY,e}var Xm=function(){function e(e){this.alpha=e.alpha}return e.prototype.apply=function(e){var t=this;if(null==e)return this.visibilityFilters=null,null;null!=this.visibilityFilters&&this.visibilityFilters.length===e.length||(this.visibilityFilters=e.map((function(e){return new Nm(t.alpha)})));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=hm({},a);i.score=this.visibilityFilters[r].apply(a.score),n.push(i)}return n},e}(),Ym={reduceBoxesInLowestlayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:5,minScale:.1484375,maxScale:.75,inputSizeHeight:224,inputSizeWidth:224,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,32,32,32],aspectRatios:[1],fixedAnchorSize:!0},$m={runtime:"tfjs",modelType:"full",enableSmoothing:!0,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/detector/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/1"},Qm={maxPoses:1,flipHorizontal:!1},Jm={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2254,numCoords:12,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:4,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:224,yScale:224,hScale:224,wScale:224,minScoreThresh:.5},Zm={shiftX:0,shiftY:0,scaleX:1.25,scaleY:1.25,squareLong:!0},eg={inputResolution:{width:224,height:224},keepAspectRatio:!0},tg={inputResolution:{width:256,height:256},keepAspectRatio:!0},ng={numLandmarks:39,inputImageWidth:256,inputImageHeight:256},rg={numLandmarks:39,inputImageWidth:1,inputImageHeight:1},ag={kernelSize:7,minConfidenceToRefine:.5},ig={alpha:.1},og={oneEuroFilter:{frequency:30,minCutOff:.05,beta:80,derivateCutOff:1,minAllowedObjectScale:1e-6}},sg={oneEuroFilter:{frequency:30,minCutOff:.01,beta:10,derivateCutOff:1,minAllowedObjectScale:1e-6}},ug={oneEuroFilter:{frequency:30,minCutOff:.1,beta:40,derivateCutOff:1,minAllowedObjectScale:1e-6,disableValueScaling:!0}},cg=function(){function e(e,t,n,r){this.detectorModel=e,this.landmarkModel=t,this.enableSmoothing=n,this.modelType=r,this.regionOfInterest=null,this.anchors=function(e){for(var t=[],n=0;n<e.numLayers;){for(var r=[],a=[],i=[],o=[],s=n;s<e.strides.length&&e.strides[s]===e.strides[n];){var u=Vm(e.minScale,e.maxScale,s,e.strides.length);if(0===s&&e.reduceBoxesInLowestLayer)i.push(1),i.push(2),i.push(.5),o.push(.1),o.push(u),o.push(u);else{for(var c=0;c<e.aspectRatios.length;++c)i.push(e.aspectRatios[c]),o.push(u);if(e.interpolatedScaleAspectRatio>0){var l=s===e.strides.length-1?1:Vm(e.minScale,e.maxScale,s+1,e.strides.length);o.push(Math.sqrt(u*l)),i.push(e.interpolatedScaleAspectRatio)}}s++}for(var h=0;h<i.length;++h){var f=Math.sqrt(i[h]);r.push(o[h]/f),a.push(o[h]*f)}var d=0,p=0;if(e.featureMapHeight.length>0)d=e.featureMapHeight[n],p=e.featureMapWidth[n];else{var v=e.strides[n];d=Math.ceil(e.inputSizeHeight/v),p=Math.ceil(e.inputSizeWidth/v)}for(var m=0;m<d;++m)for(var g=0;g<p;++g)for(var y=0;y<r.length;++y){var b={xCenter:(g+e.anchorOffsetX)/p,yCenter:(m+e.anchorOffsetY)/d,width:0,height:0};e.fixedAnchorSize?(b.width=1,b.height=1):(b.width=a[y],b.height=r[y]),t.push(b)}n=s}return t}(Ym);var a=wf(this.anchors.map((function(e){return e.width}))),i=wf(this.anchors.map((function(e){return e.height}))),o=wf(this.anchors.map((function(e){return e.xCenter}))),s=wf(this.anchors.map((function(e){return e.yCenter})));this.anchorTensor={x:o,y:s,w:a,h:i}}return e.prototype.estimatePoses=function(e,t,n){return fm(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,h,f,d,p,v,m,g,y,b,x;return dm(this,(function(k){switch(k.label){case 0:return r=function(e){var t;if(null==(t=null==e?Qm:hm({},e)).maxPoses&&(t.maxPoses=1),t.maxPoses<=0)throw new Error("Invalid maxPoses "+t.maxPoses+". Should be > 0.");if(t.maxPoses>1)throw new Error("Multi-pose detection is not implemented yet. Please set maxPoses to 1.");return t}(t),null==e?(this.reset(),[2,[]]):(this.maxPoses=r.maxPoses,this.timestamp=null!=n?1e3*n:Im(e)?1e6*e.currentTime:null,a=Sm(e),i=Gd((function(){return gu(Tm(e),"float32")})),null!=(o=this.regionOfInterest)?[3,2]:[4,this.detectPose(i)]);case 1:if(0===(s=k.sent()).length)return this.reset(),i.dispose(),[2,[]];u=s[0],o=this.poseDetectionToRoi(u,a),k.label=2;case 2:return[4,this.poseLandmarksByRoi(o,i)];case 3:return c=k.sent(),i.dispose(),null==c?(this.reset(),[2,[]]):(l=c.actualLandmarks,h=c.auxiliaryLandmarks,f=c.poseScore,d=c.actualWorldLandmarks,p=this.poseLandmarkFiltering(l,h,d,a),v=p.actualLandmarksFiltered,m=p.auxiliaryLandmarksFiltered,g=p.actualWorldLandmarksFiltered,y=this.poseLandmarksToRoi(m,a),this.regionOfInterest=y,null!=(b=null!=v?Pm(v,a):null)&&b.forEach((function(e,t){e.name=vm[t]})),null!=(x=g)&&x.forEach((function(e,t){e.name=vm[t]})),[2,[{score:f,keypoints:b,keypoints3D:x}]])}}))}))},e.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),Kd([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){this.regionOfInterest=null,this.visibilitySmoothingFilterActual=null,this.visibilitySmoothingFilterAuxiliary=null,this.landmarksSmoothingFilterActual=null,this.landmarksSmoothingFilterAuxiliary=null},e.prototype.detectPose=function(e){return fm(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,c;return dm(this,(function(l){switch(l.label){case 0:return t=Cm(e,eg),n=t.imageTensor,r=t.padding,a=Fm(n,[-1,1]),i=function(e,t){return Gd((function(){var n=function(e){return Gd((function(){var t=Tc(e,[0,0,0],[1,-1,1]);return[Ec(t),Tc(e,[0,0,1],[1,-1,-1])]}))}(t.predict(e)),r=n[0],a=n[1];return{boxes:gf(a),scores:gf(r)}}))}(a,this.detectorModel),o=i.boxes,[4,Wm([s=i.scores,o],this.anchorTensor,Jm)];case 1:return[4,jm(l.sent(),this.maxPoses,.3,-1)];case 2:return u=l.sent(),c=function(e,t){void 0===e&&(e=[]);for(var n=t.left,r=t.top,a=t.left+t.right,i=t.top+t.bottom,o=0;o<e.length;o++){var s=e[o],u=s.locationData.relativeBoundingBox,c=(u.xMin-n)/(1-a),l=(u.yMin-r)/(1-i),h=u.width/(1-a),f=u.height/(1-i);u.xMin=c,u.yMin=l,u.width=h,u.height=f;for(var d=0;d<s.locationData.relativeKeypoints.length;++d){var p=s.locationData.relativeKeypoints[d],v=(p.x-n)/(1-a),m=(p.y-r)/(1-i);p.x=v,p.y=m}}return e}(u,r),Kd([n,a,s,o]),[2,c]}}))}))},e.prototype.poseDetectionToRoi=function(e,t){return qm(Bm(e,t,{rotationVectorEndKeypointIndex:1,rotationVectorStartKeypointIndex:0,rotationVectorTargetAngleDegree:90}),t,Zm)},e.prototype.poseLandmarksByRoi=function(e,t){return fm(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,m,g,y,b,x,k;return dm(this,(function(w){switch(w.label){case 0:if(n=Cm(t,tg,e),r=n.imageTensor,a=n.padding,i=Fm(r,[0,1]),"lite"!==this.modelType&&"full"!==this.modelType&&"heavy"!==this.modelType)throw new Error("Model type must be one of lite, full or heavy,but got "+this.modelType);return o=this.landmarkModel.execute(i,["ld_3d","output_poseflag","activation_heatmap","world_3d"]),s=o[0],u=o[1],c=o[2],l=o[3],[4,u.data()];case 1:return(h=w.sent()[0])<.5?(Kd(o),Kd([r,i]),[2,null]):[4,Km(s,ng)];case 2:return[4,zm(f=w.sent(),c,ag)];case 3:return d=w.sent(),p=function(e,t){var n=t.left,r=t.top,a=t.left+t.right,i=t.top+t.bottom;return e.map((function(e){return hm({},e,{x:(e.x-n)/(1-a),y:(e.y-r)/(1-i),z:e.z/(1-a)})}))}(d,a),v=function(e,t,n){void 0===n&&(n={ignoreRotation:!1});for(var r=[],a=0,i=e;a<i.length;a++){var o=i[a],s=o.x-.5,u=o.y-.5,c=n.ignoreRotation?0:t.rotation,l=Math.cos(c)*s-Math.sin(c)*u,h=Math.sin(c)*s+Math.cos(c)*u;l=l*t.width+t.xCenter,h=h*t.height+t.yCenter;var f=o.z*t.width,d=hm({},o);d.x=l,d.y=h,d.z=f,r.push(d)}return r}(p,e),m=v.slice(0,33),g=v.slice(33,35),[4,Km(l,rg)];case 4:return y=w.sent(),b=function(e,t,n){void 0===n&&(n=!0);for(var r=[],a=0;a<e.length;a++){var i=hm({},t[a]);n&&(i.score=e[a].score),r.push(i)}return r}(f,y,!0),x=function(e,t){for(var n=[],r=0,a=e;r<a.length;r++){var i=a[r],o=i.x,s=i.y,u=t.rotation,c=Math.cos(u)*o-Math.sin(u)*s,l=Math.sin(u)*o+Math.cos(u)*s,h=hm({},i);h.x=c,h.y=l,n.push(h)}return n}(b,e),k=x.slice(0,33),Kd(o),Kd([r,i]),[2,{actualLandmarks:m,auxiliaryLandmarks:g,poseScore:h,actualWorldLandmarks:k}]}}))}))},e.prototype.poseLandmarksToRoi=function(e,t){return qm(Bm(Um(e),t,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:90}),t,Zm)},e.prototype.poseLandmarkFiltering=function(e,t,n,r){var a,i,o;if(null!=this.timestamp&&this.enableSmoothing){var s=Bm(Um(t),r,{rotationVectorEndKeypointIndex:0,rotationVectorStartKeypointIndex:1,rotationVectorTargetAngleDegree:90});null==this.visibilitySmoothingFilterActual&&(this.visibilitySmoothingFilterActual=new Xm(ig)),a=this.visibilitySmoothingFilterActual.apply(e),null==this.visibilitySmoothingFilterAuxiliary&&(this.visibilitySmoothingFilterAuxiliary=new Xm(ig)),i=this.visibilitySmoothingFilterAuxiliary.apply(t),o=this.visibilitySmoothingFilterActual.apply(n),null==this.landmarksSmoothingFilterActual&&(this.landmarksSmoothingFilterActual=new Lm(og)),a=this.landmarksSmoothingFilterActual.apply(a,this.timestamp,r,!0,s),null==this.landmarksSmoothingFilterAuxiliary&&(this.landmarksSmoothingFilterAuxiliary=new Lm(sg)),i=this.landmarksSmoothingFilterAuxiliary.apply(i,this.timestamp,r,!0,s),null==this.worldLandmarksSmoothingFilterActual&&(this.worldLandmarksSmoothingFilterActual=new Lm(ug)),o=this.worldLandmarksSmoothingFilterActual.apply(n,this.timestamp)}else a=e,i=t,o=n;return{actualLandmarksFiltered:a,auxiliaryLandmarksFiltered:i,actualWorldLandmarksFiltered:o}},e}();function lg(e){return fm(this,void 0,void 0,(function(){var t,n,r,a,i,o;return dm(this,(function(s){switch(s.label){case 0:return t=function(e){var t=hm({},null==e?$m:e);if(null==t.enableSmoothing&&(t.enableSmoothing=$m.enableSmoothing),null==t.modelType&&(t.modelType=$m.modelType),null==t.detectorModelUrl&&(t.detectorModelUrl=$m.detectorModelUrl),null==t.landmarkModelUrl)switch(t.modelType){case"lite":t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/lite/1";break;case"heavy":t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/heavy/1";break;default:t.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/1"}return t}(e),n=t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r=t.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([sm(t.detectorModelUrl,{fromTFHub:n}),sm(t.landmarkModelUrl,{fromTFHub:r})])];case 1:return a=s.sent(),i=a[0],o=a[1],[2,new cg(i,o,t.enableSmoothing,t.modelType)]}}))}))}var hg,fg,dg=function(){function e(e){!function(e){if(e.maxTracks<1)throw new Error("Must specify 'maxTracks' to be at least 1, but encountered "+e.maxTracks);if(e.maxAge<=0)throw new Error("Must specify 'maxAge' to be positive, but encountered "+e.maxAge);if(void 0!==e.keypointTrackerParams){if(e.keypointTrackerParams.keypointConfidenceThreshold<0||e.keypointTrackerParams.keypointConfidenceThreshold>1)throw new Error("Must specify 'keypointConfidenceThreshold' to be in the range [0, 1], but encountered "+e.keypointTrackerParams.keypointConfidenceThreshold);if(e.keypointTrackerParams.minNumberOfKeypoints<1)throw new Error("Must specify 'minNumberOfKeypoints' to be at least 1, but encountered "+e.keypointTrackerParams.minNumberOfKeypoints);for(var t=0,n=e.keypointTrackerParams.keypointFalloff;t<n.length;t++){var r=n[t];if(r<=0)throw new Error("Must specify each keypoint falloff parameterto be positive but encountered "+r)}}}(e),this.tracks=[],this.maxTracks=e.maxTracks,this.maxAge=1e3*e.maxAge,this.minSimilarity=e.minSimilarity,this.nextID=1}return e.prototype.apply=function(e,t){this.filterOldTracks(t);var n=this.computeSimilarity(e);return this.assignTracks(e,n,t),this.updateTracks(t),e},e.prototype.getTracks=function(){return this.tracks.slice()},e.prototype.getTrackIDs=function(){return new Set(this.tracks.map((function(e){return e.id})))},e.prototype.filterOldTracks=function(e){var t=this;this.tracks=this.tracks.filter((function(n){return e-n.lastTimestamp<=t.maxAge}))},e.prototype.assignTracks=function(e,t,n){for(var r=Array.from(Array(t[0].length).keys()),a=[],i=0,o=Array.from(Array(e.length).keys());i<o.length;i++){var s=o[i];if(0!==r.length){for(var u=-1,c=-1,l=0,h=r;l<h.length;l++){var f=h[l],d=t[s][f];d>=this.minSimilarity&&d>c&&(u=f,c=d)}if(u>=0){var p=this.tracks[u];p=Object.assign(p,this.createTrack(e[s],n,p.id)),e[s].id=p.id;var v=r.indexOf(u);r.splice(v,1)}else a.push(s)}else a.push(s)}for(var m=0,g=a;m<g.length;m++){s=g[m];var y=this.createTrack(e[s],n);this.tracks.push(y),e[s].id=y.id}},e.prototype.updateTracks=function(e){this.tracks.sort((function(e,t){return t.lastTimestamp-e.lastTimestamp})),this.tracks=this.tracks.slice(0,this.maxTracks)},e.prototype.createTrack=function(e,t,n){var r={id:n||this.nextTrackID(),lastTimestamp:t,keypoints:e.keypoints.slice().map((function(e){return hm({},e)}))};return void 0!==e.box&&(r.box=hm({},e.box)),r},e.prototype.nextTrackID=function(){var e=this.nextID;return this.nextID+=1,e},e.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.tracks=this.tracks.filter((function(t){return!e.includes(t.id)}))},e.prototype.reset=function(){this.tracks=[]},e}(),pg=function(e){function t(t){return e.call(this,t)||this}return lm(t,e),t.prototype.computeSimilarity=function(e){var t=this;return 0===e.length||0===this.tracks.length?[[]]:e.map((function(e){return t.tracks.map((function(n){return t.iou(e,n)}))}))},t.prototype.iou=function(e,t){var n=Math.max(e.box.xMin,t.box.xMin),r=Math.max(e.box.yMin,t.box.yMin),a=Math.min(e.box.xMax,t.box.xMax),i=Math.min(e.box.yMax,t.box.yMax);if(n>=a||r>=i)return 0;var o=(a-n)*(i-r);return o/(e.box.width*e.box.height+t.box.width*t.box.height-o)},t}(dg),vg=function(e){function t(t){var n=e.call(this,t)||this;return n.keypointThreshold=t.keypointTrackerParams.keypointConfidenceThreshold,n.keypointFalloff=t.keypointTrackerParams.keypointFalloff,n.minNumKeyoints=t.keypointTrackerParams.minNumberOfKeypoints,n}return lm(t,e),t.prototype.computeSimilarity=function(e){if(0===e.length||0===this.tracks.length)return[[]];for(var t=[],n=0,r=e;n<r.length;n++){for(var a=r[n],i=[],o=0,s=this.tracks;o<s.length;o++){var u=s[o];i.push(this.oks(a,u))}t.push(i)}return t},t.prototype.oks=function(e,t){for(var n=this.area(t.keypoints)+1e-6,r=0,a=0,i=0;i<e.keypoints.length;++i){var o=e.keypoints[i],s=t.keypoints[i];if(!(o.score<this.keypointThreshold||s.score<this.keypointThreshold)){a+=1;var u=Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2),c=2*this.keypointFalloff[i];r+=Math.exp(-1*u/(2*n*Math.pow(c,2)))}}return a<this.minNumKeyoints?0:r/a},t.prototype.area=function(e){var t=this,n=e.filter((function(e){return e.score>t.keypointThreshold})),r=Math.min.apply(Math,[1].concat(n.map((function(e){return e.x})))),a=Math.max.apply(Math,[0].concat(n.map((function(e){return e.x})))),i=Math.min.apply(Math,[1].concat(n.map((function(e){return e.y}))));return(a-r)*(Math.max.apply(Math,[0].concat(n.map((function(e){return e.y}))))-i)},t}(dg);function mg(e){switch(e){case fg.BlazePose:return vm.reduce((function(e,t,n){return e[t]=n,e}),{});case fg.PoseNet:case fg.MoveNet:return pm.reduce((function(e,t,n){return e[t]=n,e}),{});default:throw new Error("Model "+e+" is not supported.")}}!function(e){e.Keypoint="keypoint",e.BoundingBox="boundingBox"}(hg||(hg={})),function(e){e.MoveNet="MoveNet",e.BlazePose="BlazePose",e.PoseNet="PoseNet"}(fg||(fg={}));Object.freeze({__proto__:null,getKeypointIndexBySide:function(e){switch(e){case fg.BlazePose:return mm;case fg.PoseNet:case fg.MoveNet:return gm;default:throw new Error("Model "+e+" is not supported.")}},getAdjacentPairs:function(e){switch(e){case fg.BlazePose:return bm;case fg.PoseNet:case fg.MoveNet:return ym;default:throw new Error("Model "+e+" is not supported.")}},getKeypointIndexByName:mg});var gg=["SinglePose.Lightning","SinglePose.Thunder","MultiPose.Lightning"],yg={modelType:"SinglePose.Lightning",enableSmoothing:!0},bg={},xg={frequency:30,minCutOff:2.5,beta:300,derivateCutOff:2.5,thresholdCutOff:.5,thresholdBeta:5,disableValueScaling:!0},kg={maxTracks:18,maxAge:1e3,minSimilarity:.2,keypointTrackerParams:{keypointConfidenceThreshold:.3,keypointFalloff:[.026,.025,.025,.035,.035,.079,.079,.072,.072,.062,.062,.107,.107,.087,.087,.089,.089],minNumberOfKeypoints:4}},wg={maxTracks:18,maxAge:1e3,minSimilarity:.15,trackerParams:{}};function Sg(e,t){var n,r,a,i;return e?t.width>t.height?(n=1,r=t.height/t.width,a=0,i=(t.width/2-t.height/2)/t.width):(n=t.width/t.height,r=1,a=(t.height/2-t.width/2)/t.height,i=0):t.width>t.height?(n=t.width/t.height,r=1,a=(t.height/2-t.width/2)/t.height,i=0):(n=1,r=t.height/t.width,a=0,i=(t.width/2-t.height/2)/t.width),{yMin:a,xMin:i,yMax:a+n,xMax:i+r,height:n,width:r}}function Eg(e,t){var n={maxTracks:e.maxTracks,maxAge:e.maxAge,minSimilarity:e.minSimilarity};return null!=t.maxTracks&&(n.maxTracks=t.maxTracks),null!=t.maxAge&&(n.maxAge=t.maxAge),null!=t.minSimilarity&&(n.minSimilarity=t.minSimilarity),n}var Tg=function(){function e(e,t){this.moveNetModel=e,this.modelInputResolution={height:0,width:0},this.keypointIndexByName=mg(fg.MoveNet),"SinglePose.Lightning"===t.modelType?(this.modelInputResolution.width=192,this.modelInputResolution.height=192):"SinglePose.Thunder"===t.modelType&&(this.modelInputResolution.width=256,this.modelInputResolution.height=256),this.multiPoseModel="MultiPose.Lightning"===t.modelType,this.multiPoseModel||(this.keypointFilter=new Rm(xg),this.cropRegionFilterYMin=new Nm(.9),this.cropRegionFilterXMin=new Nm(.9),this.cropRegionFilterYMax=new Nm(.9),this.cropRegionFilterXMax=new Nm(.9)),this.enableSmoothing=t.enableSmoothing,t.minPoseScore?this.minPoseScore=t.minPoseScore:this.minPoseScore=.25,t.multiPoseMaxDimension?this.multiPoseMaxDimension=t.multiPoseMaxDimension:this.multiPoseMaxDimension=256,this.enableTracking=t.enableTracking,this.multiPoseModel&&this.enableTracking&&(t.trackerType===hg.Keypoint?this.tracker=new vg(t.trackerConfig):t.trackerType===hg.BoundingBox&&(this.tracker=new pg(t.trackerConfig)),this.enableSmoothing&&(this.keypointFilterMap=new Map))}return e.prototype.runSinglePersonPoseModel=function(e){return fm(this,void 0,void 0,(function(){var t,n,r,a,i;return dm(this,(function(o){switch(o.label){case 0:if(4!==(t=this.moveNetModel.execute(e)).shape.length||1!==t.shape[0]||1!==t.shape[1]||17!==t.shape[2]||3!==t.shape[3])throw t.dispose(),new Error("Unexpected output shape from model: ["+t.shape+"]");return"webgpu"===Xd()?[3,1]:(n=t.dataSync(),[3,3]);case 1:return[4,t.data()];case 2:n=o.sent(),o.label=3;case 3:for(t.dispose(),r={keypoints:[],score:0},a=0,i=0;i<17;++i)r.keypoints[i]={y:n[3*i],x:n[3*i+1],score:n[3*i+2]},r.keypoints[i].score>.2&&(++a,r.score+=r.keypoints[i].score);return a>0&&(r.score/=a),[2,r]}}))}))},e.prototype.runMultiPersonPoseModel=function(e){return fm(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u;return dm(this,(function(c){switch(c.label){case 0:if(3!==(t=this.moveNetModel.execute(e)).shape.length||1!==t.shape[0]||56!==t.shape[2])throw t.dispose(),new Error("Unexpected output shape from model: ["+t.shape+"]");return"webgpu"===Xd()?[3,1]:(n=t.dataSync(),[3,3]);case 1:return[4,t.data()];case 2:n=c.sent(),c.label=3;case 3:for(t.dispose(),r=[],a=n.length/56,i=0;i<a;++i)for(r[i]={keypoints:[]},o=56*i+51,r[i].box={yMin:n[o],xMin:n[o+1],yMax:n[o+2],xMax:n[o+3],width:n[o+3]-n[o+1],height:n[o+2]-n[o]},s=56*i+55,r[i].score=n[s],r[i].keypoints=[],u=0;u<17;++u)r[i].keypoints[u]={y:n[56*i+3*u],x:n[56*i+3*u+1],score:n[56*i+3*u+2]};return[2,r]}}))}))},e.prototype.estimatePoses=function(e,t,n){return void 0===t&&(t=bg),fm(this,void 0,void 0,(function(){var r,a,i,o,s,u;return dm(this,(function(c){switch(c.label){case 0:return t=function(e){return null==e?bg:hm({},e)}(t),null==e?(this.reset(),[2,[]]):(null==n?Im(e)&&(n=1e6*e.currentTime):n*=1e3,r=Tm(e),a=Sm(r),i=pl(r,0),e instanceof Yo||r.dispose(),o=[],this.multiPoseModel?[3,2]:[4,this.estimateSinglePose(i,a,n)]);case 1:return o=c.sent(),[3,4];case 2:return[4,this.estimateMultiplePoses(i,a,n)];case 3:o=c.sent(),c.label=4;case 4:for(s=0;s<o.length;++s)for(u=0;u<o[s].keypoints.length;++u)o[s].keypoints[u].name=pm[u],o[s].keypoints[u].y*=a.height,o[s].keypoints[u].x*=a.width;return[2,o]}}))}))},e.prototype.estimateSinglePose=function(e,t,n){return fm(this,void 0,void 0,(function(){var r,a,i,o,s=this;return dm(this,(function(u){switch(u.label){case 0:return this.cropRegion||(this.cropRegion=Sg(null==this.cropRegion,t)),r=Gd((function(){var t=Sf([[s.cropRegion.yMin,s.cropRegion.xMin,s.cropRegion.yMax,s.cropRegion.xMax]]),n=ih([1],"int32"),r=[s.modelInputResolution.height,s.modelInputResolution.width];return gu(yp.cropAndResize(e,t,n,r,"bilinear",0),"int32")})),e.dispose(),[4,this.runSinglePersonPoseModel(r)];case 1:if(a=u.sent(),r.dispose(),a.score<this.minPoseScore)return this.reset(),[2,[]];for(i=0;i<a.keypoints.length;++i)a.keypoints[i].y=this.cropRegion.yMin+a.keypoints[i].y*this.cropRegion.height,a.keypoints[i].x=this.cropRegion.xMin+a.keypoints[i].x*this.cropRegion.width;return null!=n&&this.enableSmoothing&&(a.keypoints=this.keypointFilter.apply(a.keypoints,n,1)),o=function(e,t,n,r){for(var a={},i=0,o=pm;i<o.length;i++){var s=o[i];a[s]=[t[n[s]].y*r.height,t[n[s]].x*r.width]}if(function(e,t){return(e[t.left_hip].score>.2||e[t.right_hip].score>.2)&&(e[t.left_shoulder].score>.2||e[t.right_shoulder].score>.2)}(t,n)){var u=(a.left_hip[0]+a.right_hip[0])/2,c=(a.left_hip[1]+a.right_hip[1])/2,l=function(e,t,n,r,a){for(var i=["left_shoulder","right_shoulder","left_hip","right_hip"],o=0,s=0,u=0;u<i.length;u++)(d=Math.abs(r-n[i[u]][0]))>o&&(o=d),(p=Math.abs(a-n[i[u]][1]))>s&&(s=p);for(var c=0,l=0,h=0,f=Object.keys(n);h<f.length;h++){var d,p,v=f[h];e[t[v]].score<.2||((d=Math.abs(r-n[v][0]))>c&&(c=d),(p=Math.abs(a-n[v][1]))>l&&(l=p))}return[o,s,c,l]}(t,n,a,u,c),h=l[0],f=l[1],d=l[2],p=l[3],v=Math.max(1.9*f,1.9*h,1.2*d,1.2*p),m=[u-(v=Math.min(v,Math.max(c,r.width-c,u,r.height-u))),c-v];if(v>Math.max(r.width,r.height)/2)return Sg(null==e,r);var g=2*v;return{yMin:m[0]/r.height,xMin:m[1]/r.width,yMax:(m[0]+g)/r.height,xMax:(m[1]+g)/r.width,height:(m[0]+g)/r.height-m[0]/r.height,width:(m[1]+g)/r.width-m[1]/r.width}}return Sg(null==e,r)}(this.cropRegion,a.keypoints,this.keypointIndexByName,t),this.cropRegion=this.filterCropRegion(o),[2,[a]]}}))}))},e.prototype.estimateMultiplePoses=function(e,t,n){return fm(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,h,f,d,p=this;return dm(this,(function(v){switch(v.label){case 0:return t.width>t.height?(a=this.multiPoseMaxDimension,i=Math.round(this.multiPoseMaxDimension*t.height/t.width),r=yp.resizeBilinear(e,[i,a]),s=a,u=32*Math.ceil(i/32),o=xh(r,[[0,0],[0,u-i],[0,0],[0,0]])):(a=Math.round(this.multiPoseMaxDimension*t.width/t.height),i=this.multiPoseMaxDimension,r=yp.resizeBilinear(e,[i,a]),s=32*Math.ceil(a/32),u=i,o=xh(r,[[0,0],[0,0],[0,s-a],[0,0]])),r.dispose(),e.dispose(),c=gu(o,"int32"),o.dispose(),[4,this.runMultiPersonPoseModel(c)];case 1:for(l=v.sent(),c.dispose(),l=l.filter((function(e){return e.score>=p.minPoseScore})),f=0;f<l.length;++f)for(h=0;h<l[f].keypoints.length;++h)l[f].keypoints[h].y*=u/i,l[f].keypoints[h].x*=s/a;if(this.enableTracking&&(this.tracker.apply(l,n),this.enableSmoothing)){for(f=0;f<l.length;++f)this.keypointFilterMap.has(l[f].id)||this.keypointFilterMap.set(l[f].id,new Rm(xg)),l[f].keypoints=this.keypointFilterMap.get(l[f].id).apply(l[f].keypoints,n,1);d=this.tracker.getTrackIDs(),this.keypointFilterMap.forEach((function(e,t){d.has(t)||p.keypointFilterMap.delete(t)}))}return[2,l]}}))}))},e.prototype.filterCropRegion=function(e){if(e){var t=this.cropRegionFilterYMin.apply(e.yMin),n=this.cropRegionFilterXMin.apply(e.xMin),r=this.cropRegionFilterYMax.apply(e.yMax),a=this.cropRegionFilterXMax.apply(e.xMax);return{yMin:t,xMin:n,yMax:r,xMax:a,height:r-t,width:a-n}}return this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset(),null},e.prototype.dispose=function(){this.moveNetModel.dispose()},e.prototype.reset=function(){this.cropRegion=null,this.resetFilters()},e.prototype.resetFilters=function(){this.keypointFilter.reset(),this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset()},e}();function _g(e){return void 0===e&&(e=yg),fm(this,void 0,void 0,(function(){var t,n,r,a;return dm(this,(function(i){switch(i.label){case 0:return t=function(e){var t,n=null==e?yg:hm({},e);if(null==n.modelType)n.modelType="SinglePose.Lightning";else if(gg.indexOf(n.modelType)<0)throw new Error("Invalid architecture "+n.modelType+". Should be one of "+gg);if(null==n.enableSmoothing&&(n.enableSmoothing=!0),null!=n.minPoseScore&&(n.minPoseScore<0||n.minPoseScore>1))throw new Error("minPoseScore should be between 0.0 and 1.0");if(null!=n.multiPoseMaxDimension&&(n.multiPoseMaxDimension%32!=0||n.multiPoseMaxDimension<128||n.multiPoseMaxDimension>512))throw new Error("multiPoseResolution must be a multiple of 32 and between 128 and 512");if("MultiPose.Lightning"===n.modelType&&null==n.enableTracking&&(n.enableTracking=!0),"MultiPose.Lightning"===n.modelType&&!0===n.enableTracking)if(null==n.trackerType&&(n.trackerType=hg.BoundingBox),n.trackerType===hg.Keypoint)null!=n.trackerConfig?n.trackerConfig=function(e){var t=Eg(kg,e);return t.keypointTrackerParams=hm({},kg.keypointTrackerParams),null!=e.keypointTrackerParams&&(null!=e.keypointTrackerParams.keypointConfidenceThreshold&&(t.keypointTrackerParams.keypointConfidenceThreshold=e.keypointTrackerParams.keypointConfidenceThreshold),null!=e.keypointTrackerParams.keypointFalloff&&(t.keypointTrackerParams.keypointFalloff=e.keypointTrackerParams.keypointFalloff),null!=e.keypointTrackerParams.minNumberOfKeypoints&&(t.keypointTrackerParams.minNumberOfKeypoints=e.keypointTrackerParams.minNumberOfKeypoints)),t}(n.trackerConfig):n.trackerConfig=kg;else{if(n.trackerType!==hg.BoundingBox)throw new Error("Tracker type not supported by MoveNet");null!=n.trackerConfig?n.trackerConfig=(t=n.trackerConfig,Eg(wg,t)):n.trackerConfig=wg}return n}(e),r=!0,t.modelUrl?(r=t.modelUrl.indexOf("https://tfhub.dev")>-1,[4,sm(t.modelUrl,{fromTFHub:r})]):[3,2];case 1:return n=i.sent(),[3,4];case 2:return a=void 0,"SinglePose.Lightning"===t.modelType?a="https://tfhub.dev/google/tfjs-model/movenet/singlepose/lightning/4":"SinglePose.Thunder"===t.modelType?a="https://tfhub.dev/google/tfjs-model/movenet/singlepose/thunder/4":"MultiPose.Lightning"===t.modelType&&(a="https://tfhub.dev/google/tfjs-model/movenet/multipose/lightning/1"),[4,sm(a,{fromTFHub:r})];case 3:n=i.sent(),i.label=4;case 4:return"webgl"===Xd()&&hr().set("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",0),[2,new Tg(n,t)]}}))}))}var Cg={architecture:"MobileNetV1",outputStride:16,multiplier:.75,inputResolution:{height:257,width:257}},Ig=["MobileNetV1","ResNet50"],Ng={MobileNetV1:[8,16],ResNet50:[16]},Ag=[8,16,32],Rg={MobileNetV1:[.5,.75,1],ResNet50:[1]},Og=[1,2,4],Dg={maxPoses:1,flipHorizontal:!1},Mg={maxPoses:5,flipHorizontal:!1,scoreThreshold:.5,nmsRadius:20},Pg=[-123.15,-115.9,-103.06];function Lg(e){return Math.floor(e/2)}var Fg=function(){function e(e,t){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=t}return e.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},e.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},e.prototype.empty=function(){return-1===this.numberOfElements},e.prototype.size=function(){return this.numberOfElements+1},e.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},e.prototype.max=function(){return this.priorityQueue[0]},e.prototype.swim=function(e){for(;e>0&&this.less(Lg(e),e);)this.exchange(e,Lg(e)),e=Lg(e)},e.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}},e.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},e.prototype.less=function(e,t){return this.getValueAt(e)<this.getValueAt(t)},e.prototype.exchange=function(e,t){var n=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=n},e}();function Bg(e,t,n,r,a,i){for(var o=i.shape,s=o[0],u=o[1],c=!0,l=Math.max(n-a,0),h=Math.min(n+a+1,s),f=l;f<h;++f){for(var d=Math.max(r-a,0),p=Math.min(r+a+1,u),v=d;v<p;++v)if(i.get(f,v,e)>t){c=!1;break}if(!c)break}return c}function Vg(e){return fm(this,void 0,void 0,(function(){return dm(this,(function(t){return[2,Promise.all(e.map((function(e){return e.buffer()})))]}))}))}function Ug(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+17)}}function jg(e,t,n){var r=Ug(e.heatmapY,e.heatmapX,e.id,n),a=r.y,i=r.x;return{x:e.heatmapX*t+i,y:e.heatmapY*t+a}}function zg(e,t,n,r){var a=n.x,i=n.y;return e.some((function(e){var n,o,s,u,c=e.keypoints;return n=i,o=a,(s=c[r].y-n)*s+(u=c[r].x-o)*u<=t}))}var Wg=pm.reduce((function(e,t,n){return e[t]=n,e}),{}),Hg=[["nose","left_eye"],["left_eye","left_ear"],["nose","right_eye"],["right_eye","right_ear"],["nose","left_shoulder"],["left_shoulder","left_elbow"],["left_elbow","left_wrist"],["left_shoulder","left_hip"],["left_hip","left_knee"],["left_knee","left_ankle"],["nose","right_shoulder"],["right_shoulder","right_elbow"],["right_elbow","right_wrist"],["right_shoulder","right_hip"],["right_hip","right_knee"],["right_knee","right_ankle"]].map((function(e){var t=e[0],n=e[1];return[Wg[t],Wg[n]]})),Gg=Hg.map((function(e){return e[1]})),Kg=Hg.map((function(e){return e[0]}));function qg(e,t,n){return e<t?t:e>n?n:e}function Xg(e,t,n,r){return{y:qg(Math.round(e.y/t),0,n-1),x:qg(Math.round(e.x/t),0,r-1)}}function Yg(e,t){return{x:e.x+t.x,y:e.y+t.y}}function $g(e,t,n,r,a,i,o,s){void 0===s&&(s=2);for(var u=r.shape,c=u[0],l=u[1],h={y:t.y,x:t.x},f=Yg(h,function(e,t,n){var r=n.shape[2]/2;return{y:n.get(t.y,t.x,e),x:n.get(t.y,t.x,r+e)}}(e,Xg(h,i,c,l),o)),d=0;d<s;d++){var p=Xg(f,i,c,l),v=Ug(p.y,p.x,n,a);f=Yg({x:p.x*i,y:p.y*i},{x:v.x,y:v.y})}var m=Xg(f,i,c,l),g=r.get(m.y,m.x,n);return{y:f.y,x:f.x,name:pm[n],score:g}}function Qg(e,t,n,r,a,i){var o=t.shape[2],s=Gg.length,u=new Array(o),c=e.part,l=e.score,h=jg(c,r,n);u[c.id]={score:l,name:pm[c.id],y:h.y,x:h.x};for(var f=s-1;f>=0;--f){var d=Gg[f],p=Kg[f];u[d]&&!u[p]&&(u[p]=$g(f,u[d],p,t,n,r,i))}for(f=0;f<s;++f)d=Kg[f],p=Gg[f],u[d]&&!u[p]&&(u[p]=$g(f,u[d],p,t,n,r,a));return u}function Jg(e,t,n){return n.reduce((function(n,r,a){var i=r.y,o=r.x,s=r.score;return zg(e,t,{y:i,x:o},a)||(n+=s),n}),0)/n.length}function Zg(e,t,n,r,a,i,o,s){return void 0===o&&(o=.5),void 0===s&&(s=20),fm(this,void 0,void 0,(function(){var u,c,l,h,f,d,p,v,m,g,y,b;return dm(this,(function(x){switch(x.label){case 0:return[4,Vg([e,t,n,r])];case 1:for(u=x.sent(),c=u[0],l=u[1],h=u[2],f=u[3],d=[],p=function(e,t,n){for(var r=n.shape,a=r[0],i=r[1],o=r[2],s=new Fg(a*i*o,(function(e){return e.score})),u=0;u<a;++u)for(var c=0;c<i;++c)for(var l=0;l<o;++l){var h=n.get(u,c,l);h<e||Bg(l,h,u,c,1,n)&&s.enqueue({score:h,part:{heatmapY:u,heatmapX:c,id:l}})}return s}(o,0,c),v=s*s;d.length<i&&!p.empty();)m=p.dequeue(),g=jg(m.part,a,l),zg(d,v,g,m.part.id)||(y=Qg(m,c,l,a,h,f),b=Jg(d,v,y),d.push({keypoints:y,score:b}));return[2,d]}}))}))}function ey(e,t,n){return Gd((function(){var r=function(e,t){for(var n=[],r=0;r<pm.length;r++){var a=ty(e.get(r,0).valueOf(),e.get(r,1).valueOf(),r,t),i=a.x,o=a.y;n.push(o),n.push(i)}return Sf(n,[pm.length,2])}(e,n);return Ku(gu(Sc(e.toTensor(),$h(t,"int32")),"float32"),r)}))}function ty(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+pm.length)}}function ny(e,t,n){return fm(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,h,f;return dm(this,(function(d){switch(d.label){case 0:return r=0,a=function(e){var t=e.shape,n=t[0],r=t[1],a=t[2];return Gd((function(){var t,i,o=yc(e,[n*r,a]),s=$u(o,0),u=pl(al(s,$h(r,"int32")),1),c=pl((t=s,i=r,Gd((function(){var e=al(t,$h(i,"int32"));return Vl(t,Sc(e,$h(i,"int32")))}))),1);return kc([u,c],1)}))}(e),[4,Promise.all([e.buffer(),t.buffer(),a.buffer()])];case 1:return i=d.sent(),o=i[0],s=i[1],u=i[2],[4,(c=ey(u,n,s)).buffer()];case 2:return l=d.sent(),h=Array.from(function(e,t){for(var n=t.shape[0],r=new Float32Array(n),a=0;a<n;a++){var i=t.get(a,0),o=t.get(a,1);r[a]=e.get(i,o,a)}return r}(o,u)),f=h.map((function(e,t){return r+=e,{y:l.get(t,0),x:l.get(t,1),score:e,name:pm[t]}})),a.dispose(),c.dispose(),[2,{keypoints:f,score:r/f.length}]}}))}))}function ry(e,t){return(e-1)%t==0}var ay="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/",iy="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/";function oy(e,t){return function(e,t){return(e-1)%t==0}(e,t)?e:Math.floor(e/t)*t+1}var sy=function(){function e(e,t){this.posenetModel=e;var n=this.posenetModel.inputs[0].shape;Rn(-1===n[1]&&-1===n[2],(function(){return"Input shape ["+n[1]+", "+n[2]+"] must both be equal to or -1"}));var r,a,i=(r=t.inputResolution,a=t.outputStride,{height:oy(r.height,a),width:oy(r.width,a)});!function(e){Rn(Ag.indexOf(e)>=0,(function(){return"outputStride of "+e+" is invalid. It must be either 8 or 16."}))}(t.outputStride),function(e,t){Rn(ry(e.height,t),(function(){return"height of "+e.height+" is invalid for output stride "+t+"."})),Rn(ry(e.width,t),(function(){return"width of "+e.width+" is invalid for output stride "+t+"."}))}(i,t.outputStride),this.inputResolution=i,this.outputStride=t.outputStride,this.architecture=t.architecture}return e.prototype.estimatePoses=function(e,t){return void 0===t&&(t=Dg),fm(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,m;return dm(this,(function(g){switch(g.label){case 0:return n=function(e){var t=e;if(null==t.maxPoses&&(t.maxPoses=1),t.maxPoses<=0)throw new Error("Invalid maxPoses "+t.maxPoses+". Should be > 0.");if(t.maxPoses>1){if((t=hm({},Mg,t)).scoreThreshold<0||t.scoreThreshold>1)throw new Error("Invalid scoreThreshold "+t.scoreThreshold+". Should be in range [0.0, 1.0]");if(t.nmsRadius<=0)throw new Error("Invalid nmsRadius "+t.nmsRadius+".")}return t}(t),null==e?[2,[]]:(this.maxPoses=n.maxPoses,r=Cm(e,{inputResolution:this.inputResolution,keepAspectRatio:!0}),a=r.imageTensor,i=r.padding,o="ResNet50"===this.architecture?Ku(a,Pg):Fm(a,[-1,1]),s=this.posenetModel.predict(o),"ResNet50"===this.architecture?(u=gf(s[2],[0]),c=gf(s[3],[0]),l=gf(s[0],[0]),h=gf(s[1],[0])):(u=gf(s[0],[0]),c=gf(s[1],[0]),l=gf(s[2],[0]),h=gf(s[3],[0])),f=Ec(c),1!==this.maxPoses?[3,2]:[4,ny(f,u,this.outputStride)]);case 1:return p=g.sent(),d=[p],[3,4];case 2:return[4,Zg(f,u,l,h,this.outputStride,this.maxPoses,n.scoreThreshold,n.nmsRadius)];case 3:d=g.sent(),g.label=4;case 4:return v=Sm(e),m=function(e,t,n,r){var a=t.height,i=t.width,o=a/(n.height*(1-r.top-r.bottom)),s=i/(n.width*(1-r.left-r.right)),u=-r.top*n.height,c=-r.left*n.width;if(1===s&&1===o&&0===u&&0===c)return e;for(var l=0,h=e;l<h.length;l++)for(var f=0,d=h[l].keypoints;f<d.length;f++){var p=d[f];p.x=(p.x+c)*s,p.y=(p.y+u)*o}return e}(d,v,this.inputResolution,i),n.flipHorizontal&&(m=function(e,t){for(var n=0,r=e;n<r.length;n++)for(var a=0,i=r[n].keypoints;a<i.length;a++){var o=i[a];o.x=t.width-1-o.x}return e}(m,v)),a.dispose(),o.dispose(),Kd(s),u.dispose(),c.dispose(),l.dispose(),h.dispose(),f.dispose(),[2,m]}}))}))},e.prototype.dispose=function(){this.posenetModel.dispose()},e.prototype.reset=function(){},e}();function uy(e){return void 0===e&&(e=Cg),fm(this,void 0,void 0,(function(){var t,n,r,a,i;return dm(this,(function(o){switch(o.label){case 0:return"ResNet50"!==(t=function(e){var t=e||Cg;if(null==t.architecture&&(t.architecture="MobileNetV1"),Ig.indexOf(t.architecture)<0)throw new Error("Invalid architecture "+t.architecture+". Should be one of "+Ig);if(null==t.inputResolution&&(t.inputResolution={height:257,width:257}),null==t.outputStride&&(t.outputStride=16),Ng[t.architecture].indexOf(t.outputStride)<0)throw new Error("Invalid outputStride "+t.outputStride+". Should be one of "+Ng[t.architecture]+" for architecture "+t.architecture+".");if(null==t.multiplier&&(t.multiplier=1),Rg[t.architecture].indexOf(t.multiplier)<0)throw new Error("Invalid multiplier "+t.multiplier+". Should be one of "+Rg[t.architecture]+" for architecture "+t.architecture+".");if(null==t.quantBytes&&(t.quantBytes=4),Og.indexOf(t.quantBytes)<0)throw new Error("Invalid quantBytes "+t.quantBytes+". Should be one of "+Og+" for architecture "+t.architecture+".");if("MobileNetV1"===t.architecture&&32===t.outputStride&&1!==t.multiplier)throw new Error("When using an output stride of 32, you must select 1 as the multiplier.");return t}(e)).architecture?[3,2]:(s=t.outputStride,u=t.quantBytes,c="model-stride"+s+".json",n=4===u?iy+"float/"+c:iy+"quant"+u+"/"+c,[4,sm(t.modelUrl||n)]);case 1:return r=o.sent(),[2,new sy(r,t)];case 2:return a=function(e,t,n){var r={1:"100",.75:"075",.5:"050"},a="model-stride"+e+".json";return 4===n?ay+"float/"+r[t]+"/"+a:ay+"quant"+n+"/"+r[t]+"/"+a}(t.outputStride,t.multiplier,t.quantBytes),[4,sm(t.modelUrl||a)];case 3:return i=o.sent(),[2,new sy(i,t)]}var s,u,c}))}))}function cy(e,t){return fm(this,void 0,void 0,(function(){var n,r;return dm(this,(function(a){switch(e){case fg.PoseNet:return[2,uy(t)];case fg.BlazePose:if(r=void 0,null!=(n=t)){if("tfjs"===n.runtime)return[2,lg(t)];if("mediapipe"===n.runtime)return[2,wm(t)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r);case fg.MoveNet:return[2,_g(t)];default:throw new Error(e+" is not a supported model name.")}}))}))}var ly,hy,fy,dy={SINGLEPOSE_LIGHTNING:"SinglePose.Lightning",SINGLEPOSE_THUNDER:"SinglePose.Thunder",MULTIPOSE_LIGHTNING:"MultiPose.Lightning"},py={},vy={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function my(e,t){if(!(e in py)){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete py[e]}),!1),1===e)return n.getContext("webgl",vy)||n.getContext("experimental-webgl",vy);return n.getContext("webgl2",vy)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;py[e]=n}var r=py[e];return null==r||r.isContextLost()?(delete py[e],my(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),py[e])}function gy(e,t){return[t,e]}function yy(e){var t=Pn(e);return Bn(Math.ceil(t/4))}function by(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function xy(e,t){var n,r,a,i,o,s,u,c,l,h,f=e;return 2===hr().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,a=f.RGBA16F,i=f.RGBA32F,o=f.RED,u=4,c=1,l=f.HALF_FLOAT,h=f.FLOAT,s=f.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=f.RGBA,o=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:h}}function ky(e,t){var n=t();return hr().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(ly||(ly={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(hy||(hy={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(fy||(fy={}));function wy(e){return!!(hr().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function Sy(e,t){return Ly(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function Ey(e,t){var n=Ly(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(ky(e,(function(){return e.shaderSource(n,t)})),ky(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=Cy.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return Vn((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),h=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(Vn(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var Ty,_y,Cy=/ERROR: [0-9]+:([0-9]+):/g;function Iy(e,t){if(ky(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Ny(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(ky(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),ky(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),ky(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function Ay(e,t,n){return Ly(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function Ry(e,t,n){return e.getUniformLocation(t,n)}function Oy(e,t,n,r){ky(e,(function(){return function(e,t,n){Fy(e,n),ky(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),ky(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),ky(e,(function(){return e.uniform1i(n,r)}))}function Dy(e,t,n){ky(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),ky(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function My(e,t){ky(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),ky(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Py(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function Ly(e,t,n){var r=ky(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function Fy(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function By(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Pn(e.slice(0,e.length-t))}function Vy(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Uy(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[By(e)].concat(kn(Vy(e)))),t}function jy(e){return e%2===0}function zy(e,t){if(Ln(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(jy(n)&&jy(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&jy(e[0])&&jy(t[0])}function Wy(e,t){return null!=e.getExtension(t)}function Hy(e){try{if(null!=my(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Gy(e){if(0===e)return!1;var t=my(e);if(1!==e){if(Wy(t,"EXT_color_buffer_float"))return Ky(t);var n="EXT_color_buffer_half_float";if(Wy(t,n)){var r=t.getExtension(n);return function(e,t){var n=xy(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!Wy(t,"OES_texture_float")&&(!!Wy(t,"WEBGL_color_buffer_float")&&Ky(t))}function Ky(e){var t=xy(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function qy(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Rn("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var Xy=hr();function Yy(){var e,t,n,r,a,i,o,s,u,c;return 2===hr().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function $y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Jn(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function Qy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Jn(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function Jy(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function Zy(e){var t=Jn(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}Xy.registerFlag("HAS_WEBGL",(function(){return Xy.getNumber("WEBGL_VERSION")>0})),Xy.registerFlag("WEBGL_VERSION",(function(){return Hy(2)?2:Hy(1)?1:0})),Xy.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),Xy.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Xy.get("WEBGL_VERSION")})),Xy.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Xy.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Xy.registerFlag("WEBGL_PACK",(function(){return Xy.getBool("HAS_WEBGL")})),Xy.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Xy.getBool("WEBGL_PACK")})),Xy.registerFlag("WEBGL_PACK_CLIP",(function(){return Xy.getBool("WEBGL_PACK")})),Xy.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return Xy.getBool("WEBGL_PACK")})),Xy.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Xy.getBool("WEBGL_PACK")})),Xy.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Xy.getBool("WEBGL_PACK")})),Xy.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Xy.getBool("WEBGL_PACK")})),Xy.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Xy.getBool("WEBGL_PACK")})),Xy.registerFlag("WEBGL_PACK_REDUCE",(function(){return Xy.getBool("WEBGL_PACK")})),Xy.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Xy.getBool("WEBGL_PACK")})),Xy.registerFlag("WEBGL_CONV_IM2COL",(function(){return Xy.getBool("WEBGL_PACK")})),Xy.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==Ty){var t=my(e);Ty=t.getParameter(t.MAX_TEXTURE_SIZE)}return Ty}(Xy.getNumber("WEBGL_VERSION"))})),Xy.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==_y){var t=my(e);_y=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,_y)}(Xy.getNumber("WEBGL_VERSION"))})),Xy.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Xy.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=my(e);return Wy(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Wy(t,"EXT_disjoint_timer_query")?1:0}(e)})),Xy.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Xy.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!gs()})),Xy.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=my(e);if(1===e){if(!Wy(t,"OES_texture_float"))return!1}else if(!Wy(t,"EXT_color_buffer_float"))return!1;return Ky(t)}(Xy.getNumber("WEBGL_VERSION"))})),Xy.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Xy.getBool("WEBGL_FORCE_F16_TEXTURES")&&Xy.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Xy.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Gy(Xy.getNumber("WEBGL_VERSION"))})),Xy.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=Xy.getNumber("WEBGL_VERSION"))&&null!=my(e).fenceSync;var e})),Xy.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Xy.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Xy.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),Xy.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return gs()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),Xy.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),Xy.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),Xy.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),Xy.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var eb="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",tb=Ou;function nb(e,t,n){var r=[];if(e.forEach((function(e){var t=Pn(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(kb(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?ab(e,r):rb(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?yb(e,t):bb(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=Yy(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),h=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(ib,"\n    ").concat(ob,"\n    ").concat(sb,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Ln(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(Ln(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=Qy(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=$y(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=Qy(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=$y(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=$y(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=$y(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(h+=ub),[h,l,i,o,a,s,n.userCode].join("\n")}function rb(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return lb(e,t);case 1:return hb(e,t);case 2:return fb(e,t);case 3:return db(e,t);case 4:return pb(e,t);case 5:return vb(e);case 6:return mb(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function ab(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Yy();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=Yy();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=Yy();if(null!=i&&Ln(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=wb(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(ab(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(Sb(c,s),");\n        }\n      ")}var l=Yy();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var h=o[0],f=o[1],d=Math.ceil(n[2]/2),p=d*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(h,", ").concat(f,", ").concat(p,", ").concat(d,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Yy();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],h=Math.ceil(i[o-1]/2),f=h*Math.ceil(i[o-2]/2),d="int b, int row, int col",p="b * ".concat(f," + (row / 2) * ").concat(h," + (col / 2)"),v=2;v<o-1;v++)d="int b".concat(v,", ")+d,f*=i[o-v-1],p="b".concat(v," * ").concat(f," + ")+p;return"\n    vec4 ".concat(r,"(").concat(d,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var ib="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ob="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",sb="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ub="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function cb(e){return"offset".concat(e)}function lb(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=bt(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=cb(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=bt(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function hb(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(gb(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=cb(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function fb(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&Ln(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=zn(n),c=u.newShape,l=u.keptDims,h=c;if(h.length<n.length){var f=wb(e,h);return"\n      ".concat(rb(f,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(Sb(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(gb(e),"\n      }\n    ");var d=i[0],p=i[1],v=cb(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===d?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function db(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=zn(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var h=wb(e,l);return"\n        ".concat(rb(h,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(Sb(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(gb(e),"\n      }\n    ");var f=e.shapeInfo.texShape,d=f[0],p=f[1],v=e.shapeInfo.flatOffset;if(p===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(d,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(p===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var m=cb(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function pb(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=zn(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var h=wb(e,c);return"\n      ".concat(rb(h,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(Sb(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(gb(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],v=d[1],m="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(m,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=cb(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(m,"\n      ").concat(g,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function vb(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=zn(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var h=wb(e,c);return"\n      ".concat(rb(h),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(Sb(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(gb(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],v=d[1];if(v===s&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=cb(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function mb(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=zn(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=wb(e,i);return"\n      ".concat(rb(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(Sb(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,h=t[2]*l,f=t[1]*h;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(f,", ").concat(h,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(gb(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],m=p[1];if(m===f&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(h,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===u&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=cb(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(f," + col * ").concat(h," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function gb(e){var t=e.name,n=Pn(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function yb(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=tb(e.shapeInfo.logicalShape,t.logicalShape),c=xb(s),l=s-o,h=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(h[e+l]," = 0;")})).join("\n");var f="";f=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(h[t+l])})).join(", ");var d="return outputValue;",p=1===Pn(e.shapeInfo.logicalShape),v=1===Pn(t.logicalShape);if(1!==o||p||v){if(p&&!v)d=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var m=o-2,g=o-1;u.indexOf(m)>-1&&u.indexOf(g)>-1?d="return vec4(outputValue.x);":u.indexOf(m)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(f,");\n      ").concat(d,"\n    }\n  ")}function bb(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Ln(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=xb(u),h=tb(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,d=["x","y","z","w","u","v"];c=0===s?"":u<2&&h.length>=1?"coords = 0;":h.map((function(e){return"coords.".concat(d[e+f]," = 0;")})).join("\n");var p="";return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+f])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}function xb(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function kb(e,t,n){var r=zn(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,c=!e&&o>1&&!Ln(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:i}}function wb(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Sb(e,t){return t.map((function(t){return e[t]})).join(", ")}function Eb(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=nb(a,o,t),u=Ey(e.gl,s),c=e.createProgram(u),l=null,h=e.getUniformLocation(c,"NAN",!1);1===hr().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var f,d,p,v=!1,m={},g={},y={},b=0;b<t.variableNames.length;b++){var x=t.variableNames[b];m[x]=e.getUniformLocation(c,x,v),m["offset".concat(x)]=e.getUniformLocation(c,"offset".concat(x),v),t.enableShapeUniforms&&(g["".concat(x,"Shape")]=e.getUniformLocation(c,"".concat(x,"Shape"),v),y["".concat(x,"TexShape")]=e.getUniformLocation(c,"".concat(x,"TexShape"),v))}t.enableShapeUniforms&&(f=e.getUniformLocation(c,"outShape",v),p=e.getUniformLocation(c,"outShapeStrides",v),d=e.getUniformLocation(c,"outTexShape",v));var k=[];return t.customUniforms&&t.customUniforms.forEach((function(t,n){k[n]=e.getUniformLocation(c,t.name,v)})),{program:t,fragmentShader:u,source:s,webGLProgram:c,uniformLocations:m,customUniformLocations:k,inShapeInfos:i,outShapeInfo:o,infLoc:l,nanLoc:h,inShapesLocations:g,inTexShapesLocations:y,outShapeLocation:f,outShapeStridesLocation:p,outTexShapeLocation:d}}function Tb(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!Ln(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Ln(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function _b(e,t,n,r,a){t.program.enableShapeUniforms||(Tb(t.inShapeInfos,n),Tb([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===hr().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=kb(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(Pn(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(i,l)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=Jn(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function Cb(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=kb(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,c=o.keptDims,l="",h="",f="";if(1===u.length&&e.packedInputs){var d=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(d[0]>1,"_").concat(d[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var p=Jn(u);f="".concat(p[0]===i[1],"_").concat(p[p.length-1]===i[1])}}else h="".concat(u[0]>1,"_").concat(u[1]>1);var v=t.shape.length,m=2===u.length&&Ln(t.shape,i),g=1===Pn(t.shape),y=Ou(t.shape,n.shape),b=!e.packedInputs&&v===n.shape.length&&Ln(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(m,"_").concat(l,"_").concat(h,"_").concat(f,"_").concat(x,"_").concat(a)}else{var k=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(k,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(hr().getNumber("WEBGL_VERSION"))}function Ib(e){return hr().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var Nb=En((function e(t){wn(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ly.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Yy();this.outputShape=t,this.enableShapeUniforms=Ib(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Qy(["r","c","d"],t):$y(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),Ab=En((function e(t){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ly.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Yy();this.outputShape=t,this.enableShapeUniforms=Ib(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Qy(["r","c","d"],t):$y(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),Rb=En((function e(t){wn(this,e),this.variableNames=["A"],this.outTexUsage=hy.DOWNLOAD;var n=Yy();this.outputShape=t,this.userCode="\n      ".concat(eb,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),Ob=En((function e(t){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=hy.DOWNLOAD;var n=Yy();this.outputShape=t,this.userCode="\n      ".concat(eb,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),Db=En((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];wn(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Yy();this.outputShape=t,this.enableShapeUniforms=Ib(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Zy(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),Mb=En((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];wn(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Yy();this.outputShape=t,this.enableShapeUniforms=Ib(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Zy(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function Pb(e){var t=Yy();return function(e,t){var n=Ly(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(ky(e,(function(){return e.shaderSource(n,t)})),ky(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function Lb(e){return function(e,t){var n=Ly(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return ky(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),ky(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Fb(e){return function(e,t){var n=Ly(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return ky(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),ky(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function Bb(e,t,n,r,a,i){!function(e,t){var n=hr().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return Ly(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return ky(e,(function(){return e.bindTexture(s,o)})),ky(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),ky(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),ky(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),ky(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===hr().getNumber("WEBGL_VERSION")?ky(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):ky(e,(function(){return e.texStorage2D(s,1,r,t,n)})),ky(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function Vb(e){return e.internalFormatFloat}function Ub(e){return e.internalFormatHalfFloat}function jb(e){return e.downloadTextureFormat}function zb(e){return e.internalFormatPackedFloat}function Wb(e){return e.internalFormatPackedHalfFloat}function Hb(e,t,n,r,a,i,o,s){var u=e,c=new Float32Array(function(e,t){var n=bt(by(e,t),2);return n[0]*n[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}var Gb=function(){function e(t){wn(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=hr().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){py[e]=t}(n,t)):this.gl=my(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(1===hr().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=Sy(this.gl,"OES_texture_float"),Wy(this.gl,i))this.textureHalfFloatExtension=Sy(this.gl,i);else if(hr().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Wy(this.gl,a))this.colorBufferHalfFloatExtension=Sy(this.gl,a);else if(hr().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Wy(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Wy(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=Lb(this.gl),this.indexBuffer=Fb(this.gl),this.framebuffer=function(e){return Ly(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=xy(this.gl,this.textureHalfFloatExtension)}return En(e,[{key:"debug",get:function(){return hr().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;ky(t,(function(){return t.finish()})),ky(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),ky(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),ky(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),ky(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),ky(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=bt(gy(t,n),2);return Bb(e,a[0],a[1],Vb(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=bt(gy(t,n),2);return Bb(e,a[0],a[1],Ub(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=bt(gy(t,n),2);return Bb(e,a[0],a[1],jb(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){ky(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===hr().getNumber("WEBGL_VERSION")?ky(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):ky(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===hr().getNumber("WEBGL_VERSION")?ky(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):ky(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),ky(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;ky(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===hr().getNumber("WEBGL_VERSION")?ky(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):ky(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),ky(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=bt(by(t,n),2);return Bb(e,a[0],a[1],Wb(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=bt(by(t,n),2);return Bb(e,a[0],a[1],zb(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(My(this.gl,this.framebuffer),this.outputTexture=null),ky(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=bt(gy(t,n),2),i=a[0],o=a[1],s=new Uint8Array(t*n*4);return ky(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return Hb(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();ky(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return ky(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),ky(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),ky(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(hr().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return ky(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=Pb(n));var r=function(e){return Ly(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return ky(n,(function(){return n.attachShader(r,t.vertexShader)})),ky(n,(function(){return n.attachShader(r,e)})),function(e,t){if(ky(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&Iy(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return ky(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),Ny(e,t,"clipSpacePos",n,3,20,0)&&Ny(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&ky(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Iy(this.gl,this.program),ky(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?Ay(this.gl,e,t):Ry(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),ky(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Oy(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=bt(by(t,n),2),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&Iy(this.gl,this.program),Py(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),ky(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),ky(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Sy(this.gl,2===hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=vn(gn().mark((function e(t){var n=this;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un((function(){return n.disposed||n.isQueryAvailable(t,hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Un((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),Dy(this.gl,e,this.framebuffer),this.debug&&Py(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(Dy(this.gl,this.outputTexture,this.framebuffer),this.debug&&Py(this.gl)):My(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;Dy(r,e,this.framebuffer),this.debug&&Py(r),this.outputTexture=e,ky(r,(function(){return r.viewport(0,0,t,n)})),ky(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),ky(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();function Kb(e){return function(t,n,r,a,i){var o=Du(t,n),s=o.length,u=Jn(o),c=Wn(i,Pn(o)),l=t.length,h=n.length,f=Jn(t),d=Jn(n),p=Ou(t,o),v=Ou(n,o);if(p.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=e(r[m%r.length],a[m%a.length]);else for(var g=function(t){var n=ir(t,s,u),i=n.slice(-l);p.forEach((function(e){return i[e]=0}));var o=ar(i,l,f),m=n.slice(-h);v.forEach((function(e){return m[e]=0}));var g=ar(m,h,d);c[t]=e(r[o],a[g])},y=0;y<c.length;++y)g(y);return[c,o]}}function qb(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Rn("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}function Xb(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}function Yb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=Yb(e,t,"float32"),a=Yb(e,t,"float32");return Xb({inputs:{real:r,imag:a},backend:e})}var i=nr(Pn(t),n);return e.makeTensorInfo(t,n,i)}function $b(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function Qb(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}function Jb(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return $b({inputs:{x:a},backend:n});var o=Yb(n,a.shape,a.dtype),s=Jb({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=Xb({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=Qb({inputs:{input:a},backend:n}),l=Jb({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),l}if(!Gn(a.dtype,i)){var h=$b({inputs:{x:a},backend:n});return{dataId:h.dataId,shape:h.shape,dtype:i}}if("int32"===i){var f=n.data.get(a.dataId).values,d=Int32Array.from(f);return n.makeTensorInfo(a.shape,"int32",d)}if("bool"===i){var p=n.data.get(a.dataId).values,v=To([0],a.dtype),m=Kb((function(e,t){return e!==t?1:0}))(a.shape,[],p,v,"bool"),g=bt(m,2),y=g[0],b=g[1];return n.makeTensorInfo(b,"bool",y)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}function Zb(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;qb([o,s],e);var c=u.data.get(o.dataId).values,l=u.data.get(s.dataId).values,h="string"===o.dtype?Up(c):c,f="string"===o.dtype?Up(l):l,d=r||o.dtype,p=bt(t(o.shape,s.shape,h,f,d),2),v=p[0],m=p[1];return u.makeTensorInfo(m,d,v)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=Jb({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),h=l.complexTensorInfos.real,f=l.complexTensorInfos.imag,d=u.data.get(h.dataId).values,p=u.data.get(f.dataId).values,v=Jb({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),m=u.data.get(v.dataId),g=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,b=u.data.get(g.dataId).values,x=u.data.get(y.dataId).values,k=bt(n(o.shape,s.shape,d,p,b,x),3),w=k[0],S=k[1],E=k[2],T=u.makeTensorInfo(E,"float32",w),_=u.makeTensorInfo(E,"float32",S),C=Xb({inputs:{real:T,imag:_},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(T),u.disposeIntermediateTensorInfo(_),C}var I=u.data.get(o.dataId).values,N=u.data.get(s.dataId).values,A=r||o.dtype,R=bt(t(o.shape,s.shape,I,N,A),2),O=R[0],D=R[1];return u.makeTensorInfo(D,A,O)}}function ex(e){return function(t,n,r,a,i,o){var s=Du(t,n),u=Pn(s),c=s.length,l=Jn(s),h=Wn("float32",u),f=Wn("float32",u),d=Ou(t,s),p=Ou(n,s),v=Ip(r,a),m=Ip(i,o),g=t.length,y=Jn(t),b=n.length,x=Jn(n);if(d.length+p.length===0)for(var k=0;k<h.length;k++){var w=k%v.length,S=k%m.length,E=e(v[2*w],v[2*w+1],m[2*S],m[2*S+1]);h[k]=E.real,f[k]=E.imag}else for(var T=function(t){var n=ir(t,c,l),r=n.slice(-g);d.forEach((function(e){return r[e]=0}));var a=ar(r,g,y),i=n.slice(-b);p.forEach((function(e){return i[e]=0}));var o=ar(i,b,x),s=e(v[2*a],v[2*a+1],m[2*o],m[2*o+1]);h[t]=s.real,f[t]=s.imag},_=0;_<h.length;_++)T(_);return[h,f,s]}}var tx=Kb((function(e,t){return e+t})),nx=ex((function(e,t,n,r){return{real:e+n,imag:t+r}}));Zb(br,tx,nx);function rx(e){return function(t,n,r){for(var a=Wn(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function ax(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(qb(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,c=u.data.get(s.dataId).values,l=Pn(s.shape),h=n||s.dtype,f=Hn(h,l),d=0;d<l;++d)f[d]=t(c[d],i);return u.makeTensorInfo(s.shape,h,f)}}function ix(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(qb(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,c=u.data.get(s.dataId).values,l=n||s.dtype,h=t(c,l,i);return u.makeTensorInfo(s.shape,l,h)}}var ox=rx((function(e){return Math.ceil(e)}));ix(Fr,ox);var sx=Kb((function(e,t){return e===t?1:0})),ux=(Zb(ia,sx,null,"bool"),rx((function(e){return Math.exp(e)}))),cx=(ix(oa,ux,"float32"),rx((function(e){return Math.expm1(e)}))),lx=(ix(ua,cx),rx((function(e){return Math.floor(e)})));ix(ha,lx);var hx=Kb((function(e,t){return e>t?1:0})),fx=(Zb(ma,hx,null,"bool"),Kb((function(e,t){return e>=t?1:0}))),dx=(Zb(ga,fx,null,"bool"),Kb((function(e,t){return e<t?1:0}))),px=(Zb(Ta,dx,null,"bool"),Kb((function(e,t){return e<=t?1:0})));Zb(_a,px,null,"bool");var vx=rx((function(e){return Math.log(e)}));ix(Ia,vx);var mx=Kb((function(e,t){return Math.max(e,t)})),gx=(Zb(Pa,mx),Kb((function(e,t){return Math.min(e,t)}))),yx=(Zb(ja,gx),Kb((function(e,t){return e*t}))),bx=ex((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}));Zb(Ha,yx,bx);function xx(e,t,n){var r=Eo(-1,n);return yx([],t,r,e,n)}var kx=Kb((function(e,t){return e!==t?1:0}));Zb(Ka,kx,null,"bool");function wx(e,t,n,r,a){for(var i=t.length,o=Pn(t),s=Jn(t),u=Jn(a),c=Wn(n,Pn(a)),l=0;l<o;++l){for(var h=ir(l,i,s),f=new Array(h.length),d=0;d<f.length;d++)f[d]=h[r[d]];c[ar(f,i,u)]=e[l]}return c}function Sx(e,t,n,r){for(var a=bt(Wl(e,r),2),i=a[0],o=a[1],s=rs(t,"int32"),u=nr(Pn(i),s),c=Pn(o),l=0;l<u.length;++l){for(var h=l*c,f=1,d=0;d<c;++d)f*=n[h+d];u[l]=f}return{outVals:u,outShape:i,outDtype:s}}var Ex=rx((function(e){return 1/Math.sqrt(e)})),Tx=(ix(fi,Ex),rx((function(e){return 1/(1+Math.exp(-e))})));ax(bi,(function(e){return 1/(1+Math.exp(-e))}));function _x(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function Cx(e,t,n,r,a){var i=Bu(r,t,n),o=Pn(n),s=Jn(r);if(i){var u=Vu(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c=mu(r,a,"string"===a?Up(e):e),l=mu(n,a),h=0;h<l.size;++h){var f=l.indexToLoc(h),d=f.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,kn(d))].concat(kn(f)))}return"string"===a?l.values.map((function(e){return Co(e)})):l.values}var Ix=rx((function(e){return Math.sqrt(e)}));ax(ki,(function(e){return Math.sqrt(e)}));var Nx=function(){function e(t,n,r,a,i,o){wn(this,e),this.separator=Co(t),this.nGramWidths=n,this.leftPad=Co(r),this.rightPad=Co(a),this.padWidth=i,this.preserveShort=o}return En(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),h=i-(c+l),f=t+(c>0?0:s-u),d=0;d+=c*o.leftPad.length;for(var p=0;p<h;++p)d+=e[f+p].length;d+=l*o.rightPad.length,d+=(c+l+h-1)*o.separator.length,n[r+s]=new Uint8Array(d);for(var v=n[r+s],m=0,g=function(e){return e.forEach((function(e){return v[m++]=e}))},y=0;y<c;++y)g(o.leftPad),g(o.separator);for(var b=0;b<h-1;++b)g(e[f+b]),g(o.separator);if(h>0){g(e[f+h-1]);for(var x=0;x<l;++x)g(o.separator),g(o.rightPad)}else{for(var k=0;k<l-1;++k)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,c=Hn("int32",a);if(0===r||0===a){for(var l=new Array(r),h=0;h<=u;++h)c[h]=0;return[l,c]}c[0]=0;for(var f=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},d=1;d<=u;++d)f(d);for(var p=new Array(c[u]),v=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,p,i,u,o),i+=u})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,p,i,1,s)}},m=0;m<u;++m)v(m);return[p,c]}}]),e}();function Ax(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}var Rx=Kb((function(e,t){return e-t})),Ox=ex((function(e,t,n,r){return{real:e-n,imag:t-r}}));Zb(Li,Rx,Ox);var Dx=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function Mx(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),c=Math.max(n,Math.floor(t-i*s/a+u)),l=Math.min(r,Math.floor(t+(a-i)*s/a+u));Mx(e,t,c,l)}var h=e[t],f=n,d=r;for(Nn(e,n,t),Dx(e[r],h)>0&&Nn(e,n,r);f<d;){for(Nn(e,f,d),f++,d--;Dx(e[f],h)<0;)f+=1;for(;Dx(e[d],h)>0;)d-=1}0===Dx(e[n],h)?Nn(e,n,d):Nn(e,d+=1,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}var Px=tx,Lx=function(e,t,n,r,a){for(var i=Pn(r),o=nr(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o},Fx=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=mu([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,u),s,c):o.set(o.get(s,c)+1,s,c))}return o},Bx=ox,Vx=function(e,t,n,r){var a=Hn(n,Pn(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=Pn(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?Up(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a},Ux=sx,jx=ux,zx=cx,Wx=lx,Hx=function(e,t,n,r,a,i,o,s,u){for(var c=mu([r,i],n),l=0;l<r;l++){for(var h=[],f=0,d=0;d<a;d++){var p=e[l*a+d];f+=p*o[d],h.push(p)}if(f<0||f>=u/i)throw new Error("Invalid indices: ".concat(h," does not index into ").concat(s));for(var v=0;v<i;v++)c.values[l*i+v]=t.get.apply(t,kn(t.indexToLoc(f*i+v)))}return c},Gx=function(e,t,n){for(var r=mu(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r},Kx=hx,qx=fx,Xx=dx,Yx=px,$x=function(e,t,n){var r=(t-e)/(n-1),a=nr(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a},Qx=vx,Jx=function(e,t,n,r){for(var a=Wn(r,Pn(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var c=e[o+u];(Number.isNaN(c)||c>s)&&(s=c)}a[i]=s}return a},Zx=mx,ek=gx,tk=yx,nk=xx,rk=kx,ak=Sx,ik=function(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return nr(0,r);var a=nr(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a},ok=Ex,sk=Tx,uk=_x,ck=Cx,lk=function(e,t,n,r,a,i,o){var s=t[0],u=i[0],c=new Array(u),l=new Array(s),h=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[Hn(n,0),[0,h],Hn(a,0),c,l]}for(var f=!0,d=0,p=new Array(u).fill(0),v=0;v<s;++v){var m=e[v*h];if(m<0)throw new Error(Lp(v,m));if(m>=u)throw new Error(Fp(v,m,u));++p[m],f=f&&m>=d,d=m}for(var g=!0,y=0;y<u;++y){var b=0===p[y];c[y]=b,g=g&&!b,p[y]=Math.max(p[y],1),y>0&&(p[y]+=p[y-1])}if(g&&f){for(var x=e,k=r,w=0;w<s;++w)l[w]=w;return[x,[s,h],k,c,l]}for(var S=p[u-1],E=Hn(n,S*h),T=Hn(a,S),_=new Array(u).fill(0),C=0;C<s;++C){var I=e[C*h],N=_[I],A=(0===I?0:p[I-1])+N;_[I]++;for(var R=0;R<h;++R)E[A*h+R]=e[C*h+R];T[A]=r[C],l[C]=A}for(var O=0;O<u;++O){if(0===_[O]){var D=0===O?0:p[O-1];E[D*h+0]=O;for(var M=1;M<h;++M)E[D*h+M]=0;T[D]=o}}return[E,[S,h],T,c,l]},hk=function(e,t,n,r,a){for(var i,o,s=Pn(r),u=t[0],c=a.length,l=[],h=1,f=-1,d=0;d<c;++d){var p=a[d];if(-1===p){if(-1!==f)throw new Error((o=d,"only one output dimension may be -1, not both ".concat(f," and ").concat(o)));f=d,l.push(1)}else{if(p<0)throw new Error((i=p,"size ".concat(d," must be non-negative, not ").concat(i)));h*=p,l.push(p)}}if(-1!==f){if(h<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var v=Math.trunc(s/h);if(h*v!==s)throw new Error(function(e,t){var n=Pn(e),r=Pn(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,l));l[f]=v}if(Pn(l)!==s)throw new Error(function(e,t){var n=Pn(e),r=Pn(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,l));var m=r.length,g=[];if(m>0){g[m-1]=1;for(var y=m-2;y>=0;--y)g[y]=g[y+1]*r[y+1]}var b=[];if(c>0){b[c-1]=1;for(var x=c-2;x>=0;--x)b[x]=b[x+1]*l[x+1]}for(var k=Hn(n,u*c),w=0;w<u;++w){for(var S=0,E=0;E<m;++E)S+=e[w*m+E]*g[E];for(var T=0;T<c;++T)k[w*c+T]=Math.trunc(S/b[T]),S%=b[T]}return[k,[u,c],l]},fk=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0,h=l;if(h<0)throw new Error("segment ids must be >= 0");var f=t.slice();f[0]=h;var d=f.reduce((function(e,t){return e*t}),1),p=Hn(n,d);if(0===s)return h>0&&p.fill(o),[p,f];if(h<=0)throw new Error("segment ids must be >= 0");for(var v=0,m=1,g=0,y=a[v];;){var b=0;if(m<s){if(y===(b=a[m])){++m;continue}if(y>=b)throw new Error("segment ids are not increasing")}if(y<0||y>=h)throw new Error(Bp(y,h));y>g&&p.fill(o,g*c,y*c);for(var x=v;x<m;++x){var k=r[x];if(k<0||k>=u[0])throw new Error(Vp(x,r[x],u[0]));for(var w=0;w<c;w++)p[y*c+w]+=e[k*c+w]}if(i)for(var S=0;S<c;S++)p[y*c+S]/=m-v;if(v=m,g=y+1,y=b,++m>s)break}return g<h&&p.fill(o,g*c,h*c),[p,f]},dk=Ix,pk=function(e,t,n,r){for(var a=mu(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(kn(o)))}return a},vk=function(e,t,n,r,a,i,o,s){return new Nx(n,r,a,i,o,s).compute(e,t)},mk=function(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var c=a.length;Ax(e[u],t,n,a);var l=a.length-c;s[u]=l,i+=l,o=Math.max(o,l)}for(var h=Hn("int32",2*i),f=new Array(i),d=[r,o],p=0,v=0;v<r;++v)for(var m=0;m<s[v];++m)h[2*p]=v,h[2*p+1]=m,f[p]=a[p],++p;return[h,f,d]},gk=function(e,t){for(var n=Hn("int32",e.length),r=0;r<e.length;++r)n[r]=So(e[r]).modulo(t).getLowBitsUnsigned();return n},yk=Rx,bk=function(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=mu(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a},xk=function(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=Wn(n,o*r),c=Wn("int32",o*r),l=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(Mx(o,r),o=o.slice(0,r)),a&&o.sort(Dx);for(var l=t*r,h=u.subarray(l,l+r),f=c.subarray(l,l+r),d=0;d<r;d++)h[d]=o[d].value,f[d]=o[d].index},h=0;h<o;h++)l(h);var f=t.slice();return f[f.length-1]=r,[mu(f,n,u),mu(f,"int32",c)]},kk=wx,wk=function(e,t,n,r){for(var a=jn(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new Ko(i,r,e),h=[],f=1===i[0]&&1===i[2],d=0;d<n[a];d++){var p=void 0;if(f)p=e[d].toString();else{for(var v=[],m=0;m<i[0];m++)for(var g=0;g<i[2];g++)v.push(l.get(m,d,g));p=v.join(",")}if(void 0!==u[p])c[d]=u[p];else{var y=Object.keys(u).length;u[p]=y,c[d]=y,h.push(d)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new Ko(b,r);h.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(l.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=b[1],{outputValues:x.values,outputShape:k,indices:c}};function Sk(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function Ek(e,t){return 1===t?[e]:Sk(e,t)}var Tk=function(){function e(t){if(wn(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=Ib(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Ek("rc",this.rank),r=xb(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return En(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),_k=En((function e(t,n){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=Ib(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=Jy(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):$y(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Zy(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var Ck=function(){function e(t){wn(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return En(e,[{key:"acquireTexture",value:function(e,t,n){var r=Nk(t,n),a=Ak(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=Ik(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===fy.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===fy.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===fy.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===fy.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===fy.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=Nk(n,r),i=Ak(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=Ik(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=hr().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function Ik(e,t,n,r,a){var i,o=function(e,t){switch(e){case fy.PACKED_2X2_FLOAT32:return zb(t);case fy.PACKED_2X2_FLOAT16:return Wb(t);case fy.UNPACKED_FLOAT32:return Vb(t);case fy.UNPACKED_FLOAT16:return Ub(t);case fy.PACKED_4X1_UNSIGNED_BYTE:return jb(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=bt(by(e[0],e[1]),2);i=s[0]*s[1]}else{var u=bt(gy(e[0],e[1]),2);i=u[0]*u[1]}var c=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*c}function Nk(e,t){if(e===hy.UPLOAD)return fy.PACKED_2X2_FLOAT32;if(e===hy.RENDER||null==e)return function(e){return hr().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?fy.PACKED_2X2_FLOAT32:fy.UNPACKED_FLOAT32:e?fy.PACKED_2X2_FLOAT16:fy.UNPACKED_FLOAT16}(t);if(e===hy.DOWNLOAD||e===hy.PIXELS)return fy.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function Ak(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var Rk=En((function e(t,n){wn(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=Ib(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),Ok="if (isnan(x)) return x;",Dk="return x;",Mk="return abs(x);";var Pk="return (x >= 0.0) ? x : (exp(x) - 1.0);",Lk=Ok+"\n  return (x < 0.0) ? 0.0 : x;\n",Fk=Ok+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Bk="return x;",Vk="return 1.0 / (1.0 + exp(-1.0 * x));",Uk="return x;",jk="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",zk="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Wk="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Hk="return 1.0 / (1.0 + exp(-1.0 * x));",Gk=En((function e(t,n){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=Ib(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),Kk=En((function e(t){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=Ib(this.outputShape.length);var n=t.length,r=Ek("rc",n),a=xb(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),qk=Df,Xk={};var Yk=hr().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var $k=function(e){Mo(n,e);var t=Uo(n);function n(e){var r,a,i;if(wn(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!hr().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof Gb)a=e;else{var o=my(hr().getNumber("WEBGL_VERSION"),e);a=new Gb(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=my(hr().getNumber("WEBGL_VERSION"));a=new Gb(s),r.binaryCache=((i=hr().getNumber("WEBGL_VERSION"))in Xk||(Xk[i]={}),Xk[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new Ck(r.gpgpu),r.numMBBeforeWarning=null==hr().global.screen?1024:hr().global.screen.height*hr().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new Tn(Bo(r),Hd()),r}return En(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((hr().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||hr().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:hy.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(hr().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:hy.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new Gk(o,Bk):new Rk(o,Bk);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var h,f,d=null!=this.activeTimers;(d&&(h=_o()),"complex64"===r)?f=Ip(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):f=this.getValuesFromTexture(e);return d&&(this.downloadWaitMs+=_o()-h),this.convertAndCacheOnCPU(e,f)}},{key:"read",value:function(){var e=vn(gn().mark((function e(t){var n,r,a,i,o,s,u,c,l,h,f,d,p,v,m,g,y,b,x,k,w,S,E;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==o){e.next=11;break}return l=c?new Gk(i,Bk):new Rk(i,Bk),h=this.runWebGLProgram(l,[{dataId:t,shape:i,dtype:s}],s),f=this.read(h.dataId),this.disposeIntermediateTensorInfo(h),e.abrupt("return",f);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!hr().getBool("DEBUG")){e.next=16;break}if(hr().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==hr().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(d=null,"complex64"!==s&&hr().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),m=this.texData.get(p.dataId),d=(v=this.gpgpu).createBufferFromTexture.apply(v,[m.texture.texture].concat(kn(yy(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:y=e.sent,b=y[0],x=y[1],g=Ip(b,x),e.next=32;break;case 31:null==d?g=this.getValuesFromTexture(t):(k=Pn(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(d,k));case 32:return null!=p&&this.disposeIntermediateTensorInfo(p),null!=d&&ky(w=this.gpgpu.gl,(function(){return w.deleteBuffer(d)})),S=this.convertAndCacheOnCPU(t,g),E=this.pendingRead.get(t),this.pendingRead.delete(t),E.forEach((function(e){return e(S)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Hd().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",S);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new Gk(a,Bk):new Rk(a,Bk);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),h=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),h}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var f=this.decode(e,t.customTexShape),d=Hd().makeTensorFromDataId(f.dataId,f.shape,f.dtype),p=this.texData.get(f.dataId);return Object.assign({tensorRef:d},p.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Io(e)}))}catch(jU){throw new Error("Failed to decode encoded string bytes into utf-8")}return mu(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!wy(n)){if(hr().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=Pn(n);if(hr().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat(kn(yy(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var l=hr().getBool("WEBGL_PACK")&&!0===a,h=l?Uy(n):n,f=l?new Ob(h):new Rb(h),d=this.runWebGLProgram(f,[{shape:h,dtype:r,dataId:e}],"float32"),p=this.texData.get(d.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(d),v}},{key:"timerAvailable",value:function(){return hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=Mn(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=Mn(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return vn(gn().mark((function e(){var n;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=An(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:_o(),endMs:null}}},{key:"endTimer",value:function(e){return hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=_o(),e)}},{key:"getQueryTime",value:function(){var e=vn(gn().mark((function e(t){var n;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(hr().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yk;return hr().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&Pn(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){Ji("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return qk(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new Gk(e.shape,t),a=this.compileAndRun(r,[e],n);return Hd().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=uk(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(hr().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Mk,e.dtype);var n=new Rk(e.shape,Mk),r=this.compileAndRun(n,[e]);return Hd().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Xn(n[0])){var a=n.map((function(e){return Co(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return Hd().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new Kk(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new Tk(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[By(e.shape)].concat(kn(Vy(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[By(t)].concat(kn(Vy(t))),i=new _k(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&Rn(Pn(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=Uy(a);o=r?new Ab(s):new Nb(s);var u=[null!=t?t:yy(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===ly.DENSE){var c=null!=o?o:yy(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===Pn(s.shape))return u.values=Wn(s.dtype,0),s;var l=[],h=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Pn(t.shape)<=hr().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!zy(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var f,d={shape:s.shape,texData:u,isUniform:!1},p=Cb(e,h,d),v=this.getAndSaveBinary(p,(function(){return Eb(a.gpgpu,e,h,d)})),m=null!=this.activeTimers;m&&(f=this.startTimer()),_b(this.gpgpu,v,h,d,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));var g=hr().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=_o();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!hr().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!hr().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Gd((function(){if(!hr().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=hr().getBool("DEBUG");hr().set("DEBUG",!1);var n=e.abs($h(1e-8)).dataSync()[0];if(hr().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,c=null!=this.activeTimers;c&&(u=_o());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=hr().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?In(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=zn(e);e=r.newShape}var a=Pn(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=By(e),o=2,s=2;if(e.length){var u=bt(Vy(e),2);o=u[0],s=u[1]}return Bn(a=i*(o/2)*(s/2)).map((function(e){return 2*e}))}return Bn(a)}(n,s),t.texShape=l),null!=a){var h,f=Uy(n),d=l[1],p=l[0],v=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!v){var m=bt(by(l[0],l[1]),2);d=m[0],p=m[1]}h=s?new Mb(f,v):new Db(f,v);var g=v?[p,d]:l,y=this.makeTensorInfo(g,r),b=this.texData.get(y.dataId);b.usage=v?hy.PIXELS:hy.UPLOAD,b.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),d,p,a);var x=[[p,d]],k=this.runWebGLProgram(h,[y],r,x,!0),w=this.texData.get(k.dataId);t.texture=w.texture,t.texShape=w.texShape,t.isPacked=w.isPacked,t.usage=w.usage,this.disposeIntermediateTensorInfo(y),this.texData.delete(k.dataId),t.values=null,c&&(this.uploadWaitMs+=_o()-u)}else{var S=this.acquireTexture(l,o,r,s);t.texture=S}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*qn(t)}}]),n}(_n);$k.nextDataId=0,ys()&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;vs.registerBackend(e,t,n)}("webgl",(function(){return new $k}),2);var Qk=En((function e(t,n,r){wn(this,e),this.variableNames=["A","B"],this.outputShape=Du(n,r),this.enableShapeUniforms=Ib(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),Jk=En((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];wn(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Du(n,r);var i=this.outputShape.length;this.enableShapeUniforms=Ib(i);var o="";if(a)if(0===i||1===Pn(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=xb(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=Ek("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function Zk(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var ew={kernelName:ya,backendName:"webgl",kernelFunc:Zk};function tw(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=Zk({inputs:{x:r},backend:n}),u=Zk({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var nw={kernelName:Vr,backendName:"webgl",kernelFunc:tw},rw="return (a < 0.) ? b * a : a;",aw="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var iw={kernelName:Ea,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",Eo(i,"float32")),s=hr().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jk(aw,a.shape,o.shape):new Qk(rw,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},ow="return (a < 0.) ? b * a : a;",sw="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var uw={kernelName:ei,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=hr().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jk(sw,r.shape,a.shape):new Qk(ow,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function cw(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var h=c.texData.get(u.dataId),f=r(h.values,l);return c.makeTensorInfo(u.shape,l,f)}return i=hr().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Gk(u.shape,n):new Rk(u.shape,t),c.runWebGLProgram(i,[u],l)}}function lw(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,l=r.b,h=i;if(o&&"complex64"===c.dtype){var f=h.texData.get(c.dataId),d=h.texData.get(l.dataId),p=[[f.complexTensorInfos.real,d.complexTensorInfos.real],[f.complexTensorInfos.imag,d.complexTensorInfos.imag]].map((function(e){var n=bt(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new Qk(t,c.shape,l.shape);return h.runWebGLProgram(s,[i,o],rs(r.dtype,a.dtype))})),v=bt(p,2),m=v[0],g=v[1],y=tw({inputs:{real:m,imag:g},backend:h});return h.disposeIntermediateTensorInfo(m),h.disposeIntermediateTensorInfo(g),y}var b,x=u||rs(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||h.shouldExecuteOnCPU([c,l]))&&null!=s){var k=h.texData.get(c.dataId).values,w=h.texData.get(l.dataId).values,S="string"===c.dtype?Up(k):k,E="string"===c.dtype?Up(w):w,T=bt(s(c.shape,l.shape,S,E,x),2),_=T[0],C=T[1],I=h.makeTensorInfo(C,x);return h.texData.get(I.dataId).values=_,I}return b=hr().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new Jk(n,c.shape,l.shape,a):new Qk(t,c.shape,l.shape),h.runWebGLProgram(b,[c,l],x)}}function hw(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?Uk:Dk;if("relu"===e)return t?zk:Lk;if("elu"===e)return t?jk:Pk;if("relu6"===e)return t?Wk:Fk;if("prelu"===e)return t?sw:ow;if("leakyrelu"===e)return t?aw:rw;if("sigmoid"===e)return t?Hk:Vk;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var fw=En((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];wn(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Ib(this.outputShape.length);var l=a?t[1]:t[2],h=Math.ceil(l/2),f=a?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";s&&(m=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(h,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(h,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(v[0],");\n          result += (").concat(p[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")})),dw="return areal * breal - aimag * bimag;",pw="return areal * bimag + aimag * breal;",vw=En((function e(t,n,r){wn(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Du(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),mw="return a * b;";function gw(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=rs(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),c=new vw(dw,a.shape,i.shape),l=new vw(pw,a.shape,i.shape),h=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],f=r.runWebGLProgram(c,h,"float32"),d=r.runWebGLProgram(l,h,"float32"),p=tw({inputs:{real:f,imag:d},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(d),p}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),m=r.texData.get(i.dataId),g=bt(tk(a.shape,i.shape,v.values,m.values,o),2),y=g[0],b=g[1],x=r.makeTensorInfo(b,o);return r.texData.get(x.dataId).values=y,x}return t=hr().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jk(mw,a.shape,i.shape):new Qk(mw,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var yw={kernelName:Ha,backendName:"webgl",kernelFunc:gw};function bw(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=Pn(a.shape),u=function(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}(i,s),c=Pn(u);Rn(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=o.texData.get(a.dataId);return!l.isPacked||zy(a.shape,u)||null!==l.texture&&zy(l.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[By(e.shape)].concat(kn(Vy(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[By(t)].concat(kn(Vy(t))),o=new _k(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var xw={kernelName:oi,backendName:"webgl",kernelFunc:bw},kw=En((function e(t,n){wn(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(Fn(l)?l.toPrecision(2):l,", ones);")}var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),ww=En((function e(t,n){wn(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),h=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===h,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function Sw(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=Ep(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],c=u.inSize,l=u.windowSize,h=u.outSize,f=void 0;f="mean"===n?0===o?new kw({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:h},c):new kw({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:h}):new ww({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:h},n),s=i,i=r.runWebGLProgram(f,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var Ew=En((function e(t,n){wn(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=xb(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var Tw=En((function e(t,n){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=xb(this.rank),o=Sk("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),h="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(h,";\n      if(").concat(l,") {\n        result[1] = ").concat(h,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(h,";\n        if(").concat(l,") {\n          result[3] = ").concat(h,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function _w(e,t,n){var r=hr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Tw(e.shape,t):new Ew(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function Cw(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=jn(a,e.shape),s=o,u=Kl(s,i),c=null!=u,l=e;c&&(l=_w(e,u,r),s=Xl(s.length,i)),Gl("sum",s,i);var h=bt(Wl(l.shape,s),2),f=h[0],d=h[1],p=f;n&&(p=Hl(f,o));var v=Pn(d),m=bw({inputs:{x:l},attrs:{shape:[Pn(e.shape)/v,v]},backend:r}),g=Sw(m,as(e.dtype),"sum",r),y=bw({inputs:{x:g},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),c&&r.disposeIntermediateTensorInfo(l),y}(t.x,r.axis,r.keepDims,n)}var Iw={kernelName:wi,backendName:"webgl",kernelFunc:Cw};function Nw(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var h=s.texData.get(i.dataId).values,f=kk(h,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=f}else t=_w(i,o,s);return t}var Aw={kernelName:ji,backendName:"webgl",kernelFunc:Nw};function Rw(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,h=void 0===l?0:l,f=e.activation,d=void 0===f?null:f,p=t.shape.length,v=n.shape.length,m=r?t.shape[p-2]:t.shape[p-1],g=a?n.shape[v-1]:n.shape[v-2],y=r?t.shape[p-1]:t.shape[p-2],b=a?n.shape[v-2]:n.shape[v-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=Pn(x),S=Pn(k),E=Du(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);Rn(m===g,(function(){return"Error in matMul: inner shapes (".concat(m,") and (")+"".concat(g,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var T,_=r?[w,m,y]:[w,y,m],C=a?[S,b,g]:[S,g,b],I=bw({inputs:{x:t},backend:i,attrs:{shape:_}}),N=bw({inputs:{x:n},backend:i,attrs:{shape:C}}),A=[I,N],R=Math.max(w,S),O=r?I.shape[1]:I.shape[2],D=null!=s,M=null!=c,P="leakyrelu"===d,L=null!=d?hw(d,!0):null;if((1===y||1===b)&&O>1e3&&!1===(D||M||P||null!=L)){var F=I,B=N;r&&(F=Nw({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),A.push(F)),a&&(B=Nw({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),A.push(B));var V=1===b,U=F;1!==b&&(U=bw({inputs:{x:F},backend:i,attrs:{shape:[R,O,1]}}),A.push(U));var j=1===b?2:1,z=B;V&&(z=bw({inputs:{x:B},backend:i,attrs:{shape:[R,1,O]}}),A.push(z));var W=gw({inputs:{a:U,b:z},backend:i});T=Cw({inputs:{x:W},backend:i,attrs:{axis:j,keepDims:!0}}),A.push(W)}else{var H=rs(t.dtype,n.dtype),G=new fw(_,C,[R,y,b],r,a,D,L,M,P),K=[I,N];if(null!=s&&K.push(s),M&&K.push(c),P){var q=i.makeTensorInfo([],"float32",Eo(h,"float32"));K.push(q),A.push(q)}T=i.runWebGLProgram(G,K,H)}var X=bw({inputs:{x:T},backend:i,attrs:{shape:E}});A.push(T);for(var Y=0,$=A;Y<$.length;Y++){var Q=$[Y];i.disposeIntermediateTensorInfo(Q)}return X}var Ow={kernelName:Yi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return Rw({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},Dw="return abs(x);";var Mw={kernelName:mr,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=uk(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=hr().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Gk(a.shape,Dw):new Rk(a.shape,Dw),r.runWebGLProgram(t,[a],a.dtype)}},Pw=cw({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),Lw={kernelName:gr,backendName:"webgl",kernelFunc:Pw},Fw=cw({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),Bw={kernelName:yr,backendName:"webgl",kernelFunc:Fw},Vw="return a + b;",Uw=lw({opSnippet:Vw,packedOpSnippet:Vw,supportsComplex:!0,cpuKernelImpl:Px}),jw={kernelName:br,backendName:"webgl",kernelFunc:Uw},zw=En((function e(t,n){wn(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),Ww=En((function e(t,n){wn(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var Hw={kernelName:xr,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return Zk({inputs:{x:a[0]},backend:r});if(a.length>hr().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return rs(e,t)})),c=a.map((function(e){return e.shape})),l=hr().getBool("WEBGL_PACK")?new Ww(a[0].shape,c):new zw(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var Gw={kernelName:kr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=jn(i,a.shape),c=u,l=Kl(c,s),h=a;null!=l&&(h=Nw({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Xl(c.length,s)),Gl("all",c,s);var f,d=bt(Wl(h.shape,c),2),p=d[0],v=bw({inputs:{x:h},backend:n,attrs:{shape:[-1,Pn(d[1])]}}),m=Sw(v,v.dtype,"all",n);return f=bw(o?{inputs:{x:m},backend:n,attrs:{shape:Hl(p,u)}}:{inputs:{x:m},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(h),f}};var Kw={kernelName:wr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=jn(i,a.shape),c=u,l=Kl(c,s),h=a;null!=l&&(h=Nw({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Xl(c.length,s)),Gl("any",c,s);var f,d=bt(Wl(h.shape,c),2),p=d[0],v=bw({inputs:{x:h},backend:n,attrs:{shape:[-1,Pn(d[1])]}}),m=Sw(v,v.dtype,"any",n);return f=bw(o?{inputs:{x:m},backend:n,attrs:{shape:Hl(p,u)}}:{inputs:{x:m},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(h),f}},qw=En((function e(t,n,r){wn(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),Xw=En((function e(t,n,r,a){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Rn(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,h=xb(l),f=Ek("coords",l);if(1===o){var d=xb(u=l+1);s="\n        ".concat(d," sourceLocR = ").concat(d,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(d," sourceLocG = ").concat(d,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(d," sourceLocA = ").concat(d,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(d," sourceLocB = ").concat(d,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else u=l,s="\n        ".concat(h," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(h," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(h," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(h," sourceLocB = coords;\n        --").concat(f[l-2],";");var p=["x","y","z","w","u","v"].slice(0,u),v="."+p[u-1],m=p.map((function(e){return"int "+e})),g=Ek("sourceLocR",u-1).concat("inIdx.r"),y=Ek("sourceLocG",u-1).concat("inIdx.g"),b=Ek("sourceLocB",u-1).concat("inIdx.b"),x=Ek("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),E=a?"":"\n      float getBestIndicesAChannel(".concat(m.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(m.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(E,"\n      void main() {\n        ").concat(h," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(v,", sourceLocG").concat(v,",\n          sourceLocB").concat(v,", sourceLocA").concat(v,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function Yw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=Ep(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new qw(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var h=Yw(e,t,n,l);return e.disposeIntermediateTensorInfo(l),h}function $w(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=Ep(i),s=new Xw(a,o,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=$w(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function Qw(e,t,n,r){var a=[n];if(Gl("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!hr().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=bt(Wl(s.shape,a),2),c=u[0],l=Pn(u[1]),h=bw({inputs:{x:s},backend:e,attrs:{shape:[-1,l]}});i.push(h);var f=Yw(e,h,r);i.push(f);var d=bw({inputs:{x:f},backend:e,attrs:{shape:c}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),d}return $w(e,t,r)}var Jw={kernelName:Sr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=jn(r.axis,a.shape),o=Kl(i,a.shape.length),s=a,u=[];null!=o&&(s=Nw({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=Xl(i.length,s.shape.length)),Gl("argMax",[i[0]],s.shape.length);var c=Qw(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}};var Zw={kernelName:Er,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=jn(r.axis,a.shape),o=Kl(i,a.shape.length),s=a,u=[];null!=o&&(s=Nw({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=Xl(i.length,s.shape.length)),Gl("argMin",[i[0]],s.shape.length);var c=Qw(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},eS=cw({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),tS={kernelName:Tr,backendName:"webgl",kernelFunc:eS},nS=cw({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),rS={kernelName:_r,backendName:"webgl",kernelFunc:nS},aS=cw({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),iS={kernelName:Cr,backendName:"webgl",kernelFunc:aS},oS=lw({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),sS={kernelName:Nr,backendName:"webgl",kernelFunc:oS},uS=cw({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),cS={kernelName:Ir,backendName:"webgl",kernelFunc:uS},lS=En((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(wn(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,m="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(v||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?m:g:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var w=4*Math.floor(o/4),S=o%4,E="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(E,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat(1===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(E,"\n          } else if (").concat(2===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(E,"\n          } else if (").concat(3===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(E,"\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}})),hS=En((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(wn(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,h=t.dilationHeight,f=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(h,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",S="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(S="avgValue / count");var E=4*Math.floor(o/4),T=o%4,_="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(h,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(E,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(_,"\n            }\n\n            int xC = xCCorner + ").concat(E,";\n            if (").concat(1===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(_,"\n            } else if (").concat(2===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(_,"\n            } else if (").concat(3===T,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(_,"\n            }\n          }\n          setOutput(").concat(S,");\n        }\n      }\n    ")}}));var fS={kernelName:Ar,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;qy(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Rn(vc(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=rc(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Ln(c.inShape,c.outShape))return Zk({inputs:{x:a},backend:n});var l=new lS(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var dS={kernelName:Rr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=ac(a.shape,i,o,[1,1,1],s,u,c),h=new hS(l,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}},pS=En((function e(t){wn(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,h=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(h,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),vS=En((function e(t){wn(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,h=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=h-1-t.padInfo.front,v=f-1-t.padInfo.top,m=d-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(v,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var mS={kernelName:"AvgPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=ac(i.shape,o,s,[1,1,1],u,c),h=new vS(l);return n.runWebGLProgram(h,[a],i.dtype)}};var gS={kernelName:"AvgPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;qy([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=rc(o.shape,s,u,1,c),h=new pS(l);return n.runWebGLProgram(h,[a],o.dtype)}};var yS={kernelName:Or,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return Rw({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},bS=En((function e(t,n,r,a,i,o){wn(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],Du(t,n),Du(t,r);var s="0.0";null!=a&&(Du(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(Du(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),xS=En((function e(t,n,r,a,i,o){wn(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Du(t,n),Du(t,r);var s="vec4(0.0)";null!=a&&(Du(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(Du(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),kS={kernelName:da,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;Rn(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Rn(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Rn(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],h=null;null!=s&&(h=s.shape,l.push(s));var f=null;null!=u&&(f=u.shape,l.push(u));var d=hr().getBool("WEBGL_PACK_NORMALIZATION")?new xS(a.shape,i.shape,o.shape,h,f,c):new bS(a.shape,i.shape,o.shape,h,f,c);return n.runWebGLProgram(d,l,l[0].dtype)}},wS=En((function e(t){wn(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=xb(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return SS.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(SS[t]," = start[").concat(t,"] + coords.").concat(SS[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),SS=["x","y","z","w","u","v"];var ES=En((function e(t){wn(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=xb(this.rank),r=Ek("coords",this.rank),a=Ek("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function TS(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=bt(Uu(a,r.begin,r.size),2),o=i[0],s=i[1];if(Fu(a,o,s),0===Pn(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),c=ck(u.values,o,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,c)}var l=n.texData.get(a.dataId).isPacked,h=Bu(a.shape,o,s);if(l||!h){var f=hr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ES(s):new wS(s),d=[o];return n.runWebGLProgram(f,[a],a.dtype,d)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=Vu(t,Jn(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,o,s,n)}var _S={kernelName:mi,backendName:"webgl",kernelFunc:TS},CS={kernelName:Dr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Rn(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=Tp(a.shape,i,s),c=_p(u.length,i.length),l=Cp(a.shape,i,s),h=function(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}(o,i.length),f=function(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}(l,o,i.length),d=[],p=bw({inputs:{x:a},backend:n,attrs:{shape:u}}),v=Nw({inputs:{x:p},backend:n,attrs:{perm:c}}),m=bw({inputs:{x:v},backend:n,attrs:{shape:l}}),g=TS({inputs:{x:m},backend:n,attrs:{begin:h,size:f}});return d.push(p),d.push(v),d.push(m),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var IS={kernelName:Mr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=Lx(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var NS={kernelName:Pr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=Du(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},AS=lw({opSnippet:"return float(a != b);",cpuKernelImpl:rk,dtype:"bool"}),RS={kernelName:Ka,backendName:"webgl",kernelFunc:AS};function OS(e){var t=e.inputs,n=e.backend,r=t.input;return Zk({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var DS={kernelName:ri,backendName:"webgl",kernelFunc:OS};var MS={kernelName:Lr,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return Zk({inputs:{x:i},backend:r});var s=ih(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=tw({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=OS({inputs:{input:i},backend:r}),h=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),h}if(!Gn(i.dtype,o)){var f=Zk({inputs:{x:i},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new Rk(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var d=r.makeTensorInfo([],"bool",Wn("bool",1)),p=AS({inputs:{a:i,b:d},backend:r});return r.disposeIntermediateTensorInfo(d),p}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},PS="return ceil(x);",LS=cw({opSnippet:PS,packedOpSnippet:PS,cpuKernelImpl:Bx}),FS={kernelName:Fr,backendName:"webgl",kernelFunc:LS},BS=En((function e(t){wn(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),VS=En((function e(t){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var US={kernelName:Br,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=hr().getBool("WEBGL_PACK_CLIP")?new VS(i.shape):new BS(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},jS=En((function e(t){wn(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function zS(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var WS={kernelName:Ur,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new jS(r.shape),o=[zS(r,a.complexTensorInfos.real),zS(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},HS=En((function e(t){wn(this,e),this.outputShape=[],this.outputShape=Sp(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),GS=En((function e(t,n){wn(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Sp(t,n);var r=this.outputShape,a=r.length,i=xb(a),o=Ek("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],h=s.slice(-2),f=s.join(),d="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(h.join(),"));\n        }"),p=1;p<u.length;p++){var v=u[p-1];d+="\n        if (".concat(l," < ").concat(u[p],"  && ").concat(l," >= ").concat(u[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(KS(s,l,v),"),\n            vec2(").concat(KS(h,l,v),"));\n        }")}var m=u.length,g=u[u.length-1];d+="\n        return getChannel(\n          getT".concat(m,"(").concat(KS(s,l,g),"),\n          vec2(").concat(KS(h,l,g),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(d,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function KS(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function qS(e){var t=e.inputs,n=e.backend,r=t.input;return Zk({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var XS={kernelName:xa,backendName:"webgl",kernelFunc:qS};function YS(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return OS({inputs:{input:e},backend:n})})),i=e.map((function(e){return qS({inputs:{input:e},backend:n})})),o=YS(a,t,n),s=YS(i,t,n),u=tw({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=Pn(e.shape.slice(t));return bw({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),h=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),f=Sp(l.map((function(e){return e.shape})),1),d=1===l[0].shape[0],p=Vx(h,f,r,d),v=Sp(e.map((function(e){return e.shape})),t),m=n.makeTensorInfo(v,r,p);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}if(e.length>hr().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var g=Math.floor(e.length/2),y=YS(e.slice(0,g),t,n),b=YS(e.slice(g),t,n),x=YS([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(hr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var k=new GS(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(k,e,r)}var w=function(e,t,n){var r=Sp(e.map((function(e){return e.shape})),t),a=e.map((function(e){return bw({inputs:{x:e},attrs:{shape:[-1,Pn(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(e,t,n),S=w.tensors2D,E=w.outShape,T=new HS(S.map((function(e){return e.shape}))),_=n.runWebGLProgram(T,S,r);S.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var C=bw({inputs:{x:_},attrs:{shape:E},backend:n});return n.disposeIntermediateTensorInfo(_),C}function $S(e){var t=e.inputs,n=e.backend,r=jn(e.attrs.axis,t[0].shape)[0],a=Sp(t.map((function(e){return e.shape})),r);if(0===Pn(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Pn(e.shape)>0}));if(1===i.length)return Zk({inputs:{x:i[0]},backend:n});var o=i.map((function(e){return e.shape}));return function(e,t){var n=e[0].length;e.forEach((function(e,t){Rn(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),Rn(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)Rn(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}(o,r),YS(i,r,n)}var QS={kernelName:jr,backendName:"webgl",kernelFunc:$S},JS=En((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];wn(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,h=t.dilationWidth,f=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4,m="channelsLast"===t.dataFormat,g=m?1:2,y=m?2:3,b=m?3:1,x="",k="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(h,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),ZS=En((function e(t){wn(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,h=t.filterDepth,f=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(h,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),eE=En((function e(t,n){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=Ib(this.outputShape.length);for(var r=n.dataFormat,a=Yy(),i="channelsLast"===r,o=i?0:1,s=i?1:2,u=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),c="",l=0;l<=1;l++)for(var h=0;h<=1;h++)c+="\n          blockIndex = rc.y + ".concat(h,";\n          pos = rc.x + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+h,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+h,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function tE(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,h=void 0===l?0:l,f=e.activation,d=void 0===f?null:f,p=n.shape,v=i.texData.get(n.dataId),m=a.inChannels,g=p[0]*p[1]*p[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(!((1===g||1===y)&&m>1e3)&&v.isPacked&&b&&null!=v.texture&&p[2]%2!==0&&Ln(v.shape.slice(-3),p.slice(-3))){var k=p[0]*p[1]*(p[2]+1),w={dataId:n.dataId,shape:[1,k,a.inChannels],dtype:n.dtype},S=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,Rn(zy(v.shape,w.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(w.shape," isn't free")}));var E=bw({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(E);var T=Rw({a:w,b:E,backend:i,transposeA:false,transposeB:false,bias:s,activation:d,preluActivationWeights:c,leakyreluAlpha:h}),_=i.texData.get(T.dataId);Rn(_.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=S,_.shape=a.outShape,(t=Zk({inputs:{x:T},backend:i})).shape=a.outShape,x.push(T)}else{var C=bw({inputs:{x:n},backend:i,attrs:{shape:[1,b?p[0]*p[1]*p[2]:p[0]*p[2]*p[3],a.inChannels]}}),I=bw({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),N=Rw({a:C,b:I,transposeA:false,transposeB:false,backend:i,bias:s,activation:d,preluActivationWeights:c,leakyreluAlpha:h});t=bw({inputs:{x:N},backend:i,attrs:{shape:a.outShape}}),x.push(C),x.push(I),x.push(N)}for(var A=0,R=x;A<R.length;A++){var O=R[A];i.disposeIntermediateTensorInfo(O)}return t}function nE(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,h=e.activation,f=void 0===h?null:h,d=r.filterWidth,p=r.filterHeight,v=r.inChannels,m=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=d*p*v,x=g*m,k=[b,x],w=[],S=bw({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),E=bw({inputs:{x:n},backend:a,attrs:{shape:[1,b,Pn(n.shape)/b]}});w.push(S),w.push(E);var T=new eE(k,r),_=[S.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=a.runWebGLProgram(T,[S],"float32",_),I=bw({inputs:{x:C},backend:a,attrs:{shape:[1,k[0],k[1]]}});w.push(C),w.push(I);var N=null!=o,A=null!=u,R="leakyrelu"===f,O=f?hw(f,!0):null,D=new fw(I.shape,E.shape,[1,x,r.outChannels],!0,!1,N,O,A,R),M=[I,E];if(o&&M.push(o),A&&M.push(u),R){var P=a.makeTensorInfo([],"float32",Eo(l,"float32"));M.push(P),w.push(P)}var L=a.runWebGLProgram(D,M,"float32"),F=bw({inputs:{x:L},backend:a,attrs:{shape:y?[1,g,m,r.outChannels]:[1,r.outChannels,g,m]}});w.push(L);for(var B=0,V=w;B<V.length;B++){var U=V[B];a.disposeIntermediateTensorInfo(U)}return F}var rE={kernelName:zr,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,h=a.dimRoundingMode,f=mc(c),d=ic(i.shape,o.shape,s,l,u,h,!1,f);if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(hr().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=nE({x:i,filter:o,convInfo:d,backend:r});else{var p=new JS(d);t=r.runWebGLProgram(p,[i,o],"float32")}else t=tE({x:i,filter:o,convInfo:d,backend:r});var v=bw({inputs:{x:t},backend:r,attrs:{shape:d.outShape}});return r.disposeIntermediateTensorInfo(t),v}},aE=En((function e(t){wn(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),iE=En((function e(t){wn(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,h=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(h,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),oE=En((function e(t){wn(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),sE=En((function e(t){wn(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var uE={kernelName:Wr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,h=mc(u),f=ic(a.shape,l,o,1,s,c,!1,h),d=new aE(f);return n.runWebGLProgram(d,[a,i],"float32")}};var cE={kernelName:Hr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,h=mc(c),f=ic(o,i.shape,s,1,u,l,!1,h),d=new iE(f);return n.runWebGLProgram(d,[a,i],"float32")}};var lE={kernelName:Gr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=oc(a.shape,i.shape,o,u,s),l=new ZS(c);return n.runWebGLProgram(l,[a,i],"float32")}};var hE={kernelName:"Conv3DBackpropFilterV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=oc(a.shape,u,o,1,s),l=new oE(c);return n.runWebGLProgram(l,[a,i],"float32")}};var fE={kernelName:Kr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=oc(r.inputShape,i.shape,s,1,o),c=new sE(u);return n.runWebGLProgram(c,[a,i],"float32")}},dE={kernelName:"Cos",backendName:"webgl",kernelFunc:cw({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"})},pE=cw({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),vE={kernelName:qr,backendName:"webgl",kernelFunc:pE},mE=En((function e(t,n,r,a,i){wn(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=bt(t,4),s=o[0],u=o[1],c=o[2],l=o[3],h=bt(n,1)[0],f=bt(r,2),d=f[0],p=f[1];this.outputShape=[h,d,p,l];var v="bilinear"===a?1:0,m="".concat(u-1,".0"),g="".concat(c-1,".0"),y=bt(d>1?["".concat((u-1)/(d-1)),"(y2-y1) * height_ratio","y1*".concat(m," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(m)],3),b=y[0],x=y[1],k=y[2],w=bt(p>1?["".concat((c-1)/(p-1)),"(x2-x1) * width_ratio","x1*".concat(g," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(g)],3),S=w[0],E=w[1],T=w[2];this.userCode="\n      const float height_ratio = float(".concat(b,");\n      const float width_ratio = float(").concat(S,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(x,";\n        float width_scale = ").concat(E,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(m," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(T,";\n        if( in_x < 0.0 || in_x > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(v," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),gE={kernelName:Yr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new mE(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}},yE=En((function e(t,n,r){wn(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,i=n?"0.0":"getX(".concat(bE(a,"coords"),")"),o=t[t.length-1],s="",u="";n?(s=r?"end != ".concat(o-1):"end != 0",u=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(o):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(xb(a)," coords = getOutputCoords();\n        int end = ").concat(xE(a,"coords"),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat(xE(a,"coords")," = idx;\n          val += getX(").concat(bE(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}));function bE(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function xE(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var kE={kernelName:Xr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length,c=Kl([i],u),l=a;null!=c&&(l=Nw({inputs:{x:a},backend:n,attrs:{perm:c}}));var h=Xl(1,u)[0];if(h!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(i));for(var f=l.shape[h],d=Zk({inputs:{x:l},backend:n}),p=0;p<=Math.ceil(Math.log2(f))-1;p++){var v=new yE(l.shape,!1,s),m=[[p]],g=d;d=n.runWebGLProgram(v,[d],d.dtype,m),n.disposeIntermediateTensorInfo(g)}if(o){var y=new yE(l.shape,o,s),b=d;d=n.runWebGLProgram(y,[d],d.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=c){var x=Nw({inputs:{x:d},backend:n,attrs:{perm:ql(c)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),x}return d}};var wE={kernelName:$r,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=Lx(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var h=n.bufferSync(a),f=n.bufferSync(i),d=Fx(h,f,o,s);return n.makeTensorInfo(d.shape,i.dtype,d.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},SE=function(){function e(t,n,r){wn(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return En(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var EE={kernelName:Qr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),h=new SE("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(h,[a],a.dtype)}},TE=En((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];wn(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Ib(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(h,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),_E=En((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];wn(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Ib(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,h=t.filterWidth,f=h,d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",p=0;p<h;p++)d+="\n          vec4 xTexelC".concat(2*p,";\n          int xTexelC").concat(2*p,"Ready;\n          vec4 xTexelC").concat(2*p+1,";\n          int xTexelC").concat(2*p+1,"Ready;\n          vec4 xC").concat(p,";");d+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var v=0;v<h;v++)d+="\n          xTexelC".concat(2*v," = vec4(0.0);\n          xTexelC").concat(2*v,"Ready = 0;\n          xTexelC").concat(2*v+1," = vec4(0.0);\n          xTexelC").concat(2*v+1,"Ready = 0;\n          xC").concat(v," = vec4(0.0);");d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var m=0;m<(f+1)/2;m++){var g=2*m;if(d+="\n          xC = xCCorner + ".concat(g*c,";\n          "),1===u){if(g<h&&(s%2===1?(d+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n              "),d+=1===c&&g>0?"\n                xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                  } else {\n                    xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                  }\n                  ")):d+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xC").concat(g," = xTexelC").concat(g,";\n                "),g+1<h)){var y=s%2===0?In(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(d+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                    xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(g+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(g+1,"Ready = 1;\n                  }\n                  "),c>1&&(d+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                      xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(g,"Ready = 1;\n                    }\n                    ")),d+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                  ")):d+=1===y?"\n                    xC".concat(g+1," = xTexelC").concat(g,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                      xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(g+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(g+1,"Ready = 1;\n                    }\n\n                    xC").concat(g+1," = xTexelC").concat(g+1,";\n                    ")}}else g<h&&(s%2===1?(d+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n              "),g+1<h&&(d+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                "))):(d+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(\n                  xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n              "),g+1<h&&(d+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                "))));g<h&&(d+="\n            wTexel = getW(r, ".concat(g,", d1, q);\n            dotProd += xC").concat(g," * vec4(wTexel.xz, wTexel.xz);\n          "),g+1<h&&(d+="\n              wTexel = getW(r, ".concat(g+1,", d1, q);\n              dotProd += xC").concat(g+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}d+="\n    }\n  ",d+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(d,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var CE={kernelName:Jr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),Rn(vc(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var h,f=ic(a.shape,i.shape,o,l,s,c,!0);h=hr().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?new _E(f):new TE(f);var d=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(h,[a,i],"float32",d)}},IE=En((function e(t){wn(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),NE=En((function e(t){wn(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var AE={kernelName:Zr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,h=ic(a.shape,l,o,s,u,c,!0),f=new IE(h);return n.runWebGLProgram(f,[a,i],"float32")}};var RE={kernelName:ea,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=ic(r.inputShape,i.shape,o,s,u,c,!0),h=new NE(l);return n.runWebGLProgram(h,[a,i],"float32")}},OE=En((function e(t){wn(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var DE={kernelName:ta,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(kn(r.shape),kn(r.shape)),i=Pn(r.shape),o=bw({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new OE(i),u=n.runWebGLProgram(s,[o],o.dtype),c=bw({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}},ME=En((function e(t){wn(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,h=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var PE={kernelName:na,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat(kn(t),[o]),u=mc(a);return ic(e,s,n,i,r,null,null,u)}(i.shape,o.shape,s,u,"NHWC",c),h=new ME(l),f=bw({inputs:{x:t=r.runWebGLProgram(h,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),f}};var LE={kernelName:aa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=function(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(Op,"").length)/Rp.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(Rp,'").'));var r=bt(e.split(Rp),2),a=r[0],i=r[1];Rn(-1===a.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var o=a.split(","),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var u=[],c=function(e){var t=i[e];if(!o.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===u.indexOf(t)&&u.push(t)},l=0;l<i.length;++l)c(l);for(var h=0;h<a.length;++h){var f=a[h];-1===u.indexOf(f)&&","!==f&&u.push(f)}for(var d=new Array(o.length),p=0;p<s;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error("Found duplicate axes in input component ".concat(o[p],". ")+"Support for duplicate axes in input is not implemented yet.");d[p]=[];for(var v=0;v<o[p].length;++v)d[p].push(u.indexOf(o[p][v]))}for(var m=u.length,g=[],y=i.length;y<m;++y)g.push(y);return{allDims:u,summedDims:g,idDims:d}}(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;!function(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:Rn(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}(i.length,s,r);for(var u=function(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=bn(Pp(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===o.indexOf(l)&&(a[s].push(l),o.push(l))}}catch(BZ){c.e(BZ)}finally{c.f()}}return{path:r,steps:a}}(o,s),c=u.path,l=u.steps,h=l.length,f=null,d=i.length,p=[],v=0;v<h;++v){var m,g=bn(l[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=Dp(d,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;Mp(x)?w=r[y]:(w=Nw({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(w));for(var S=w.shape.slice(),E=0;E<k.length;++E)S.splice(k[E],0,1);Ln(w.shape,S)||(w=bw({inputs:{x:w},backend:n,attrs:{shape:S}}),p.push(w)),null===f?f=w:(f=gw({inputs:{a:w,b:f},backend:n}),p.push(f))}}catch(BZ){g.e(BZ)}finally{g.f()}v<h-1&&(c[v]>=0&&(f=Cw({inputs:{x:f},backend:n,attrs:{axis:c[v]-(i.length-d),keepDims:!1}}),p.push(f)),d--)}for(var T=0,_=p;T<_.length;T++){var C=_[T];C!==f&&n.disposeIntermediateTensorInfo(C)}return f}},FE={kernelName:"Elu",backendName:"webgl",kernelFunc:cw({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"})},BE={kernelName:"EluGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=hr().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jk("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new Qk("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},VE=lw({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:Ux}),UE={kernelName:ia,backendName:"webgl",kernelFunc:VE},jE={kernelName:"Erf",backendName:"webgl",kernelFunc:cw({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(.3275911,";\n  float a1 = ").concat(.254829592,";\n  float a2 = ").concat(-.284496736,";\n  float a3 = ").concat(1.421413741,";\n  float a4 = ").concat(-1.453152027,";\n  float a5 = ").concat(1.061405429,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")})},zE=cw({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:jx,dtype:"float32"}),WE={kernelName:oa,backendName:"webgl",kernelFunc:zE};function HE(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(Rn(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),bw({inputs:{x:i},backend:r,attrs:{shape:s}})}var GE={kernelName:sa,backendName:"webgl",kernelFunc:HE},KE="return exp(x) - 1.0;",qE=cw({opSnippet:KE,packedOpSnippet:KE,cpuKernelImpl:zx}),XE={kernelName:ua,backendName:"webgl",kernelFunc:qE},YE=En((function e(t,n,r){wn(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function $E(e,t,n){var r=n.texData.get(e.dataId),a=Pn(e.shape),i=e.shape[e.shape.length-1],o=bw({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new YE("real",s,t),c=new YE("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],h=n.runWebGLProgram(u,l,"float32"),f=n.runWebGLProgram(c,l,"float32"),d=tw({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);var p=bw({inputs:{x:d},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(d),p}var QE={kernelName:"FFT",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return $E(t.input,!1,n)}},JE=En((function e(t,n){wn(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function ZE(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||Yn(a))){var o=Hn(i,Pn(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new JE(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var eT,tT={kernelName:ca,backendName:"webgl",kernelFunc:ZE},nT=En((function e(t){wn(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),rT={kernelName:la,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new nT(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},aT="return floor(x);",iT=cw({opSnippet:aT,packedOpSnippet:aT,cpuKernelImpl:Wx}),oT={kernelName:ha,backendName:"webgl",kernelFunc:iT},sT=lw({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),uT={kernelName:fa,backendName:"webgl",kernelFunc:sT},cT=En((function e(t){wn(this,e),this.variableNames=["A"];var n=Yy(),r=bt(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),lT=En((function e(t){wn(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Yy(),r=bt(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),hT={kernelName:qi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,u=bt(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),c=u[0],l=u[1],h=[l,c],f=[l,c,i];(s||o)&&(null==eT&&(eT=document.createElement("canvas").getContext("2d")),eT.canvas.width=c,eT.canvas.height=l,eT.drawImage(a,0,0,c,l),a=eT.canvas);var d=n.makeTensorInfo(h,"int32");n.texData.get(d.dataId).usage=hy.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);var p=hr().getBool("WEBGL_PACK")?new lT(f):new cT(f),v=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),v}};var fT={kernelName:$i,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,h=a.dataFormat,f=a.dilations,d=a.dimRoundingMode,p=a.activation,v=a.leakyreluAlpha,m=mc(h),g=ic(i.shape,o.shape,c,f,l,d,!1,m),y=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(hr().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=nE({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});else{var b=null!=s,x=null!=u,k="leakyrelu"===p,w=p?hw(p,!1):null,S=new JS(g,b,w,x,k),E=[i,o];if(s&&E.push(s),u&&E.push(u),k){var T=r.makeTensorInfo([],"float32",Eo(v,"float32"));E.push(T),y.push(T)}t=r.runWebGLProgram(S,E,"float32")}else t=tE({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});var _=bw({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),_}};var dT={kernelName:Qi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,h=r.dimRoundingMode,f=r.activation,d=r.leakyreluAlpha,p=[],v=l;null==v&&(v=[1,1]),Rn(vc(u,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(v,"'")}));var m,g=ic(a.shape,i.shape,u,v,c,h,!0),y=hr().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=f?hw(f,y):null,x=[a,i],k=null!=o,w=null!=s,S="leakyrelu"===f;if(k&&x.push(o),w&&x.push(s),S){var E=n.makeTensorInfo([],"float32",Eo(d,"float32"));x.push(E),p.push(E)}m=y?new _E(g,k,b,w,S):new TE(g,k,b,w,S);var T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],_=n.runWebGLProgram(m,x,"float32",T);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),_}},pT=En((function e(t,n,r){wn(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=xb(n.length),i=xb(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")}));var vT={kernelName:va,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=Pn(r.shape),u=function(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Pn(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,h=i;h<n;++h)l*=u[h],c.push(u[h]);var f=[].concat(kn(Jn(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,f]}(r,a),c=bt(u,4),l=c[0],h=c[1],f=c[2],d=c[3],p=bw({inputs:{x:a},backend:n,attrs:{shape:[h,o]}}),v=bw({inputs:{x:r},backend:n,attrs:{shape:[Pn(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var m=n.readSync(a.dataId),g=n.bufferSync(r),y=Hx(m,g,r.dtype,h,o,f,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,y.values)}var b=new pT(o,d,[h,f]),x=n.runWebGLProgram(b,[v,p],v.dtype),k=bw({inputs:{x:x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),k}},mT=En((function e(t,n){wn(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=xb(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function gT(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=jn(o,a.shape)[0];hr().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];Rn(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var c=function(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,h=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var d=r;d<n;d++)u.push(e.shape[d]),l*=e.shape[d];for(var p=r;p<a;p++)u.push(t.shape[p]);for(var v=n+1;v<i;v++)u.push(e.shape[v]),h*=e.shape[v];return{batchSize:c,sliceSize:h,outerSize:l,dimSize:s,outputShape:u}}(a,i,u,s),l=Pn(i.shape),h=[],f=bw({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),d=bw({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});h.push(f),h.push(d);var p=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(d),m=n.bufferSync(f),g=Gx(m,v,p);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,g.dtype,g.values)}var y=new mT(f.shape,p),b=n.runWebGLProgram(y,[f,d],f.dtype);h.push(b);var x=bw({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var yT={kernelName:pa,backendName:"webgl",kernelFunc:gT},bT=lw({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:Kx,dtype:"bool"}),xT={kernelName:ma,backendName:"webgl",kernelFunc:bT},kT=lw({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:qx}),wT={kernelName:ga,backendName:"webgl",kernelFunc:kT};var ST={kernelName:ba,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return $E(t.input,!0,n)}},ET=cw({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),TT={kernelName:ka,backendName:"webgl",kernelFunc:ET},_T=cw({opSnippet:"return float(isinf(x));",dtype:"bool"}),CT={kernelName:wa,backendName:"webgl",kernelFunc:_T},IT=cw({opSnippet:"return float(isnan(x));",dtype:"bool"}),NT={kernelName:Sa,backendName:"webgl",kernelFunc:IT},AT=lw({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:Xx,dtype:"bool"}),RT={kernelName:Ta,backendName:"webgl",kernelFunc:AT},OT=lw({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:Yx,dtype:"bool"}),DT={kernelName:_a,backendName:"webgl",kernelFunc:OT};var MT={kernelName:Ca,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=$x(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},PT=cw({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:Qx}),LT={kernelName:Ia,backendName:"webgl",kernelFunc:PT},FT=cw({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),BT={kernelName:Na,backendName:"webgl",kernelFunc:FT},VT=lw({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),UT={kernelName:Aa,backendName:"webgl",kernelFunc:VT},jT=cw({opSnippet:"return float(!(x >= 1.0));"}),zT={kernelName:Ra,backendName:"webgl",kernelFunc:jT},WT=lw({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),HT={kernelName:Oa,backendName:"webgl",kernelFunc:WT},GT=En((function e(t,n,r,a,i){wn(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),KT=En((function e(t,n,r,a,i){wn(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),qT={kernelName:Da,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=hr().getBool("WEBGL_PACK_NORMALIZATION")?new KT(a.shape,i,o,s,u):new GT(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},XT=En((function e(t,n,r,a,i){wn(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),YT={kernelName:"LRNGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,h=new XT(a.shape,s,u,c,l);return n.runWebGLProgram(h,[a,i,o],a.dtype)}};function $T(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=jn(i,a.shape),c=u,l=Kl(c,s),h=null!=l,f=n.shouldExecuteOnCPU([a]),d=a;if(h){if(f){for(var p=n.texData.get(d.dataId).values,v=new Array(s),m=0;m<v.length;m++)v[m]=a.shape[l[m]];var g=kk(p,a.shape,a.dtype,l,v);d=n.makeTensorInfo(v,a.dtype),n.texData.get(d.dataId).values=g}else d=_w(a,l,n);c=Xl(c.length,s)}Gl("max",c,s);var y,b=bt(Wl(d.shape,c),2),x=b[0],k=b[1],w=x;if(o&&(w=Hl(x,u)),f){var S=n.texData.get(d.dataId).values,E=Jx(S,Pn(k),w,a.dtype);y=n.makeTensorInfo(w,a.dtype),n.texData.get(y.dataId).values=E}else y=function(e,t,n,r){var a=Pn(t),i=bw({inputs:{x:e},attrs:{shape:[Pn(e.shape)/a,a]},backend:r}),o=Sw(i,e.dtype,"max",r),s=bw({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(d,k,w,n);return h&&n.disposeIntermediateTensorInfo(d),y}var QT={kernelName:Ma,backendName:"webgl",kernelFunc:$T},JT=lw({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Zx}),ZT={kernelName:Pa,backendName:"webgl",kernelFunc:JT};var e_={kernelName:La,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;qy(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Rn(vc(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=rc(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Ln(c.inShape,c.outShape))return Zk({inputs:{x:a},backend:n});var l=new lS(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var t_={kernelName:Fa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=ac(a.shape,i,o,[1,1,1],s,c,u),h=new hS(l,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}},n_=En((function e(t){wn(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),r_=En((function e(t){wn(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,h=u-1-t.padInfo.front,f=c-1-t.padInfo.top,d=l-1-t.padInfo.left,p=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(f,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var a_={kernelName:"MaxPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=ac(i.shape,o,s,[1,1,1],u,c),h=new hS(l,"max",!0),f=n.runWebGLProgram(h,[i],i.dtype),d=new r_(l),p=n.runWebGLProgram(d,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),p}};var i_={kernelName:"MaxPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;qy([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,h=rc(o.shape,s,u,1,c,l),f=new lS(h,"max",!0),d=n.runWebGLProgram(f,[o],o.dtype),p=new n_(h),v=n.runWebGLProgram(p,[a,d],o.dtype);return n.disposeIntermediateTensorInfo(d),v}};var o_={kernelName:Ba,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;Rn(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];Rn(vc(o,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")}));var h=rc(a.shape,i,o,l,s),f=function(e,t,n,r){var a=new lS(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new lS(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,h,c),d=bt(f,2);return[d[0],d[1]]}};var s_={kernelName:Va,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,c=jn(o,a.shape),l=c,h=Kl(l,u),f=null!=h,d=s.shouldExecuteOnCPU([a]),p=[],v=a;if(f){if(d){for(var m=s.texData.get(v.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=a.shape[h[y]];var b=kk(m,a.shape,a.dtype,h,g);v=s.makeTensorInfo(g,a.dtype),s.texData.get(v.dataId).values=b}else v=_w(a,h,s);p.push(v),l=Xl(l.length,u)}Gl("sum",l,u);var x=bt(Wl(v.shape,l),2),k=x[0],w=x[1],S=k;i&&(S=Hl(k,c));for(var E=function(e,t,n,r){var a=Pn(t),i=bw({inputs:{x:e},attrs:{shape:[Pn(e.shape)/a,a]},backend:r}),o=Sw(i,"float32","mean",r),s=bw({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(v,w,S,s),T=0,_=p;T<_.length;T++){var C=_[T];s.disposeIntermediateTensorInfo(C)}return E}};var u_={kernelName:Ua,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=jn(i,a.shape),c=u,l=Kl(c,s),h=a;null!=l&&(h=Nw({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Xl(c.length,a.shape.length)),Gl("min",c,s);var f,d=bt(Wl(h.shape,c),2),p=d[0],v=bw({inputs:{x:h},backend:n,attrs:{shape:[-1,Pn(d[1])]}}),m=Sw(v,v.dtype,"min",n);return f=bw(o?{inputs:{x:m},backend:n,attrs:{shape:Hl(p,u)}}:{inputs:{x:m},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),null!=l&&n.disposeIntermediateTensorInfo(h),f}},c_=lw({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:ek}),l_={kernelName:ja,backendName:"webgl",kernelFunc:c_},h_=En((function e(t,n,r){wn(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=xb(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),f_=En((function e(t,n,r){wn(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=xb(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=Ek("rc",a),c=Ek("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),h=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,d="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")})),d_={kernelName:za,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=hr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new f_(a.shape,i,o):new h_(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},p_={kernelName:"Mod",backendName:"webgl",kernelFunc:lw({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},v_=En((function e(t,n,r){wn(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),m_=lw({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),g_={kernelName:ra,backendName:"webgl",kernelFunc:m_},y_="return a - b;",b_=lw({opSnippet:y_,packedOpSnippet:y_,supportsComplex:!0,cpuKernelImpl:yk}),x_={kernelName:Li,backendName:"webgl",kernelFunc:b_};function k_(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=jn([r.dim],a.shape),o=$T({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=Hl(o.shape,i),u=bw({inputs:{x:o},backend:n,attrs:{shape:s}}),c=b_({inputs:{a:a,b:u},backend:n}),l=zE({inputs:{x:c},backend:n}),h=Cw({inputs:{x:l},backend:n,attrs:{axis:i,keepDims:!1}}),f=bw({inputs:{x:h},backend:n,attrs:{shape:s}}),d=m_({inputs:{a:l,b:f},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),d}var w_={kernelName:Ti,backendName:"webgl",kernelFunc:k_};var S_={kernelName:Wa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:k_({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],h=new v_(c,l,i),f=[[o]],d=n.runWebGLProgram(h,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),d}};var E_={kernelName:Ga,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=bt(nk(i.values,a.shape,a.dtype),2),s=o[0],u=o[1];return r.makeTensorInfo(u,a.dtype,s)}return t=hr().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Gk(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Rk(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},T_=kd;var __={kernelName:qa,backendName:"webgl",kernelFunc:function(e){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),h=T_(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},C_=wd;var I_={kernelName:Xa,backendName:"webgl",kernelFunc:function(e){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),h=n.readSync(i.dataId),f=C_(l,h,o,s,u,c),d=f.selectedIndices,p=f.validOutputs;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},N_=Sd;var A_={kernelName:Ya,backendName:"webgl",kernelFunc:function(e){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),h=n.readSync(i.dataId),f=N_(l,h,o,s,u,c),d=f.selectedIndices,p=f.selectedScores;return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},R_=En((function e(t,n,r,a){wn(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),O_={kernelName:Qa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=Pn(a.shape),c=new R_(u,i,o,s),l=bw({inputs:{x:a},backend:n,attrs:{shape:[u]}}),h=n.runWebGLProgram(c,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var f=bw({inputs:{x:h},backend:n,attrs:{shape:[].concat(kn(a.shape),[i])}});return n.disposeIntermediateTensorInfo(h),f}};function D_(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=OS({inputs:{input:r},backend:n}),i=D_({inputs:{x:a},backend:n}),o=qS({inputs:{input:r},backend:n}),s=D_({inputs:{x:o},backend:n}),u=tw({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return ZE({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var M_={kernelName:Gi,backendName:"webgl",kernelFunc:D_};var P_={kernelName:$a,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=OS({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=qS({inputs:{input:a},backend:r}),u=D_({inputs:{x:s},backend:r}),c=tw({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return ZE({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var L_={kernelName:Ja,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return HE({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){On(a,e.shape,"All tensors passed to stack must have matching shapes"),Rn(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=HE({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=$S({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},F_=En((function e(t,n,r){wn(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=xb(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),B_=En((function e(t,n,r){wn(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=xb(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=Ek("rc",a),c=Ek("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),h=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,m=1===a?2:4;v<m;v++)p+="\n        ".concat(f[v],"\n        if (").concat(d,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(h,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),V_=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===Pn(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return ZE({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=hr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new B_(a.shape,i,o):new F_(a.shape,i,o),c=[[o]];return n.runWebGLProgram(u,[a],a.dtype,c)},U_={kernelName:Za,backendName:"webgl",kernelFunc:V_},j_={kernelName:"Pow",backendName:"webgl",kernelFunc:lw({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})};var z_={kernelName:ti,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=[],l=jn(o,i.shape),h=l,f=Kl(h,u),d=i;if(null!=f&&(d=Nw({inputs:{x:i},backend:r,attrs:{perm:f}}),h=Xl(h.length,u),c.push(d)),Gl("prod",h,u),r.shouldExecuteOnCPU([d])){var p=r.texData.get(d.dataId).values,v=ak(d.shape,d.dtype,p,h),m=v.outVals,g=v.outShape,y=v.outDtype;t=r.makeTensorInfo(g,y,m)}else{var b=bt(Wl(d.shape,h),2),x=b[0],k=Pn(b[1]),w=bw({inputs:{x:d},backend:r,attrs:{shape:[-1,k]}}),S=Sw(w,as(i.dtype),"prod",r);t=bw({inputs:{x:S},backend:r,attrs:{shape:x}}),c.push(w),c.push(S)}if(s){c.push(t);var E=Hl(t.shape,l);t=bw({inputs:{x:t},backend:r,attrs:{shape:E}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},W_=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=ik(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},H_={kernelName:ni,backendName:"webgl",kernelFunc:W_},G_=cw({opSnippet:"return 1.0 / x;"}),K_={kernelName:ai,backendName:"webgl",kernelFunc:G_},q_=cw({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),X_={kernelName:ii,backendName:"webgl",kernelFunc:q_},Y_=cw({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),$_={kernelName:ci,backendName:"webgl",kernelFunc:Y_},Q_=En((function e(t,n,r,a,i){wn(this,e),this.variableNames=["A"],this.outputShape=[];var o=bt(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var h,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];h=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),J_=En((function e(t,n,r,a,i){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=bt(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var h,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r];h=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],",\n          ").concat(f[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var Z_={kernelName:ui,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=bt(r.size,2),u=s[0],c=s[1],l=hr().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new J_(a.shape,u,c,i,o):new Q_(a.shape,u,c,i,o);return n.runWebGLProgram(l,[a],"float32")}},eC=En((function e(t,n,r){wn(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=bt(n,3),i=a[1],o=a[2],s=bt(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],h=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/h[0],d=l[1]/h[1],p=1/f,v=1/d,m=2*Math.ceil(p)+2,g=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var tC={kernelName:"ResizeBilinearGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new eC(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},nC=En((function e(t,n,r,a,i){wn(this,e),this.variableNames=["A"],this.outputShape=[];var o=bt(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var h,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";h=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),rC=En((function e(t,n,r,a,i){wn(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=bt(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var h,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],d=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";h=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/d[0],",\n          ").concat(f[1]/d[1],",\n          ").concat(f[1]/d[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var aC={kernelName:si,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=bt(r.size,2),u=s[0],c=s[1],l=hr().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new rC(a.shape,u,c,i,o):new nC(a.shape,u,c,i,o);return n.runWebGLProgram(l,[a],a.dtype)}},iC=En((function e(t,n,r){wn(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=bt(n,3),i=a[1],o=a[2],s=bt(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],h=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/h[0],d=l[1]/h[1],p=1/f,v=1/d,m=2*Math.ceil(p)+2,g=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(d,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(h[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(h[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var oC={kernelName:"ResizeNearestNeighborGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new iC(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},sC=En((function e(t,n){wn(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=xb(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),uC=En((function e(t,n){wn(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=Ek("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=xb(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var cC={kernelName:li,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=jn(i,a.shape);if(0===o)return Zk({inputs:{x:a},backend:n});var u=hr().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uC(a.shape,s):new sC(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},lC=En((function e(t,n){wn(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),hC={kernelName:Xi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=new lC(a.shape,o),l=function(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}(s,a.shape[1],a.shape[2]),h=bt(l,2),f=[[h[0],h[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(c,[a],a.dtype,f)}},fC=cw({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),dC={kernelName:hi,backendName:"webgl",kernelFunc:fC},pC=cw({opSnippet:"return inversesqrt(x);",cpuKernelImpl:ok}),vC={kernelName:fi,backendName:"webgl",kernelFunc:pC},mC=En((function e(t,n,r,a,i,o){wn(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=xb(i.length),u=xb(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),h="";1===a?h="i":2===a&&(h="i, coords[1]");var f="getUpdates(".concat(h,")"),d=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(d,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(f,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var gC={kernelName:di,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Wf(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,h=s.strides,f=s.outputSize,d=[f/l,l];if(0===f)return n.makeTensorInfo(o,a.dtype);var p=bw({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),v=bw({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new mC(c,u,p.shape.length,v.shape.length,h,d),y=n.runWebGLProgram(g,[v,p,m],v.dtype),b=bw({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}},yC=En((function e(t,n,r){var a,i;if(wn(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=xb(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var bC={kernelName:pi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new yC(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],rs(a.dtype,i.dtype))}},xC=cw({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(1.7580993408473768,";\n  float scale = ").concat(1.0507009873554805,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),kC={kernelName:vi,backendName:"webgl",kernelFunc:xC},wC=cw({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:sk}),SC={kernelName:bi,backendName:"webgl",kernelFunc:wC},EC=cw({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),TC={kernelName:yi,backendName:"webgl",kernelFunc:EC},_C={kernelName:"Sin",backendName:"webgl",kernelFunc:cw({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"})},CC=cw({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),IC={kernelName:gi,backendName:"webgl",kernelFunc:CC},NC=cw({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),AC={kernelName:xi,backendName:"webgl",kernelFunc:NC},RC={kernelName:Si,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;Rn(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,kn(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],h=V_({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=Tp(h.shape,i,s,!1),d=_p(f.length,i.length,!1),p=Cp(h.shape,i,s,!1),v=bw({inputs:{x:h},backend:n,attrs:{shape:f}}),m=Nw({inputs:{x:v},backend:n,attrs:{perm:d}}),g=bw({inputs:{x:m},backend:n,attrs:{shape:p}});return l.push(h),l.push(v),l.push(m),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var OC={kernelName:_i,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],h=bt(lk(s,r.shape,r.dtype,u,a.dtype,c,l),5),f=h[0],d=h[1],p=h[2],v=h[3],m=h[4];return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],a.dtype,p),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};var DC={kernelName:Ci,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),c=bt(hk(s,r.shape,r.dtype,o,u),3),l=c[0],h=c[1],f=c[2];return[n.makeTensorInfo(h,r.dtype,l),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}};var MC={kernelName:Ii,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=bt(fk(o,r.shape,r.dtype,s,u,!0),2),l=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,l)}};var PC={kernelName:Ni,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=bt(fk(o,r.shape,r.dtype,s,u),2),l=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,l)}};var LC={kernelName:Ai,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=Wf(0,a,s),c=u.sliceRank,l=u.numUpdates,h=u.strides,f=u.outputSize,d=new mC(l,c,a.shape.length,i.shape.length,h,[f,1],!1),p=n.runWebGLProgram(d,[i,a,o],i.dtype),v=bw({inputs:{x:p},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(p),v}};var FC={kernelName:Ei,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=jn(r.axis,a.shape)[0],s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Rn(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{Rn(t.reduce((function(e,t){return-1===t&&(e+=1),e}),0)<=1,(function(){return"There should be only one negative value in split array."}));var a=t.indexOf(-1);if(-1!==a){var i=t.reduce((function(e,t){return t>0?e+t:e}));t[a]=e.shape[n]-i}Rn(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}(a,i,o),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=kn(l);t[o]=e;var r=TS({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,r}))}},BC="return sqrt(x);",VC=cw({opSnippet:BC,packedOpSnippet:BC,cpuKernelImpl:dk}),UC={kernelName:ki,backendName:"webgl",kernelFunc:VC},jC={kernelName:"Square",backendName:"webgl",kernelFunc:cw({opSnippet:"return x * x;"})},zC="return (a - b) * (a - b);",WC=lw({opSnippet:zC,packedOpSnippet:zC}),HC={kernelName:Ri,backendName:"webgl",kernelFunc:WC};var GC={kernelName:Ki,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=Ok+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new Rk(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},KC=En((function e(t,n,r){wn(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=xb(r.length),o=xb(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var qC={kernelName:Oi,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,h=a.ellipsisMask,f=a.newAxisMask,d=a.shrinkAxisMask,p=ju(i.shape,o,s,u,c,l,h,f,d),v=p.finalShapeSparse,m=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,k=p.end,w=p.strides;if(g)t=bw({inputs:{x:i},backend:r,attrs:{shape:m}});else if(y||b){Rn(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=function(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}(x,k,w),E=TS({inputs:{x:i},backend:r,attrs:{begin:x,size:S}});t=bw({inputs:{x:E},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(E)}else{if(r.shouldExecuteOnCPU([i])){var T=r.readSync(i.dataId),_=mu(i.shape,i.dtype,T),C=pk(v,_,w,x);t=r.makeTensorInfo(m,i.dtype,C.values)}else{var I=new KC(x,w,v);t=r.runWebGLProgram(I,[i],i.dtype)}}var N=bw({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),N}};var XC={kernelName:Di,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,h=t.dataSplits,f=n.readSync(l.dataId),d=n.readSync(h.dataId),p=bt(vk(f,d,a,i,o,s,u,c),2),v=p[0],m=p[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(h.shape,"int32",m)]}};var YC={kernelName:Mi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=bt(mk(o,s,r),3),c=u[0],l=u[1],h=u[2],f=l.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};var $C={kernelName:Pi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=gk(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},QC={kernelName:"Tan",backendName:"webgl",kernelFunc:cw({opSnippet:"return tan(x);"})},JC=cw({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),ZC={kernelName:Fi,backendName:"webgl",kernelFunc:JC},eI=En((function e(t,n){wn(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=xb(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function tI(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return Io(e)})):o,u=mu(a.shape,a.dtype,s),c=bk(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new eI(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var nI={kernelName:Bi,backendName:"webgl",kernelFunc:tI},rI=En((function e(t){wn(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),aI=En((function e(t){wn(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function iI(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function oI(e){for(var t=1;t<e;)t*=2;return t}var sI={kernelName:Vi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=hr().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=hr().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||i>u){var h=n.readSync(a.dataId),f=bt(xk(h,c,a.dtype,i,o),2),d=f[0],p=f[1];return[n.makeTensorInfo(d.shape,d.dtype,d.values),n.makeTensorInfo(p.shape,p.dtype,p.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,ZE({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),m=null!==v&&v.isPacked,g=m?n.unpackTensor(a):a,y=Pn(c)/l,b=bw({inputs:{x:g},attrs:{shape:[y,l]},backend:n});m&&iI(n,g);for(var x=oI(i),k=oI(l),w=null,S=function(){return null===w?[b,b]:[b,w]},E=function(e,t,r){var a=S(),i=new rI(r),o=[[l],[null===w?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=w;w=n.runWebGLProgram(i,a,"int32",o),iI(n,s)},T=1;T<x;T*=2)for(var _=2*T,C=T;C>=1;C/=2)E(_,C,[y,k]);for(var I=k;I>x;I/=2){var N=S(),A=new aI([y,I/2]),R=[[l],[null===w?1:0],[x]],O=w;w=n.runWebGLProgram(A,N,"int32",R),iI(n,O);for(var D=x/2,M=2*D,P=D;P>=1;P/=2)E(M,P,w.shape)}var L=w;w=TS({inputs:{x:w},backend:n,attrs:{begin:0,size:[y,i]}}),iI(n,L);var F=gT({inputs:{x:b,indices:w},backend:n,attrs:{axis:1,batchDims:1}});iI(n,b);var B=c.slice(0,-1);B.push(i),L=w,w=bw({inputs:{x:w},attrs:{shape:B},backend:n}),iI(n,L);var V=F;return F=bw({inputs:{x:F},attrs:{shape:B},backend:n}),iI(n,V),[F,w]}},uI=En((function e(t,n,r,a,i,o){wn(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var cI={kernelName:Ui,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=bt(a.shape,4),h=l[0],f=l[1],d=l[2],p=l[3],v=bt(null!=c?c:[f,d],2),m=v[0],g=v[1],y=new uI(f,d,o,s,u,[h,m,g,p]);return n.runWebGLProgram(y,[a,i],"float32")}};var lI={kernelName:zi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;qy(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=wk(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var hI={kernelName:Wi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,h=0;h<s;h++)h!==i&&(c[l++]=o.shape[h]);var f=[],d=new Array(s).fill(0),p=o.shape.slice();p[i]=1;for(var v=new Array(u),m=0;m<v.length;m++){d[i]=m;var g=TS({inputs:{x:o},backend:n,attrs:{begin:d,size:p}}),y=bw({inputs:{x:g},backend:n,attrs:{shape:c}});v[m]=y,f.push(g)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},fI=En((function e(t,n){wn(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var dI={kernelName:Hi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],c=0,l=Kl([c],s),h=a;null!=l&&(h=Nw({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(h),c=Xl(1,s)[0]);var f=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(h.shape,c,o),d=Pn([h.shape[c]]),p=bw({inputs:{x:h},backend:n,attrs:{shape:[-1,d]}});u.push(p);var v=function e(t,r,a,i,o){var s=t.shape[0],c=t.shape[1],l=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=Qn(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Qn(e,n+1);return n}(c,o),h=new fI({windowSize:l,inSize:c,batchSize:s,numSegments:o},r),f=n.compileAndRun(h,[t,a],i);if(u.push(f),f.shape[1]===o)return f;var d=W_({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=tI({inputs:{x:d},backend:n,attrs:{reps:[c/l]}});return u.push(d),u.push(p),e(f,r,p,i,o)}(p,"unsortedSegmentSum",i,as(a.dtype),o),m=bw({inputs:{x:v},backend:n,attrs:{shape:f}}),g=m;if(null!=l){u.push(m);var y=ql(l);g=Nw({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},pI=0,vI=[Ow,Mw,Lw,Bw,jw,Hw,Gw,Kw,Jw,Zw,tS,rS,iS,sS,cS,fS,dS,mS,gS,yS,kS,CS,IS,NS,MS,FS,US,nw,WS,QS,rE,uE,cE,lE,hE,fE,dE,vE,gE,kE,wE,EE,CE,AE,RE,DE,PE,LE,FE,BE,UE,jE,WE,GE,XE,QE,tT,rT,oT,uT,hT,fT,dT,vT,yT,xT,wT,ew,ST,XS,TT,CT,NT,iw,RT,DT,MT,LT,BT,UT,zT,HT,qT,YT,QT,ZT,e_,t_,a_,i_,o_,s_,u_,l_,d_,p_,S_,yw,E_,__,I_,A_,RS,O_,P_,L_,U_,j_,uw,z_,H_,DS,g_,K_,X_,$_,xw,Z_,tC,aC,oC,cC,hC,dC,vC,gC,bC,kC,SC,TC,_C,IC,_S,w_,AC,RC,OC,DC,MC,PC,LC,FC,UC,jC,HC,GC,qC,XC,YC,$C,x_,Iw,QC,ZC,nI,sI,cI,Aw,lI,hI,dI,M_];pI<vI.length;pI++){ao(vI[pI])}var mI=w.memo((function(e){var t,n,r=e.updateInPosition,a=e.updateReps,i=e.updateAngle,o=e.rightLegChosen,s=e.targetAngle,u=e.updateRepMaxes,c=15,l=s,h=[],f=!1,d=[],p=[],v=0,m=(0,w.useRef)(null),g=function(){var e=vn(gn().mark((function e(){var t,n,r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={modelType:dy.SINGLEPOSE_LIGHTNING},n=fg.MoveNet,e.next=4,cy(n,t);case 4:r=e.sent,setInterval((function(){y(r)}),100);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=vn(gn().mark((function e(s){var g,y,b,x,k,w,S,E;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof m.current||null===m.current||4!==m.current.video.readyState){e.next=18;break}return g=m.current.video,y=m.current.video.videoWidth,b=m.current.video.videoHeight,m.current.video.width=y,m.current.video.height=b,e.next=8,s.estimatePoses(g);case 8:x=e.sent,k=x[0],w=o?k.keypoints[14]:k.keypoints[13],S=o?k.keypoints[16]:k.keypoints[15],k.keypoints[14].score>.5&&k.keypoints[16].score>.5&&r(!0),t=Math.atan((S.y-w.y)/(S.x-w.x)),n=90-Math.abs(Math.floor(180*t/Math.PI)),console.log(n),i(n),h.length<3?h.push(n):(h.unshift(n),h.pop(),h[0]>c&&h[1]>c&&h[2]>c&&(f||(f=!0,d.length=0)),f&&d.push(n),h[0]<c&&h[1]<c&&h[2]<c&&f&&(f=!1,v+=1,console.log("REPS: ".concat(v)),(E=Math.max.apply(Math,d))>l&&a(),p.push(E),console.log("ALL ANGLES RECORDED: ".concat(d)),console.log("REP MAX: ".concat(E)),console.log("REP MAXES ARRAY: ".concat(p)),u(p)));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g(),(0,rt.jsx)("div",{children:(0,rt.jsx)(fn(),{ref:m,style:gI.video,mirrored:!0})})})),gI={video:{zindex:9,height:480,width:640,borderRadius:20,border:"2px solid #4f4f4f"}},yI=mI;var bI=function(e){var t=15,n=e.threshold,r=[],a=!1,i=[],o=[],s=0,u=bt((0,w.useState)(!1),2),c=u[0],l=u[1],h={button:{backgroundColor:c?"#27AE60":"#5693B6",color:"#ffffff",padding:"0.5rem",paddingRight:"1.5rem",paddingLeft:"1.5rem",borderRadius:20,border:"1px solid #4f4f4f",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",fontWeight:"600",cursor:"pointer",margin:"1rem"}};function f(u,c){l(!0),e.setBluetoothStatusTrue(),setInterval((function(){return u.readValue().then((function(u){var c=u.getInt8(0);if(e.flipAngle&&(c*=-1),e.updateAngle(c),console.log("Angle: ",c),r.length<3)r.push(c);else if(r.unshift(c),r.pop(),r[0]>t&&r[1]>t&&r[2]>t&&(a||(a=!0,i.length=0)),a&&i.push(c),r[0]<t&&r[1]<t&&r[2]<t&&a){a=!1,s+=1,console.log("REPS: ".concat(s));var l=Math.max.apply(Math,i);l>n&&e.updateReps(),o.push(l),console.log("ALL ANGLES RECORDED: ".concat(i)),console.log("REP MAX: ".concat(l)),console.log("REP MAXES ARRAY: ".concat(o)),e.updateRepMaxes(o)}}))}),200)}return(0,rt.jsx)("div",{children:(0,rt.jsx)("div",{style:h.button,onClick:function(){console.log("HandleClick ran"),navigator.bluetooth.requestDevice({filters:[{name:["Motiv_Sensor_Master"]}],optionalServices:["4fafc201-1fb5-459e-8fcc-c5c9c331914b"]}).then((function(e){return e.gatt.connect()})).then((function(e){return e.getPrimaryService("4fafc201-1fb5-459e-8fcc-c5c9c331914b")})).then((function(e){return Promise.all([e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b26a8").then(f)])}))},children:c?(0,rt.jsx)("div",{children:"\u2611\ufe0f Connected to sensor"}):(0,rt.jsx)("div",{children:"Connect to sensor"})})})};function xI(){return(0,rt.jsx)("div",{style:kI.container,children:(0,rt.jsxs)("ol",{children:[(0,rt.jsx)("li",{children:"Strap the motiv sensor onto your ankle, facing outwards."}),(0,rt.jsx)("li",{children:"Turn on the motiv sensor, and click connect to sensor."}),(0,rt.jsxs)("li",{children:["Get into the camera's frame and ",(0,rt.jsx)("span",{style:{fontWeight:600,textDecoration:"underline"},children:"keep your leg straight "}),"while the sensor calibrates."]}),(0,rt.jsx)("li",{children:"Wait for 5 seconds, then start the exercise."})]})})}var kI={container:{width:800,borderRadius:20,border:"1px solid #4f4f4f",background:"#d4f0ff",color:"#4f4f4f",fontSize:"2rem",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"3rem",padding:"3rem",paddingTop:"1.5rem",paddingBottom:"1.5rem"}};function wI(e){var t={height:"2rem",width:"7rem",border:"1px solid #4f4f4f",background:e.isFilled?"#56b679":"#ffffff"};return(0,rt.jsx)("div",{style:t})}function SI(e){var t={height:"2rem",width:"7rem",border:"1px solid #4f4f4f",borderRight:"3px solid #FF2E2E",background:e.isFilled?"#56b679":"#ffffff"};return(0,rt.jsx)("div",{style:t})}function EI(e){var t={height:"2rem",width:"7rem",border:"1px solid #4f4f4f",borderRadius:"15px 0px 0px 15px",background:e.isFilled?"#56b679":"#ffffff"};return(0,rt.jsx)("div",{style:t})}function TI(e){var t={height:"2rem",width:"7rem",border:"1px solid #4f4f4f",borderLeft:"3px solid #FF2E2E",borderRadius:"0px 15px 15px 0px",background:e.isFilled?"#56b679":"#ffffff"};return(0,rt.jsx)("div",{style:t})}var _I=w.memo((function(e){var t=e.targetAngle,n=bt((0,w.useState)([!1,!1,!1,!1,!1]),2),r=n[0],a=n[1];console.log("rendered"),(0,w.useEffect)((function(){e.angle<5&&a([!1,!1,!1,!1,!1]),e.angle>.25*t&&a([!0,!1,!1,!1,!1]),e.angle>.5*t&&a([!0,!0,!1,!1,!1]),e.angle>.75*t&&a([!0,!0,!0,!1,!1]),e.angle>t&&a([!0,!0,!0,!0,!1]),e.angle>1.25*t&&a([!0,!0,!0,!0,!0])}),[e.angle]);return(0,rt.jsxs)("div",{style:{display:"flex",marginTop:"1rem",marginBottom:"2rem"},children:[(0,rt.jsx)(EI,{isFilled:r[0]}),(0,rt.jsx)(wI,{isFilled:r[1]}),(0,rt.jsx)(wI,{isFilled:r[2]}),(0,rt.jsx)(SI,{isFilled:r[3]}),(0,rt.jsx)(TI,{isFilled:r[4]})]})}));function CI(e,t,n){return CI=Lo()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Do(a,n.prototype),a},CI.apply(null,arguments)}function II(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Po(e)););return e}function NI(){return NI="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=II(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},NI.apply(this,arguments)}function AI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RI(e){var t="function"===typeof Map?new Map:void 0;return RI=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return CI(e,arguments,Po(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Do(n,e)},RI(e)}var OI=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},DI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],a=0;a<e.length;a+=3){var i=e[a],o=a+1<e.length,s=o?e[a+1]:0,u=a+2<e.length,c=u?e[a+2]:0,l=i>>2,h=(3&i)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(OI(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){var i=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&i)}else if(a>239&&a<365){var o=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],a=0;a<e.length;){var i=n[e.charAt(a++)],o=a<e.length?n[e.charAt(a)]:0,s=++a<e.length?n[e.charAt(a)]:64,u=++a<e.length?n[e.charAt(a)]:64;if(++a,null==i||null==o||null==s||null==u)throw Error();var c=i<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},MI=function(e){return function(e){var t=OI(e);return DI.encodeByteArray(t,!0)}(e).replace(/\./g,"")};var PI=function(){function e(){var t=this;wn(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return En(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function LI(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function FI(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function BI(){return"object"===typeof indexedDB}function VI(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=function(){a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=function(){n=!1},a.onerror=function(){var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(i){t(i)}}))}var UI=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a){var i;return wn(this,n),(i=t.call(this,r)).code=e,i.customData=a,i.name="FirebaseError",Object.setPrototypeOf(Bo(i),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Bo(i),jI.prototype.create),i}return En(n)}(RI(Error)),jI=function(){function e(t,n,r){wn(this,e),this.service=t,this.serviceName=n,this.errors=r}return En(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?zI(r,t):"Error",i="".concat(this.serviceName,": ").concat(a," (").concat(n,")."),o=new UI(n,i,t);return o}}]),e}();function zI(e,t){return e.replace(WI,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var WI=/\{\$([^}]+)}/g;function HI(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),a=0,i=n;a<i.length;a++){var o=i[a];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(GI(s)&&GI(u)){if(!HI(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function GI(e){return null!==e&&"object"===typeof e}var KI=144e5;function qI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),a=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(KI,r+a)}function XI(e){return e&&e._delegate?e._delegate:e}var YI=function(){function e(t,n,r){wn(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return En(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),$I="[DEFAULT]",QI=function(){function e(t,n){wn(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return En(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new PI;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(a){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:$I})}catch(u){}var t,n=bn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=bt(t.value,2),a=r[0],i=r[1],o=this.normalizeInstanceIdentifier(a);try{var s=this.getOrInitializeService({instanceIdentifier:o});i.resolve(s)}catch(u){}}}catch(BZ){n.e(BZ)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$I;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=vn(mn.mark((function e(){var t;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(kn(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),kn(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$I;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$I;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,i=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=bn(this.instancesDeferred.entries());try{for(o.s();!(a=o.n()).done;){var s=bt(a.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);r===l&&c.resolve(i)}}catch(BZ){o.e(BZ)}finally{o.f()}return i}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);var i=this.instances.get(r);return i&&e(i,r),function(){a.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,a=bn(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;try{i(e,t)}catch(jU){}}}catch(BZ){a.e(BZ)}finally{a.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,a=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===$I?void 0:t),options:a}),this.instances.set(n,i),this.instancesOptions.set(n,a),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(jU){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$I;return this.component?this.component.multipleInstances?e:$I:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var JI,ZI,eN=function(){function e(t){wn(this,e),this.name=t,this.providers=new Map}return En(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new QI(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),tN=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ZI||(ZI={}));var nN={debug:ZI.DEBUG,verbose:ZI.VERBOSE,info:ZI.INFO,warn:ZI.WARN,error:ZI.ERROR,silent:ZI.SILENT},rN=ZI.INFO,aN=(AI(JI={},ZI.DEBUG,"log"),AI(JI,ZI.VERBOSE,"log"),AI(JI,ZI.INFO,"info"),AI(JI,ZI.WARN,"warn"),AI(JI,ZI.ERROR,"error"),JI),iN=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=aN[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];(a=console)[r].apply(a,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},oN=function(){function e(t){wn(this,e),this.name=t,this._logLevel=rN,this._logHandler=iN,this._userLogHandler=null,tN.push(this)}return En(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ZI))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?nN[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ZI.DEBUG].concat(t)),this._logHandler.apply(this,[this,ZI.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ZI.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ZI.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ZI.INFO].concat(t)),this._logHandler.apply(this,[this,ZI.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ZI.WARN].concat(t)),this._logHandler.apply(this,[this,ZI.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ZI.ERROR].concat(t)),this._logHandler.apply(this,[this,ZI.ERROR].concat(t))}}]),e}();function sN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sN(Object(n),!0).forEach((function(t){AI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cN,lN;var hN=new WeakMap,fN=new WeakMap,dN=new WeakMap,pN=new WeakMap,vN=new WeakMap;var mN={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return fN.get(e);if("objectStoreNames"===t)return e.objectStoreNames||dN.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bN(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function gN(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(lN||(lN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(xN(this),n),bN(hN.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bN(e.apply(xN(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=e.call.apply(e,[xN(this),t].concat(r));return dN.set(i,t.sort?t.sort():[t]),bN(i)}}function yN(e){return"function"===typeof e?gN(e):(e instanceof IDBTransaction&&function(e){if(!fN.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=function(){t(),r()},i=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)}));fN.set(e,t)}}(e),t=e,(cN||(cN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,mN):e);var t}function bN(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",a),e.removeEventListener("error",i)},a=function(){t(bN(e.result)),r()},i=function(){n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)}));return t.then((function(t){t instanceof IDBCursor&&hN.set(t,e)})).catch((function(){})),vN.set(t,e),t}(e);if(pN.has(e))return pN.get(e);var t=yN(e);return t!==e&&(pN.set(e,t),vN.set(t,e)),t}var xN=function(e){return vN.get(e)};var kN,wN,SN=["get","getKey","getAll","getAllKeys","count"],EN=["put","add","delete","clear"],TN=new Map;function _N(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(TN.get(t))return TN.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,a=EN.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||SN.includes(n))){var i=function(){var e=vn(mn.mark((function e(t){var i,o,s,u,c,l,h=arguments;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,a?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(i=s)[n].apply(i,c),a&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return TN.set(t,i),i}}}!function(e){mN=e(mN)}((function(e){return uN(uN({},e),{},{get:function(t,n,r){return _N(t,n)||e.get(t,n,r)},has:function(t,n){return!!_N(t,n)||e.has(t,n)}})}));var CN=function(){function e(t){wn(this,e),this.container=t}return En(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var IN="@firebase/app",NN="0.7.24",AN=new oN("@firebase/app"),RN="[DEFAULT]",ON=(AI(kN={},IN,"fire-core"),AI(kN,"@firebase/app-compat","fire-core-compat"),AI(kN,"@firebase/analytics","fire-analytics"),AI(kN,"@firebase/analytics-compat","fire-analytics-compat"),AI(kN,"@firebase/app-check","fire-app-check"),AI(kN,"@firebase/app-check-compat","fire-app-check-compat"),AI(kN,"@firebase/auth","fire-auth"),AI(kN,"@firebase/auth-compat","fire-auth-compat"),AI(kN,"@firebase/database","fire-rtdb"),AI(kN,"@firebase/database-compat","fire-rtdb-compat"),AI(kN,"@firebase/functions","fire-fn"),AI(kN,"@firebase/functions-compat","fire-fn-compat"),AI(kN,"@firebase/installations","fire-iid"),AI(kN,"@firebase/installations-compat","fire-iid-compat"),AI(kN,"@firebase/messaging","fire-fcm"),AI(kN,"@firebase/messaging-compat","fire-fcm-compat"),AI(kN,"@firebase/performance","fire-perf"),AI(kN,"@firebase/performance-compat","fire-perf-compat"),AI(kN,"@firebase/remote-config","fire-rc"),AI(kN,"@firebase/remote-config-compat","fire-rc-compat"),AI(kN,"@firebase/storage","fire-gcs"),AI(kN,"@firebase/storage-compat","fire-gcs-compat"),AI(kN,"@firebase/firestore","fire-fst"),AI(kN,"@firebase/firestore-compat","fire-fst-compat"),AI(kN,"fire-js","fire-js"),AI(kN,"firebase","fire-js-all"),kN),DN=new Map,MN=new Map;function PN(e,t){try{e.container.addComponent(t)}catch(n){AN.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function LN(e){var t=e.name;if(MN.has(t))return AN.debug("There were multiple attempts to register component ".concat(t,".")),!1;MN.set(t,e);var n,r=bn(DN.values());try{for(r.s();!(n=r.n()).done;){PN(n.value,e)}}catch(BZ){r.e(BZ)}finally{r.f()}return!0}function FN(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var BN=(AI(wN={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),AI(wN,"bad-app-name","Illegal App name: '{$appName}"),AI(wN,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),AI(wN,"app-deleted","Firebase App named '{$appName}' already deleted"),AI(wN,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),AI(wN,"invalid-log-argument","First argument to `onLog` must be null or a function."),AI(wN,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),AI(wN,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),AI(wN,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),AI(wN,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),wN),VN=new jI("app","Firebase",BN),UN=function(){function e(t,n,r){var a=this;wn(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new YI("app",(function(){return a}),"PUBLIC"))}return En(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw VN.create("app-deleted",{appName:this._name})}}]),e}();function jN(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RN,t=DN.get(e);if(!t)throw VN.create("no-app",{appName:e});return t}function zN(e,t,n){var r,a=null!==(r=ON[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));var i=a.match(/\s|\//),o=t.match(/\s|\//);if(i||o){var s=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return i&&s.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),i&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void AN.warn(s.join(" "))}LN(new YI("".concat(a,"-version"),(function(){return{library:a,version:t}}),"VERSION"))}var WN="firebase-heartbeat-store",HN=null;function GN(){return HN||(HN=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,a=n.upgrade,i=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=bN(s);return a&&s.addEventListener("upgradeneeded",(function(e){a(bN(s.result),e.oldVersion,e.newVersion,bN(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),i&&e.addEventListener("versionchange",(function(){return i()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(WN)}}).catch((function(e){throw VN.create("storage-open",{originalErrorMessage:e.message})}))),HN}function KN(e){return qN.apply(this,arguments)}function qN(){return qN=vn(mn.mark((function e(t){var n;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GN();case 3:return n=e.sent,e.abrupt("return",n.transaction(WN).objectStore(WN).get($N(t)));case 7:throw e.prev=7,e.t0=e.catch(0),VN.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),qN.apply(this,arguments)}function XN(e,t){return YN.apply(this,arguments)}function YN(){return YN=vn(mn.mark((function e(t,n){var r,a,i;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GN();case 3:return r=e.sent,a=r.transaction(WN,"readwrite"),i=a.objectStore(WN),e.next=8,i.put(n,$N(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),VN.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),YN.apply(this,arguments)}function $N(e){return"".concat(e.name,"!").concat(e.options.appId)}var QN=function(){function e(t){var n=this;wn(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new tA(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return En(e,[{key:"triggerHeartbeat",value:function(){var e=vn(mn.mark((function e(){var t,n,r;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=JN(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=vn(mn.mark((function e(){var t,n,r,a,i;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=JN(),n=ZN(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,a=n.unsentEntries,i=MI(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function JN(){return(new Date).toISOString().substring(0,10)}function ZN(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],a=e.slice(),i=bn(e);try{var o=function(){var e=t.value,i=r.find((function(t){return t.agent===e.agent}));if(i){if(i.dates.push(e.date),nA(r)>n)return i.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),nA(r)>n)return r.pop(),"break";a=a.slice(1)};for(i.s();!(t=i.n()).done;){var s=o();if("break"===s)break}}catch(BZ){i.e(BZ)}finally{i.f()}return{heartbeatsToSend:r,unsentEntries:a}}var eA,tA=function(){function e(t){wn(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return En(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=vn(mn.mark((function e(){return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(BI()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",VI().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=vn(mn.mark((function e(){var t;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,KN(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=vn(mn.mark((function e(t){var n,r;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",XN(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=vn(mn.mark((function e(t){var n,r;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",XN(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(kn(r.heartbeats),kn(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function nA(e){return MI(JSON.stringify({version:2,heartbeats:e})).length}eA="",LN(new YI("platform-logger",(function(e){return new CN(e)}),"PRIVATE")),LN(new YI("heartbeat",(function(e){return new QN(e)}),"PRIVATE")),zN(IN,NN,eA),zN(IN,NN,"esm2017"),zN("fire-js","");var rA,aA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},iA={},oA=oA||{},sA=aA||self;function uA(){}function cA(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function lA(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var hA="closure_uid_"+(1e9*Math.random()>>>0),fA=0;function dA(e,t,n){return e.call.apply(e.bind,arguments)}function pA(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function vA(e,t,n){return(vA=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dA:pA).apply(null,arguments)}function mA(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function gA(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}function yA(){this.s=this.s,this.o=this.o}var bA={};yA.prototype.s=!1,yA.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,hA)&&e[hA]||(e[hA]=++fA)}(this);delete bA[e]}},yA.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var xA=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},kA=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,a="string"===typeof e?e.split(""):e,i=0;i<r;i++)i in a&&t.call(n,a[i],i,e)};function wA(e){return Array.prototype.concat.apply([],arguments)}function SA(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function EA(e){return/^[\s\xa0]*$/.test(e)}var TA,_A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function CA(e,t){return-1!=e.indexOf(t)}function IA(e,t){return e<t?-1:e>t?1:0}e:{var NA=sA.navigator;if(NA){var AA=NA.userAgent;if(AA){TA=AA;break e}}TA=""}function RA(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function OA(e){var t={};for(var n in e)t[n]=e[n];return t}var DA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function MA(e,t){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])e[n]=r[n];for(var i=0;i<DA.length;i++)n=DA[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function PA(e){return PA[" "](e),e}PA[" "]=uA;var LA,FA=CA(TA,"Opera"),BA=CA(TA,"Trident")||CA(TA,"MSIE"),VA=CA(TA,"Edge"),UA=VA||BA,jA=CA(TA,"Gecko")&&!(CA(TA.toLowerCase(),"webkit")&&!CA(TA,"Edge"))&&!(CA(TA,"Trident")||CA(TA,"MSIE"))&&!CA(TA,"Edge"),zA=CA(TA.toLowerCase(),"webkit")&&!CA(TA,"Edge");function WA(){var e=sA.document;return e?e.documentMode:void 0}e:{var HA="",GA=function(){var e=TA;return jA?/rv:([^\);]+)(\)|;)/.exec(e):VA?/Edge\/([\d\.]+)/.exec(e):BA?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):zA?/WebKit\/(\S+)/.exec(e):FA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(GA&&(HA=GA?GA[1]:""),BA){var KA=WA();if(null!=KA&&KA>parseFloat(HA)){LA=String(KA);break e}}LA=HA}var qA,XA={};function YA(){return function(e){var t=XA;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=_A(String(LA)).split("."),n=_A("9").split("."),r=Math.max(t.length,n.length),a=0;0==e&&a<r;a++){var i=t[a]||"",o=n[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;e=IA(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||IA(0==i[2].length,0==o[2].length)||IA(i[2],o[2]),i=i[3],o=o[3]}while(0==e)}return 0<=e}))}if(sA.document&&BA){var $A=WA();qA=$A||(parseInt(LA,10)||void 0)}else qA=void 0;var QA=qA,JA=function(){if(!sA.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{sA.addEventListener("test",uA,t),sA.removeEventListener("test",uA,t)}catch(n){}return e}();function ZA(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function eR(e,t){if(ZA.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(jA){e:{try{PA(t.nodeName);var a=!0;break e}catch(i){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:tR[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&eR.Z.h.call(this)}}ZA.prototype.h=function(){this.defaultPrevented=!0},gA(eR,ZA);var tR={2:"touch",3:"pen",4:"mouse"};eR.prototype.h=function(){eR.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var nR="closure_listenable_"+(1e6*Math.random()|0),rR=0;function aR(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=a,this.key=++rR,this.ca=this.fa=!1}function iR(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function oR(e){this.src=e,this.g={},this.h=0}function sR(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],i=xA(a,t);(r=0<=i)&&Array.prototype.splice.call(a,i,1),r&&(iR(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function uR(e,t,n,r){for(var a=0;a<e.length;++a){var i=e[a];if(!i.ca&&i.listener==t&&i.capture==!!n&&i.ia==r)return a}return-1}oR.prototype.add=function(e,t,n,r,a){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=uR(e,t,r,a);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new aR(t,this.src,i,!!r,a)).fa=n,e.push(t)),t};var cR="closure_lm_"+(1e6*Math.random()|0),lR={};function hR(e,t,n,r,a){if(r&&r.once)return dR(e,t,n,r,a);if(Array.isArray(t)){for(var i=0;i<t.length;i++)hR(e,t[i],n,r,a);return null}return n=xR(n),e&&e[nR]?e.N(t,n,lA(r)?!!r.capture:!!r,a):fR(e,t,n,!1,r,a)}function fR(e,t,n,r,a,i){if(!t)throw Error("Invalid event type");var o=lA(a)?!!a.capture:!!a,s=yR(e);if(s||(e[cR]=s=new oR(e)),(n=s.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=gR;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)JA||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(mR(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function dR(e,t,n,r,a){if(Array.isArray(t)){for(var i=0;i<t.length;i++)dR(e,t[i],n,r,a);return null}return n=xR(n),e&&e[nR]?e.O(t,n,lA(r)?!!r.capture:!!r,a):fR(e,t,n,!0,r,a)}function pR(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)pR(e,t[i],n,r,a);else r=lA(r)?!!r.capture:!!r,n=xR(n),e&&e[nR]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=uR(i=e.g[t],n,r,a))&&(iR(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=yR(e))&&(t=e.g[t.toString()],e=-1,t&&(e=uR(t,n,r,a)),(n=-1<e?t[e]:null)&&vR(n))}function vR(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[nR])sR(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(mR(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=yR(t))?(sR(n,e),0==n.h&&(n.src=null,t[cR]=null)):iR(e)}}}function mR(e){return e in lR?lR[e]:lR[e]="on"+e}function gR(e,t){if(e.ca)e=!0;else{t=new eR(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&vR(e),e=n.call(r,t)}return e}function yR(e){return(e=e[cR])instanceof oR?e:null}var bR="__closure_events_fn_"+(1e9*Math.random()>>>0);function xR(e){return"function"===typeof e?e:(e[bR]||(e[bR]=function(t){return e.handleEvent(t)}),e[bR])}function kR(){yA.call(this),this.i=new oR(this),this.P=this,this.I=null}function wR(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ZA(t,e);else if(t instanceof ZA)t.target=t.target||e;else{var a=t;MA(t=new ZA(r,e),a)}if(a=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];a=SR(o,r,!0,t)&&a}if(a=SR(o=t.g=e,r,!0,t)&&a,a=SR(o,r,!1,t)&&a,n)for(i=0;i<n.length;i++)a=SR(o=t.g=n[i],r,!1,t)&&a}function SR(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&sR(e.i,o),a=!1!==s.call(u,r)&&a}}return a&&!r.defaultPrevented}gA(kR,yA),kR.prototype[nR]=!0,kR.prototype.removeEventListener=function(e,t,n,r){pR(this,e,t,n,r)},kR.prototype.M=function(){if(kR.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)iR(n[r]);delete t.g[e],t.h--}}this.I=null},kR.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},kR.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ER=sA.JSON.stringify;function TR(){var e=DR,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _R,CR=function(){function e(){wn(this,e),this.h=this.g=null}return En(e,[{key:"add",value:function(e,t){var n=IR.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),IR=new(function(){function e(t,n){wn(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return En(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new NR}),(function(e){return e.reset()})),NR=function(){function e(){wn(this,e),this.next=this.g=this.h=null}return En(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function AR(e){sA.setTimeout((function(){throw e}),0)}function RR(e,t){_R||function(){var e=sA.Promise.resolve(void 0);_R=function(){e.then(MR)}}(),OR||(_R(),OR=!0),DR.add(e,t)}var OR=!1,DR=new CR;function MR(){for(var e;e=TR();){try{e.h.call(e.g)}catch(n){AR(n)}var t=IR;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}OR=!1}function PR(e,t){kR.call(this),this.h=e||1,this.g=t||sA,this.j=vA(this.kb,this),this.l=Date.now()}function LR(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function FR(e,t,n){if("function"===typeof e)n&&(e=vA(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=vA(e.handleEvent,e)}return 2147483647<Number(t)?-1:sA.setTimeout(e,t||0)}function BR(e){e.g=FR((function(){e.g=null,e.i&&(e.i=!1,BR(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}gA(PR,kR),(rA=PR.prototype).da=!1,rA.S=null,rA.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),wR(this,"tick"),this.da&&(LR(this),this.start()))}},rA.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rA.M=function(){PR.Z.M.call(this),LR(this),delete this.g};var VR=function(e){Mo(n,e);var t=Uo(n);function n(e,r){var a;return wn(this,n),(a=t.call(this)).m=e,a.j=r,a.h=null,a.i=!1,a.g=null,a}return En(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:BR(this)}},{key:"M",value:function(){NI(Po(n.prototype),"M",this).call(this),this.g&&(sA.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(yA);function UR(e){yA.call(this),this.h=e,this.g={}}gA(UR,yA);var jR=[];function zR(e,t,n,r){Array.isArray(n)||(n&&(jR[0]=n.toString()),n=jR);for(var a=0;a<n.length;a++){var i=hR(t,n[a],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function WR(e){RA(e.g,(function(e,t){this.g.hasOwnProperty(t)&&vR(e)}),e),e.g={}}function HR(){this.g=!0}function GR(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var i=a[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<a.length;o++)a[o]=""}}}return ER(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}UR.prototype.M=function(){UR.Z.M.call(this),WR(this)},UR.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},HR.prototype.Aa=function(){this.g=!1},HR.prototype.info=function(){};var KR={},qR=null;function XR(){return qR=qR||new kR}function YR(e){ZA.call(this,KR.Ma,e)}function $R(e){var t=XR();wR(t,new YR(t,e))}function QR(e,t){ZA.call(this,KR.STAT_EVENT,e),this.stat=t}function JR(e){var t=XR();wR(t,new QR(t,e))}function ZR(e,t){ZA.call(this,KR.Na,e),this.size=t}function eO(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return sA.setTimeout((function(){e()}),t)}KR.Ma="serverreachability",gA(YR,ZA),KR.STAT_EVENT="statevent",gA(QR,ZA),KR.Na="timingevent",gA(ZR,ZA);var tO={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nO={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rO(){}function aO(e){return e.h||(e.h=e.i())}function iO(){}rO.prototype.h=null;var oO,sO={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function uO(){ZA.call(this,"d")}function cO(){ZA.call(this,"c")}function lO(){}function hO(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new UR(this),this.P=dO,e=UA?125:void 0,this.W=new PR(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new fO}function fO(){this.i=null,this.g="",this.h=!1}gA(uO,ZA),gA(cO,ZA),gA(lO,rO),lO.prototype.g=function(){return new XMLHttpRequest},lO.prototype.i=function(){return{}},oO=new lO;var dO=45e3,pO={},vO={};function mO(e,t,n){e.K=1,e.v=VO(DO(t)),e.s=n,e.U=!0,gO(e,null)}function gO(e,t){e.F=Date.now(),kO(e),e.A=DO(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),JO(n.h,"t",r),e.C=0,n=e.l.H,e.h=new fO,e.g=eM(e.l,n?t:null,!e.s),0<e.O&&(e.L=new VR(vA(e.Ia,e,e.g),e.O)),zR(e.V,e.g,"readystatechange",e.gb),t=e.H?OA(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),$R(1),function(e,t,n,r,a,i){e.info((function(){if(e.g)if(i)for(var o="",s=i.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function yO(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function bO(e,t,n){for(var r,a=!0;!e.I&&e.C<n.length;){if((r=xO(e,n))==vO){4==t&&(e.o=4,JR(14),a=!1),GR(e.j,e.m,null,"[Incomplete Response]");break}if(r==pO){e.o=4,JR(15),GR(e.j,e.m,n,"[Invalid Chunk]"),a=!1;break}GR(e.j,e.m,r,null),_O(e,r)}yO(e)&&r!=vO&&r!=pO&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,JR(16),a=!1),e.i=e.i&&a,a?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),KD(t),t.L=!0,JR(11))):(GR(e.j,e.m,n,"[Invalid Chunked Response]"),TO(e),EO(e))}function xO(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?vO:(n=Number(t.substring(n,r)),isNaN(n)?pO:(r+=1)+n>t.length?vO:(t=t.substr(r,n),e.C=r+n,t))}function kO(e){e.Y=Date.now()+e.P,wO(e,e.P)}function wO(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eO(vA(e.eb,e),t)}function SO(e){e.B&&(sA.clearTimeout(e.B),e.B=null)}function EO(e){0==e.l.G||e.I||YD(e.l,e)}function TO(e){SO(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,LR(e.W),WR(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function _O(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||oD(n.i,e)))if(n.I=e.N,!e.J&&oD(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(i){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;XD(n),FD(n)}GD(n),JR(18)}}else n.ta=a[1],0<n.ta-n.U&&37500>a[2]&&n.N&&0==n.A&&!n.v&&(n.v=eO(vA(n.ab,n),6e3));if(1>=iD(n.i)&&n.ka){try{n.ka()}catch(i){}n.ka=void 0}}else QD(n,11)}else if((e.J||n.g==e)&&XD(n),!EA(t))for(a=n.Ca.g.parse(t),t=0;t<a.length;t++){var i=a[t];if(n.U=i[0],i=i[1],2==n.G)if("c"==i[0]){n.J=i[1],n.la=i[2];var o=i[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=i[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=i[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(CA(l,"spdy")||CA(l,"quic")||CA(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(sD(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,BO(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=ZD(r,r.H?r.la:null,r.W),d.J){uD(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(SO(p),kO(p)),r.g=d}else HD(r);0<n.l.length&&UD(n)}else"stop"!=i[0]&&"close"!=i[0]||QD(n,7);else 3==n.G&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?QD(n,7):LD(n):"noop"!=i[0]&&n.j&&n.j.wa(i),n.A=0)}$R(4)}catch(i){}}function CO(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(cA(e)||"string"===typeof e)kA(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(cA(e)||"string"===typeof e){n=[];for(var r=e.length,a=0;a<r;a++)n.push(a)}else for(a in n=[],r=0,e)n[r++]=a;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(cA(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length;for(var i=0;i<a;i++)t.call(void 0,r[i],n&&n[i],e)}}function IO(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof IO)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function NO(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];AO(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var a={};for(n=t=0;t<e.g.length;)AO(a,r=e.g[t])||(e.g[n++]=r,a[r]=1),t++;e.g.length=n}}function AO(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(rA=hO.prototype).setTimeout=function(e){this.P=e},rA.gb=function(e){e=e.target;var t=this.L;t&&3==RD(e)?t.l():this.Ia(e)},rA.Ia=function(e){try{if(e==this.g)e:{var t=RD(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||UA||this.g&&(this.h.h||this.g.ga()||OD(this.g)))){this.I||4!=t||7==n||$R(8==n||0>=r?3:2),SO(this);var a=this.g.ba();this.N=a;t:if(yO(this)){var i=OD(this.g);e="";var o=i.length,s=4==RD(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){TO(this),EO(this);var u="";break t}this.h.i=new sA.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:s&&n==o-1});i.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==a,function(e,t,n,r,a,i,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+i+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,a),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!EA(c)){var h=c;break t}}h=null}if(!(a=h)){this.i=!1,this.o=3,JR(12),TO(this),EO(this);break e}GR(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_O(this,a)}this.U?(bO(this,t,u),UA&&this.i&&3==t&&(zR(this.V,this.W,"tick",this.fb),this.W.start())):(GR(this.j,this.m,u,null),_O(this,u)),4==t&&TO(this),this.i&&!this.I&&(4==t?YD(this.l,this):(this.i=!1,kO(this)))}else 400==a&&0<u.indexOf("Unknown SID")?(this.o=3,JR(12)):(this.o=0,JR(13)),TO(this),EO(this)}}}catch(t){}},rA.fb=function(){if(this.g){var e=RD(this.g),t=this.g.ga();this.C<t.length&&(SO(this),bO(this,e,t),this.i&&4!=e&&kO(this))}},rA.cancel=function(){this.I=!0,TO(this)},rA.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&($R(3),JR(17)),TO(this),this.o=2,EO(this)):wO(this,this.Y-e)},(rA=IO.prototype).R=function(){NO(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},rA.T=function(){return NO(this),this.g.concat()},rA.get=function(e,t){return AO(this.h,e)?this.h[e]:t},rA.set=function(e,t){AO(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},rA.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var a=n[r],i=this.get(a);e.call(t,i,a,this)}};var RO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function OO(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof OO){this.g=void 0!==t?t:e.g,MO(this,e.j),this.s=e.s,PO(this,e.i),LO(this,e.m),this.l=e.l,t=e.h;var n=new XO;n.i=t.i,t.g&&(n.g=new IO(t.g),n.h=t.h),FO(this,n),this.o=e.o}else e&&(n=String(e).match(RO))?(this.g=!!t,MO(this,n[1]||"",!0),this.s=UO(n[2]||""),PO(this,n[3]||"",!0),LO(this,n[4]),this.l=UO(n[5]||"",!0),FO(this,n[6]||"",!0),this.o=UO(n[7]||"")):(this.g=!!t,this.h=new XO(null,this.g))}function DO(e){return new OO(e)}function MO(e,t,n){e.j=n?UO(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function PO(e,t,n){e.i=n?UO(t,!0):t}function LO(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function FO(e,t,n){t instanceof XO?(e.h=t,function(e,t){t&&!e.j&&(YO(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($O(this,t),JO(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=jO(t,KO)),e.h=new XO(t,e.g))}function BO(e,t,n){e.h.set(t,n)}function VO(e){return BO(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function UO(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jO(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,zO),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zO(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}OO.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jO(t,WO,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jO(t,WO,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(jO(n,"/"==n.charAt(0)?GO:HO,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jO(n,qO)),e.join("")};var WO=/[#\/\?@]/g,HO=/[#\?:]/g,GO=/[#\?]/g,KO=/[#\?@]/g,qO=/#/g;function XO(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function YO(e){e.g||(e.g=new IO,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var i=e[n].substring(0,r);a=e[n].substring(r+1)}else i=e[n];t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function $O(e,t){YO(e),t=ZO(e,t),AO(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,AO((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&NO(e)))}function QO(e,t){return YO(e),t=ZO(e,t),AO(e.g.h,t)}function JO(e,t,n){$O(e,t),0<n.length&&(e.i=null,e.g.set(ZO(e,t),SA(n)),e.h+=n.length)}function ZO(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(rA=XO.prototype).add=function(e,t){YO(this),this.i=null,e=ZO(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},rA.forEach=function(e,t){YO(this),this.g.forEach((function(n,r){kA(n,(function(n){e.call(t,n,r,this)}),this)}),this)},rA.T=function(){YO(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var a=e[r],i=0;i<a.length;i++)n.push(t[r]);return n},rA.R=function(e){YO(this);var t=[];if("string"===typeof e)QO(this,e)&&(t=wA(t,this.g.get(ZO(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=wA(t,e[n])}return t},rA.set=function(e,t){return YO(this),this.i=null,QO(this,e=ZO(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},rA.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},rA.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],a=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=a;""!==r[i]&&(o+="="+encodeURIComponent(String(r[i]))),e.push(o)}}return this.i=e.join("&")};var eD=En((function e(t,n){wn(this,e),this.h=t,this.g=n}));function tD(e){this.l=e||rD,sA.PerformanceNavigationTiming?e=0<(e=sA.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(sA.g&&sA.g.Ea&&sA.g.Ea()&&sA.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nD,rD=10;function aD(e){return!!e.h||!!e.g&&e.g.size>=e.j}function iD(e){return e.h?1:e.g?e.g.size:0}function oD(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function sD(e,t){e.g?e.g.add(t):e.h=t}function uD(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function cD(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=bn(e.g.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n=n.concat(a.D)}}catch(BZ){r.e(BZ)}finally{r.f()}return n}return SA(e.i)}function lD(){}function hD(){this.g=new lD}function fD(e,t,n){var r=n||"";try{CO(e,(function(e,n){var a=e;lA(e)&&(a=ER(e)),t.push(r+n+"="+encodeURIComponent(a))}))}catch(a){throw t.push(r+"type="+encodeURIComponent("_badmap")),a}}function dD(e,t,n,r,a){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,a(r)}catch(i){}}function pD(e){this.l=e.$b||null,this.j=e.ib||!1}function vD(e,t){kR.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=mD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tD.prototype.cancel=function(){if(this.i=cD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=bn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(BZ){t.e(BZ)}finally{t.f()}this.g.clear()}},lD.prototype.stringify=function(e){return sA.JSON.stringify(e,void 0)},lD.prototype.parse=function(e){return sA.JSON.parse(e,void 0)},gA(pD,rO),pD.prototype.g=function(){return new vD(this.l,this.j)},pD.prototype.i=(nD={},function(){return nD}),gA(vD,kR);var mD=0;function gD(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function yD(e){e.readyState=4,e.l=null,e.j=null,e.A=null,bD(e)}function bD(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(rA=vD.prototype).open=function(e,t){if(this.readyState!=mD)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,bD(this)},rA.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||sA).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},rA.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yD(this)),this.readyState=mD},rA.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,bD(this)),this.g&&(this.readyState=3,bD(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof sA.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gD(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},rA.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?yD(this):bD(this),3==this.readyState&&gD(this)}},rA.Ua=function(e){this.g&&(this.response=this.responseText=e,yD(this))},rA.Ta=function(e){this.g&&(this.response=e,yD(this))},rA.ha=function(){this.g&&yD(this)},rA.setRequestHeader=function(e,t){this.v.append(e,t)},rA.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},rA.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(vD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var xD=sA.JSON.parse;function kD(e){kR.call(this),this.headers=new IO,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wD,this.K=this.L=!1}gA(kD,kR);var wD="",SD=/^https?$/i,ED=["POST","PUT"];function TD(e){return"content-type"==e.toLowerCase()}function _D(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,CD(e),ND(e)}function CD(e){e.D||(e.D=!0,wR(e,"complete"),wR(e,"error"))}function ID(e){if(e.h&&"undefined"!=typeof oA&&(!e.C[1]||4!=RD(e)||2!=e.ba()))if(e.v&&4==RD(e))FR(e.Fa,0,e);else if(wR(e,"readystatechange"),4==RD(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var a;if(a=0===n){var i=String(e.H).match(RO)[1]||null;if(!i&&sA.self&&sA.self.location){var o=sA.self.location.protocol;i=o.substr(0,o.length-1)}a=!SD.test(i?i.toLowerCase():"")}t=a}if(t)wR(e,"complete"),wR(e,"success");else{e.m=6;try{var s=2<RD(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",CD(e)}}finally{ND(e)}}}function ND(e,t){if(e.g){AD(e);var n=e.g,r=e.C[0]?uA:null;e.g=null,e.C=null,t||wR(e,"ready");try{n.onreadystatechange=r}catch(a){}}}function AD(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(sA.clearTimeout(e.A),e.A=null)}function RD(e){return e.g?e.g.readyState:0}function OD(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case wD:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(U){return null}}function DD(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return RA(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):BO(e,t,n))}function MD(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function PD(e){this.za=0,this.l=[],this.h=new HR,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=MD("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=MD("baseRetryDelayMs",5e3,e),this.$a=MD("retryDelaySeedMs",1e4,e),this.Ya=MD("forwardChannelMaxRetries",2,e),this.ra=MD("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new tD(e&&e.concurrentRequestLimit),this.Ca=new hD,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function LD(e){if(BD(e),3==e.G){var t=e.V++,n=DO(e.F);BO(n,"SID",e.J),BO(n,"RID",t),BO(n,"TYPE","terminate"),zD(e,n),(t=new hO(e,e.h,t,void 0)).K=2,t.v=VO(DO(n)),n=!1,sA.navigator&&sA.navigator.sendBeacon&&(n=sA.navigator.sendBeacon(t.v.toString(),"")),!n&&sA.Image&&((new Image).src=t.v,n=!0),n||(t.g=eM(t.l,null),t.g.ea(t.v)),t.F=Date.now(),kO(t)}JD(e)}function FD(e){e.g&&(KD(e),e.g.cancel(),e.g=null)}function BD(e){FD(e),e.u&&(sA.clearTimeout(e.u),e.u=null),XD(e),e.i.cancel(),e.m&&("number"===typeof e.m&&sA.clearTimeout(e.m),e.m=null)}function VD(e,t){e.l.push(new eD(e.Za++,t)),3==e.G&&UD(e)}function UD(e){aD(e.i)||e.m||(e.m=!0,RR(e.Ha,e),e.C=0)}function jD(e,t){var n;n=t?t.m:e.V++;var r=DO(e.F);BO(r,"SID",e.J),BO(r,"RID",n),BO(r,"AID",e.U),zD(e,r),e.o&&e.s&&DD(r,e.o,e.s),n=new hO(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=WD(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),sD(e.i,n),mO(n,r,t)}function zD(e,t){e.j&&CO({},(function(e,n){BO(t,n,e)}))}function WD(e,t,n){n=Math.min(e.l.length,n);var r=e.j?vA(e.j.Oa,e.j,e):null;e:for(var a=e.l,i=-1;;){var o=["count="+n];-1==i?0<n?(i=a[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);for(var s=!0,u=0;u<n;u++){var c=a[u].h,l=a[u].g;if(0>(c-=i))i=Math.max(0,a[u].h-100),s=!1;else try{fD(l,o,"req"+c+"_")}catch(ee){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function HD(e){e.g||e.u||(e.Y=1,RR(e.Ga,e),e.A=0)}function GD(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=eO(vA(e.Ga,e),$D(e,e.A)),e.A++,!0)}function KD(e){null!=e.B&&(sA.clearTimeout(e.B),e.B=null)}function qD(e){e.g=new hO(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=DO(e.oa);BO(t,"RID","rpc"),BO(t,"SID",e.J),BO(t,"CI",e.N?"0":"1"),BO(t,"AID",e.U),zD(e,t),BO(t,"TYPE","xmlhttp"),e.o&&e.s&&DD(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=VO(DO(t)),n.s=null,n.U=!0,gO(n,e)}function XD(e){null!=e.v&&(sA.clearTimeout(e.v),e.v=null)}function YD(e,t){var n=null;if(e.g==t){XD(e),KD(e),e.g=null;var r=2}else{if(!oD(e.i,t))return;n=t.D,uD(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var a=e.C;wR(r=XR(),new ZR(r,n,t,a)),UD(e)}else HD(e);else if(3==(a=t.o)||0==a&&0<e.I||!(1==r&&function(e,t){return!(iD(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=eO(vA(e.Ha,e,t),$D(e,e.C)),e.C++,!0))}(e,t)||2==r&&GD(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),a){case 1:QD(e,5);break;case 4:QD(e,10);break;case 3:QD(e,6);break;default:QD(e,2)}}function $D(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function QD(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=vA(e.jb,e);n||(n=new OO("//www.google.com/images/cleardot.gif"),sA.location&&"http"==sA.location.protocol||MO(n,"https"),VO(n)),function(e,t){var n=new HR;if(sA.Image){var r=new Image;r.onload=mA(dD,n,r,"TestLoadImage: loaded",!0,t),r.onerror=mA(dD,n,r,"TestLoadImage: error",!1,t),r.onabort=mA(dD,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=mA(dD,n,r,"TestLoadImage: timeout",!1,t),sA.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else JR(2);e.G=0,e.j&&e.j.va(t),JD(e),BD(e)}function JD(e){e.G=0,e.I=-1,e.j&&(0==cD(e.i).length&&0==e.l.length||(e.i.i.length=0,SA(e.l),e.l.length=0),e.j.ua())}function ZD(e,t,n){var r=function(e){return e instanceof OO?DO(e):new OO(e,void 0)}(n);if(""!=r.i)t&&PO(r,t+"."+r.i),LO(r,r.m);else{var a=sA.location;r=function(e,t,n,r){var a=new OO(null,void 0);return e&&MO(a,e),t&&PO(a,t),n&&LO(a,n),r&&(a.l=r),a}(a.protocol,t?t+"."+a.hostname:a.hostname,+a.port,n)}return e.aa&&RA(e.aa,(function(e,t){BO(r,t,e)})),t=e.D,n=e.sa,t&&n&&BO(r,t,n),BO(r,"VER",e.ma),zD(e,r),r}function eM(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new kD(new pD({ib:!0})):new kD(e.qa)).L=e.H,t}function tM(){}function nM(){if(BA&&!(10<=Number(QA)))throw Error("Environmental error: no available transport.")}function rM(e,t){kR.call(this),this.g=new PD(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!EA(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!EA(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new oM(this)}function aM(e){uO.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function iM(){cO.call(this),this.status=1}function oM(e){this.g=e}(rA=kD.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():oO.g(),this.C=this.u?aO(this.u):aO(oO),this.g.onreadystatechange=vA(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(i){return void _D(this,i)}e=n||"";var a=new IO(this.headers);r&&CO(r,(function(e,t){a.set(t,e)})),r=function(e){e:{for(var t=TD,n=e.length,r="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in r&&t.call(void 0,r[a],a,e)){t=a;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(a.T()),n=sA.FormData&&e instanceof sA.FormData,!(0<=xA(ED,t))||r||n||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{AD(this),0<this.B&&((this.K=function(e){return BA&&YA()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vA(this.pa,this)):this.A=FR(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){_D(this,i)}},rA.pa=function(){"undefined"!=typeof oA&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wR(this,"timeout"),this.abort(8))},rA.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,wR(this,"complete"),wR(this,"abort"),ND(this))},rA.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ND(this,!0)),kD.Z.M.call(this)},rA.Fa=function(){this.s||(this.F||this.v||this.l?ID(this):this.cb())},rA.cb=function(){ID(this)},rA.ba=function(){try{return 2<RD(this)?this.g.status:-1}catch(nD){return-1}},rA.ga=function(){try{return this.g?this.g.responseText:""}catch(nD){return""}},rA.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xD(t)}},rA.Da=function(){return this.m},rA.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(rA=PD.prototype).ma=8,rA.G=1,rA.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(U){}},rA.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new hO(this,this.h,e,void 0),n=this.s;if(this.P&&(n?MA(n=OA(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,a=0;a<this.l.length;a++){var i=this.l[a];if(void 0===(i="__data__"in i.g&&"string"===typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(r+=i)){r=a;break e}if(4096===r||a===this.l.length-1){r=a+1;break e}}r=1e3}else r=1e3;r=WD(this,t,r),BO(a=DO(this.F),"RID",e),BO(a,"CVER",22),this.D&&BO(a,"X-HTTP-Session-Id",this.D),zD(this,a),this.o&&n&&DD(a,this.o,n),sD(this.i,t),this.Ra&&BO(a,"TYPE","init"),this.ja?(BO(a,"$req",r),BO(a,"SID","null"),t.$=!0,mO(t,a,null)):mO(t,a,r),this.G=2}}else 3==this.G&&(e?jD(this,e):0==this.l.length||aD(this.i)||jD(this))},rA.Ga=function(){if(this.u=null,qD(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=eO(vA(this.bb,this),e)}},rA.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,JR(10),FD(this),qD(this))},rA.ab=function(){null!=this.v&&(this.v=null,FD(this),GD(this),JR(19))},rA.jb=function(e){e?(this.h.info("Successfully pinged google.com"),JR(2)):(this.h.info("Failed to ping google.com"),JR(1))},(rA=tM.prototype).xa=function(){},rA.wa=function(){},rA.va=function(){},rA.ua=function(){},rA.Oa=function(){},nM.prototype.g=function(e,t){return new rM(e,t)},gA(rM,kR),rM.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),RR(vA(e.hb,e,t))),JR(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ZD(e,null,e.W),UD(e)},rM.prototype.close=function(){LD(this.g)},rM.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,VD(this.g,t)}else this.v?((t={}).__data__=ER(e),VD(this.g,t)):VD(this.g,e)},rM.prototype.M=function(){this.g.j=null,delete this.j,LD(this.g),delete this.g,rM.Z.M.call(this)},gA(aM,uO),gA(iM,cO),gA(oM,tM),oM.prototype.xa=function(){wR(this.g,"a")},oM.prototype.wa=function(e){wR(this.g,new aM(e))},oM.prototype.va=function(e){wR(this.g,new iM(e))},oM.prototype.ua=function(){wR(this.g,"b")},nM.prototype.createWebChannel=nM.prototype.g,rM.prototype.send=rM.prototype.u,rM.prototype.open=rM.prototype.m,rM.prototype.close=rM.prototype.close,tO.NO_ERROR=0,tO.TIMEOUT=8,tO.HTTP_ERROR=6,nO.COMPLETE="complete",iO.EventType=sO,sO.OPEN="a",sO.CLOSE="b",sO.ERROR="c",sO.MESSAGE="d",kR.prototype.listen=kR.prototype.N,kD.prototype.listenOnce=kD.prototype.O,kD.prototype.getLastError=kD.prototype.La,kD.prototype.getLastErrorCode=kD.prototype.Da,kD.prototype.getStatus=kD.prototype.ba,kD.prototype.getResponseJson=kD.prototype.Qa,kD.prototype.getResponseText=kD.prototype.ga,kD.prototype.send=kD.prototype.ea;var sM=iA.createWebChannelTransport=function(){return new nM},uM=iA.getStatEventTarget=function(){return XR()},cM=iA.ErrorCode=tO,lM=iA.EventType=nO,hM=iA.Event=KR,fM=iA.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dM=iA.FetchXmlHttpFactory=pD,pM=iA.WebChannel=iO,vM=iA.XhrIo=kD,mM="@firebase/firestore",gM=function(){function e(t){wn(this,e),this.uid=t}return En(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();gM.UNAUTHENTICATED=new gM(null),gM.GOOGLE_CREDENTIALS=new gM("google-credentials-uid"),gM.FIRST_PARTY=new gM("first-party-uid"),gM.MOCK_USER=new gM("mock-user");var yM="9.8.0",bM=new oN("@firebase/firestore");function xM(){return bM.logLevel}function kM(e){if(bM.logLevel<=ZI.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(EM);bM.debug.apply(bM,["Firestore (".concat(yM,"): ").concat(e)].concat(kn(a)))}}function wM(e){if(bM.logLevel<=ZI.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(EM);bM.error.apply(bM,["Firestore (".concat(yM,"): ").concat(e)].concat(kn(a)))}}function SM(e){if(bM.logLevel<=ZI.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(EM);bM.warn.apply(bM,["Firestore (".concat(yM,"): ").concat(e)].concat(kn(a)))}}function EM(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function TM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(yM,") INTERNAL ASSERTION FAILED: ")+e;throw wM(t),new Error(t)}function _M(e,t){e||TM()}function CM(e,t){return e}var IM={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},NM=function(e){Mo(n,e);var t=Uo(n);function n(e,r){var a;return wn(this,n),(a=t.call(this,e,r)).code=e,a.message=r,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},a}return En(n)}(UI),AM=En((function e(){var t=this;wn(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),RM=En((function e(t,n){wn(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),OM=function(){function e(){wn(this,e)}return En(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(gM.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),DM=function(){function e(t){wn(this,e),this.t=t,this.currentUser=gM.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return En(e,[{key:"start",value:function(e,t){var n=this,r=this.i,a=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},i=new AM;this.o=function(){n.i++,n.currentUser=n.u(),i.resolve(),i=new AM,e.enqueueRetryable((function(){return a(n.currentUser)}))};var o=function(){var t=i;e.enqueueRetryable(vn(gn().mark((function e(){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){kM("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(kM("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new AM)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(kM("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(_M("string"==typeof n.accessToken),new RM(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return _M(null===e||"string"==typeof e),new gM(e)}}]),e}(),MM=En((function e(t,n,r){wn(this,e),this.type="FirstParty",this.user=gM.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var a=t.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),PM=function(){function e(t,n,r){wn(this,e),this.h=t,this.l=n,this.m=r}return En(e,[{key:"getToken",value:function(){return Promise.resolve(new MM(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(gM.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),LM=En((function e(t){wn(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),FM=function(){function e(t){wn(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return En(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&kM("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,kM("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var a=function(e){kM("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return a(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?a(e):kM("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(_M("string"==typeof t.token),e.p=t.token,new LM(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),BM=function(){function e(t,n){var r=this;wn(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return En(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function VM(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}BM.A=-1;var UM=function(){function e(){wn(this,e)}return En(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=VM(40),a=0;a<r.length;++a)n.length<20&&r[a]<t&&(n+=e.charAt(r[a]%e.length));return n}}]),e}();function jM(e,t){return e<t?-1:e>t?1:0}function zM(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var WM=function(){function e(t,n){if(wn(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new NM(IM.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new NM(IM.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new NM(IM.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new NM(IM.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return En(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?jM(this.nanoseconds,e.nanoseconds):jM(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),HM=function(){function e(t){wn(this,e),this.timestamp=t}return En(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new WM(0,0))}},{key:"max",value:function(){return new e(new WM(253402300799,999999999))}}]),e}();function GM(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function KM(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qM(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var XM=function(){function e(t,n,r){wn(this,e),void 0===n?n=0:n>t.length&&TM(),void 0===r?r=t.length-n:r>t.length-n&&TM(),this.segments=t,this.offset=n,this.len=r}return En(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var a=e.get(r),i=t.get(r);if(a<i)return-1;if(a>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),YM=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new NM(IM.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,kn(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(XM),$M=/^[_a-zA-Z][_a-zA-Z0-9]*$/,QM=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return $M.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",a=0,i=function(){if(0===r.length)throw new NM(IM.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;a<e.length;){var s=e[a];if("\\"===s){if(a+1===e.length)throw new NM(IM.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[a+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new NM(IM.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,a+=2}else"`"===s?(o=!o,a++):"."!==s||o?(r+=s,a++):(i(),a++)}if(i(),o)throw new NM(IM.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(XM),JM=function(){function e(t){wn(this,e),this.fields=t,t.sort(QM.comparator)}return En(e,[{key:"covers",value:function(e){var t,n=bn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(BZ){n.e(BZ)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return zM(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var ZM=function(e){function t(e){wn(this,t),this.binaryString=e}return En(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return jM(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ZM.EMPTY_BYTE_STRING=new ZM("");var eP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tP(e){if(_M(!!e),"string"==typeof e){var t=0,n=eP.exec(e);if(_M(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:nP(e.seconds),nanos:nP(e.nanos)}}function nP(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function rP(e){return"string"==typeof e?ZM.fromBase64String(e):ZM.fromUint8Array(e)}function aP(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function iP(e){var t=e.mapValue.fields.__previous_value__;return aP(t)?iP(t):t}function oP(e){var t=tP(e.mapValue.fields.__local_write_time__.timestampValue);return new WM(t.seconds,t.nanos)}var sP=En((function e(t,n,r,a,i,o,s,u){wn(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),uP=function(){function e(t,n){wn(this,e),this.projectId=t,this.database=n||"(default)"}return En(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function cP(e){return null==e}function lP(e){return 0===e&&1/e==-1/0}function hP(e){return"number"==typeof e&&Number.isInteger(e)&&!lP(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var fP=function(){function e(t){wn(this,e),this.path=t}return En(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===YM.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(YM.fromString(t))}},{key:"fromName",value:function(t){return new e(YM.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(YM.emptyPath())}},{key:"comparator",value:function(e,t){return YM.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new YM(t.slice()))}}]),e}(),dP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function pP(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?aP(e)?4:CP(e)?9007199254740991:10:TM()}function vP(e,t){if(e===t)return!0;var n=pP(e);if(n!==pP(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return oP(e).isEqual(oP(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=tP(e.timestampValue),r=tP(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return rP(e.bytesValue).isEqual(rP(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return nP(e.geoPointValue.latitude)===nP(t.geoPointValue.latitude)&&nP(e.geoPointValue.longitude)===nP(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return nP(e.integerValue)===nP(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=nP(e.doubleValue),r=nP(t.doubleValue);return n===r?lP(n)===lP(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return zM(e.arrayValue.values||[],t.arrayValue.values||[],vP);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(GM(n)!==GM(r))return!1;for(var a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!vP(n[a],r[a])))return!1;return!0}(e,t);default:return TM()}}function mP(e,t){return void 0!==(e.values||[]).find((function(e){return vP(e,t)}))}function gP(e,t){if(e===t)return 0;var n=pP(e),r=pP(t);if(n!==r)return jM(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jM(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=nP(e.integerValue||e.doubleValue),r=nP(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return yP(e.timestampValue,t.timestampValue);case 4:return yP(oP(e),oP(t));case 5:return jM(e.stringValue,t.stringValue);case 6:return function(e,t){var n=rP(e),r=rP(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),a=0;a<n.length&&a<r.length;a++){var i=jM(n[a],r[a]);if(0!==i)return i}return jM(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=jM(nP(e.latitude),nP(t.latitude));return 0!==n?n:jM(nP(e.longitude),nP(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],a=0;a<n.length&&a<r.length;++a){var i=gP(n[a],r[a]);if(i)return i}return jM(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===dP.mapValue&&t===dP.mapValue)return 0;if(e===dP.mapValue)return 1;if(t===dP.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),a=t.fields||{},i=Object.keys(a);r.sort(),i.sort();for(var o=0;o<r.length&&o<i.length;++o){var s=jM(r[o],i[o]);if(0!==s)return s;var u=gP(n[r[o]],a[i[o]]);if(0!==u)return u}return jM(r.length,i.length)}(e.mapValue,t.mapValue);default:throw TM()}}function yP(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return jM(e,t);var n=tP(e),r=tP(t),a=jM(n.seconds,r.seconds);return 0!==a?a:jM(n.nanos,r.nanos)}function bP(e){return xP(e)}function xP(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=tP(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?rP(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,fP.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,a=bn(e.values||[]);try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+=xP(i)}}catch(BZ){a.e(BZ)}finally{a.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,a=bn(Object.keys(e.fields||{}).sort());try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+="".concat(i,":").concat(xP(e.fields[i]))}}catch(BZ){a.e(BZ)}finally{a.f()}return n+"}"}(e.mapValue):TM();var t,n}function kP(e){return!!e&&"integerValue"in e}function wP(e){return!!e&&"arrayValue"in e}function SP(e){return!!e&&"nullValue"in e}function EP(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function TP(e){return!!e&&"mapValue"in e}function _P(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return KM(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=_P(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=_P(e.arrayValue.values[r]);return n}return Object.assign({},e)}function CP(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var IP=function(){function e(t){wn(this,e),this.value=t}return En(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!TP(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_P(t)}},{key:"setAll",value:function(e){var t=this,n=QM.emptyPath(),r={},a=[];e.forEach((function(e,i){if(!n.isImmediateParentOf(i)){var o=t.getFieldsMap(n);t.applyChanges(o,r,a),r={},a=[],n=i.popLast()}e?r[i.lastSegment()]=_P(e):a.push(i.lastSegment())}));var i=this.getFieldsMap(n);this.applyChanges(i,r,a)}},{key:"delete",value:function(e){var t=this.field(e.popLast());TP(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return vP(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];TP(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){KM(t,(function(t,n){return e[t]=n}));var r,a=bn(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;delete e[i]}}catch(BZ){a.e(BZ)}finally{a.f()}}},{key:"clone",value:function(){return new e(_P(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function NP(e){var t=[];return KM(e.fields,(function(e,n){var r=new QM([e]);if(TP(n)){var a=NP(n.mapValue).fields;if(0===a.length)t.push(r);else{var i,o=bn(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.push(r.child(s))}}catch(BZ){o.e(BZ)}finally{o.f()}}}else t.push(r)})),new JM(t)}var AP=function(){function e(t,n,r,a,i,o){wn(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.data=i,this.documentState=o}return En(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=IP.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=IP.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,HM.min(),HM.min(),IP.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,HM.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,HM.min(),IP.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,HM.min(),IP.empty(),2)}}]),e}(),RP=En((function e(t,n,r,a){wn(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=a}));RP.UNKNOWN_ID=-1;function OP(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=HM.fromTimestamp(1e9===r?new WM(n+1,0):new WM(n,r));return new MP(a,fP.empty(),t)}function DP(e){return new MP(e.readTime,e.key,-1)}var MP=function(){function e(t,n,r){wn(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return En(e,null,[{key:"min",value:function(){return new e(HM.min(),fP.empty(),-1)}},{key:"max",value:function(){return new e(HM.max(),fP.empty(),-1)}}]),e}();function PP(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=fP.comparator(e.documentKey,t.documentKey))?n:jM(e.largestBatchId,t.largestBatchId)}var LP=function(){function e(t,n){wn(this,e),this.comparator=t,this.root=n||BP.EMPTY}return En(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,BP.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,BP.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new FP(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new FP(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new FP(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new FP(this.root,e,this.comparator,!0)}}]),e}(),FP=function(){function e(t,n,r,a){wn(this,e),this.isReverse=a,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&a&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return En(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),BP=function(){function e(t,n,r,a,i){wn(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=a?a:e.EMPTY,this.right=null!=i?i:e.EMPTY,this.size=this.left.size+1+this.right.size}return En(e,[{key:"copy",value:function(t,n,r,a,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=i?i:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,a=n(e,r.key);return(r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===n(t,a.key)){if(a.right.isEmpty())return e.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw TM();if(this.right.isRed())throw TM();var e=this.left.check();if(e!==this.right.check())throw TM();return e+(this.isRed()?0:1)}}]),e}();BP.EMPTY=null,BP.RED=!0,BP.BLACK=!1,BP.EMPTY=new(function(){function e(){wn(this,e),this.size=0}return En(e,[{key:"key",get:function(){throw TM()}},{key:"value",get:function(){throw TM()}},{key:"color",get:function(){throw TM()}},{key:"left",get:function(){throw TM()}},{key:"right",get:function(){throw TM()}},{key:"copy",value:function(e,t,n,r,a){return this}},{key:"insert",value:function(e,t,n){return new BP(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var VP=function(){function e(t){wn(this,e),this.comparator=t,this.data=new LP(this.comparator)}return En(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new UP(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new UP(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(0!==this.comparator(a,i))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),UP=function(){function e(t){wn(this,e),this.iter=t}return En(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var jP=En((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;wn(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=o,this.endAt=s,this.P=null}));function zP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new jP(e,t,n,r,a,i,o)}function WP(e){var t=CM(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+bP(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),cP(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return bP(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return bP(e)})).join(",")),t.P=n}return t.P}function HP(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!rL(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(a=e.filters[r],i=t.filters[r],a.op!==i.op||!a.field.isEqual(i.field)||!vP(a.value,i.value))return!1;var a,i;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!iL(e.startAt,t.startAt)&&iL(e.endAt,t.endAt)}function GP(e){return fP.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var KP=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a){var i;return wn(this,n),(i=t.call(this)).field=e,i.op=r,i.value=a,i}return En(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(gP(t,this.value)):null!==t&&pP(this.value)===pP(t)&&this.v(gP(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return TM()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new qP(e,t,r):"array-contains"===t?new QP(e,r):"in"===t?new JP(e,r):"not-in"===t?new ZP(e,r):"array-contains-any"===t?new eL(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new XP(e,n):new YP(e,n)}}]),n}(function(){return En((function e(){wn(this,e)}))}()),qP=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a){var i;return wn(this,n),(i=t.call(this,e,r,a)).key=fP.fromName(a.referenceValue),i}return En(n,[{key:"matches",value:function(e){var t=fP.comparator(e.key,this.key);return this.v(t)}}]),n}(KP),XP=function(e){Mo(n,e);var t=Uo(n);function n(e,r){var a;return wn(this,n),(a=t.call(this,e,"in",r)).keys=$P("in",r),a}return En(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(KP),YP=function(e){Mo(n,e);var t=Uo(n);function n(e,r){var a;return wn(this,n),(a=t.call(this,e,"not-in",r)).keys=$P("not-in",r),a}return En(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(KP);function $P(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return fP.fromName(e.referenceValue)}))}var QP=function(e){Mo(n,e);var t=Uo(n);function n(e,r){return wn(this,n),t.call(this,e,"array-contains",r)}return En(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return wP(t)&&mP(t.arrayValue,this.value)}}]),n}(KP),JP=function(e){Mo(n,e);var t=Uo(n);function n(e,r){return wn(this,n),t.call(this,e,"in",r)}return En(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&mP(this.value.arrayValue,t)}}]),n}(KP),ZP=function(e){Mo(n,e);var t=Uo(n);function n(e,r){return wn(this,n),t.call(this,e,"not-in",r)}return En(n,[{key:"matches",value:function(e){if(mP(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!mP(this.value.arrayValue,t)}}]),n}(KP),eL=function(e){Mo(n,e);var t=Uo(n);function n(e,r){return wn(this,n),t.call(this,e,"array-contains-any",r)}return En(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!wP(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return mP(t.value.arrayValue,e)}))}}]),n}(KP),tL=En((function e(t,n){wn(this,e),this.position=t,this.inclusive=n})),nL=En((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";wn(this,e),this.field=t,this.dir=n}));function rL(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function aL(e,t,n){for(var r=0,a=0;a<e.position.length;a++){var i=t[a],o=e.position[a];if(r=i.field.isKeyField()?fP.comparator(fP.fromName(o.referenceValue),n.key):gP(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function iL(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!vP(e.position[n],t.position[n]))return!1;return!0}var oL=En((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;wn(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function sL(e,t,n,r,a,i,o,s){return new oL(e,t,n,r,a,i,o,s)}function uL(e){return new oL(e)}function cL(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function lL(e){var t,n=bn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(BZ){n.e(BZ)}finally{n.f()}return null}function hL(e){return null!==e.collectionGroup}function fL(e){var t=CM(e);if(null===t.D){t.D=[];var n=lL(t),r=cL(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new nL(n)),t.D.push(new nL(QM.keyField(),"asc"));else{var a,i=!1,o=bn(t.explicitOrderBy);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.D.push(s),s.field.isKeyField()&&(i=!0)}}catch(BZ){o.e(BZ)}finally{o.f()}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new nL(QM.keyField(),u))}}}return t.D}function dL(e){var t=CM(e);if(!t.C)if("F"===t.limitType)t.C=zP(t.path,t.collectionGroup,fL(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],a=bn(fL(t));try{for(a.s();!(n=a.n()).done;){var i=n.value,o="desc"===i.dir?"asc":"desc";r.push(new nL(i.field,o))}}catch(BZ){a.e(BZ)}finally{a.f()}var s=t.endAt?new tL(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new tL(t.startAt.position,t.startAt.inclusive):null;t.C=zP(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function pL(e,t,n){return new oL(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function vL(e,t){return HP(dL(e),dL(t))&&e.limitType===t.limitType}function mL(e){return"".concat(WP(dL(e)),"|lt:").concat(e.limitType)}function gL(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(bP(t.value));var t})).join(", "),"]")),cP(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return bP(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return bP(e)})).join(",")),"Target(".concat(t,")")}(dL(e)),"; limitType=").concat(e.limitType,")")}function yL(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):fP.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=bn(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!a.field.isKeyField()&&null===t.data.field(a.field))return!1}}catch(BZ){r.e(BZ)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=bn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(BZ){r.e(BZ)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=aL(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,fL(e),t))&&!(e.endAt&&!function(e,t,n){var r=aL(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,fL(e),t))}(e,t)}function bL(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xL(e){return function(t,n){var r,a=!1,i=bn(fL(e));try{for(i.s();!(r=i.n()).done;){var o=r.value,s=kL(o,t,n);if(0!==s)return s;a=a||o.field.isKeyField()}}catch(BZ){i.e(BZ)}finally{i.f()}return 0}}function kL(e,t,n){var r=e.field.isKeyField()?fP.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?gP(r,a):TM()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return TM()}}function wL(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lP(t)?"-0":t}}function SL(e){return{integerValue:""+e}}function EL(e,t){return hP(t)?SL(t):wL(e,t)}var TL=En((function e(){wn(this,e),this._=void 0}));function _L(e,t,n){return e instanceof NL?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof AL?RL(e,t):e instanceof OL?DL(e,t):function(e,t){var n=IL(e,t),r=PL(n)+PL(e.k);return kP(n)&&kP(e.k)?SL(r):wL(e.M,r)}(e,t)}function CL(e,t,n){return e instanceof AL?RL(e,t):e instanceof OL?DL(e,t):n}function IL(e,t){return e instanceof ML?kP(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var NL=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n)}(TL),AL=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).elements=e,r}return En(n)}(TL);function RL(e,t){var n,r=LL(t),a=bn(e.elements);try{var i=function(){var e=n.value;r.some((function(t){return vP(t,e)}))||r.push(e)};for(a.s();!(n=a.n()).done;)i()}catch(BZ){a.e(BZ)}finally{a.f()}return{arrayValue:{values:r}}}var OL=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).elements=e,r}return En(n)}(TL);function DL(e,t){var n,r=LL(t),a=bn(e.elements);try{var i=function(){var e=n.value;r=r.filter((function(t){return!vP(t,e)}))};for(a.s();!(n=a.n()).done;)i()}catch(BZ){a.e(BZ)}finally{a.f()}return{arrayValue:{values:r}}}var ML=function(e){Mo(n,e);var t=Uo(n);function n(e,r){var a;return wn(this,n),(a=t.call(this)).M=e,a.k=r,a}return En(n)}(TL);function PL(e){return nP(e.integerValue||e.doubleValue)}function LL(e){return wP(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var FL=En((function e(t,n){wn(this,e),this.version=t,this.transformResults=n})),BL=function(){function e(t,n){wn(this,e),this.updateTime=t,this.exists=n}return En(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function VL(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var UL=En((function e(){wn(this,e)}));function jL(e,t,n){e instanceof KL?function(e,t,n){var r=e.value.clone(),a=YL(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof qL?function(e,t,n){if(VL(e.precondition,t)){var r=YL(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(XL(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function zL(e,t,n){e instanceof KL?function(e,t,n){if(VL(e.precondition,t)){var r=e.value.clone(),a=$L(e.fieldTransforms,n,t);r.setAll(a),t.convertToFoundDocument(GL(t),r).setHasLocalMutations()}}(e,t,n):e instanceof qL?function(e,t,n){if(VL(e.precondition,t)){var r=$L(e.fieldTransforms,n,t),a=t.data;a.setAll(XL(e)),a.setAll(r),t.convertToFoundDocument(GL(t),a).setHasLocalMutations()}}(e,t,n):function(e,t){VL(e.precondition,t)&&t.convertToNoDocument(HM.min())}(e,t)}function WL(e,t){var n,r=null,a=bn(e.fieldTransforms);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.data.field(i.field),s=IL(i.transform,o||null);null!=s&&(null==r&&(r=IP.empty()),r.set(i.field,s))}}catch(BZ){a.e(BZ)}finally{a.f()}return r||null}function HL(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&zM(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof AL&&t instanceof AL||e instanceof OL&&t instanceof OL?zM(e.elements,t.elements,vP):e instanceof ML&&t instanceof ML?vP(e.k,t.k):e instanceof NL&&t instanceof NL}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function GL(e){return e.isFoundDocument()?e.version:HM.min()}var KL=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return wn(this,n),(i=t.call(this)).key=e,i.value=r,i.precondition=a,i.fieldTransforms=o,i.type=0,i}return En(n)}(UL),qL=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a,i){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return wn(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=a,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return En(n)}(UL);function XL(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function YL(e,t,n){var r=new Map;_M(e.length===n.length);for(var a=0;a<n.length;a++){var i=e[a],o=i.transform,s=t.data.field(i.field);r.set(i.field,CL(o,s,n[a]))}return r}function $L(e,t,n){var r,a=new Map,i=bn(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);a.set(o.field,_L(s,u,t))}}catch(BZ){i.e(BZ)}finally{i.f()}return a}var QL,JL,ZL=function(e){Mo(n,e);var t=Uo(n);function n(e,r){var a;return wn(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=2,a.fieldTransforms=[],a}return En(n)}(UL),eF=function(e){Mo(n,e);var t=Uo(n);function n(e,r){var a;return wn(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=3,a.fieldTransforms=[],a}return En(n)}(UL),tF=En((function e(t){wn(this,e),this.count=t}));function nF(e){switch(e){default:return TM();case IM.CANCELLED:case IM.UNKNOWN:case IM.DEADLINE_EXCEEDED:case IM.RESOURCE_EXHAUSTED:case IM.INTERNAL:case IM.UNAVAILABLE:case IM.UNAUTHENTICATED:return!1;case IM.INVALID_ARGUMENT:case IM.NOT_FOUND:case IM.ALREADY_EXISTS:case IM.PERMISSION_DENIED:case IM.FAILED_PRECONDITION:case IM.ABORTED:case IM.OUT_OF_RANGE:case IM.UNIMPLEMENTED:case IM.DATA_LOSS:return!0}}function rF(e){if(void 0===e)return wM("GRPC error has no .code"),IM.UNKNOWN;switch(e){case QL.OK:return IM.OK;case QL.CANCELLED:return IM.CANCELLED;case QL.UNKNOWN:return IM.UNKNOWN;case QL.DEADLINE_EXCEEDED:return IM.DEADLINE_EXCEEDED;case QL.RESOURCE_EXHAUSTED:return IM.RESOURCE_EXHAUSTED;case QL.INTERNAL:return IM.INTERNAL;case QL.UNAVAILABLE:return IM.UNAVAILABLE;case QL.UNAUTHENTICATED:return IM.UNAUTHENTICATED;case QL.INVALID_ARGUMENT:return IM.INVALID_ARGUMENT;case QL.NOT_FOUND:return IM.NOT_FOUND;case QL.ALREADY_EXISTS:return IM.ALREADY_EXISTS;case QL.PERMISSION_DENIED:return IM.PERMISSION_DENIED;case QL.FAILED_PRECONDITION:return IM.FAILED_PRECONDITION;case QL.ABORTED:return IM.ABORTED;case QL.OUT_OF_RANGE:return IM.OUT_OF_RANGE;case QL.UNIMPLEMENTED:return IM.UNIMPLEMENTED;case QL.DATA_LOSS:return IM.DATA_LOSS;default:return TM()}}(JL=QL||(QL={}))[JL.OK=0]="OK",JL[JL.CANCELLED=1]="CANCELLED",JL[JL.UNKNOWN=2]="UNKNOWN",JL[JL.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",JL[JL.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",JL[JL.NOT_FOUND=5]="NOT_FOUND",JL[JL.ALREADY_EXISTS=6]="ALREADY_EXISTS",JL[JL.PERMISSION_DENIED=7]="PERMISSION_DENIED",JL[JL.UNAUTHENTICATED=16]="UNAUTHENTICATED",JL[JL.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",JL[JL.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",JL[JL.ABORTED=10]="ABORTED",JL[JL.OUT_OF_RANGE=11]="OUT_OF_RANGE",JL[JL.UNIMPLEMENTED=12]="UNIMPLEMENTED",JL[JL.INTERNAL=13]="INTERNAL",JL[JL.UNAVAILABLE=14]="UNAVAILABLE",JL[JL.DATA_LOSS=15]="DATA_LOSS";var aF=function(){function e(t,n){wn(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return En(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,a=bn(n);try{for(a.s();!(r=a.n()).done;){var i=bt(r.value,2),o=i[0],s=i[1];if(this.equalsFn(o,e))return s}}catch(BZ){a.e(BZ)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){KM(this.inner,(function(t,n){var r,a=bn(n);try{for(a.s();!(r=a.n()).done;){var i=bt(r.value,2),o=i[0],s=i[1];e(o,s)}}catch(BZ){a.e(BZ)}finally{a.f()}}))}},{key:"isEmpty",value:function(){return qM(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),iF=new LP(fP.comparator);function oF(){return iF}var sF=new LP(fP.comparator);function uF(){for(var e=sF,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.insert(o.key,o)}return e}function cF(){return new aF((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var lF=new LP(fP.comparator),hF=new VP(fP.comparator);function fF(){for(var e=hF,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.add(o)}return e}var dF=new VP(jM);function pF(){return dF}var vF=function(){function e(t,n,r,a,i){wn(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}return En(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,mF.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(HM.min(),r,pF(),oF(),fF())}}]),e}(),mF=function(){function e(t,n,r,a,i){wn(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}return En(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(ZM.EMPTY_BYTE_STRING,n,fF(),fF(),fF())}}]),e}(),gF=En((function e(t,n,r,a){wn(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=a})),yF=En((function e(t,n){wn(this,e),this.targetId=t,this.$=n})),bF=En((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ZM.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;wn(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a})),xF=function(){function e(){wn(this,e),this.B=0,this.L=SF(),this.U=ZM.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return En(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=fF(),t=fF(),n=fF();return this.L.forEach((function(r,a){switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:TM()}})),new mF(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=SF()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),kF=function(){function e(t){wn(this,e),this.nt=t,this.st=new Map,this.it=oF(),this.rt=wF(),this.ot=new VP(jM)}return En(e,[{key:"ut",value:function(e){var t,n=bn(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(BZ){n.e(BZ)}finally{n.f()}var a,i=bn(e.removedTargetIds);try{for(i.s();!(a=i.n()).done;){var o=a.value;this.ct(o,e.key,e.F)}}catch(BZ){i.e(BZ)}finally{i.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:TM()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var a=r.target;if(GP(a))if(0===n){var i=new fP(a.path);this.ct(t,i,AP.newNoDocument(i,HM.min()))}else _M(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,a){var i=t.wt(a);if(i){if(r.current&&GP(i.target)){var o=new fP(i.target.path);null!==t.it.get(o)||t.It(a,o)||t.ct(a,o,AP.newNoDocument(o,e))}r.j&&(n.set(a,r.H()),r.J())}}));var r=fF();this.rt.forEach((function(e,n){var a=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var a=new vF(e,n,this.ot,this.it,r);return this.it=oF(),this.rt=wF(),this.ot=new VP(jM),a}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new xF,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new VP(jM),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||kM("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new xF),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function wF(){return new LP(fP.comparator)}function SF(){return new LP(fP.comparator)}var EF={asc:"ASCENDING",desc:"DESCENDING"},TF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_F=En((function e(t,n){wn(this,e),this.databaseId=t,this.N=n}));function CF(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function IF(e,t){return e.N?t.toBase64():t.toUint8Array()}function NF(e,t){return CF(e,t.toTimestamp())}function AF(e){return _M(!!e),HM.fromTimestamp(function(e){var t=tP(e);return new WM(t.seconds,t.nanos)}(e))}function RF(e,t){return function(e){return new YM(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function OF(e){var t=YM.fromString(e);return _M(JF(t)),t}function DF(e,t){return RF(e.databaseId,t.path)}function MF(e,t){var n=OF(t);if(n.get(1)!==e.databaseId.projectId)throw new NM(IM.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new NM(IM.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new fP(BF(n))}function PF(e,t){return RF(e.databaseId,t)}function LF(e){var t=OF(e);return 4===t.length?YM.emptyPath():BF(t)}function FF(e){return new YM(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function BF(e){return _M(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function VF(e,t,n){return{name:DF(e,t),fields:n.value.mapValue.fields}}function UF(e,t){var n;if(t instanceof KL)n={update:VF(e,t.key,t.value)};else if(t instanceof ZL)n={delete:DF(e,t.key)};else if(t instanceof qL)n={update:VF(e,t.key,t.data),updateMask:QF(t.fieldMask)};else{if(!(t instanceof eF))return TM();n={verify:DF(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof NL)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof AL)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof OL)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ML)return{fieldPath:t.field.canonicalString(),increment:n.k};throw TM()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:NF(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:TM()}(e,t.precondition)),n}function jF(e,t){return{documents:[PF(e,t.path)]}}function zF(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=PF(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=PF(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var a=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(EP(e.value))return{unaryFilter:{field:qF(e.field),op:"IS_NAN"}};if(SP(e.value))return{unaryFilter:{field:qF(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(EP(e.value))return{unaryFilter:{field:qF(e.field),op:"IS_NOT_NAN"}};if(SP(e.value))return{unaryFilter:{field:qF(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qF(e.field),op:KF(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);a&&(n.structuredQuery.where=a);var i=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:qF(e.field),direction:GF(e.dir)}}(e)}))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);var o,s=function(e,t){return e.N||cP(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function WF(e){var t=LF(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,a=null;if(r>0){_M(1===r);var i=n.from[0];i.allDescendants?a=i.collectionId:t=t.child(i.collectionId)}var o=[];n.where&&(o=HF(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new nL(XF(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return cP(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new tL(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new tL(n,t)}(n.endAt)),sL(t,a,s,o,u,"F",c,l)}function HF(e){return e?void 0!==e.unaryFilter?[$F(e)]:void 0!==e.fieldFilter?[YF(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return HF(e)})).reduce((function(e,t){return e.concat(t)})):TM():[]}function GF(e){return EF[e]}function KF(e){return TF[e]}function qF(e){return{fieldPath:e.canonicalString()}}function XF(e){return QM.fromServerFormat(e.fieldPath)}function YF(e){return KP.create(XF(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return TM()}}(e.fieldFilter.op),e.fieldFilter.value)}function $F(e){switch(e.unaryFilter.op){case"IS_NAN":var t=XF(e.unaryFilter.field);return KP.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=XF(e.unaryFilter.field);return KP.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=XF(e.unaryFilter.field);return KP.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=XF(e.unaryFilter.field);return KP.create(a,"!=",{nullValue:"NULL_VALUE"});default:return TM()}}function QF(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function JF(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var ZF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),eB=([].concat(kn(ZF),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),tB=([].concat(eB,["indexConfiguration","indexState","indexEntries"]),"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."),nB=function(){function e(){wn(this,e),this.onCommittedListeners=[]}return En(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),rB=function(){function e(t){var n=this;wn(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return En(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&TM(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,a){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,a)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,a)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,a=0,i=!1;t.forEach((function(t){++r,t.next((function(){++a,i&&a===r&&e()}),(function(e){return n(e)}))})),i=!0,a===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),a=bn(t);try{var i=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(a.s();!(n=a.n()).done;)i()}catch(BZ){a.e(BZ)}finally{a.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,a){r.push(t.call(n,e,a))})),this.waitFor(r)}}]),e}();function aB(e){return"IndexedDbTransactionError"===e.name}var iB=function(){function e(t,n,r,a){wn(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return En(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var a=this.mutations[r];a.key.isEqual(e.key)&&jL(a,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=bn(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&zL(r,e,this.localWriteTime)}}catch(BZ){n.e(BZ)}finally{n.f()}var a,i=bn(this.mutations);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.key.isEqual(e.key)&&zL(o,e,this.localWriteTime)}}catch(BZ){i.e(BZ)}finally{i.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),a=r;t.applyToLocalView(a),r.isValidDocument()||a.convertToNoDocument(HM.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),fF())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&zM(this.mutations,e.mutations,(function(e,t){return HL(e,t)}))&&zM(this.baseMutations,e.baseMutations,(function(e,t){return HL(e,t)}))}}]),e}(),oB=function(){function e(t,n,r,a){wn(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}return En(e,null,[{key:"from",value:function(t,n,r){_M(t.mutations.length===r.length);for(var a=lF,i=t.mutations,o=0;o<i.length;o++)a=a.insert(i[o].key,r[o].version);return new e(t,n,r,a)}}]),e}(),sB=function(){function e(t,n){wn(this,e),this.largestBatchId=t,this.mutation=n}return En(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),uB=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:HM.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:HM.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ZM.EMPTY_BYTE_STRING;wn(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return En(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),cB=En((function e(t){wn(this,e),this.Jt=t}));function lB(e){var t=WF({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?pL(t,t.limit,"L"):t}var hB=function(){function e(){wn(this,e)}return En(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(nP(e.integerValue));else if("doubleValue"in e){var n=nP(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),lP(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(rP(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var a=e.geoPointValue;this.ne(t,45),t.se(a.latitude||0),t.se(a.longitude||0)}else"mapValue"in e?CP(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):TM()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,a=Object.keys(n);r<a.length;r++){var i=a[r];this.re(i,t),this.te(n[i],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,a=bn(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.te(i,t)}}catch(BZ){a.e(BZ)}finally{a.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),fP.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();hB.fe=new hB;var fB=function(){function e(){wn(this,e),this.qe=new dB}return En(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),rB.resolve()}},{key:"getCollectionParents",value:function(e,t){return rB.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return rB.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return rB.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return rB.resolve(null)}},{key:"getIndexType",value:function(e,t){return rB.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return rB.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return rB.resolve(null)}},{key:"getMinOffset",value:function(e,t){return rB.resolve(MP.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return rB.resolve()}},{key:"updateIndexEntries",value:function(e,t){return rB.resolve()}}]),e}(),dB=function(){function e(){wn(this,e),this.index={}}return En(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new VP(YM.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new VP(YM.comparator)).toArray()}}]),e}();new Uint8Array(0);var pB=function(){function e(t,n,r){wn(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return En(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();pB.DEFAULT_COLLECTION_PERCENTILE=10,pB.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pB.DEFAULT=new pB(41943040,pB.DEFAULT_COLLECTION_PERCENTILE,pB.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pB.DISABLED=new pB(-1,0,0);var vB=function(){function e(t){wn(this,e),this.mn=t}return En(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}();function mB(e){return gB.apply(this,arguments)}function gB(){return gB=vn(gn().mark((function e(t){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===IM.FAILED_PRECONDITION&&t.message===tB){e.next=2;break}throw t;case 2:kM("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),gB.apply(this,arguments)}var yB=function(){function e(){wn(this,e),this.changes=new aF((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return En(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,AP.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?rB.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var bB=function(){function e(t,n,r){wn(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return En(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=bn(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(BZ){r.e(BZ)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,a=bn(t);try{for(a.s();!(r=a.n()).done;){r.value.applyToLocalView(n)}}catch(BZ){a.e(BZ)}finally{a.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return fP.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):hL(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new fP(t)).next((function(e){var t=uF();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,a=t.collectionGroup,i=uF();return this.indexManager.getCollectionParents(e,a).next((function(o){return rB.forEach(o,(function(o){var s=function(e,t){return new oL(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(a));return r.zs(e,s,n).next((function(e){e.forEach((function(e,t){i=i.insert(e,t)}))}))})).next((function(){return i}))}))}},{key:"zs",value:function(e,t,n){var r,a=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,a.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=bn(e);try{for(n.s();!(t=n.n()).done;){var a,i=t.value,o=bn(i.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=s.key,c=r.get(u);null==c&&(c=AP.newInvalidDocument(u),r=r.insert(u,c)),zL(s,c,i.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(BZ){o.e(BZ)}finally{o.f()}}}catch(BZ){n.e(BZ)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){yL(t,n)||(r=r.remove(e))})),r}))}}]),e}(),xB=function(){function e(t,n,r,a){wn(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=a}return En(e,null,[{key:"Ys",value:function(t,n){var r,a=fF(),i=fF(),o=bn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:a=a.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}}catch(BZ){o.e(BZ)}finally{o.f()}return new e(t,n.fromCache,a,i)}}]),e}(),kB=function(){function e(){wn(this,e),this.Xs=!1}return En(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var a=this;return this.ti(e,t).next((function(i){return i||a.ei(e,t,r,n)})).next((function(n){return n||a.ni(e,t)}))}},{key:"ti",value:function(e,t){return rB.resolve(null)}},{key:"ei",value:function(e,t,n,r){var a=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(HM.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(i){var o=a.si(t,i);return a.ii(t,o,n,r)?a.ni(e,t):(xM()<=ZI.DEBUG&&kM("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gL(t)),a.ri(e,o,t,OP(r,-1)))}))}},{key:"si",value:function(e,t){var n=new VP(xL(e));return t.forEach((function(t,r){yL(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return xM()<=ZI.DEBUG&&kM("QueryEngine","Using full collection scan to execute query:",gL(t)),this.Zs.Qs(e,t,MP.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),wB=function(){function e(t,n,r,a){wn(this,e),this.persistence=t,this.oi=n,this.M=a,this.ui=new LP(jM),this.ai=new aF((function(e){return WP(e)}),HP),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return En(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new bB(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function SB(e,t,n,r){return new wB(e,t,n,r)}function EB(e,t){return TB.apply(this,arguments)}function TB(){return TB=vn(gn().mark((function e(t,n){var r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CM(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(a){return t=a,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var a,i=[],o=[],s=fF(),u=bn(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;i.push(c.batchId);var l,h=bn(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(BZ){h.e(BZ)}finally{h.f()}}}catch(BZ){u.e(BZ)}finally{u.f()}var d,p=bn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=bn(v.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;s=s.add(y.key)}}catch(BZ){g.e(BZ)}finally{g.f()}}}catch(BZ){p.e(BZ)}finally{p.f()}return r.fi.Ks(e,s).next((function(e){return{di:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),TB.apply(this,arguments)}function _B(e,t){var n=CM(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),a=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var a=n.batch,i=a.keys(),o=rB.resolve();return i.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var i=n.docVersions.get(e);_M(null!==i),t.version.compareTo(i)<0&&(a.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,a)}))}(n,e,t,a).next((function(){return a.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function CB(e){var t=CM(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function IB(e,t){var n=CM(e),r=t.snapshotVersion,a=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var i=n.hi.newChangeBuffer({trackRemovals:!0});a=n.ui;var o=[];t.targetChanges.forEach((function(i,s){var u=a.get(s);if(u){o.push(n.fs.removeMatchingKeys(e,i.removedDocuments,s).next((function(){return n.fs.addMatchingKeys(e,i.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(ZM.EMPTY_BYTE_STRING,HM.min()).withLastLimboFreeSnapshotVersion(HM.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),a=a.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,i)&&o.push(n.fs.updateTargetData(e,c))}}));var s=oF();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(NB(e,i,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(HM.min())){var u=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return rB.waitFor(o).next((function(){return i.apply(e)})).next((function(){return n.fi.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.ui=a,e}))}function NB(e,t,n){var r=fF();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=oF();return n.forEach((function(n,a){var i=e.get(n);a.isNoDocument()&&a.version.isEqual(HM.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!i.isValidDocument()||a.version.compareTo(i.version)>0||0===a.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):kM("LocalStore","Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",a.version)})),r}))}function AB(e,t){var n=CM(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function RB(e,t){var n=CM(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(a){return a?(r=a,rB.resolve(r)):n.fs.allocateTargetId(e).next((function(a){return r=new uB(t,a,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function OB(e,t,n){return DB.apply(this,arguments)}function DB(){return DB=vn(gn().mark((function e(t,n,r){var a,i,o;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=CM(t),i=a.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",o,(function(e){return a.persistence.referenceDelegate.removeTarget(e,i)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),aB(e.t1)){e.next=12;break}throw e.t1;case 12:kM("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:a.ui=a.ui.remove(n),a.ai.delete(i.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),DB.apply(this,arguments)}function MB(e,t,n){var r=CM(e),a=HM.min(),i=fF();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=CM(e),a=r.ai.get(n);return void 0!==a?rB.resolve(r.ui.get(a)):r.fs.getTargetData(t,n)}(r,e,dL(t)).next((function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){i=e}))})).next((function(){return r.oi.Qs(e,t,n?a:HM.min(),n?i:fF())})).next((function(e){return PB(r,bL(t),e),{documents:e,_i:i}}))}))}function PB(e,t,n){var r=HM.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}var LB=function(){function e(t){wn(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return En(e,[{key:"getBundleMetadata",value:function(e,t){return rB.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:AF(n.createTime)}),rB.resolve()}},{key:"getNamedQuery",value:function(e,t){return rB.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:lB(e.bundledQuery),readTime:AF(e.readTime)}}(t)),rB.resolve()}}]),e}(),FB=function(){function e(){wn(this,e),this.overlays=new LP(fP.comparator),this.Ii=new Map}return En(e,[{key:"getOverlay",value:function(e,t){return rB.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,a){r.Xt(e,t,a)})),rB.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,a=this.Ii.get(n);return void 0!==a&&(a.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),rB.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=cF(),a=t.length+1,i=new fP(t.child("")),o=this.overlays.getIteratorFrom(i);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===a&&s.largestBatchId>n&&r.set(s.getKey(),s)}return rB.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var a=new LP((function(e,t){return e-t})),i=this.overlays.getIterator();i.hasNext();){var o=i.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=a.get(o.largestBatchId);null===s&&(s=cF(),a=a.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=cF(),c=a.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return rB.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var a=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new sB(t,n));var i=this.Ii.get(t);void 0===i&&(i=fF(),this.Ii.set(t,i)),this.Ii.set(t,i.add(n.key))}}}]),e}(),BB=function(){function e(){wn(this,e),this.Ti=new VP(VB.Ei),this.Ai=new VP(VB.Ri)}return En(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new VB(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new VB(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new fP(new YM([])),r=new VB(n,e),a=new VB(n,e+1),i=[];return this.Ai.forEachInRange([r,a],(function(e){t.Pi(e),i.push(e.key)})),i}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new fP(new YM([])),n=new VB(t,e),r=new VB(t,e+1),a=fF();return this.Ai.forEachInRange([n,r],(function(e){a=a.add(e.key)})),a}},{key:"containsKey",value:function(e){var t=new VB(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),VB=function(){function e(t,n){wn(this,e),this.key=t,this.Ci=n}return En(e,null,[{key:"Ei",value:function(e,t){return fP.comparator(e.key,t.key)||jM(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return jM(e.Ci,t.Ci)||fP.comparator(e.key,t.key)}}]),e}(),UB=function(){function e(t,n){wn(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new VP(VB.Ei)}return En(e,[{key:"checkEmpty",value:function(e){return rB.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var a=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var i=new iB(a,t,n,r);this.Bs.push(i);var o,s=bn(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Ni=this.Ni.add(new VB(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(BZ){s.e(BZ)}finally{s.f()}return rB.resolve(i)}},{key:"lookupMutationBatch",value:function(e,t){return rB.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),a=r<0?0:r;return rB.resolve(this.Bs.length>a?this.Bs[a]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return rB.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return rB.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new VB(t,0),a=new VB(t,Number.POSITIVE_INFINITY),i=[];return this.Ni.forEachInRange([r,a],(function(e){var t=n.ki(e.Ci);i.push(t)})),rB.resolve(i)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new VP(jM);return t.forEach((function(e){var t=new VB(e,0),a=new VB(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,a],(function(e){r=r.add(e.Ci)}))})),rB.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,a=n;fP.isDocumentKey(a)||(a=a.child(""));var i=new VB(new fP(a),0),o=new VP(jM);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),i),rB.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;_M(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return rB.forEach(t.mutations,(function(a){var i=new VB(a.key,t.batchId);return r=r.delete(i),n.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new VB(t,0),r=this.Ni.firstAfterOrEqual(n);return rB.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,rB.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),jB=function(){function e(t){wn(this,e),this.$i=t,this.docs=new LP(fP.comparator),this.size=0}return En(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),a=r?r.size:0,i=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return rB.resolve(n?n.document.mutableCopy():AP.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=oF();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():AP.newInvalidDocument(e))})),rB.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=oF(),a=new fP(t.child("")),i=this.docs.getIteratorFrom(a);i.hasNext();){var o=i.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||PP(DP(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return rB.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){TM()}},{key:"Bi",value:function(e,t){return rB.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new zB(this)}},{key:"getSize",value:function(e){return rB.resolve(this.size)}}]),e}(),zB=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).Kn=e,r}return En(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,a){a.isValidDocument()?n.push(t.Kn.addEntry(e,a)):t.Kn.removeEntry(r)})),rB.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(yB),WB=function(){function e(t){wn(this,e),this.persistence=t,this.Li=new aF((function(e){return WP(e)}),HP),this.lastRemoteSnapshotVersion=HM.min(),this.highestTargetId=0,this.Ui=0,this.qi=new BB,this.targetCount=0,this.Ki=vB.gn()}return En(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),rB.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return rB.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return rB.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),rB.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),rB.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new vB(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,rB.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),rB.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,rB.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,a=0,i=[];return this.Li.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Li.delete(o),i.push(r.removeMatchingKeysForTargetId(e,s.targetId)),a++)})),rB.waitFor(i).next((function(){return a}))}},{key:"getTargetCount",value:function(e){return rB.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return rB.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),rB.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((function(t){a.push(r.markPotentiallyOrphaned(e,t))})),rB.waitFor(a)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),rB.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return rB.resolve(n)}},{key:"containsKey",value:function(e,t){return rB.resolve(this.qi.containsKey(t))}}]),e}(),HB=function(){function e(t,n){var r=this;wn(this,e),this.Gi={},this.overlays={},this.es=new BM(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new WB(this),this.indexManager=new fB,this.ds=new jB((function(e){return r.referenceDelegate.Qi(e)})),this.M=new cB(n),this._s=new LB(this.M)}return En(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new FB,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new UB(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;kM("MemoryPersistence","Starting transaction:",e);var a=new GB(this.es.next());return this.referenceDelegate.ji(),n(a).next((function(e){return r.referenceDelegate.Wi(a).next((function(){return e}))})).toPromise().then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return rB.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),GB=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return En(n)}(nB),KB=function(){function e(t){wn(this,e),this.persistence=t,this.Hi=new BB,this.Ji=null}return En(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw TM()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),rB.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),rB.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),rB.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rB.forEach(this.Xi,(function(r){var a=fP.fromPath(r);return t.Zi(e,a).next((function(e){e||n.removeEntry(a,HM.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return rB.or([function(){return rB.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();var qB=function(){function e(){wn(this,e),this.activeTargetIds=pF()}return En(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),XB=function(){function e(){wn(this,e),this.Ur=new qB,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return En(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new qB,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),YB=function(){function e(){wn(this,e)}return En(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),$B=function(){function e(){var t=this;wn(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return En(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){kM("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=bn(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(BZ){t.e(BZ)}finally{t.f()}}},{key:"Wr",value:function(){kM("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=bn(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(BZ){t.e(BZ)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),QB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},JB=function(){function e(t){wn(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return En(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),ZB=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return En(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(a,i){var o=new vM;o.listenOnce(lM.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case cM.NO_ERROR:var t=o.getResponseJson();kM("Connection","XHR received:",JSON.stringify(t)),a(t);break;case cM.TIMEOUT:kM("Connection",'RPC "'+e+'" timed out'),i(new NM(IM.DEADLINE_EXCEEDED,"Request time out"));break;case cM.HTTP_ERROR:var n=o.getStatus();if(kM("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(IM).indexOf(t)>=0?t:IM.UNKNOWN}(r.status);i(new NM(s,r.message))}else i(new NM(IM.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new NM(IM.UNAVAILABLE,"Connection failed."));break;default:TM()}}finally{kM("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=sM(),i=uM(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new dM({})),this.lo(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(LI())||"object"===typeof navigator&&"ReactNative"===navigator.product||LI().indexOf("Electron/")>=0||function(){var e=LI();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||LI().indexOf("MSAppHost/")>=0||FI()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");kM("Connection","Creating WebChannel: "+s,o);var u=a.createWebChannel(s,o),c=!1,l=!1,h=new JB({Jr:function(e){l?kM("Connection","Not sending because WebChannel is closed:",e):(c||(kM("Connection","Opening WebChannel transport."),u.open(),c=!0),kM("Connection","WebChannel sending:",e),u.send(e))},Yr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,pM.EventType.OPEN,(function(){l||kM("Connection","WebChannel transport opened.")})),f(u,pM.EventType.CLOSE,(function(){l||(l=!0,kM("Connection","WebChannel transport closed"),h.ro())})),f(u,pM.EventType.ERROR,(function(e){l||(l=!0,SM("Connection","WebChannel transport errored:",e),h.ro(new NM(IM.UNAVAILABLE,"The operation could not be completed")))})),f(u,pM.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];_M(!!n);var r=n,a=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(a){kM("Connection","WebChannel received error:",a);var i=a.status,o=function(e){var t=QL[e];if(void 0!==t)return rF(t)}(i),s=a.message;void 0===o&&(o=IM.INTERNAL,s="Unknown error status: "+i+" with message "+a.message),l=!0,h.ro(new NM(o,s)),u.close()}else kM("Connection","WebChannel received:",n),h.oo(n)}})),f(i,hM.STAT_EVENT,(function(e){e.stat===fM.PROXY?kM("Connection","Detected buffering proxy"):e.stat===fM.NOPROXY&&kM("Connection","Detected no buffering proxy")})),setTimeout((function(){h.io()}),0),h}}]),n}(function(){function e(t){wn(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return En(e,[{key:"co",value:function(e,t,n,r,a){var i=this.ho(e,t);kM("RestConnection","Sending: ",i,n);var o={};return this.lo(o,r,a),this.fo(e,i,o,n).then((function(e){return kM("RestConnection","Received: ",e),e}),(function(t){throw SM("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,a){return this.co(e,t,n,r,a)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+yM,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=QB[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function eV(){return"undefined"!=typeof document?document:null}function tV(e){return new _F(e,!0)}var nV=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;wn(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=a,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return En(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),a=Math.max(0,n-r);a>0&&kM("ExponentialBackoff","Backing off for ".concat(a," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,a,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),rV=function(){function e(t,n,r,a,i,o,s,u){wn(this,e),this.Yn=t,this.Vo=r,this.vo=a,this.So=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new nV(t,n)}return En(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=vn(gn().mark((function e(){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=vn(gn().mark((function e(){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=vn(gn().mark((function e(t,n){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===IM.RESOURCE_EXHAUSTED?(wM(n.toString()),wM("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===IM.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=bt(t,2),a=r[0],i=r[1];e.Do===n&&e.Qo(a,i)}),(function(n){t((function(){var t=new NM(IM.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(vn(gn().mark((function t(){return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return kM("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(kM("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),aV=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a,i,o,s){var u;return wn(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,s)).M=o,u}return En(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:TM()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],i=function(e,t){return e.N?(_M(void 0===t||"string"==typeof t),ZM.fromBase64String(t||"")):(_M(void 0===t||t instanceof Uint8Array),ZM.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?IM.UNKNOWN:rF(e.code);return new NM(t,e.message||"")}(o);n=new bF(r,a,i,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=MF(e,u.document.name),l=AF(u.document.updateTime),h=new IP({mapValue:{fields:u.document.fields}}),f=AP.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new gF(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=MF(e,v.document),g=v.readTime?AF(v.readTime):HM.min(),y=AP.newNoDocument(m,g),b=v.removedTargetIds||[];n=new gF([],b,y.key,y)}else if("documentRemove"in t){t.documentRemove;var x=t.documentRemove;x.document;var k=MF(e,x.document),w=x.removedTargetIds||[];n=new gF([],w,k,null)}else{if(!("filter"in t))return TM();t.filter;var S=t.filter;S.targetId;var E=S.count||0,T=new tF(E),_=S.targetId;n=new yF(_,T)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return HM.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?HM.min():t.readTime?AF(t.readTime):HM.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=FF(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=GP(r)?{documents:jF(e,r)}:{query:zF(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=IF(e,t.resumeToken):t.snapshotVersion.compareTo(HM.min())>0&&(n.readTime=CF(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return TM()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=FF(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(rV),iV=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a,i,o,s){var u;return wn(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,s)).M=o,u.Yo=!1,u}return En(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,NI(Po(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(_M(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(_M(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?AF(e.updateTime):AF(t);return n.isEqual(HM.min())&&(n=AF(t)),new FL(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=AF(e.commitTime);return this.listener.tu(n,t)}return _M(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=FF(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return UF(t.M,e)}))};this.Lo(n)}}]),n}(rV),oV=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a,i){var o;return wn(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=a,o.M=i,o.su=!1,o}return En(n,[{key:"iu",value:function(){if(this.su)throw new NM(IM.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var i=bt(a,2),o=i[0],s=i[1];return r.So.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===IM.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new NM(IM.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var i=bt(a,2),o=i[0],s=i[1];return r.So._o(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===IM.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new NM(IM.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return En((function e(){wn(this,e)}))}()),sV=function(){function e(t,n){wn(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return En(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(wM(t),this.uu=!1):kM("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),uV=En((function e(t,n,r,a,i){var o=this;wn(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=i,this.gu.Kr((function(e){r.enqueueAndForget(vn(gn().mark((function e(){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=bV(o),!e.t0){e.next=5;break}return kM("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=vn(gn().mark((function e(t){var n;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=CM(t)).wu.add(4),e.next=4,hV(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,cV(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new sV(r,a)}));function cV(e){return lV.apply(this,arguments)}function lV(){return lV=vn(gn().mark((function e(t){var n,r,a;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bV(t)){e.next=18;break}n=bn(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),lV.apply(this,arguments)}function hV(e){return fV.apply(this,arguments)}function fV(){return fV=vn(gn().mark((function e(t){var n,r,a;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=bn(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return a=r.value,e.next=7,a(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),fV.apply(this,arguments)}function dV(e,t){var n=CM(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),yV(n)?gV(n):XV(n).Mo()&&vV(n,t))}function pV(e,t){var n=CM(e),r=XV(n);n._u.delete(t),r.Mo()&&mV(n,t),0===n._u.size&&(r.Mo()?r.$o():bV(n)&&n.yu.set("Unknown"))}function vV(e,t){e.pu.Z(t.targetId),XV(e).Ho(t)}function mV(e,t){e.pu.Z(t),XV(e).Jo(t)}function gV(e){e.pu=new kF({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),XV(e).start(),e.yu.au()}function yV(e){return bV(e)&&!XV(e).ko()&&e._u.size>0}function bV(e){return 0===CM(e).wu.size}function xV(e){e.pu=void 0}function kV(e){return wV.apply(this,arguments)}function wV(){return wV=vn(gn().mark((function e(t){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){vV(t,e)}));case 1:case"end":return e.stop()}}),e)}))),wV.apply(this,arguments)}function SV(e,t){return EV.apply(this,arguments)}function EV(){return EV=vn(gn().mark((function e(t,n){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xV(t),yV(t)?(t.yu.lu(n),gV(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),EV.apply(this,arguments)}function TV(e,t,n){return _V.apply(this,arguments)}function _V(){return _V=vn(gn().mark((function e(t,n,r){var a;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof bF&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=vn(gn().mark((function e(t,n){var r,a,i,o;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,a=bn(n.targetIds),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=14;break}if(o=i.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),kM("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,CV(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof gF?t.pu.ut(n):n instanceof yF?t.pu._t(n):t.pu.ht(n),r.isEqual(HM.min())){e.next=29;break}return e.prev=14,e.next=17,CB(t.localStore);case 17:if(a=e.sent,e.t1=r.compareTo(a)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var a=e._u.get(r);a&&e._u.set(r,a.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(ZM.EMPTY_BYTE_STRING,n.snapshotVersion)),mV(e,t);var r=new uB(n.target,t,1,n.sequenceNumber);vV(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),kM("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,CV(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),_V.apply(this,arguments)}function CV(e,t,n){return IV.apply(this,arguments)}function IV(){return IV=vn(gn().mark((function e(t,n,r){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(aB(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,hV(t);case 5:t.yu.set("Offline"),r||(r=function(){return CB(t.localStore)}),t.asyncQueue.enqueueRetryable(vn(gn().mark((function e(){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kM("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,cV(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),IV.apply(this,arguments)}function NV(e,t){return t().catch((function(n){return CV(e,n,t)}))}function AV(e){return RV.apply(this,arguments)}function RV(){return RV=vn(gn().mark((function e(t){var n,r,a,i;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=CM(t),r=YV(n),a=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!OV(n)){e.next=19;break}return e.prev=3,e.next=6,AB(n.localStore,a);case 6:if(null!==(i=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:a=i.batchId,DV(n,i),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,CV(n,e.t0);case 17:e.next=2;break;case 19:MV(n)&&PV(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),RV.apply(this,arguments)}function OV(e){return bV(e)&&e.du.length<10}function DV(e,t){e.du.push(t);var n=YV(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function MV(e){return bV(e)&&!YV(e).ko()&&e.du.length>0}function PV(e){YV(e).start()}function LV(e){return FV.apply(this,arguments)}function FV(){return FV=vn(gn().mark((function e(t){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:YV(t).nu();case 1:case"end":return e.stop()}}),e)}))),FV.apply(this,arguments)}function BV(e){return VV.apply(this,arguments)}function VV(){return VV=vn(gn().mark((function e(t){var n,r,a,i;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=YV(t),r=bn(t.du);try{for(r.s();!(a=r.n()).done;)i=a.value,n.Zo(i.mutations)}catch(BZ){r.e(BZ)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),VV.apply(this,arguments)}function UV(e,t,n){return jV.apply(this,arguments)}function jV(){return jV=vn(gn().mark((function e(t,n,r){var a,i;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.du.shift(),i=oB.from(a,n,r),e.next=3,NV(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}));case 3:return e.next=5,AV(t);case 5:case"end":return e.stop()}}),e)}))),jV.apply(this,arguments)}function zV(e,t){return WV.apply(this,arguments)}function WV(){return WV=vn(gn().mark((function e(t,n){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&YV(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=vn(gn().mark((function e(t,n){var r,a;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nF(a=n.code)||a===IM.ABORTED){e.next=7;break}return r=t.du.shift(),YV(t).Fo(),e.next=5,NV(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,AV(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:MV(t)&&PV(t);case 5:case"end":return e.stop()}}),e)}))),WV.apply(this,arguments)}function HV(e,t){return GV.apply(this,arguments)}function GV(){return GV=vn(gn().mark((function e(t,n){var r,a;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=CM(t)).asyncQueue.verifyOperationInProgress(),kM("RemoteStore","RemoteStore received new credentials"),a=bV(r),r.wu.add(3),e.next=6,hV(r);case 6:return a&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,cV(r);case 12:case"end":return e.stop()}}),e)}))),GV.apply(this,arguments)}function KV(e,t){return qV.apply(this,arguments)}function qV(){return qV=vn(gn().mark((function e(t,n){var r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=CM(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,cV(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,hV(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),qV.apply(this,arguments)}function XV(e){return e.Iu||(e.Iu=function(e,t,n){var r=CM(e);return r.iu(),new aV(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:kV.bind(null,e),eo:SV.bind(null,e),zo:TV.bind(null,e)}),e.mu.push(function(){var t=vn(gn().mark((function t(n){return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),yV(e)?gV(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:xV(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function YV(e){return e.Tu||(e.Tu=function(e,t,n){var r=CM(e);return r.iu(),new iV(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:LV.bind(null,e),eo:zV.bind(null,e),eu:BV.bind(null,e),tu:UV.bind(null,e)}),e.mu.push(function(){var t=vn(gn().mark((function t(n){return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,AV(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(kM("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var $V=function(){function e(t,n,r,a,i){wn(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new AM,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return En(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new NM(IM.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,a,i){var o=new e(t,n,Date.now()+r,a,i);return o.start(r),o}}]),e}();function QV(e,t){if(wM("AsyncQueue","".concat(t,": ").concat(e)),aB(e))return new NM(IM.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var JV=function(){function e(t){wn(this,e),this.comparator=t?function(e,n){return t(e,n)||fP.comparator(e.key,n.key)}:function(e,t){return fP.comparator(e.key,t.key)},this.keyedMap=uF(),this.sortedSet=new LP(this.comparator)}return En(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ZV=function(){function e(){wn(this,e),this.Eu=new LP(fP.comparator)}return En(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):TM():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),eU=function(){function e(t,n,r,a,i,o,s,u){wn(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return En(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vL(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,a){var i=[];return n.forEach((function(e){i.push({type:0,doc:e})})),new e(t,n,JV.emptySet(n),i,r,a,!0,!1)}}]),e}(),tU=En((function e(){wn(this,e),this.Ru=void 0,this.listeners=[]})),nU=En((function e(){wn(this,e),this.queries=new aF((function(e){return mL(e)}),vL),this.onlineState="Unknown",this.bu=new Set}));function rU(e,t){return aU.apply(this,arguments)}function aU(){return aU=vn(gn().mark((function e(t,n){var r,a,i,o,s;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=CM(t),a=n.query,i=!1,(o=r.queries.get(a))||(i=!0,o=new tU),!i){e.next=13;break}return e.prev=3,e.next=6,r.onListen(a);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=QV(e.t0,"Initialization of query '".concat(gL(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(a,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&cU(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),aU.apply(this,arguments)}function iU(e,t){return oU.apply(this,arguments)}function oU(){return oU=vn(gn().mark((function e(t,n){var r,a,i,o,s;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=CM(t),a=n.query,i=!1,(o=r.queries.get(a))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),!i){e.next=6;break}return e.abrupt("return",(r.queries.delete(a),r.onUnlisten(a)));case 6:case"end":return e.stop()}}),e)}))),oU.apply(this,arguments)}function sU(e,t){var n,r=CM(e),a=!1,i=bn(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=bn(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(a=!0)}}catch(BZ){l.e(BZ)}finally{l.f()}u.Ru=o}}}catch(BZ){i.e(BZ)}finally{i.f()}a&&cU(r)}function uU(e,t,n){var r=CM(e),a=r.queries.get(t);if(a){var i,o=bn(a.listeners);try{for(o.s();!(i=o.n()).done;){i.value.onError(n)}}catch(BZ){o.e(BZ)}finally{o.f()}}r.queries.delete(t)}function cU(e){e.bu.forEach((function(e){e.next()}))}var lU=function(){function e(t,n,r){wn(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return En(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=bn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var a=t.value;3!==a.type&&n.push(a)}}catch(BZ){r.e(BZ)}finally{r.f()}e=new eU(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var i=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),i=!0):this.xu(e,this.onlineState)&&(this.Nu(e),i=!0),this.Du=e,i}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=eU.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}();var hU=En((function e(t){wn(this,e),this.key=t})),fU=En((function e(t){wn(this,e),this.key=t})),dU=function(){function e(t,n){wn(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=fF(),this.mutatedKeys=fF(),this.Gu=xL(t),this.Qu=new JV(this.Gu)}return En(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new ZV,a=t?t.Qu:this.Qu,i=t?t.mutatedKeys:this.mutatedKeys,o=a,s=!1,u="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,c="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((function(e,t){var l=a.get(e),h=yL(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Gu(h,u)>0||c&&n.Gu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:s,mutatedKeys:i}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var i=e.zu.Au();i.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return TM()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==i.length||u?{snapshot:new eU(this.query,e.Qu,a,i,e.mutatedKeys,0===s,u,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ZV,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=fF(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new fU(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new hU(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=fF();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return eU.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),pU=En((function e(t,n,r){wn(this,e),this.query=t,this.targetId=n,this.view=r})),vU=En((function e(t){wn(this,e),this.key=t,this.na=!1})),mU=function(){function e(t,n,r,a,i,o){wn(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new aF((function(e){return mL(e)}),vL),this.ra=new Map,this.oa=new Set,this.ua=new LP(fP.comparator),this.aa=new Map,this.ca=new BB,this.ha={},this.la=new Map,this.fa=vB.yn(),this.onlineState="Unknown",this.da=void 0}return En(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function gU(e,t){return yU.apply(this,arguments)}function yU(){return yU=vn(gn().mark((function e(t,n){var r,a,i,o,s,u;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=KU(t),!(o=r.ia.get(n))){e.next=6;break}a=o.targetId,r.sharedClientState.addLocalQueryTarget(a),i=o.view.ea(),e.next=15;break;case 6:return e.next=8,RB(r.localStore,dL(n));case 8:return s=e.sent,r.isPrimaryClient&&dV(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.targetId,e.next=14,bU(r,n,a,"current"===u);case 14:i=e.sent;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)}))),yU.apply(this,arguments)}function bU(e,t,n,r){return xU.apply(this,arguments)}function xU(){return xU=vn(gn().mark((function e(t,n,r,a){var i,o,s,u,c,l;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=vn(gn().mark((function e(t,n,r,a){var i,o,s;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.view.Wu(r),e.t0=i.ii,!e.t0){e.next=6;break}return e.next=5,MB(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,i)}));case 5:i=e.sent;case 6:return o=a&&a.targetChanges.get(n.targetId),s=n.view.applyChanges(i,t.isPrimaryClient,o),e.abrupt("return",(BU(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,MB(t.localStore,n,!0);case 3:return i=e.sent,o=new dU(n,i._i),s=o.Wu(i.documents),u=mF.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),BU(t,r,c.Xu),l=new pU(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),xU.apply(this,arguments)}function kU(e,t){return wU.apply(this,arguments)}function wU(){return wU=vn(gn().mark((function e(t,n){var r,a,i;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=CM(t),a=r.ia.get(n),!((i=r.ra.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(a.targetId,i.filter((function(e){return!vL(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,OB(r.localStore,a.targetId,!1).then((function(){r.sharedClientState.clearQueryState(a.targetId),pV(r.remoteStore,a.targetId),LU(r,a.targetId)})).catch(mB);case 9:e.next=14;break;case 11:return LU(r,a.targetId),e.next=14,OB(r.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),wU.apply(this,arguments)}function SU(e,t,n){return EU.apply(this,arguments)}function EU(){return EU=vn(gn().mark((function e(t,n,r){var a,i,o;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=qU(t),e.prev=1,e.next=4,function(e,t){var n,r=CM(e),a=WM.now(),i=t.reduce((function(e,t){return e.add(t.key)}),fF());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,i).next((function(i){n=i;var o,s=[],u=bn(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=WL(c,n.get(c.key));null!=l&&s.push(new qL(c.key,l,NP(l.value.mapValue),BL.exists(!0)))}}catch(BZ){u.e(BZ)}finally{u.f()}return r.Bs.addMutationBatch(e,a,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(a.localStore,n);case 4:return i=e.sent,a.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new LP(jM)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(a,i.batchId,r),e.next=9,jU(a,i.changes);case 9:return e.next=11,AV(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=QV(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),EU.apply(this,arguments)}function TU(e,t){return _U.apply(this,arguments)}function _U(){return _U=vn(gn().mark((function e(t,n){var r,a;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CM(t),e.prev=1,e.next=4,IB(r.localStore,n);case 4:return a=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(_M(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?_M(n.na):e.removedDocuments.size>0&&(_M(n.na),n.na=!1))})),e.next=8,jU(r,a,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,mB(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),_U.apply(this,arguments)}function CU(e,t,n){var r=CM(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var a=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&a.push(r.snapshot)})),function(e,t){var n=CM(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var a,i=bn(n.listeners);try{for(i.s();!(a=i.n()).done;){a.value.Pu(t)&&(r=!0)}}catch(BZ){i.e(BZ)}finally{i.f()}})),r&&cU(n)}(r.eventManager,t),a.length&&r.sa.zo(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function IU(e,t,n){return NU.apply(this,arguments)}function NU(){return NU=vn(gn().mark((function e(t,n,r){var a,i,o,s,u,c;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=CM(t)).sharedClientState.updateQueryState(n,"rejected",r),i=a.aa.get(n),!(o=i&&i.key)){e.next=14;break}return s=(s=new LP(fP.comparator)).insert(o,AP.newNoDocument(o,HM.min())),u=fF().add(o),c=new vF(HM.min(),new Map,new VP(jM),s,u),e.next=9,TU(a,c);case 9:a.ua=a.ua.remove(o),a.aa.delete(n),UU(a),e.next=16;break;case 14:return e.next=16,OB(a.localStore,n,!1).then((function(){return LU(a,n,r)})).catch(mB);case 16:case"end":return e.stop()}}),e)}))),NU.apply(this,arguments)}function AU(e,t){return RU.apply(this,arguments)}function RU(){return RU=vn(gn().mark((function e(t,n){var r,a,i;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CM(t),a=n.batch.batchId,e.prev=1,e.next=4,_B(r.localStore,n);case 4:return i=e.sent,PU(r,a,null),MU(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,jU(r,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,mB(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),RU.apply(this,arguments)}function OU(e,t,n){return DU.apply(this,arguments)}function DU(){return DU=vn(gn().mark((function e(t,n,r){var a,i;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=CM(t),e.prev=1,e.next=4,function(e,t){var n=CM(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return _M(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(a.localStore,n);case 4:return i=e.sent,PU(a,n,r),MU(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,jU(a,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,mB(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),DU.apply(this,arguments)}function MU(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function PU(e,t,n){var r=CM(e),a=r.ha[r.currentUser.toKey()];if(a){var i=a.get(t);i&&(n?i.reject(n):i.resolve(),a=a.remove(t)),r.ha[r.currentUser.toKey()]=a}}function LU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,a=bn(e.ra.get(t));try{for(a.s();!(r=a.n()).done;){var i=r.value;e.ia.delete(i),n&&e.sa.wa(i,n)}}catch(BZ){a.e(BZ)}finally{a.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||FU(e,t)}))}function FU(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(pV(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),UU(e))}function BU(e,t,n){var r,a=bn(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;i instanceof hU?(e.ca.addReference(i.key,t),VU(e,i)):i instanceof fU?(kM("SyncEngine","Document no longer in limbo: "+i.key),e.ca.removeReference(i.key,t),e.ca.containsKey(i.key)||FU(e,i.key)):TM()}}catch(BZ){a.e(BZ)}finally{a.f()}}function VU(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(kM("SyncEngine","New document in limbo: "+n),e.oa.add(r),UU(e))}function UU(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new fP(YM.fromString(t)),r=e.fa.next();e.aa.set(r,new vU(n)),e.ua=e.ua.insert(n,r),dV(e.remoteStore,new uB(dL(uL(n.path)),r,2,BM.A))}}function jU(e,t,n){return zU.apply(this,arguments)}function zU(){return zU=vn(gn().mark((function e(t,n,r){var a,i,o,s;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=CM(t),i=[],o=[],s=[],e.t0=a.ia.isEmpty(),e.t0){e.next=9;break}return a.ia.forEach((function(e,t){s.push(a._a(t,n,r).then((function(e){if(e){a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),i.push(e);var n=xB.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return a.sa.zo(i),e.next=9,function(){var e=vn(gn().mark((function e(t,n){var r,a,i,o,s,u,c,l;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=CM(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return rB.forEach(n,(function(t){return rB.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return rB.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),aB(e.t0)){e.next=10;break}throw e.t0;case 10:kM("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:a=bn(n);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.targetId,o.fromCache||(u=r.ui.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(s,l))}catch(BZ){a.e(BZ)}finally{a.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(a.localStore,o);case 9:case"end":return e.stop()}}),e)}))),zU.apply(this,arguments)}function WU(e,t){return HU.apply(this,arguments)}function HU(){return HU=vn(gn().mark((function e(t,n){var r,a;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=CM(t)).currentUser.isEqual(n)){e.next=11;break}return kM("SyncEngine","User change. New user:",n.toKey()),e.next=5,EB(r.localStore,n);case 5:return a=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new NM(IM.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),e.next=11,jU(r,a.di);case 11:case"end":return e.stop()}}),e)}))),HU.apply(this,arguments)}function GU(e,t){var n=CM(e),r=n.aa.get(t);if(r&&r.na)return fF().add(r.key);var a=fF(),i=n.ra.get(t);if(!i)return a;var o,s=bn(i);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ia.get(u);a=a.unionWith(c.view.ju)}}catch(BZ){s.e(BZ)}finally{s.f()}return a}function KU(e){var t=CM(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=TU.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=GU.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=IU.bind(null,t),t.sa.zo=sU.bind(null,t.eventManager),t.sa.wa=uU.bind(null,t.eventManager),t}function qU(e){var t=CM(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=AU.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=OU.bind(null,t),t}var XU=function(){function e(){wn(this,e),this.synchronizeTabs=!1}return En(e,[{key:"initialize",value:function(){var e=vn(gn().mark((function e(t){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=tV(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return SB(this.persistence,new kB,e.initialUser,this.M)}},{key:"ya",value:function(e){return new HB(KB.Yi,this.M)}},{key:"ga",value:function(e){return new XB}},{key:"terminate",value:function(){var e=vn(gn().mark((function e(){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),YU=function(){function e(){wn(this,e)}return En(e,[{key:"initialize",value:function(){var e=vn(gn().mark((function e(t,n){var r=this;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return CU(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=WU.bind(null,this.syncEngine),e.next=12,KV(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new nU}},{key:"createDatastore",value:function(e){var t,n=tV(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new ZB(t));return function(e,t,n,r){return new oV(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,a,i,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,a=function(e){return CU(o.syncEngine,e,0)},i=$B.vt()?new $B:new YB,new uV(t,n,r,a,i)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,a,i,o){var s=new mU(e,t,n,r,a,i);return o&&(s.da=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=vn(gn().mark((function e(t){var n;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=CM(t),kM("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,hV(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var $U=function(){function e(t){wn(this,e),this.observer=t,this.muted=!1}return En(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),QU=function(){function e(t,n,r,a){var i=this;wn(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=gM.UNAUTHENTICATED,this.clientId=UM.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=vn(gn().mark((function e(t){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kM("FirestoreClient","Received user=",t.uid),e.next=3,i.authCredentialListener(t);case 3:i.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return kM("FirestoreClient","Received new app check token=",e),i.appCheckCredentialListener(e,i.user)}))}return En(e,[{key:"getConfiguration",value:function(){var e=vn(gn().mark((function e(){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new NM(IM.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new AM;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(vn(gn().mark((function n(){var r;return gn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=QV(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function JU(e,t){return ZU.apply(this,arguments)}function ZU(){return ZU=vn(gn().mark((function e(t,n){var r,a;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),kM("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:a=r.initialUser,t.setCredentialChangeListener(function(){var e=vn(gn().mark((function e(t){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(t),e.t0){e.next=5;break}return e.next=4,EB(n.localStore,t);case 4:a=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ZU.apply(this,arguments)}function ej(e,t){return tj.apply(this,arguments)}function tj(){return tj=vn(gn().mark((function e(t,n){var r,a;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,nj(t);case 3:return r=e.sent,kM("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return a=e.sent,e.next=10,n.initialize(r,a);case 10:t.setCredentialChangeListener((function(e){return HV(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return HV(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),tj.apply(this,arguments)}function nj(e){return rj.apply(this,arguments)}function rj(){return rj=vn(gn().mark((function e(t){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return kM("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,JU(t,new XU);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),rj.apply(this,arguments)}function aj(e){return ij.apply(this,arguments)}function ij(){return ij=vn(gn().mark((function e(t){return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return kM("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,ej(t,new YU);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),ij.apply(this,arguments)}function oj(e){return aj(e).then((function(e){return e.syncEngine}))}function sj(e){return uj.apply(this,arguments)}function uj(){return uj=vn(gn().mark((function e(t){var n,r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aj(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=gU.bind(null,n.syncEngine),r.onUnlisten=kU.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),uj.apply(this,arguments)}function cj(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new AM;return e.asyncQueue.enqueueAndForget(vn(gn().mark((function a(){return gn().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e,t,n,r,a){var i=new $U({next:function(i){t.enqueueAndForget((function(){return iU(e,o)}));var s=i.docs.has(n);!s&&i.fromCache?a.reject(new NM(IM.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&i.fromCache&&r&&"server"===r.source?a.reject(new NM(IM.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(i)},error:function(e){return a.reject(e)}}),o=new lU(uL(n.path),i,{includeMetadataChanges:!0,ku:!0});return rU(e,o)},a.next=3,sj(e);case 3:return a.t1=a.sent,a.t2=e.asyncQueue,a.t3=t,a.t4=n,a.t5=r,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3,a.t4,a.t5));case 9:case"end":return a.stop()}}),a)})))),r.promise}var lj=new Map;function hj(e,t,n){if(!n)throw new NM(IM.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function fj(e){if(!fP.isDocumentKey(e))throw new NM(IM.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function dj(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":TM()}function pj(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new NM(IM.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=dj(e);throw new NM(IM.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var vj=function(){function e(t){var n;if(wn(this,e),void 0===t.host){if(void 0!==t.ssl)throw new NM(IM.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new NM(IM.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new NM(IM.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return En(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),mj=function(){function e(t,n,r){wn(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vj({}),this._settingsFrozen=!1,t instanceof uP?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new NM(IM.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uP(e.options.projectId)}(t))}return En(e,[{key:"app",get:function(){if(!this._app)throw new NM(IM.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new NM(IM.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vj(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new OM;switch(e.type){case"gapi":var t=e.client;return _M(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new PM(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new NM(IM.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=lj.get(e);t&&(kM("ComponentProvider","Removing Datastore"),lj.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();var gj=function(){function e(t,n,r){wn(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return En(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new bj(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),yj=function(){function e(t,n,r){wn(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return En(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),bj=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a){var i;return wn(this,n),(i=t.call(this,e,r,uL(a)))._path=a,i.type="collection",i}return En(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new gj(this.firestore,null,new fP(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(yj);function xj(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=XI(e),1===arguments.length&&(t=UM.R()),hj("doc","path",t),e instanceof mj){var i=YM.fromString.apply(YM,[t].concat(r));return fj(i),new gj(e,null,new fP(i))}if(!(e instanceof gj||e instanceof bj))throw new NM(IM.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(YM.fromString.apply(YM,[t].concat(r)));return fj(o),new gj(e.firestore,e instanceof bj?e.converter:null,new fP(o))}var kj=function(){function e(){var t=this;wn(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new nV(this,"async_queue_retry"),this.Qa=function(){var e=eV();e&&kM("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=eV();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return En(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=eV();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new AM;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=vn(gn().mark((function e(){var t=this;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),aB(e.t0)){e.next=12;break}throw e.t0;case 12:kM("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw wM("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var a=$V.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(a),a}},{key:"ja",value:function(){this.Ua&&TM()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=vn(gn().mark((function e(){var t;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=bn(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(BZ){n.e(BZ)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=bn(t.La);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.skipDelay(),"all"!==e&&a.timerId===e)break}}catch(BZ){r.e(BZ)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();var wj=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a){var i;return wn(this,n),(i=t.call(this,e,r,a)).type="firestore",i._queue=new kj,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return En(n,[{key:"_terminate",value:function(){return this._firestoreClient||Ej(this),this._firestoreClient.terminate()}}]),n}(mj);function Sj(e){return e._firestoreClient||Ej(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ej(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new sP(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new QU(e._authCredentials,e._appCheckCredentials,e._queue,r)}var Tj=function(){function e(){wn(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new NM(IM.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new QM(n)}return En(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var _j=function(){function e(t){wn(this,e),this._byteString=t}return En(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ZM.fromBase64String(t))}catch(t){throw new NM(IM.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ZM.fromUint8Array(t))}}]),e}(),Cj=En((function e(t){wn(this,e),this._methodName=t})),Ij=function(){function e(t,n){if(wn(this,e),!isFinite(t)||t<-90||t>90)throw new NM(IM.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new NM(IM.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return En(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return jM(this._lat,e._lat)||jM(this._long,e._long)}}]),e}(),Nj=/^__.*__$/,Aj=function(){function e(t,n,r){wn(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return En(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new qL(e,this.data,this.fieldMask,t,this.fieldTransforms):new KL(e,this.data,t,this.fieldTransforms)}}]),e}();function Rj(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw TM()}}var Oj=function(){function e(t,n,r,a,i,o){wn(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=a,void 0===i&&this.tc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return En(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return Wj(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Rj(this.ec)&&Nj.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),Dj=function(){function e(t,n,r){wn(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||tV(t)}return En(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Oj({ec:e,methodName:t,hc:n,path:QM.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Mj(e){var t=e._freezeSettings(),n=tV(e._databaseId);return new Dj(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Pj(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(i.merge||i.mergeFields?2:0,t,n,a);Vj("Data must be an object, but it was:",o,r);var s,u,c=Fj(r,o);if(i.merge)s=new JM(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){var l,h=[],f=bn(i.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=Uj(t,d,n);if(!o.contains(p))throw new NM(IM.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Hj(h,p)||h.push(p)}}catch(BZ){f.e(BZ)}finally{f.f()}s=new JM(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Aj(new IP(c),s,u)}function Lj(e,t){if(Bj(e=XI(e)))return Vj("Unsupported field value:",t,e),Fj(e,t);if(e instanceof Cj)return function(e,t){if(!Rj(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],a=0,i=bn(e);try{for(i.s();!(n=i.n()).done;){var o=Lj(n.value,t.uc(a));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),a++}}catch(BZ){i.e(BZ)}finally{i.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=XI(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return EL(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=WM.fromDate(e);return{timestampValue:CF(t.M,n)}}if(e instanceof WM){var r=new WM(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:CF(t.M,r)}}if(e instanceof Ij)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _j)return{bytesValue:IF(t.M,e._byteString)};if(e instanceof gj){var a=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(a))throw t.ac("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(a.projectId,"/").concat(a.database));return{referenceValue:RF(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(dj(e)))}(e,t)}function Fj(e,t){var n={};return qM(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):KM(e,(function(e,r){var a=Lj(r,t.sc(e));null!=a&&(n[e]=a)})),{mapValue:{fields:n}}}function Bj(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof WM||e instanceof Ij||e instanceof _j||e instanceof gj||e instanceof Cj)}function Vj(e,t,n){if(!Bj(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=dj(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function Uj(e,t,n){if((t=XI(t))instanceof Tj)return t._internalPath;if("string"==typeof t)return zj(e,t);throw Wj("Field path arguments must be of type string or ",e,!1,void 0,n)}var jj=new RegExp("[~\\*/\\[\\]]");function zj(e,t,n){if(t.search(jj)>=0)throw Wj("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return CI(Tj,kn(t.split(".")))._internalPath}catch(r){throw Wj("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Wj(e,t,n,r,a){var i=r&&!r.isEmpty(),o=void 0!==a,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(i||o)&&(u+=" (found",i&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(a)),u+=")"),new NM(IM.INVALID_ARGUMENT,s+e+u)}function Hj(e,t){return e.some((function(e){return e.isEqual(t)}))}var Gj=function(){function e(t,n,r,a,i){wn(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=i}return En(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new gj(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Kj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(qj("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Kj=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"data",value:function(){return NI(Po(n.prototype),"data",this).call(this)}}]),n}(Gj);function qj(e,t){return"string"==typeof t?zj(e,t):t instanceof Tj?t._internalPath:t._delegate._internalPath}var Xj=function(){function e(t,n){wn(this,e),this.hasPendingWrites=t,this.fromCache=n}return En(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Yj=function(e){Mo(n,e);var t=Uo(n);function n(e,r,a,i,o,s){var u;return wn(this,n),(u=t.call(this,e,r,a,i,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return En(n,[{key:"exists",value:function(){return NI(Po(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new $j(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(qj("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Gj),$j=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return NI(Po(n.prototype),"data",this).call(this,e)}}]),n}(Yj);var Qj=function(){function e(){wn(this,e)}return En(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(pP(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nP(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rP(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw TM()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return KM(e.fields,(function(e,a){r[e]=n.convertValue(a,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Ij(nP(e.latitude),nP(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=iP(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(oP(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=tP(e);return new WM(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=YM.fromString(e);_M(JF(n));var r=new uP(n.get(1),n.get(3)),a=new fP(n.popFirst(5));return r.isEqual(t)||wM("Document ".concat(a," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),a}}]),e}();function Jj(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}function Zj(e){e=pj(e,gj);var t=pj(e.firestore,wj);return cj(Sj(t),e._key).then((function(n){return rz(t,e,n)}))}var ez=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).firestore=e,r}return En(n,[{key:"convertBytes",value:function(e){return new _j(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new gj(this.firestore,null,t)}}]),n}(Qj);function tz(e,t,n){e=pj(e,gj);var r=pj(e.firestore,wj),a=Jj(e.converter,t,n);return nz(r,[Pj(Mj(r),"setDoc",e._key,a,null!==e.converter,n).toMutation(e._key,BL.none())])}function nz(e,t){return function(e,t){var n=new AM;return e.asyncQueue.enqueueAndForget(vn(gn().mark((function r(){return gn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=SU,r.next=3,oj(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Sj(e),t)}function rz(e,t,n){var r=n.docs.get(t._key),a=new ez(e);return new Yj(e,a,t._key,r,new Xj(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];yM="9.8.1",LN(new YI("firestore",(function(e,n){var r=n.options,a=e.getProvider("app").getImmediate(),i=new wj(a,new DM(e.getProvider("auth-internal")),new FM(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),i._setSettings(r),i}),"PUBLIC")),zN(mM,"3.4.9",e),zN(mM,"3.4.9","esm2017")}();zN("firebase","9.8.1","app");var az,iz;var oz=new WeakMap,sz=new WeakMap,uz=new WeakMap,cz=new WeakMap,lz=new WeakMap;var hz={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return sz.get(e);if("objectStoreNames"===t)return e.objectStoreNames||uz.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pz(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function fz(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(iz||(iz=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(vz(this),n),pz(oz.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pz(e.apply(vz(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=e.call.apply(e,[vz(this),t].concat(r));return uz.set(i,t.sort?t.sort():[t]),pz(i)}}function dz(e){return"function"===typeof e?fz(e):(e instanceof IDBTransaction&&function(e){if(!sz.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=function(){t(),r()},i=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)}));sz.set(e,t)}}(e),t=e,(az||(az=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,hz):e);var t}function pz(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",a),e.removeEventListener("error",i)},a=function(){t(pz(e.result)),r()},i=function(){n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)}));return t.then((function(t){t instanceof IDBCursor&&oz.set(t,e)})).catch((function(){})),lz.set(t,e),t}(e);if(cz.has(e))return cz.get(e);var t=dz(e);return t!==e&&(cz.set(e,t),lz.set(t,e)),t}var vz=function(e){return lz.get(e)};var mz,gz=["get","getKey","getAll","getAllKeys","count"],yz=["put","add","delete","clear"],bz=new Map;function xz(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(bz.get(t))return bz.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,a=yz.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||gz.includes(n))){var i=function(){var e=vn(mn.mark((function e(t){var i,o,s,u,c,l,h=arguments;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,a?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(i=s)[n].apply(i,c),a&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return bz.set(t,i),i}}}!function(e){hz=e(hz)}((function(e){return uN(uN({},e),{},{get:function(t,n,r){return xz(t,n)||e.get(t,n,r)},has:function(t,n){return!!xz(t,n)||e.has(t,n)}})}));var kz="@firebase/installations",wz="0.5.9",Sz=1e4,Ez="w:".concat(wz),Tz="FIS_v2",_z=36e5,Cz=(AI(mz={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),AI(mz,"not-registered","Firebase Installation is not registered."),AI(mz,"installation-not-found","Firebase Installation not found."),AI(mz,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),AI(mz,"app-offline","Could not process request. Application offline."),AI(mz,"delete-pending-registration","Can't delete installation while there is a pending registration request."),mz),Iz=new jI("installations","Installations",Cz);function Nz(e){return e instanceof UI&&e.code.includes("request-failed")}function Az(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function Rz(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Oz(e,t){return Dz.apply(this,arguments)}function Dz(){return(Dz=vn(mn.mark((function e(t,n){var r,a;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,a=r.error,e.abrupt("return",Iz.create("request-failed",{requestName:t,serverCode:a.code,serverMessage:a.message,serverStatus:a.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mz(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Pz(e,t){var n=t.refreshToken,r=Mz(e);return r.append("Authorization",function(e){return"".concat(Tz," ").concat(e)}(n)),r}function Lz(e){return Fz.apply(this,arguments)}function Fz(){return Fz=vn(mn.mark((function e(t){var n;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),Fz.apply(this,arguments)}function Bz(e,t){return Vz.apply(this,arguments)}function Vz(){return(Vz=vn(mn.mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d,p;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,a=t.heartbeatServiceProvider,i=n.fid,o=Az(r),s=Mz(r),!(u=a.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,u.getHeartbeatsHeader();case 8:(c=e.sent)&&s.append("x-firebase-client",c);case 10:return l={fid:i,authVersion:Tz,appId:r.appId,sdkVersion:Ez},h={method:"POST",headers:s,body:JSON.stringify(l)},e.next=14,Lz((function(){return fetch(o,h)}));case 14:if(!(f=e.sent).ok){e.next=23;break}return e.next=18,f.json();case 18:return d=e.sent,p={fid:d.fid||i,registrationStatus:2,refreshToken:d.refreshToken,authToken:Rz(d.authToken)},e.abrupt("return",p);case 23:return e.next=25,Oz("Create Installation",f);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uz(e){return new Promise((function(t){setTimeout(t,e)}))}var jz=/^[cdef][\w-]{21}$/;function zz(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,kn(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return jz.test(t)?t:""}catch(jU){return""}}function Wz(e){return"".concat(e.appName,"!").concat(e.appId)}var Hz=new Map;function Gz(e,t){var n=Wz(e);Kz(n,t),function(e,t){var n=Xz();n&&n.postMessage({key:e,fid:t});Yz()}(n,t)}function Kz(e,t){var n=Hz.get(e);if(n){var r,a=bn(n);try{for(a.s();!(r=a.n()).done;){(0,r.value)(t)}}catch(BZ){a.e(BZ)}finally{a.f()}}}var qz=null;function Xz(){return!qz&&"BroadcastChannel"in self&&((qz=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Kz(e.data.key,e.data.fid)}),qz}function Yz(){0===Hz.size&&qz&&(qz.close(),qz=null)}var $z="firebase-installations-store",Qz=null;function Jz(){return Qz||(Qz=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,a=n.upgrade,i=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=pz(s);return a&&s.addEventListener("upgradeneeded",(function(e){a(pz(s.result),e.oldVersion,e.newVersion,pz(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),i&&e.addEventListener("versionchange",(function(){return i()}))})).catch((function(){})),u}("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore($z)}})),Qz}function Zz(e,t){return eW.apply(this,arguments)}function eW(){return eW=vn(mn.mark((function e(t,n){var r,a,i,o,s;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wz(t),e.next=3,Jz();case 3:return a=e.sent,i=a.transaction($z,"readwrite"),o=i.objectStore($z),e.next=8,o.get(r);case 8:return s=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,i.done;case 13:return s&&s.fid===n.fid||Gz(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),eW.apply(this,arguments)}function tW(e){return nW.apply(this,arguments)}function nW(){return nW=vn(mn.mark((function e(t){var n,r,a;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Wz(t),e.next=3,Jz();case 3:return r=e.sent,a=r.transaction($z,"readwrite"),e.next=7,a.objectStore($z).delete(n);case 7:return e.next=9,a.done;case 9:case"end":return e.stop()}}),e)}))),nW.apply(this,arguments)}function rW(e,t){return aW.apply(this,arguments)}function aW(){return aW=vn(mn.mark((function e(t,n){var r,a,i,o,s,u;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wz(t),e.next=3,Jz();case 3:return a=e.sent,i=a.transaction($z,"readwrite"),o=i.objectStore($z),e.next=8,o.get(r);case 8:if(s=e.sent,void 0!==(u=n(s))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(u,r);case 17:return e.next=19,i.done;case 19:return!u||s&&s.fid===u.fid||Gz(t,u.fid),e.abrupt("return",u);case 21:case"end":return e.stop()}}),e)}))),aW.apply(this,arguments)}function iW(e){return oW.apply(this,arguments)}function oW(){return(oW=vn(mn.mark((function e(t){var n,r;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rW(t.appConfig,(function(e){var r=sW(e),a=uW(t,r);return n=a.registrationPromise,a.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sW(e){return dW(e||{fid:zz(),registrationStatus:0})}function uW(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Iz.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return cW.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:lW(e)}:{installationEntry:t}}function cW(){return(cW=vn(mn.mark((function e(t,n){var r;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bz(t,n);case 3:return r=e.sent,e.abrupt("return",Zz(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!Nz(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,tW(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,Zz(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function lW(e){return hW.apply(this,arguments)}function hW(){return(hW=vn(mn.mark((function e(t){var n,r,a,i;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fW(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,Uz(100);case 6:return e.next=8,fW(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,iW(t);case 14:if(r=e.sent,a=r.installationEntry,!(i=r.registrationPromise)){e.next=21;break}return e.abrupt("return",i);case 21:return e.abrupt("return",a);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fW(e){return rW(e,(function(e){if(!e)throw Iz.create("installation-not-found");return dW(e)}))}function dW(e){return 1===(t=e).registrationStatus&&t.registrationTime+Sz<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function pW(e,t){return vW.apply(this,arguments)}function vW(){return(vW=vn(mn.mark((function e(t,n){var r,a,i,o,s,u,c,l,h,f,d;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,a=t.heartbeatServiceProvider,i=mW(r,n),o=Pz(r,n),!(s=a.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,s.getHeartbeatsHeader();case 7:(u=e.sent)&&o.append("x-firebase-client",u);case 9:return c={installation:{sdkVersion:Ez,appId:r.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},e.next=13,Lz((function(){return fetch(i,l)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return f=e.sent,d=Rz(f),e.abrupt("return",d);case 22:return e.next=24,Oz("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mW(e,t){var n=t.fid;return"".concat(Az(e),"/").concat(n,"/authTokens:generate")}function gW(e){return yW.apply(this,arguments)}function yW(){return yW=vn(mn.mark((function e(t){var n,r,a,i,o=arguments;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,rW(t.appConfig,(function(e){if(!EW(e))throw Iz.create("not-registered");var a=e.authToken;if(!n&&TW(a))return e;if(1===a.requestStatus)return r=bW(t,n),e;if(!navigator.onLine)throw Iz.create("app-offline");var i=_W(e);return r=wW(t,i),i}));case 3:if(a=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=a.authToken;case 11:return i=e.t0,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),yW.apply(this,arguments)}function bW(e,t){return xW.apply(this,arguments)}function xW(){return(xW=vn(mn.mark((function e(t,n){var r,a;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kW(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,Uz(100);case 6:return e.next=8,kW(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(a=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",gW(t,n));case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kW(e){return rW(e,(function(e){if(!EW(e))throw Iz.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+Sz<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function wW(e,t){return SW.apply(this,arguments)}function SW(){return(SW=vn(mn.mark((function e(t,n){var r,a,i;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pW(t,n);case 3:return r=e.sent,a=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,Zz(t.appConfig,a);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!Nz(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,tW(t.appConfig);case 15:e.next=20;break;case 17:return i=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,Zz(t.appConfig,i);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function EW(e){return void 0!==e&&2===e.registrationStatus}function TW(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+_z}(e)}function _W(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function CW(){return(CW=vn(mn.mark((function e(t){var n,r,a,i;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,iW(n);case 3:return r=e.sent,a=r.installationEntry,(i=r.registrationPromise)?i.catch(console.error):gW(n).catch(console.error),e.abrupt("return",a.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IW(){return IW=vn(mn.mark((function e(t){var n,r,a,i=arguments;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],r=t,e.next=4,NW(r);case 4:return e.next=6,gW(r,n);case 6:return a=e.sent,e.abrupt("return",a.token);case 8:case"end":return e.stop()}}),e)}))),IW.apply(this,arguments)}function NW(e){return AW.apply(this,arguments)}function AW(){return(AW=vn(mn.mark((function e(t){var n,r;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iW(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RW(e){return Iz.create("missing-app-config-values",{valueName:e})}var OW,DW="installations",MW=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw RW("App Configuration");if(!e.name)throw RW("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw RW(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:FN(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},PW=function(e){var t=FN(e.getProvider("app").getImmediate(),DW).getImmediate(),n={getId:function(){return function(e){return CW.apply(this,arguments)}(t)},getToken:function(e){return function(e){return IW.apply(this,arguments)}(t,e)}};return n};LN(new YI(DW,MW,"PUBLIC")),LN(new YI("installations-internal",PW,"PRIVATE")),zN(kz,wz),zN(kz,wz,"esm2017");var LW="analytics",FW=6e4,BW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",VW="https://www.googletagmanager.com/gtag/js",UW=new oN("@firebase/analytics");function jW(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function zW(e,t){var n=document.createElement("script");n.src="".concat(VW,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function WW(e,t,n,r,a,i){return HW.apply(this,arguments)}function HW(){return HW=vn(mn.mark((function e(t,n,r,a,i,o){var s,u,c;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a[i],e.prev=1,!s){e.next=7;break}return e.next=5,n[s];case 5:e.next=14;break;case 7:return e.next=9,jW(r);case 9:if(u=e.sent,!(c=u.find((function(e){return e.measurementId===i})))){e.next=14;break}return e.next=14,n[c.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),UW.error(e.t0);case 19:t("config",i,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),HW.apply(this,arguments)}function GW(e,t,n,r,a){return KW.apply(this,arguments)}function KW(){return KW=vn(mn.mark((function e(t,n,r,a,i){var o,s,u,c,l,h;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!i||!i.send_to){e.next=26;break}return s=i.send_to,Array.isArray(s)||(s=[s]),e.next=7,jW(r);case 7:u=e.sent,c=bn(s),e.prev=9,h=function(){var e=l.value,t=u.find((function(t){return t.measurementId===e})),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},c.s();case 12:if((l=c.n()).done){e.next=18;break}if("break"!==h()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",a,i||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),UW.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])}))),KW.apply(this,arguments)}function qW(e,t,n,r,a){var i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[a]&&"function"===typeof window[a]&&(i=window[a]),window[a]=function(e,t,n,r){function a(){return(a=vn(mn.mark((function a(i,o,s){return mn.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,"event"!==i){a.next=6;break}return a.next=4,GW(e,t,n,o,s);case 4:a.next=12;break;case 6:if("config"!==i){a.next=11;break}return a.next=9,WW(e,t,n,r,o,s);case 9:a.next=12;break;case 11:e("set",o);case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),UW.error(a.t0);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return a.apply(this,arguments)}}(i,e,t,n),{gtagCore:i,wrappedGtag:window[a]}}function XW(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(VW))return r}return null}var YW=(AI(OW={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),AI(OW,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),AI(OW,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),AI(OW,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),AI(OW,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),AI(OW,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),AI(OW,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),AI(OW,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),AI(OW,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),AI(OW,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),OW),$W=new jI("analytics","Analytics",YW),QW=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;wn(this,e),this.throttleMetadata=t,this.intervalMillis=n}return En(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),JW=new QW;function ZW(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function eH(e){return tH.apply(this,arguments)}function tH(){return tH=vn(mn.mark((function e(t){var n,r,a,i,o,s,u,c;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,a=t.apiKey,i={method:"GET",headers:ZW(a)},o=BW.replace("{app-id}",r),e.next=5,fetch(o,i);case 5:if(200===(s=e.sent).status||304===s.status){e.next=18;break}return u="",e.prev=8,e.next=11,s.json();case 11:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(u=c.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw $W.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 18:return e.abrupt("return",s.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),tH.apply(this,arguments)}function nH(e){return rH.apply(this,arguments)}function rH(){return rH=vn(mn.mark((function e(t){var n,r,a,i,o,s,u,c,l=arguments;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:JW,r=l.length>2?l[2]:void 0,a=t.options,i=a.appId,o=a.apiKey,s=a.measurementId,i){e.next=5;break}throw $W.create("no-app-id");case 5:if(o){e.next=9;break}if(!s){e.next=8;break}return e.abrupt("return",{measurementId:s,appId:i});case 8:throw $W.create("no-api-key");case 9:return u=n.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new uH,setTimeout(vn(mn.mark((function e(){return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:FW),e.abrupt("return",aH({appId:i,apiKey:o,measurementId:s},u,c,n));case 13:case"end":return e.stop()}}),e)}))),rH.apply(this,arguments)}function aH(e,t,n){return iH.apply(this,arguments)}function iH(){return iH=vn(mn.mark((function e(t,n,r){var a,i,o,s,u,c,l,h,f=arguments;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.throttleEndTimeMillis,i=n.backoffCount,o=f.length>3&&void 0!==f[3]?f[3]:JW,s=t.appId,u=t.measurementId,e.prev=3,e.next=6,oH(r,a);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!u){e.next=13;break}return UW.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(u)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t0.message,"]")),e.abrupt("return",{appId:s,measurementId:u});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,eH(t);case 17:return c=e.sent,o.deleteThrottleMetadata(s),e.abrupt("return",c);case 22:if(e.prev=22,e.t1=e.catch(14),sH(e.t1)){e.next=32;break}if(o.deleteThrottleMetadata(s),!u){e.next=31;break}return UW.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(u)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t1.message,"]")),e.abrupt("return",{appId:s,measurementId:u});case 31:throw e.t1;case 32:return l=503===Number(e.t1.customData.httpStatus)?qI(i,o.intervalMillis,30):qI(i,o.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:i+1},o.setThrottleMetadata(s,h),UW.debug("Calling attemptFetch again in ".concat(l," millis")),e.abrupt("return",aH(t,h,r,o));case 37:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),iH.apply(this,arguments)}function oH(e,t){return new Promise((function(n,r){var a=Math.max(t-Date.now(),0),i=setTimeout(n,a);e.addEventListener((function(){clearTimeout(i),r($W.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function sH(e){if(!(e instanceof UI)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var uH=function(){function e(){wn(this,e),this.listeners=[]}return En(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function cH(){return lH.apply(this,arguments)}function lH(){return(lH=vn(mn.mark((function e(){return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(BI()){e.next=5;break}return UW.warn($W.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,VI();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),UW.warn($W.create("indexeddb-unavailable",{errorInfo:e.t0}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function hH(){return hH=vn(mn.mark((function e(t,n,r,a,i,o,s){var u,c,l,h,f,d,p,v;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=nH(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&UW.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return UW.error(e)})),n.push(c),l=cH().then((function(e){return e?a.getId():void 0})),e.next=6,Promise.all([c,l]);case 6:return h=e.sent,f=bt(h,2),d=f[0],p=f[1],XW()||zW(o,d.measurementId),i("js",new Date),(v=null!==(u=null===s||void 0===s?void 0:s.config)&&void 0!==u?u:{}).origin="firebase",v.update=!0,null!=p&&(v.firebase_id=p),i("config",d.measurementId,v),e.abrupt("return",d.measurementId);case 18:case"end":return e.stop()}}),e)}))),hH.apply(this,arguments)}var fH,dH,pH=function(){function e(t){wn(this,e),this.app=t}return En(e,[{key:"_delete",value:function(){return delete vH[this.app.options.appId],Promise.resolve()}}]),e}(),vH={},mH=[],gH={},yH="dataLayer",bH="gtag",xH=!1;function kH(){var e=[];if(FI()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=$W.create("invalid-analytics-context",{errorInfo:t});UW.warn(n.message)}}function wH(e,t,n){kH();var r=e.options.appId;if(!r)throw $W.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw $W.create("no-api-key");UW.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=vH[r])throw $W.create("already-exists",{id:r});if(!xH){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(yH);var a=qW(vH,mH,gH,yH,bH),i=a.wrappedGtag,o=a.gtagCore;dH=i,fH=o,xH=!0}return vH[r]=function(e,t,n,r,a,i,o){return hH.apply(this,arguments)}(e,mH,gH,t,fH,yH,n),new pH(e)}function SH(){return(SH=vn(mn.mark((function e(t,n,r,a,i){var o,s;return mn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=5;break}return t("event",r,a),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,s=Object.assign(Object.assign({},a),{send_to:o}),t("event",r,s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function EH(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=FN(e,LW);if(n.isInitialized()){var r=n.getImmediate();if(HI(t,n.getOptions()))return r;throw $W.create("already-initialized")}var a=n.initialize({options:t});return a}function TH(e,t,n,r){e=XI(e),function(e,t,n,r,a){return SH.apply(this,arguments)}(dH,vH[e.app.options.appId],t,n,r).catch((function(e){return UW.error(e)}))}var _H="@firebase/analytics",CH="0.7.9";LN(new YI(LW,(function(e,t){var n=t.options;return wH(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),LN(new YI("analytics-internal",(function(e){try{var t=e.getProvider(LW).getImmediate();return{logEvent:function(e,n,r){return TH(t,e,n,r)}}}catch(n){throw $W.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),zN(_H,CH),zN(_H,CH,"esm2017");var IH,NH=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:RN,automaticDataCollectionEnabled:!1},t),a=r.name;if("string"!==typeof a||!a)throw VN.create("bad-app-name",{appName:String(a)});var i=DN.get(a);if(i){if(HI(e,i.options)&&HI(r,i.config))return i;throw VN.create("duplicate-app",{appName:a})}var o,s=new eN(a),u=bn(MN.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(BZ){u.e(BZ)}finally{u.f()}var l=new UN(e,r,s);return DN.set(a,l),l}({apiKey:"AIzaSyCYIWrPFx9NkmP9A30BXxxSYI8AkUITZ2I",authDomain:"motiv-5c37e.firebaseapp.com",projectId:"motiv-5c37e",storageBucket:"motiv-5c37e.appspot.com",messagingSenderId:"178647446445",appId:"1:178647446445:web:f8a04e3441c14c5be52724",measurementId:"G-6LC7JVTVR0"}),AH=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jN(),t=FN(e=XI(e),LW);t.isInitialized()?t.getImmediate():EH(e)}(NH),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jN();return FN(e,"firestore").getImmediate()}(NH)),RH=nt.button(IH||(IH=E(['\n        padding: 0.75rem;\n        padding-right: 1.75rem;\n        padding-left: 1.75rem;\n        font-size: 2rem;\n        background: #5693B6;\n        color: #ffffff;\n        border: 1px solid #4f4f4f;\n        border-radius: 2rem;\n        width: fit-content;\n        font-weight: 400;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n        margin-top: 1rem;\n\n        &:hover {\n            cursor: pointer;\n            background: #7BB1CF;\n        }\n    '])));function OH(){var e=bt((0,w.useState)(0),2),t=e[0],n=e[1],r=bt((0,w.useState)(0),2),a=(r[0],r[1]),i=bt((0,w.useState)(0),2),o=i[0],s=i[1],u=bt((0,w.useState)(!0),2),c=u[0],l=u[1],h=bt((0,w.useState)([]),2),f=h[0],d=h[1],p=bt((0,w.useState)(!1),2),v=p[0],m=p[1],g=bt((0,w.useState)(50),2),y=g[0],b=g[1],x=bt((0,w.useState)(6),2),k=x[0],S=x[1],E=bt((0,w.useState)(!1),2),T=E[0],_=E[1],C=bt((0,w.useState)(""),2),I=(C[0],C[1]),N=bt((0,w.useState)(""),2),A=(N[0],N[1]),R=bt((0,w.useState)(""),2),O=(R[0],R[1]),D=Yt(),M=function(){var e=vn(gn().mark((function e(){var t,n;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xj(AH,"sessions","Session 1"),e.next=3,Zj(t);case 3:(n=e.sent).exists()?(S(n.get("targetReps")),b(n.get("userThreshold")),I(n.get("userName")),A(n.get("leg")),O(n.get("exercise")),"Right"===n.get("leg")&&"HC"===n.get("exercise")&&_(!0),"Left"===n.get("leg")&&"KE"===n.get("exercise")&&_(!0)):console.log("This session hasn't happened yet!");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=vn(gn().mark((function e(){var t;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tz(xj(AH,"sessions","Session 1"),{maxAnglesIMU:f},{merge:!0});case 3:t=e.sent,console.log("Document written w/ maximas array: ",t.id),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error adding/writing to document: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,w.useEffect)((function(){M()})),(0,w.useEffect)((function(){o>=k&&(m(!0),P())}),[o]);var L=(0,w.useCallback)((function(e){d(e)}),[n]),F=((0,w.useCallback)((function(){s((function(e){return e+1}))}),[s]),(0,w.useCallback)((function(e){n(e)}),[n])),B=(0,w.useCallback)((function(e){s((function(e){return e+1}))}),[a]);return(0,rt.jsxs)("div",{style:zH.container,children:[v&&(0,rt.jsx)(RH,{onClick:function(){console.log("ending session"),console.log(f),D("/ending-screen")},children:"End Session"}),c?(0,rt.jsx)("div",{style:zH.displayItems,children:(0,rt.jsx)("div",{style:zH.repsDisplay,children:o})}):(0,rt.jsx)(xI,{}),(0,rt.jsx)(bI,{updateReps:B,setBluetoothStatusTrue:function(){l(!0)},updateAngle:F,updateRepMaxes:L,flipAngle:T,threshold:y}),c&&(0,rt.jsx)(_I,{angle:t,threshold:y}),c?(0,rt.jsx)(fn(),{style:zH.video,mirrored:!0}):(0,rt.jsx)("div",{style:zH.videoPlaceholder,children:"Waiting to connect to motiv sensor..."})]})}var DH,MH,PH,LH,FH,BH,VH,UH,jH,zH={container:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",width:"100vw"},repsDisplay:{fontSize:"4rem",margin:"2rem",height:"6rem",width:"6rem",display:"flex",textAlign:"center",justifyContent:"center",alignItems:"center",background:"#d4f0ff",borderRadius:20,border:"1px solid #4f4f4f"},videoPlaceholder:{zindex:9,height:360,width:480,borderRadius:20,border:"2px solid #4f4f4f",background:"#e0e0e0",color:"#4f4f4f",fontSize:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center"},video:{zindex:9,height:360,borderRadius:20,border:"1px solid #4f4f4f"},displayItems:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},WH=n(134),HH=n.n(WH);function GH(e){var t=nt.div(DH||(DH=E(["\n        padding: 0.5rem;\n        padding-right: 1.5rem;\n        padding-left: 1.5rem;\n        font-size: 1.75rem;\n        background: #5693B6;\n        color: #ffffff;\n        border: 1px solid #4f4f4f;\n        border-radius: 2rem;\n        width: fit-content;\n        font-weight: 400;\n        margin-top: 1rem;\n\n        &:hover {\n            cursor: pointer;\n            background: #7BB1CF;\n        }\n    "])));return(0,rt.jsx)(t,{children:e.children})}function KH(){var e=bt((0,w.useState)("Please choose exercise"),2),t=e[0],n=e[1],r=bt((0,w.useState)(""),2),a=r[0],i=r[1];(0,w.useEffect)((function(){var e=function(){var e=vn(gn().mark((function e(){var t,r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xj(AH,"sessions","Session 1"),e.next=3,Zj(t);case 3:(r=e.sent).exists()?(console.log("Exercise:",r.data("exercise")),n(r.get("exercise"))):console.log("Thxis session hasn't happened yet!");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),"KE"===t?i("https://youtu.be/VuJZ6dqMf8M?t=5"):"HC"===t&&i("https://youtu.be/Fadu_1dGVbE?t=7")}),[t]);var o=nt.div(MH||(MH=E(["\n        background-color: #d4f0ff;\n        margin: auto;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        height: 100vh;\n    "]))),s=nt.div(PH||(PH=E(["\n        font-size: 2rem;\n        color: #4f4f4f;\n        text-align: center;\n        margin-bottom: 2rem;\n    "]))),u=nt.div(LH||(LH=E(["\n        height: 400px;\n        width: 710px;\n        background-color: #d4f0ff;\n    "])));return(0,rt.jsxs)(o,{children:[(0,rt.jsxs)(s,{children:["Next Exercise",(0,rt.jsx)("div",{style:{fontSize:"3rem",fontWeight:500},children:"KE"==t?"Seated Knee Extension":"Standing Hamstring Curl"})]}),(0,rt.jsx)(u,{children:(0,rt.jsx)(HH(),{url:a,width:"100%",height:"100%",muted:!0,playing:!0})}),(0,rt.jsx)(sn,{to:"/camera-setup",style:{textDecoration:"none"},children:(0,rt.jsx)(GH,{children:"\u2794 Next"})})]})}var qH,XH,YH,$H,QH,JH,ZH=nt.div(FH||(FH=E(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    margin: auto;\n    min-height: 100vh;\n    background-color: #d4f0ff;\n"]))),eG=nt.div(BH||(BH=E(["\n    height: 6rem;\n    font-size: 2.5rem;\n"]))),tG=nt.div(VH||(VH=E(["\n    margin-top: 1rem;\n    margin-bottom: 2rem;\n    border: 1px solid #4f4f4f;\n    border-radius: 15px;\n    background: #d1d1d1;\n    height: 2rem;\n    width: 36rem;\n"]))),nG=nt.div(UH||(UH=E(["\n    background: #fadfc5;\n    padding: 1rem;\n    padding-left: 2rem;\n    padding-right: 2rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border: 1px solid #4f4f4f;\n    border-radius: 15px;\n"]))),rG=nt.button(jH||(jH=E(['\n        padding: 0.75rem;\n        padding-right: 1.75rem;\n        padding-left: 1.75rem;\n        font-size: 2rem;\n        background: #5693B6;\n        color: #ffffff;\n        border: 1px solid #4f4f4f;\n        border-radius: 2rem;\n        width: fit-content;\n        font-weight: 400;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n        margin-top: 1rem;\n\n        &:hover {\n            cursor: pointer;\n            background: #7BB1CF;\n        }\n    '])));function aG(){var e=bt((0,w.useState)(!1),2),t=e[0],n=e[1],r=bt((0,w.useState)(!0),2),a=r[0],i=r[1],o=bt((0,w.useState)(0),2),s=o[0],u=o[1],c=bt((0,w.useState)(0),2),l=(c[0],c[1]),h=bt((0,w.useState)([]),2),f=h[0],d=h[1],p=bt((0,w.useState)(6),2),v=p[0],m=p[1],g=bt((0,w.useState)(60),2),y=g[0],b=g[1],x=bt((0,w.useState)(!1),2),k=x[0],S=x[1],E=Yt(),T=function(){var e=vn(gn().mark((function e(){var t,n;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xj(AH,"sessions","Session 1"),e.next=3,Zj(t);case 3:(n=e.sent).exists()?(m(n.get("targetReps")),b(n.get("userThreshold")),"Right"===n.get("right")&&i(!0),"Left"===n.get("leg")&&i(!1)):console.log("This session hasn't happened yet!");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=vn(gn().mark((function e(){var t;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tz(xj(AH,"sessions","Session 1"),{maxAnglesIMU:f},{merge:!0});case 3:t=e.sent,console.log("Document written w/ maximas array: ",t.id),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error adding/writing to document: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,w.useEffect)((function(){T()})),(0,w.useEffect)((function(){f.length>=v&&(S(!0),_())}),[f]);var C=(0,w.useCallback)((function(e){n(e)}),[n]),I=(0,w.useCallback)((function(e){u(e)}),[u]),N=(0,w.useCallback)((function(){l((function(e){return e+1}))}),[l]),A=(0,w.useCallback)((function(e){d(e)}),[d]);return(0,rt.jsxs)(ZH,{children:[(0,rt.jsx)(eG,{children:t?(0,rt.jsxs)("div",{children:["Reps Completed: ",f.length]}):(0,rt.jsx)(nG,{children:"Move your entire body into frame"})}),t?(0,rt.jsx)(_I,{angle:s,targetAngle:y}):(0,rt.jsx)(tG,{}),k?(0,rt.jsx)(rG,{onClick:function(){return E("/ending-screen")},children:"End Session"}):(0,rt.jsx)(yI,{updateInPosition:C,updateAngle:I,updateReps:N,updateRepMaxes:A,rightLegChosen:a,targetAngle:y})]})}var iG=nt.input(qH||(qH=E(['\n    border: none;\n    background: none;\n    border-bottom: 2px solid #4f4f4f;\n    color: #4f4f4f;\n    text-align: center;\n    padding: 1rem;\n    font-size: 3rem;\n    font-weight: 300;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    margin-top: 1rem;\n    margin-bottom: 1rem;\n\n    &:focus {\n        outline: none;\n        border-bottom: 2px solid #217bad;\n    }\n    ']))),oG=nt.div(XH||(XH=E(["\n    margin: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    height: 100vh;\n    background-color: #d4f0ff;\n"]))),sG=nt.div(YH||(YH=E(["\n    font-size: 4rem;\n    font-weight: 600;\n    color: #4f4f4f;\n"]))),uG=nt.div($H||($H=E(["\n    font-size: 2.5rem;\n    font-weight: 300;\n    color: #4f4f4f;\n    margin-top: 5rem;\n"]))),cG=nt.button(QH||(QH=E(['\n        padding: 0.75rem;\n        padding-right: 1.75rem;\n        padding-left: 1.75rem;\n        font-size: 2rem;\n        background: #5693B6;\n        color: #ffffff;\n        border: 1px solid #4f4f4f;\n        border-radius: 2rem;\n        width: fit-content;\n        font-weight: 400;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n        margin-top: 1rem;\n\n        &:hover {\n            cursor: pointer;\n            background: #7BB1CF;\n        }\n    ']))),lG=nt(cG)(JH||(JH=E(["\n    background: #B3D6EA;\n    color: #4f4f4f;\n    font-size: 1.25rem;\n    margin-top: 4rem;\n    \n    &:hover {\n        background: #A0CAE1;\n    }\n"])));function hG(e){var t=bt((0,w.useState)(""),2),n=t[0],r=t[1],a=bt((0,w.useState)(0),2),i=(a[0],a[1],Yt());var o=function(){var e=vn(gn().mark((function e(){var t;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tz(xj(AH,"sessions","Session 1"),{userName:n});case 3:t=e.sent,console.log("Document written w/ name: ",t.id),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error adding/writing to document: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,rt.jsxs)(oG,{children:[(0,rt.jsx)(sG,{children:"Welcome to the motiv demo!"}),(0,rt.jsx)(uG,{children:"To get started, enter your name below"}),(0,rt.jsx)("form",{children:(0,rt.jsx)("div",{children:(0,rt.jsx)(iG,{id:"name",name:"name",type:"text",placeholder:"Name",onChange:function(e){return r(e.target.value)},value:n})})}),(0,rt.jsx)(cG,{onClick:function(){console.log(n),o(),i("/select-exercise")},children:"Get Started"}),(0,rt.jsx)(sn,{to:"/ending-screen",style:{textDecoration:"none"},children:(0,rt.jsx)(lG,{children:"View Last Session"})})]})}var fG="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function dG(e,t,n){var r=n||function(e){return Array.prototype.slice.call(e)},a=!1,i=[];return function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];i=r(o),a||(a=!0,fG.call(window,(function(){a=!1,e.apply(t,i)})))}}var pG=function(e){return"start"===e?"left":"end"===e?"right":"center"},vG=function(e,t,n){return"start"===e?t:"end"===e?n:(t+n)/2};function mG(){}var gG=function(){var e=0;return function(){return e++}}();function yG(e){return null===e||"undefined"===typeof e}function bG(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)}function xG(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}var kG=function(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)};function wG(e,t){return kG(e)?e:t}function SG(e,t){return"undefined"===typeof e?t:e}var EG=function(e,t){return"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e};function TG(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function _G(e,t,n,r){var a,i,o;if(bG(e))if(i=e.length,r)for(a=i-1;a>=0;a--)t.call(n,e[a],a);else for(a=0;a<i;a++)t.call(n,e[a],a);else if(xG(e))for(i=(o=Object.keys(e)).length,a=0;a<i;a++)t.call(n,e[o[a]],o[a])}function CG(e,t){var n,r,a,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(a=e[n],i=t[n],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function IG(e){if(bG(e))return e.map(IG);if(xG(e)){for(var t=Object.create(null),n=Object.keys(e),r=n.length,a=0;a<r;++a)t[n[a]]=IG(e[n[a]]);return t}return e}function NG(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function AG(e,t,n,r){if(NG(e)){var a=t[e],i=n[e];xG(a)&&xG(i)?RG(a,i,r):t[e]=IG(i)}}function RG(e,t,n){var r=bG(t)?t:[t],a=r.length;if(!xG(e))return e;for(var i=(n=n||{}).merger||AG,o=0;o<a;++o)if(xG(t=r[o]))for(var s=Object.keys(t),u=0,c=s.length;u<c;++u)i(s[u],e,t,n);return e}function OG(e,t){return RG(e,t,{merger:DG})}function DG(e,t,n){if(NG(e)){var r=t[e],a=n[e];xG(r)&&xG(a)?OG(r,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=IG(a))}}function MG(e,t){var n=e.indexOf(".",t);return-1===n?e.length:n}function PG(e,t){if(""===t)return e;for(var n=0,r=MG(t,n);e&&r>n;)e=e[t.substr(n,r-n)],r=MG(t,n=r+1);return e}function LG(e){return e.charAt(0).toUpperCase()+e.slice(1)}var FG=function(e){return"undefined"!==typeof e},BG=function(e){return"function"===typeof e},VG=function(e,t){if(e.size!==t.size)return!1;var n,r=bn(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!t.has(a))return!1}}catch(BZ){r.e(BZ)}finally{r.f()}return!0};var UG=Math.PI,jG=2*UG,zG=jG+UG,WG=Number.POSITIVE_INFINITY,HG=UG/180,GG=UG/2,KG=UG/4,qG=2*UG/3,XG=Math.log10,YG=Math.sign;function $G(e){var t=Math.round(e);e=JG(e,t,e/1e3)?t:e;var n=Math.pow(10,Math.floor(XG(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function QG(e){return!isNaN(parseFloat(e))&&isFinite(e)}function JG(e,t,n){return Math.abs(e-t)<n}function ZG(e,t,n){var r,a,i;for(r=0,a=e.length;r<a;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function eK(e){return e*(UG/180)}function tK(e){return e*(180/UG)}function nK(e){if(kG(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}}function rK(e,t){var n=t.x-e.x,r=t.y-e.y,a=Math.sqrt(n*n+r*r),i=Math.atan2(r,n);return i<-.5*UG&&(i+=jG),{angle:i,distance:a}}function aK(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function iK(e,t){return(e-t+zG)%jG-UG}function oK(e){return(e%jG+jG)%jG}function sK(e,t,n,r){var a=oK(e),i=oK(t),o=oK(n),s=oK(i-a),u=oK(o-a),c=oK(a-i),l=oK(a-o);return a===i||a===o||r&&i===o||s>u&&c<l}function uK(e,t,n){return Math.max(t,Math.min(n,e))}function cK(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}var lK=function(e){return 0===e||1===e},hK=function(e,t,n){return-Math.pow(2,10*(e-=1))*Math.sin((e-t)*jG/n)},fK=function(e,t,n){return Math.pow(2,-10*e)*Math.sin((e-t)*jG/n)+1},dK={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*GG)},easeOutSine:function(e){return Math.sin(e*GG)},easeInOutSine:function(e){return-.5*(Math.cos(UG*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return lK(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1)))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){return lK(e)?e:hK(e,.075,.3)},easeOutElastic:function(e){return lK(e)?e:fK(e,.075,.3)},easeInOutElastic:function(e){var t=.1125;return lK(e)?e:e<.5?.5*hK(2*e,t,.45):.5+.5*fK(2*e-1,t,.45)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-dK.easeOutBounce(1-e)},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*dK.easeInBounce(2*e):.5*dK.easeOutBounce(2*e-1)+.5}},pK={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vK="0123456789ABCDEF",mK=function(e){return vK[15&e]},gK=function(e){return vK[(240&e)>>4]+vK[15&e]},yK=function(e){return(240&e)>>4===(15&e)};function bK(e){var t=function(e){return yK(e.r)&&yK(e.g)&&yK(e.b)&&yK(e.a)}(e)?mK:gK;return e?"#"+t(e.r)+t(e.g)+t(e.b)+(e.a<255?t(e.a):""):e}function xK(e){return e+.5|0}var kK=function(e,t,n){return Math.max(Math.min(e,n),t)};function wK(e){return kK(xK(2.55*e),0,255)}function SK(e){return kK(xK(255*e),0,255)}function EK(e){return kK(xK(e/2.55)/100,0,1)}function TK(e){return kK(xK(100*e),0,100)}var _K=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var CK=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function IK(e,t,n){var r=t*Math.min(n,1-n),a=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function NK(e,t,n){var r=function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(a,4-a,1),0)};return[r(5),r(3),r(1)]}function AK(e,t,n){var r,a=IK(e,1,.5);for(t+n>1&&(t*=r=1/(t+n),n*=r),r=0;r<3;r++)a[r]*=1-t-n,a[r]+=t;return a}function RK(e){var t,n,r,a=e.r/255,i=e.g/255,o=e.b/255,s=Math.max(a,i,o),u=Math.min(a,i,o),c=(s+u)/2;return s!==u&&(r=s-u,n=c>.5?r/(2-s-u):r/(s+u),t=60*(t=s===a?(i-o)/r+(i<o?6:0):s===i?(o-a)/r+2:(a-i)/r+4)+.5),[0|t,n||0,c]}function OK(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(SK)}function DK(e,t,n){return OK(IK,e,t,n)}function MK(e){return(e%360+360)%360}function PK(e){var t,n=CK.exec(e),r=255;if(n){n[5]!==t&&(r=n[6]?wK(+n[5]):SK(+n[5]));var a=MK(+n[2]),i=+n[3]/100,o=+n[4]/100;return t="hwb"===n[1]?function(e,t,n){return OK(AK,e,t,n)}(a,i,o):"hsv"===n[1]?function(e,t,n){return OK(NK,e,t,n)}(a,i,o):DK(a,i,o),{r:t[0],g:t[1],b:t[2],a:r}}}var LK,FK={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},BK={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function VK(e){LK||(LK=function(){var e,t,n,r,a,i={},o=Object.keys(BK),s=Object.keys(FK);for(e=0;e<o.length;e++){for(r=a=o[e],t=0;t<s.length;t++)n=s[t],a=a.replace(n,FK[n]);n=parseInt(BK[r],16),i[a]=[n>>16&255,n>>8&255,255&n]}return i}(),LK.transparent=[0,0,0,0]);var t=LK[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}function UK(e,t,n){if(e){var r=RK(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=DK(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function jK(e,t){return e?Object.assign(t||{},e):e}function zK(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=SK(e[3]))):(t=jK(e,{r:0,g:0,b:0,a:1})).a=SK(t.a),t}function WK(e){return"r"===e.charAt(0)?function(e){var t,n,r,a=_K.exec(e),i=255;if(a){if(a[7]!==t){var o=+a[7];i=255&(a[8]?wK(o):255*o)}return t=+a[1],n=+a[3],r=+a[5],{r:t=255&(a[2]?wK(t):t),g:n=255&(a[4]?wK(n):n),b:r=255&(a[6]?wK(r):r),a:i}}}(e):PK(e)}var HK=function(){function e(t){if(wn(this,e),t instanceof e)return t;var n,r=typeof t;"object"===r?n=zK(t):"string"===r&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*pK[e[1]],g:255&17*pK[e[2]],b:255&17*pK[e[3]],a:5===n?17*pK[e[4]]:255}:7!==n&&9!==n||(t={r:pK[e[1]]<<4|pK[e[2]],g:pK[e[3]]<<4|pK[e[4]],b:pK[e[5]]<<4|pK[e[6]],a:9===n?pK[e[7]]<<4|pK[e[8]]:255})),t}(t)||VK(t)||WK(t)),this._rgb=n,this._valid=!!n}return En(e,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var e=jK(this._rgb);return e&&(e.a=EK(e.a)),e},set:function(e){this._rgb=zK(e)}},{key:"rgbString",value:function(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(EK(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):this._rgb}},{key:"hexString",value:function(){return this._valid?bK(this._rgb):this._rgb}},{key:"hslString",value:function(){return this._valid?function(e){if(e){var t=RK(e),n=t[0],r=TK(t[1]),a=TK(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(a,"%, ").concat(EK(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(a,"%)")}}(this._rgb):this._rgb}},{key:"mix",value:function(e,t){var n=this;if(e){var r,a=n.rgb,i=e.rgb,o=t===r?.5:t,s=2*o-1,u=a.a-i.a,c=((s*u===-1?s:(s+u)/(1+s*u))+1)/2;r=1-c,a.r=255&c*a.r+r*i.r+.5,a.g=255&c*a.g+r*i.g+.5,a.b=255&c*a.b+r*i.b+.5,a.a=o*a.a+(1-o)*i.a,n.rgb=a}return n}},{key:"clone",value:function(){return new e(this.rgb)}},{key:"alpha",value:function(e){return this._rgb.a=SK(e),this}},{key:"clearer",value:function(e){return this._rgb.a*=1-e,this}},{key:"greyscale",value:function(){var e=this._rgb,t=xK(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}},{key:"opaquer",value:function(e){return this._rgb.a*=1+e,this}},{key:"negate",value:function(){var e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}},{key:"lighten",value:function(e){return UK(this._rgb,2,e),this}},{key:"darken",value:function(e){return UK(this._rgb,2,-e),this}},{key:"saturate",value:function(e){return UK(this._rgb,1,e),this}},{key:"desaturate",value:function(e){return UK(this._rgb,1,-e),this}},{key:"rotate",value:function(e){return function(e,t){var n=RK(e);n[0]=MK(n[0]+t),n=DK(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}]),e}();function GK(e){return new HK(e)}var KK=function(e){return e instanceof CanvasGradient||e instanceof CanvasPattern};function qK(e){return KK(e)?e:GK(e)}function XK(e){return KK(e)?e:GK(e).saturate(.5).darken(.1).hexString()}var YK=Object.create(null),$K=Object.create(null);function QK(e,t){if(!t)return e;for(var n=t.split("."),r=0,a=n.length;r<a;++r){var i=n[r];e=e[i]||(e[i]=Object.create(null))}return e}function JK(e,t,n){return"string"===typeof t?RG(QK(e,t),n):RG(QK(e,""),t)}var ZK=function(){function e(t){wn(this,e),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(e){return e.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(e,t){return XK(t.backgroundColor)},this.hoverBorderColor=function(e,t){return XK(t.borderColor)},this.hoverColor=function(e,t){return XK(t.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}return En(e,[{key:"set",value:function(e,t){return JK(this,e,t)}},{key:"get",value:function(e){return QK(this,e)}},{key:"describe",value:function(e,t){return JK($K,e,t)}},{key:"override",value:function(e,t){return JK(YK,e,t)}},{key:"route",value:function(e,t,n,r){var a,i=QK(this,e),o=QK(this,n),s="_"+t;Object.defineProperties(i,(AI(a={},s,{value:i[t],writable:!0}),AI(a,t,{enumerable:!0,get:function(){var e=this[s],t=o[r];return xG(e)?Object.assign({},t,e):SG(e,t)},set:function(e){this[s]=e}}),a))}}]),e}(),eq=new ZK({_scriptable:function(e){return!e.startsWith("on")},_indexable:function(e){return"events"!==e},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function tq(e,t,n,r,a){var i=t[a];return i||(i=t[a]=e.measureText(a).width,n.push(a)),i>r&&(r=i),r}function nq(e,t,n,r){var a=(r=r||{}).data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(a=r.data={},i=r.garbageCollect=[],r.font=t),e.save(),e.font=t;var o,s,u,c,l,h=0,f=n.length;for(o=0;o<f;o++)if(void 0!==(c=n[o])&&null!==c&&!0!==bG(c))h=tq(e,a,i,h,c);else if(bG(c))for(s=0,u=c.length;s<u;s++)void 0===(l=c[s])||null===l||bG(l)||(h=tq(e,a,i,h,l));e.restore();var d=i.length/2;if(d>n.length){for(o=0;o<d;o++)delete a[i[o]];i.splice(0,d)}return h}function rq(e,t,n){var r=e.currentDevicePixelRatio,a=0!==n?Math.max(n/2,.5):0;return Math.round((t-a)*r)/r+a}function aq(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function iq(e,t,n,r){var a,i,o,s,u,c=t.pointStyle,l=t.rotation,h=t.radius,f=(l||0)*HG;if(c&&"object"===typeof c&&("[object HTMLImageElement]"===(a=c.toString())||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,r),e.rotate(f),e.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),void e.restore();if(!(isNaN(h)||h<=0)){switch(e.beginPath(),c){default:e.arc(n,r,h,0,jG),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(f)*h,r-Math.cos(f)*h),f+=qG,e.lineTo(n+Math.sin(f)*h,r-Math.cos(f)*h),f+=qG,e.lineTo(n+Math.sin(f)*h,r-Math.cos(f)*h),e.closePath();break;case"rectRounded":s=h-(u=.516*h),i=Math.cos(f+KG)*s,o=Math.sin(f+KG)*s,e.arc(n-i,r-o,u,f-UG,f-GG),e.arc(n+o,r-i,u,f-GG,f),e.arc(n+i,r+o,u,f,f+GG),e.arc(n-o,r+i,u,f+GG,f+UG),e.closePath();break;case"rect":if(!l){s=Math.SQRT1_2*h,e.rect(n-s,r-s,2*s,2*s);break}f+=KG;case"rectRot":i=Math.cos(f)*h,o=Math.sin(f)*h,e.moveTo(n-i,r-o),e.lineTo(n+o,r-i),e.lineTo(n+i,r+o),e.lineTo(n-o,r+i),e.closePath();break;case"crossRot":f+=KG;case"cross":i=Math.cos(f)*h,o=Math.sin(f)*h,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o),e.moveTo(n+o,r-i),e.lineTo(n-o,r+i);break;case"star":i=Math.cos(f)*h,o=Math.sin(f)*h,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o),e.moveTo(n+o,r-i),e.lineTo(n-o,r+i),f+=KG,i=Math.cos(f)*h,o=Math.sin(f)*h,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o),e.moveTo(n+o,r-i),e.lineTo(n-o,r+i);break;case"line":i=Math.cos(f)*h,o=Math.sin(f)*h,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(f)*h,r+Math.sin(f)*h)}e.fill(),t.borderWidth>0&&e.stroke()}}function oq(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function sq(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function uq(e){e.restore()}function cq(e,t,n,r,a){if(!t)return e.lineTo(n.x,n.y);if("middle"===a){var i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===a!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function lq(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function hq(e,t,n,r,a){var i,o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=bG(t)?t:[t],c=s.strokeWidth>0&&""!==s.strokeColor;for(e.save(),e.font=a.string,fq(e,s),i=0;i<u.length;++i)o=u[i],c&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),yG(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(o,n,r,s.maxWidth)),e.fillText(o,n,r,s.maxWidth),dq(e,n,r,o,s),r+=a.lineHeight;e.restore()}function fq(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),yG(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function dq(e,t,n,r,a){if(a.strikethrough||a.underline){var i=e.measureText(r),o=t-i.actualBoundingBoxLeft,s=t+i.actualBoundingBoxRight,u=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,l=a.strikethrough?(u+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(o,l),e.lineTo(s,l),e.stroke()}}function pq(e,t){var n=t.x,r=t.y,a=t.w,i=t.h,o=t.radius;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,-GG,UG,!0),e.lineTo(n,r+i-o.bottomLeft),e.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,UG,GG,!0),e.lineTo(n+a-o.bottomRight,r+i),e.arc(n+a-o.bottomRight,r+i-o.bottomRight,o.bottomRight,GG,0,!0),e.lineTo(n+a,r+o.topRight),e.arc(n+a-o.topRight,r+o.topRight,o.topRight,0,-GG,!0),e.lineTo(n+o.topLeft,r)}var vq=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),mq=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function gq(e,t){var n=(""+e).match(vq);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}var yq=function(e){return+e||0};function bq(e,t){var n,r={},a=xG(t),i=a?Object.keys(t):t,o=xG(e)?a?function(n){return SG(e[n],e[t[n]])}:function(t){return e[t]}:function(){return e},s=bn(i);try{for(s.s();!(n=s.n()).done;){var u=n.value;r[u]=yq(o(u))}}catch(BZ){s.e(BZ)}finally{s.f()}return r}function xq(e){return bq(e,{top:"y",right:"x",bottom:"y",left:"x"})}function kq(e){return bq(e,["topLeft","topRight","bottomLeft","bottomRight"])}function wq(e){var t=xq(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Sq(e,t){e=e||{},t=t||eq.font;var n=SG(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));var r=SG(e.style,t.style);r&&!(""+r).match(mq)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");var a={family:SG(e.family,t.family),lineHeight:gq(SG(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:SG(e.weight,t.weight),string:""};return a.string=function(e){return!e||yG(e.size)||yG(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function Eq(e,t,n,r){var a,i,o,s=!0;for(a=0,i=e.length;a<i;++a)if(void 0!==(o=e[a])&&(void 0!==t&&"function"===typeof o&&(o=o(t),s=!1),void 0!==n&&bG(o)&&(o=o[n%o.length],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}function Tq(e,t){return Object.assign(Object.create(e),t)}function _q(e,t,n){n=n||function(n){return e[n]<t};for(var r,a=e.length-1,i=0;a-i>1;)n(r=i+a>>1)?i=r:a=r;return{lo:i,hi:a}}var Cq=function(e,t,n){return _q(e,n,(function(r){return e[r][t]<n}))},Iq=function(e,t,n){return _q(e,n,(function(r){return e[r][t]>=n}))};var Nq=["push","pop","shift","splice","unshift"];function Aq(e,t){var n=e._chartjs;if(n){var r=n.listeners,a=r.indexOf(t);-1!==a&&r.splice(a,1),r.length>0||(Nq.forEach((function(t){delete e[t]})),delete e._chartjs)}}function Rq(e){var t,n,r=new Set;for(t=0,n=e.length;t<n;++t)r.add(e[t]);return r.size===n?e:Array.from(r)}function Oq(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return e[0]};FG(a)||(a=Hq("_fallback",e));var o=(AI(t={},Symbol.toStringTag,"Object"),AI(t,"_cacheable",!0),AI(t,"_scopes",e),AI(t,"_rootScopes",r),AI(t,"_fallback",a),AI(t,"_getTarget",i),AI(t,"override",(function(t){return Oq([t].concat(kn(e)),n,r,a)})),t);return new Proxy(o,{deleteProperty:function(t,n){return delete t[n],delete t._keys,delete e[0][n],!0},get:function(t,r){return Fq(t,r,(function(){return Wq(r,n,e,t)}))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(e._scopes[0],t)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e[0])},has:function(e,t){return Gq(e).includes(t)},ownKeys:function(e){return Gq(e)},set:function(e,t,n){var r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function Dq(e,t,n,r){var a={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Mq(e,r),setContext:function(t){return Dq(e,t,n,r)},override:function(a){return Dq(e.override(a),t,n,r)}};return new Proxy(a,{deleteProperty:function(t,n){return delete t[n],delete e[n],!0},get:function(e,t,n){return Fq(e,t,(function(){return function(e,t,n){var r=e._proxy,a=e._context,i=e._subProxy,o=e._descriptors,s=r[t];BG(s)&&o.isScriptable(t)&&(s=function(e,t,n,r){var a=n._proxy,i=n._context,o=n._subProxy,s=n._stack;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e),t=t(i,o||r),s.delete(e),Lq(e,t)&&(t=jq(a._scopes,a,e,t));return t}(t,s,e,n));bG(s)&&s.length&&(s=function(e,t,n,r){var a=n._proxy,i=n._context,o=n._subProxy,s=n._descriptors;if(FG(i.index)&&r(e))t=t[i.index%t.length];else if(xG(t[0])){var u=t,c=a._scopes.filter((function(e){return e!==u}));t=[];var l,h=bn(u);try{for(h.s();!(l=h.n()).done;){var f=jq(c,a,e,l.value);t.push(Dq(f,i,o&&o[e],s))}}catch(BZ){h.e(BZ)}finally{h.f()}}return t}(t,s,e,o.isIndexable));Lq(t,s)&&(s=Dq(s,a,i&&i[t],o));return s}(e,t,n)}))},getOwnPropertyDescriptor:function(t,n){return t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e)},has:function(t,n){return Reflect.has(e,n)},ownKeys:function(){return Reflect.ownKeys(e)},set:function(t,n,r){return e[n]=r,delete t[n],!0}})}function Mq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},n=e._scriptable,r=void 0===n?t.scriptable:n,a=e._indexable,i=void 0===a?t.indexable:a,o=e._allKeys,s=void 0===o?t.allKeys:o;return{allKeys:s,scriptable:r,indexable:i,isScriptable:BG(r)?r:function(){return r},isIndexable:BG(i)?i:function(){return i}}}var Pq=function(e,t){return e?e+LG(t):t},Lq=function(e,t){return xG(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object)};function Fq(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];var r=n();return e[t]=r,r}function Bq(e,t,n){return BG(e)?e(t,n):e}var Vq=function(e,t){return!0===e?t:"string"===typeof e?PG(t,e):void 0};function Uq(e,t,n,r,a){var i,o=bn(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=Vq(n,s);if(u){e.add(u);var c=Bq(u._fallback,n,a);if(FG(c)&&c!==n&&c!==r)return c}else if(!1===u&&FG(r)&&n!==r)return null}}catch(BZ){o.e(BZ)}finally{o.f()}return!1}function jq(e,t,n,r){var a=t._rootScopes,i=Bq(t._fallback,n,r),o=[].concat(kn(e),kn(a)),s=new Set;s.add(r);var u=zq(s,o,n,i||n,r);return null!==u&&((!FG(i)||i===n||null!==(u=zq(s,o,i,u,r)))&&Oq(Array.from(s),[""],a,i,(function(){return function(e,t,n){var r=e._getTarget();t in r||(r[t]={});var a=r[t];if(bG(a)&&xG(n))return n;return a}(t,n,r)})))}function zq(e,t,n,r,a){for(;n;)n=Uq(e,t,n,r,a);return n}function Wq(e,t,n,r){var a,i,o=bn(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(a=Hq(Pq(s,e),n),FG(a))return Lq(e,a)?jq(n,r,e,a):a}}catch(BZ){o.e(BZ)}finally{o.f()}}function Hq(e,t){var n,r=bn(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a){var i=a[e];if(FG(i))return i}}}catch(BZ){r.e(BZ)}finally{r.f()}}function Gq(e){var t=e._keys;return t||(t=e._keys=function(e){var t,n=new Set,r=bn(e);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=bn(Object.keys(i).filter((function(e){return!e.startsWith("_")})));try{for(o.s();!(a=o.n()).done;){var s=a.value;n.add(s)}}catch(BZ){o.e(BZ)}finally{o.f()}}}catch(BZ){r.e(BZ)}finally{r.f()}return Array.from(n)}(e._scopes)),t}var Kq=Number.EPSILON||1e-14,qq=function(e,t){return t<e.length&&!e[t].skip&&e[t]},Xq=function(e){return"x"===e?"y":"x"};function Yq(e,t,n,r){var a=e.skip?t:e,i=t,o=n.skip?t:n,s=aK(i,a),u=aK(o,i),c=s/(s+u),l=u/(s+u),h=r*(c=isNaN(c)?0:c),f=r*(l=isNaN(l)?0:l);return{previous:{x:i.x-h*(o.x-a.x),y:i.y-h*(o.y-a.y)},next:{x:i.x+f*(o.x-a.x),y:i.y+f*(o.y-a.y)}}}function $q(e,t,n){for(var r,a,i,o,s,u=e.length,c=qq(e,0),l=0;l<u-1;++l)s=c,c=qq(e,l+1),s&&c&&(JG(t[l],0,Kq)?n[l]=n[l+1]=0:(r=n[l]/t[l],a=n[l+1]/t[l],(o=Math.pow(r,2)+Math.pow(a,2))<=9||(i=3/Math.sqrt(o),n[l]=r*i*t[l],n[l+1]=a*i*t[l])))}function Qq(e,t){for(var n,r,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",o=Xq(i),s=e.length,u=qq(e,0),c=0;c<s;++c)if(r=a,a=u,u=qq(e,c+1),a){var l=a[i],h=a[o];r&&(n=(l-r[i])/3,a["cp1".concat(i)]=l-n,a["cp1".concat(o)]=h-n*t[c]),u&&(n=(u[i]-l)/3,a["cp2".concat(i)]=l+n,a["cp2".concat(o)]=h+n*t[c])}}function Jq(e,t,n){return Math.max(Math.min(e,n),t)}function Zq(e,t,n,r,a){var i,o,s,u;if(t.spanGaps&&(e=e.filter((function(e){return!e.skip}))),"monotone"===t.cubicInterpolationMode)!function(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=Xq(a),o=e.length,s=Array(o).fill(0),u=Array(o),c=qq(e,0);for(t=0;t<o;++t)if(n=r,r=c,c=qq(e,t+1),r){if(c){var l=c[a]-r[a];s[t]=0!==l?(c[i]-r[i])/l:0}u[t]=n?c?YG(s[t-1])!==YG(s[t])?0:(s[t-1]+s[t])/2:s[t-1]:s[t]}$q(e,s,u),Qq(e,u,a)}(e,a);else{var c=r?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)u=Yq(c,s=e[i],e[Math.min(i+1,o-(r?0:1))%o],t.tension),s.cp1x=u.previous.x,s.cp1y=u.previous.y,s.cp2x=u.next.x,s.cp2y=u.next.y,c=s}t.capBezierPoints&&function(e,t){var n,r,a,i,o,s=oq(e[0],t);for(n=0,r=e.length;n<r;++n)o=i,i=s,s=n<r-1&&oq(e[n+1],t),i&&(a=e[n],o&&(a.cp1x=Jq(a.cp1x,t.left,t.right),a.cp1y=Jq(a.cp1y,t.top,t.bottom)),s&&(a.cp2x=Jq(a.cp2x,t.left,t.right),a.cp2y=Jq(a.cp2y,t.top,t.bottom)))}(e,n)}function eX(){return"undefined"!==typeof window&&"undefined"!==typeof document}function tX(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function nX(e,t,n){var r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}var rX=function(e){return window.getComputedStyle(e,null)};var aX=["top","right","bottom","left"];function iX(e,t,n){var r={};n=n?"-"+n:"";for(var a=0;a<4;a++){var i=aX[a];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function oX(e,t){var n=t.canvas,r=t.currentDevicePixelRatio,a=rX(n),i="border-box"===a.boxSizing,o=iX(a,"padding"),s=iX(a,"border","width"),u=function(e,t){var n,r,a=e.native||e,i=a.touches,o=i&&i.length?i[0]:a,s=o.offsetX,u=o.offsetY,c=!1;if(function(e,t,n){return(e>0||t>0)&&(!n||!n.shadowRoot)}(s,u,a.target))n=s,r=u;else{var l=t.getBoundingClientRect();n=o.clientX-l.left,r=o.clientY-l.top,c=!0}return{x:n,y:r,box:c}}(e,n),c=u.x,l=u.y,h=u.box,f=o.left+(h&&s.left),d=o.top+(h&&s.top),p=t.width,v=t.height;return i&&(p-=o.width+s.width,v-=o.height+s.height),{x:Math.round((c-f)/p*n.width/r),y:Math.round((l-d)/v*n.height/r)}}var sX=function(e){return Math.round(10*e)/10};function uX(e,t,n,r){var a=rX(e),i=iX(a,"margin"),o=nX(a.maxWidth,e,"clientWidth")||WG,s=nX(a.maxHeight,e,"clientHeight")||WG,u=function(e,t,n){var r,a;if(void 0===t||void 0===n){var i=tX(e);if(i){var o=i.getBoundingClientRect(),s=rX(i),u=iX(s,"border","width"),c=iX(s,"padding");t=o.width-c.width-u.width,n=o.height-c.height-u.height,r=nX(s.maxWidth,i,"clientWidth"),a=nX(s.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||WG,maxHeight:a||WG}}(e,t,n),c=u.width,l=u.height;if("content-box"===a.boxSizing){var h=iX(a,"border","width"),f=iX(a,"padding");c-=f.width+h.width,l-=f.height+h.height}return c=Math.max(0,c-i.width),l=Math.max(0,r?Math.floor(c/r):l-i.height),c=sX(Math.min(c,o,u.maxWidth)),l=sX(Math.min(l,s,u.maxHeight)),c&&!l&&(l=sX(c/2)),{width:c,height:l}}function cX(e,t,n){var r=t||1,a=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=a/r,e.width=i/r;var o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==a||o.width!==i)&&(e.currentDevicePixelRatio=r,o.height=a,o.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0)}var lX=function(){var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(n){}return e}();function hX(e,t){var n=function(e,t){return rX(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function fX(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function dX(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function pX(e,t,n,r){var a={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=fX(e,a,n),s=fX(a,i,n),u=fX(i,t,n),c=fX(o,s,n),l=fX(s,u,n);return fX(c,l,n)}var vX=new Map;function mX(e,t,n){return function(e,t){t=t||{};var n=e+JSON.stringify(t),r=vX.get(n);return r||(r=new Intl.NumberFormat(e,t),vX.set(n,r)),r}(t,n).format(e)}function gX(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}}function yX(e,t){var n,r;"ltr"!==t&&"rtl"!==t||(r=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function bX(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function xX(e){return"angle"===e?{between:sK,compare:iK,normalize:oK}:{between:cK,compare:function(e,t){return e-t},normalize:function(e){return e}}}function kX(e){var t=e.start,n=e.end,r=e.count;return{start:t%r,end:n%r,loop:e.loop&&(n-t+1)%r===0,style:e.style}}function wX(e,t,n){if(!n)return[e];for(var r,a,i,o=n.property,s=n.start,u=n.end,c=t.length,l=xX(o),h=l.compare,f=l.between,d=l.normalize,p=function(e,t,n){var r,a,i=n.property,o=n.start,s=n.end,u=xX(i),c=u.between,l=u.normalize,h=t.length,f=e.start,d=e.end,p=e.loop;if(p){for(f+=h,d+=h,r=0,a=h;r<a&&c(l(t[f%h][i]),o,s);++r)f--,d--;f%=h,d%=h}return d<f&&(d+=h),{start:f,end:d,loop:p,style:e.style}}(e,t,n),v=p.start,m=p.end,g=p.loop,y=p.style,b=[],x=!1,k=null,w=function(){return x||f(s,i,r)&&0!==h(s,i)},S=function(){return!x||0===h(u,r)||f(u,i,r)},E=v,T=v;E<=m;++E)(a=t[E%c]).skip||(r=d(a[o]))!==i&&(x=f(r,s,u),null===k&&w()&&(k=0===h(r,s)?E:T),null!==k&&S()&&(b.push(kX({start:k,end:E,loop:g,count:c,style:y})),k=null),T=E,i=r);return null!==k&&b.push(kX({start:k,end:m,loop:g,count:c,style:y})),b}function SX(e,t){for(var n=[],r=e.segments,a=0;a<r.length;a++){var i=wX(r[a],e.points,t);i.length&&n.push.apply(n,kn(i))}return n}function EX(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){var a=e._chart.getContext(),i=TX(e.options),o=e._datasetIndex,s=e.options.spanGaps,u=n.length,c=[],l=i,h=t[0].start,f=h;function d(e,t,r,a){var i=s?-1:1;if(e!==t){for(e+=u;n[e%u].skip;)e-=i;for(;n[t%u].skip;)t+=i;e%u!==t%u&&(c.push({start:e%u,end:t%u,loop:r,style:a}),l=a,h=t%u)}}var p,v=bn(t);try{for(v.s();!(p=v.n()).done;){var m=p.value;h=s?h:m.start;var g=n[h%u],y=void 0;for(f=h+1;f<=m.end;f++){var b=n[f%u];_X(y=TX(r.setContext(Tq(a,{type:"segment",p0:g,p1:b,p0DataIndex:(f-1)%u,p1DataIndex:f%u,datasetIndex:o}))),l)&&d(h,f-1,m.loop,l),g=b,l=y}h<f-1&&d(h,f-1,m.loop,l)}}catch(BZ){v.e(BZ)}finally{v.f()}return c}(e,t,n,r):t}function TX(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function _X(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var CX=function(){function e(){wn(this,e),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}return En(e,[{key:"_notify",value:function(e,t,n,r){var a=t.listeners[r],i=t.duration;a.forEach((function(r){return r({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)})}))}},{key:"_refresh",value:function(){var e=this;this._request||(this._running=!0,this._request=fG.call(window,(function(){e._update(),e._request=null,e._running&&e._refresh()})))}},{key:"_update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=0;this._charts.forEach((function(r,a){if(r.running&&r.items.length){for(var i,o=r.items,s=o.length-1,u=!1;s>=0;--s)(i=o[s])._active?(i._total>r.duration&&(r.duration=i._total),i.tick(t),u=!0):(o[s]=o[o.length-1],o.pop());u&&(a.draw(),e._notify(a,r,t,"progress")),o.length||(r.running=!1,e._notify(a,r,t,"complete"),r.initial=!1),n+=o.length}})),this._lastDate=t,0===n&&(this._running=!1)}},{key:"_getAnims",value:function(e){var t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}},{key:"listen",value:function(e,t,n){this._getAnims(e).listeners[t].push(n)}},{key:"add",value:function(e,t){var n;t&&t.length&&(n=this._getAnims(e).items).push.apply(n,kn(t))}},{key:"has",value:function(e){return this._getAnims(e).items.length>0}},{key:"start",value:function(e){var t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((function(e,t){return Math.max(e,t._duration)}),0),this._refresh())}},{key:"running",value:function(e){if(!this._running)return!1;var t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}},{key:"stop",value:function(e){var t=this._charts.get(e);if(t&&t.items.length){for(var n=t.items,r=n.length-1;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}}},{key:"remove",value:function(e){return this._charts.delete(e)}}]),e}(),IX=new CX,NX="transparent",AX={boolean:function(e,t,n){return n>.5?t:e},color:function(e,t,n){var r=qK(e||NX),a=r.valid&&qK(t||NX);return a&&a.valid?a.mix(r,n).hexString():t},number:function(e,t,n){return e+(t-e)*n}},RX=function(){function e(t,n,r,a){wn(this,e);var i=n[r];a=Eq([t.to,a,i,t.from]);var o=Eq([t.from,i,a]);this._active=!0,this._fn=t.fn||AX[t.type||typeof o],this._easing=dK[t.easing]||dK.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=o,this._to=a,this._promises=void 0}return En(e,[{key:"active",value:function(){return this._active}},{key:"update",value:function(e,t,n){if(this._active){this._notify(!1);var r=this._target[this._prop],a=n-this._start,i=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Eq([e.to,t,r,e.from]),this._from=Eq([e.from,r,t])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(e){var t,n=e-this._start,r=this._duration,a=this._prop,i=this._from,o=this._loop,s=this._to;if(this._active=i!==s&&(o||n<r),!this._active)return this._target[a]=s,void this._notify(!0);n<0?this._target[a]=i:(t=n/r%2,t=o&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[a]=this._fn(i,s,t))}},{key:"wait",value:function(){var e=this._promises||(this._promises=[]);return new Promise((function(t,n){e.push({res:t,rej:n})}))}},{key:"_notify",value:function(e){for(var t=e?"res":"rej",n=this._promises||[],r=0;r<n.length;r++)n[r][t]()}}]),e}();eq.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var OX=Object.keys(eq.animation);eq.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(e){return"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}}),eq.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),eq.describe("animations",{_fallback:"animation"}),eq.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(e){return 0|e}}}}});var DX=function(){function e(t,n){wn(this,e),this._chart=t,this._properties=new Map,this.configure(n)}return En(e,[{key:"configure",value:function(e){if(xG(e)){var t=this._properties;Object.getOwnPropertyNames(e).forEach((function(n){var r=e[n];if(xG(r)){var a,i={},o=bn(OX);try{for(o.s();!(a=o.n()).done;){var s=a.value;i[s]=r[s]}}catch(BZ){o.e(BZ)}finally{o.f()}(bG(r.properties)&&r.properties||[n]).forEach((function(e){e!==n&&t.has(e)||t.set(e,i)}))}}))}}},{key:"_animateOptions",value:function(e,t){var n=t.options,r=function(e,t){if(!t)return;var n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];var a=this._createAnimations(r,n);return n.$shared&&function(e,t){for(var n=[],r=Object.keys(t),a=0;a<r.length;a++){var i=e[r[a]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(e.options.$animations,n).then((function(){e.options=n}),(function(){})),a}},{key:"_createAnimations",value:function(e,t){var n,r=this._properties,a=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();for(n=o.length-1;n>=0;--n){var u=o[n];if("$"!==u.charAt(0))if("options"!==u){var c=t[u],l=i[u],h=r.get(u);if(l){if(h&&l.active()){l.update(h,c,s);continue}l.cancel()}h&&h.duration?(i[u]=l=new RX(h,e,u,c),a.push(l)):e[u]=c}else a.push.apply(a,kn(this._animateOptions(e,t)))}return a}},{key:"update",value:function(e,t){if(0!==this._properties.size){var n=this._createAnimations(e,t);return n.length?(IX.add(this._chart,n),!0):void 0}Object.assign(e,t)}}]),e}();function MX(e,t){var n=e&&e.options||{},r=n.reverse,a=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:r?i:a,end:r?a:i}}function PX(e,t){var n,r,a=[],i=e._getSortedDatasetMetas(t);for(n=0,r=i.length;n<r;++n)a.push(i[n].index);return a}function LX(e,t,n){var r,a,i,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=e.keys,c="single"===s.mode;if(null!==t){for(r=0,a=u.length;r<a;++r){if((i=+u[r])===n){if(s.all)continue;break}o=e.values[i],kG(o)&&(c||0===t||YG(t)===YG(o))&&(t+=o)}return t}}function FX(e,t){var n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function BX(e,t,n){var r=e[t]||(e[t]={});return r[n]||(r[n]={})}function VX(e,t,n,r){var a,i=bn(t.getMatchingVisibleMetas(r).reverse());try{for(i.s();!(a=i.n()).done;){var o=a.value,s=e[o.index];if(n&&s>0||!n&&s<0)return o.index}}catch(BZ){i.e(BZ)}finally{i.f()}return null}function UX(e,t){for(var n,r=e.chart,a=e._cachedMeta,i=r._stacks||(r._stacks={}),o=a.iScale,s=a.vScale,u=a.index,c=o.axis,l=s.axis,h=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(o,s,a),f=t.length,d=0;d<f;++d){var p=t[d],v=p[c],m=p[l];(n=(p._stacks||(p._stacks={}))[l]=BX(i,h,v))[u]=m,n._top=VX(n,s,!0,a.type),n._bottom=VX(n,s,!1,a.type)}}function jX(e,t){var n=e.scales;return Object.keys(n).filter((function(e){return n[e].axis===t})).shift()}function zX(e,t){var n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){var a,i=bn(t=t||e._parsed);try{for(i.s();!(a=i.n()).done;){var o=a.value._stacks;if(!o||void 0===o[r]||void 0===o[r][n])return;delete o[r][n]}}catch(BZ){i.e(BZ)}finally{i.f()}}}var WX=function(e){return"reset"===e||"none"===e},HX=function(e,t){return t?e:Object.assign({},e)},GX=function(){function e(t,n){wn(this,e),this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}return En(e,[{key:"initialize",value:function(){var e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=FX(e.vScale,e),this.addElements()}},{key:"updateIndex",value:function(e){this.index!==e&&zX(this._cachedMeta),this.index=e}},{key:"linkScales",value:function(){var e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=function(e,t,n,r){return"x"===e?t:"r"===e?r:n},a=t.xAxisID=SG(n.xAxisID,jX(e,"x")),i=t.yAxisID=SG(n.yAxisID,jX(e,"y")),o=t.rAxisID=SG(n.rAxisID,jX(e,"r")),s=t.indexAxis,u=t.iAxisID=r(s,a,i,o),c=t.vAxisID=r(s,i,a,o);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(c)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(e){return this.chart.scales[e]}},{key:"_getOtherScale",value:function(e){var t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var e=this._cachedMeta;this._data&&Aq(this._data,this),e._stacked&&zX(e)}},{key:"_dataCheck",value:function(){var e,t,n=this.getDataset(),r=n.data||(n.data=[]),a=this._data;if(xG(r))this._data=function(e){var t,n,r,a=Object.keys(e),i=new Array(a.length);for(t=0,n=a.length;t<n;++t)r=a[t],i[t]={x:r,y:e[r]};return i}(r);else if(a!==r){if(a){Aq(a,this);var i=this._cachedMeta;zX(i),i._parsed=[]}r&&Object.isExtensible(r)&&(t=this,(e=r)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Nq.forEach((function(t){var n="_onData"+LG(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];var o=r.apply(this,a);return e._chartjs.listeners.forEach((function(e){"function"===typeof e[n]&&e[n].apply(e,a)})),o}})})))),this._syncList=[],this._data=r}}},{key:"addElements",value:function(){var e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(e){var t=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();var a=t._stacked;t._stacked=FX(t.vScale,t),t.stack!==n.stack&&(r=!0,zX(t),t.stack=n.stack),this._resyncElements(e),(r||a!==t._stacked)&&UX(this,t._parsed)}},{key:"configure",value:function(){var e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(e,t){var n,r,a,i=this._cachedMeta,o=this._data,s=i.iScale,u=i._stacked,c=s.axis,l=0===e&&t===o.length||i._sorted,h=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=o,i._sorted=!0,a=o;else{a=bG(o[e])?this.parseArrayData(i,o,e,t):xG(o[e])?this.parseObjectData(i,o,e,t):this.parsePrimitiveData(i,o,e,t);for(n=0;n<t;++n)i._parsed[n+e]=r=a[n],l&&((null===r[c]||h&&r[c]<h[c])&&(l=!1),h=r);i._sorted=l}u&&UX(this,a)}},{key:"parsePrimitiveData",value:function(e,t,n,r){var a,i,o,s=e.iScale,u=e.vScale,c=s.axis,l=u.axis,h=s.getLabels(),f=s===u,d=new Array(r);for(a=0,i=r;a<i;++a){var p;o=a+n,d[a]=(AI(p={},c,f||s.parse(h[o],o)),AI(p,l,u.parse(t[o],o)),p)}return d}},{key:"parseArrayData",value:function(e,t,n,r){var a,i,o,s,u=e.xScale,c=e.yScale,l=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],l[a]={x:u.parse(s[0],o),y:c.parse(s[1],o)};return l}},{key:"parseObjectData",value:function(e,t,n,r){var a,i,o,s,u=e.xScale,c=e.yScale,l=this._parsing,h=l.xAxisKey,f=void 0===h?"x":h,d=l.yAxisKey,p=void 0===d?"y":d,v=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],v[a]={x:u.parse(PG(s,f),o),y:c.parse(PG(s,p),o)};return v}},{key:"getParsed",value:function(e){return this._cachedMeta._parsed[e]}},{key:"getDataElement",value:function(e){return this._cachedMeta.data[e]}},{key:"applyStack",value:function(e,t,n){var r=this.chart,a=this._cachedMeta,i=t[e.axis];return LX({keys:PX(r,!0),values:t._stacks[e.axis]},i,a.index,{mode:n})}},{key:"updateRangeFromParsed",value:function(e,t,n,r){var a=n[t.axis],i=null===a?NaN:a,o=r&&n._stacks[t.axis];r&&o&&(r.values=o,i=LX(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}},{key:"getMinMax",value:function(e,t){var n,r,a=this._cachedMeta,i=a._parsed,o=a._sorted&&e===a.iScale,s=i.length,u=this._getOtherScale(e),c=function(e,t,n){return e&&!t.hidden&&t._stacked&&{keys:PX(n,!0),values:null}}(t,a,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},h=function(e){var t=e.getUserBounds(),n=t.min,r=t.max,a=t.minDefined,i=t.maxDefined;return{min:a?n:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}(u),f=h.min,d=h.max;function p(){var t=(r=i[n])[u.axis];return!kG(r[e.axis])||f>t||d<t}for(n=0;n<s&&(p()||(this.updateRangeFromParsed(l,e,r,c),!o));++n);if(o)for(n=s-1;n>=0;--n)if(!p()){this.updateRangeFromParsed(l,e,r,c);break}return l}},{key:"getAllParsedValues",value:function(e){var t,n,r,a=this._cachedMeta._parsed,i=[];for(t=0,n=a.length;t<n;++t)r=a[t][e.axis],kG(r)&&i.push(r);return i}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}},{key:"_update",value:function(e){var t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){var t,n,r,a;return xG(e)?(t=e.top,n=e.right,r=e.bottom,a=e.left):t=n=r=a=e,{top:t,right:n,bottom:r,left:a,disabled:!1===e}}(SG(this.options.clip,function(e,t,n){if(!1===n)return!1;var r=MX(e,n),a=MX(t,n);return{top:a.end,right:r.end,bottom:a.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}},{key:"update",value:function(e){}},{key:"draw",value:function(){var e,t=this._ctx,n=this.chart,r=this._cachedMeta,a=r.data||[],i=n.chartArea,o=[],s=this._drawStart||0,u=this._drawCount||a.length-s,c=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(t,i,s,u),e=s;e<s+u;++e){var l=a[e];l.hidden||(l.active&&c?o.push(l):l.draw(t,i))}for(e=0;e<o.length;++e)o[e].draw(t,i)}},{key:"getStyle",value:function(e,t){var n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}},{key:"getContext",value:function(e,t,n){var r,a=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){var i=this._cachedMeta.data[e];r=i.$context||(i.$context=function(e,t,n){return Tq(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,i)),r.parsed=this.getParsed(e),r.raw=a.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Tq(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=a,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}},{key:"resolveDatasetElementOptions",value:function(e){return this._resolveElementOptions(this.datasetElementType.id,e)}},{key:"resolveDataElementOptions",value:function(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}},{key:"_resolveElementOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0,a="active"===n,i=this._cachedDataOpts,o=e+"-"+n,s=i[o],u=this.enableOptionSharing&&FG(r);if(s)return HX(s,u);var c=this.chart.config,l=c.datasetElementScopeKeys(this._type,e),h=a?["".concat(e,"Hover"),"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),l),d=Object.keys(eq.elements[e]),p=function(){return t.getContext(r,a)},v=c.resolveNamedOptions(f,d,p,h);return v.$shared&&(v.$shared=u,i[o]=Object.freeze(HX(v,u))),v}},{key:"_resolveAnimations",value:function(e,t,n){var r,a=this.chart,i=this._cachedDataOpts,o="animation-".concat(t),s=i[o];if(s)return s;if(!1!==a.options.animation){var u=this.chart.config,c=u.datasetAnimationScopeKeys(this._type,t),l=u.getOptionScopes(this.getDataset(),c);r=u.createResolver(l,this.getContext(e,n,t))}var h=new DX(a,r&&r.animations);return r&&r._cacheable&&(i[o]=Object.freeze(h)),h}},{key:"getSharedOptions",value:function(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}},{key:"includeOptions",value:function(e,t){return!t||WX(e)||this.chart._animationsDisabled}},{key:"updateElement",value:function(e,t,n,r){WX(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}},{key:"updateSharedOptions",value:function(e,t,n){e&&!WX(t)&&this._resolveAnimations(void 0,t).update(e,n)}},{key:"_setStyle",value:function(e,t,n,r){e.active=r;var a=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}},{key:"removeHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!1)}},{key:"setHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}},{key:"_resyncElements",value:function(e){var t,n=this._data,r=this._cachedMeta.data,a=bn(this._syncList);try{for(a.s();!(t=a.n()).done;){var i=bt(t.value,3),o=i[0],s=i[1],u=i[2];this[o](s,u)}}catch(BZ){a.e(BZ)}finally{a.f()}this._syncList=[];var c=r.length,l=n.length,h=Math.min(l,c);h&&this.parse(0,h),l>c?this._insertElements(c,l-c,e):l<c&&this._removeElements(l,c-l)}},{key:"_insertElements",value:function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this._cachedMeta,i=a.data,o=e+t,s=function(e){for(e.length+=t,n=e.length-1;n>=o;n--)e[n]=e[n-t]};for(s(i),n=e;n<o;++n)i[n]=new this.dataElementType;this._parsing&&s(a._parsed),this.parse(e,t),r&&this.updateElements(i,e,t,"reset")}},{key:"updateElements",value:function(e,t,n,r){}},{key:"_removeElements",value:function(e,t){var n=this._cachedMeta;if(this._parsing){var r=n._parsed.splice(e,t);n._stacked&&zX(n,r)}n.data.splice(e,t)}},{key:"_sync",value:function(e){if(this._parsing)this._syncList.push(e);else{var t=bt(e,3),n=t[0],r=t[1],a=t[2];this[n](r,a)}this.chart._dataChanges.push([this.index].concat(kn(e)))}},{key:"_onDataPush",value:function(){var e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(e,t){t&&this._sync(["_removeElements",e,t]);var n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}]),e}();function KX(e){var t,n,r,a,i=e.iScale,o=function(e,t){if(!e._cache.$bar){for(var n=e.getMatchingVisibleMetas(t),r=[],a=0,i=n.length;a<i;a++)r=r.concat(n[a].controller.getAllParsedValues(e));e._cache.$bar=Rq(r.sort((function(e,t){return e-t})))}return e._cache.$bar}(i,e.type),s=i._length,u=function(){32767!==r&&-32768!==r&&(FG(a)&&(s=Math.min(s,Math.abs(r-a)||s)),a=r)};for(t=0,n=o.length;t<n;++t)r=i.getPixelForValue(o[t]),u();for(a=void 0,t=0,n=i.ticks.length;t<n;++t)r=i.getPixelForTick(t),u();return s}function qX(e,t,n,r){return bG(e)?function(e,t,n,r){var a=n.parse(e[0],r),i=n.parse(e[1],r),o=Math.min(a,i),s=Math.max(a,i),u=o,c=s;Math.abs(o)>Math.abs(s)&&(u=s,c=o),t[n.axis]=c,t._custom={barStart:u,barEnd:c,start:a,end:i,min:o,max:s}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function XX(e,t,n,r){var a,i,o,s,u=e.iScale,c=e.vScale,l=u.getLabels(),h=u===c,f=[];for(a=n,i=n+r;a<i;++a)s=t[a],(o={})[u.axis]=h||u.parse(l[a],a),f.push(qX(s,o,c,a));return f}function YX(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function $X(e,t,n,r){var a=t.borderSkipped,i={};if(a){var o=function(e){var t,n,r,a,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(a="end",i="start"):(a="start",i="end"),{start:n,end:r,reverse:t,top:a,bottom:i}}(e),s=o.start,u=o.end,c=o.reverse,l=o.top,h=o.bottom;"middle"===a&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?a=l:(n._bottom||0)===r?a=h:(i[QX(h,s,u,c)]=!0,a=l)),i[QX(a,s,u,c)]=!0,e.borderSkipped=i}else e.borderSkipped=i}function QX(e,t,n,r){var a,i,o;return r?(o=n,e=JX(e=(a=e)===(i=t)?o:a===o?i:a,n,t)):e=JX(e,t,n),e}function JX(e,t,n){return"start"===e?t:"end"===e?n:e}function ZX(e,t,n){var r=t.inflateAmount;e.inflateAmount="auto"===r?1===n?.33:0:r}GX.defaults={},GX.prototype.datasetElementType=null,GX.prototype.dataElementType=null;var eY=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"parsePrimitiveData",value:function(e,t,n,r){return XX(e,t,n,r)}},{key:"parseArrayData",value:function(e,t,n,r){return XX(e,t,n,r)}},{key:"parseObjectData",value:function(e,t,n,r){var a,i,o,s,u=e.iScale,c=e.vScale,l=this._parsing,h=l.xAxisKey,f=void 0===h?"x":h,d=l.yAxisKey,p=void 0===d?"y":d,v="x"===u.axis?f:p,m="x"===c.axis?f:p,g=[];for(a=n,i=n+r;a<i;++a)s=t[a],(o={})[u.axis]=u.parse(PG(s,v),a),g.push(qX(PG(s,m),o,c,a));return g}},{key:"updateRangeFromParsed",value:function(e,t,r,a){NI(Po(n.prototype),"updateRangeFromParsed",this).call(this,e,t,r,a);var i=r._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,a=this.getParsed(e),i=a._custom,o=YX(i)?"["+i.start+", "+i.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:o}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,NI(Po(n.prototype),"initialize",this).call(this),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(e){var t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}},{key:"updateElements",value:function(e,t,n,r){var a="reset"===r,i=this.index,o=this._cachedMeta.vScale,s=o.getBasePixel(),u=o.isHorizontal(),c=this._getRuler(),l=this.resolveDataElementOptions(t,r),h=this.getSharedOptions(l),f=this.includeOptions(r,h);this.updateSharedOptions(h,r,l);for(var d=t;d<t+n;d++){var p=this.getParsed(d),v=a||yG(p[o.axis])?{base:s,head:s}:this._calculateBarValuePixels(d),m=this._calculateBarIndexPixels(d,c),g=(p._stacks||{})[o.axis],y={horizontal:u,base:v.base,enableBorderRadius:!g||YX(p._custom)||i===g._top||i===g._bottom,x:u?v.head:m.center,y:u?m.center:v.head,height:u?m.size:Math.abs(v.size),width:u?Math.abs(v.size):m.size};f&&(y.options=h||this.resolveDataElementOptions(d,e[d].active?"active":r));var b=y.options||e[d].options;$X(y,b,g,i),ZX(y,b,c.ratio),this.updateElement(e[d],d,y,r)}}},{key:"_getStacks",value:function(e,t){var n,r,a=this._cachedMeta.iScale,i=a.getMatchingVisibleMetas(this._type),o=a.options.stacked,s=i.length,u=[];for(n=0;n<s;++n)if((r=i[n]).controller.options.grouped){if("undefined"!==typeof t){var c=r.controller.getParsed(t)[r.controller._cachedMeta.vScale.axis];if(yG(c)||isNaN(c))continue}if((!1===o||-1===u.indexOf(r.stack)||void 0===o&&void 0===r.stack)&&u.push(r.stack),r.index===e)break}return u.length||u.push(void 0),u}},{key:"_getStackCount",value:function(e){return this._getStacks(void 0,e).length}},{key:"_getStackIndex",value:function(e,t,n){var r=this._getStacks(e,n),a=void 0!==t?r.indexOf(t):-1;return-1===a?r.length-1:a}},{key:"_getRuler",value:function(){var e,t,n=this.options,r=this._cachedMeta,a=r.iScale,i=[];for(e=0,t=r.data.length;e<t;++e)i.push(a.getPixelForValue(this.getParsed(e)[a.axis],e));var o=n.barThickness;return{min:o||KX(r),pixels:i,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:n.grouped,ratio:o?1:n.categoryPercentage*n.barPercentage}}},{key:"_calculateBarValuePixels",value:function(e){var t,n,r=this._cachedMeta,a=r.vScale,i=r._stacked,o=this.options,s=o.base,u=o.minBarLength,c=s||0,l=this.getParsed(e),h=l._custom,f=YX(h),d=l[a.axis],p=0,v=i?this.applyStack(a,l,i):d;v!==d&&(p=v-d,v=d),f&&(d=h.barStart,v=h.barEnd-h.barStart,0!==d&&YG(d)!==YG(h.barEnd)&&(p=0),p+=d);var m=yG(s)||f?p:s,g=a.getPixelForValue(m);if(n=(t=this.chart.getDataVisibility(e)?a.getPixelForValue(p+v):g)-g,Math.abs(n)<u&&(n=function(e,t,n){return 0!==e?YG(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(n,a,c)*u,d===c&&(g-=n/2),t=g+n),g===a.getPixelForValue(c)){var y=YG(n)*a.getLineWidthForValue(c)/2;g+=y,n-=y}return{size:n,base:g,head:t,center:t+n/2}}},{key:"_calculateBarIndexPixels",value:function(e,t){var n,r,a=t.scale,i=this.options,o=i.skipNull,s=SG(i.maxBarThickness,1/0);if(t.grouped){var u=o?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,r){var a=t.pixels,i=a[e],o=e>0?a[e-1]:null,s=e<a.length-1?a[e+1]:null,u=n.categoryPercentage;null===o&&(o=i-(null===s?t.end-t.start:s-i)),null===s&&(s=i+i-o);var c=i-(i-Math.min(o,s))/2*u;return{chunk:Math.abs(s-o)/2*u/r,ratio:n.barPercentage,start:c}}(e,t,i,u):function(e,t,n,r){var a,i,o=n.barThickness;return yG(o)?(a=t.min*n.categoryPercentage,i=n.barPercentage):(a=o*r,i=1),{chunk:a/r,ratio:i,start:t.pixels[e]-a/2}}(e,t,i,u),l=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);n=c.start+c.chunk*l+c.chunk/2,r=Math.min(s,c.chunk*c.ratio)}else n=a.getPixelForValue(this.getParsed(e)[a.axis],e),r=Math.min(s,t.min*t.ratio);return{base:n-r/2,head:n+r/2,center:n,size:r}}},{key:"draw",value:function(){for(var e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length,a=0;a<r;++a)null!==this.getParsed(a)[t.axis]&&n[a].draw(this._ctx)}}]),n}(GX);eY.id="bar",eY.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},eY.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};var tY=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,NI(Po(n.prototype),"initialize",this).call(this)}},{key:"parsePrimitiveData",value:function(e,t,r,a){for(var i=NI(Po(n.prototype),"parsePrimitiveData",this).call(this,e,t,r,a),o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+r).radius;return i}},{key:"parseArrayData",value:function(e,t,r,a){for(var i=NI(Po(n.prototype),"parseArrayData",this).call(this,e,t,r,a),o=0;o<i.length;o++){var s=t[r+o];i[o]._custom=SG(s[2],this.resolveDataElementOptions(o+r).radius)}return i}},{key:"parseObjectData",value:function(e,t,r,a){for(var i=NI(Po(n.prototype),"parseObjectData",this).call(this,e,t,r,a),o=0;o<i.length;o++){var s=t[r+o];i[o]._custom=SG(s&&s.r&&+s.r,this.resolveDataElementOptions(o+r).radius)}return i}},{key:"getMaxOverflow",value:function(){for(var e=this._cachedMeta.data,t=0,n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.xScale,r=t.yScale,a=this.getParsed(e),i=n.getLabelForValue(a.x),o=r.getLabelForValue(a.y),s=a._custom;return{label:t.label,value:"("+i+", "+o+(s?", "+s:"")+")"}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this._cachedMeta,o=i.iScale,s=i.vScale,u=this.resolveDataElementOptions(t,r),c=this.getSharedOptions(u),l=this.includeOptions(r,c),h=o.axis,f=s.axis,d=t;d<t+n;d++){var p=e[d],v=!a&&this.getParsed(d),m={},g=m[h]=a?o.getPixelForDecimal(.5):o.getPixelForValue(v[h]),y=m[f]=a?s.getBasePixel():s.getPixelForValue(v[f]);m.skip=isNaN(g)||isNaN(y),l&&(m.options=this.resolveDataElementOptions(d,p.active?"active":r),a&&(m.options.radius=0)),this.updateElement(p,d,m,r)}this.updateSharedOptions(c,r,u)}},{key:"resolveDataElementOptions",value:function(e,t){var r=this.getParsed(e),a=NI(Po(n.prototype),"resolveDataElementOptions",this).call(this,e,t);a.$shared&&(a=Object.assign({},a,{$shared:!1}));var i=a.radius;return"active"!==t&&(a.radius=0),a.radius+=SG(r&&r._custom,i),a}}]),n}(GX);tY.id="bubble",tY.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},tY.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:function(){return""}}}}};var nY=function(e){Mo(n,e);var t=Uo(n);function n(e,r){var a;return wn(this,n),(a=t.call(this,e,r)).enableOptionSharing=!0,a.innerRadius=void 0,a.outerRadius=void 0,a.offsetX=void 0,a.offsetY=void 0,a}return En(n,[{key:"linkScales",value:function(){}},{key:"parse",value:function(e,t){var n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{var a,i,o=function(e){return+n[e]};if(xG(n[e])){var s=this._parsing.key,u=void 0===s?"value":s;o=function(e){return+PG(n[e],u)}}for(a=e,i=e+t;a<i;++a)r._parsed[a]=o(a)}}},{key:"_getRotation",value:function(){return eK(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return eK(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var e=jG,t=-jG,n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){var r=this.chart.getDatasetMeta(n).controller,a=r._getRotation(),i=r._getCircumference();e=Math.min(e,a),t=Math.max(t,a+i)}return{rotation:e,circumference:t-e}}},{key:"update",value:function(e){var t,n,r=this.chart.chartArea,a=this._cachedMeta,i=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,s=Math.max((Math.min(r.width,r.height)-o)/2,0),u=Math.min((t=this.options.cutout,n=s,"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:t/n),1),c=this._getRingWeight(this.index),l=this._getRotationExtents(),h=l.circumference,f=function(e,t,n){var r=1,a=1,i=0,o=0;if(t<jG){var s=e,u=s+t,c=Math.cos(s),l=Math.sin(s),h=Math.cos(u),f=Math.sin(u),d=function(e,t,r){return sK(e,s,u,!0)?1:Math.max(t,t*n,r,r*n)},p=function(e,t,r){return sK(e,s,u,!0)?-1:Math.min(t,t*n,r,r*n)},v=d(0,c,h),m=d(GG,l,f),g=p(UG,c,h),y=p(UG+GG,l,f);r=(v-g)/2,a=(m-y)/2,i=-(v+g)/2,o=-(m+y)/2}return{ratioX:r,ratioY:a,offsetX:i,offsetY:o}}(l.rotation,h,u),d=f.ratioX,p=f.ratioY,v=f.offsetX,m=f.offsetY,g=(r.width-o)/d,y=(r.height-o)/p,b=Math.max(Math.min(g,y)/2,0),x=EG(this.options.radius,b),k=(x-Math.max(x*u,0))/this._getVisibleDatasetWeightTotal();this.offsetX=v*x,this.offsetY=m*x,a.total=this.calculateTotal(),this.outerRadius=x-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*c,0),this.updateElements(i,0,i.length,e)}},{key:"_circumference",value:function(e,t){var n=this.options,r=this._cachedMeta,a=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*a/jG)}},{key:"updateElements",value:function(e,t,n,r){var a,i="reset"===r,o=this.chart,s=o.chartArea,u=o.options.animation,c=(s.left+s.right)/2,l=(s.top+s.bottom)/2,h=i&&u.animateScale,f=h?0:this.innerRadius,d=h?0:this.outerRadius,p=this.resolveDataElementOptions(t,r),v=this.getSharedOptions(p),m=this.includeOptions(r,v),g=this._getRotation();for(a=0;a<t;++a)g+=this._circumference(a,i);for(a=t;a<t+n;++a){var y=this._circumference(a,i),b=e[a],x={x:c+this.offsetX,y:l+this.offsetY,startAngle:g,endAngle:g+y,circumference:y,outerRadius:d,innerRadius:f};m&&(x.options=v||this.resolveDataElementOptions(a,b.active?"active":r)),g+=y,this.updateElement(b,a,x,r)}this.updateSharedOptions(v,r,p)}},{key:"calculateTotal",value:function(){var e,t=this._cachedMeta,n=t.data,r=0;for(e=0;e<n.length;e++){var a=t._parsed[e];null===a||isNaN(a)||!this.chart.getDataVisibility(e)||n[e].hidden||(r+=Math.abs(a))}return r}},{key:"calculateCircumference",value:function(e){var t=this._cachedMeta.total;return t>0&&!isNaN(e)?jG*(Math.abs(e)/t):0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=mX(t._parsed[e],n.options.locale);return{label:r[e]||"",value:a}}},{key:"getMaxBorderWidth",value:function(e){var t,n,r,a,i,o=0,s=this.chart;if(!e)for(t=0,n=s.data.datasets.length;t<n;++t)if(s.isDatasetVisible(t)){e=(r=s.getDatasetMeta(t)).data,a=r.controller;break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)"inner"!==(i=a.resolveDataElementOptions(t)).borderAlign&&(o=Math.max(o,i.borderWidth||0,i.hoverBorderWidth||0));return o}},{key:"getMaxOffset",value:function(e){for(var t=0,n=0,r=e.length;n<r;++n){var a=this.resolveDataElementOptions(n);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}},{key:"_getRingWeightOffset",value:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}},{key:"_getRingWeight",value:function(e){return Math.max(SG(this.chart.data.datasets[e].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}]),n}(GX);nY.id="doughnut",nY.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},nY.descriptors={_scriptable:function(e){return"spacing"!==e},_indexable:function(e){return"spacing"!==e}},nY.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels.pointStyle;return t.labels.map((function(t,r){var a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(e){var t=e.label,n=": "+e.formattedValue;return bG(t)?(t=t.slice())[0]+=n:t+=n,t}}}}};var rY=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,NI(Po(n.prototype),"initialize",this).call(this)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data,a=void 0===r?[]:r,i=t._dataset,o=this.chart._animationsDisabled,s=function(e,t,n){var r=t.length,a=0,i=r;if(e._sorted){var o=e.iScale,s=e._parsed,u=o.axis,c=o.getUserBounds(),l=c.min,h=c.max,f=c.minDefined,d=c.maxDefined;f&&(a=uK(Math.min(Cq(s,o.axis,l).lo,n?r:Cq(t,u,o.getPixelForValue(l)).lo),0,r-1)),i=d?uK(Math.max(Cq(s,o.axis,h).hi+1,n?0:Cq(t,u,o.getPixelForValue(h)).hi+1),a,r)-a:r-a}return{start:a,count:i}}(t,a,o),u=s.start,c=s.count;this._drawStart=u,this._drawCount=c,function(e){var t=e.xScale,n=e.yScale,r=e._scaleRanges,a={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=a,!0;var i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,a),i}(t)&&(u=0,c=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;var l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},e),this.updateElements(a,u,c,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this._cachedMeta,o=i.iScale,s=i.vScale,u=i._stacked,c=i._dataset,l=this.resolveDataElementOptions(t,r),h=this.getSharedOptions(l),f=this.includeOptions(r,h),d=o.axis,p=s.axis,v=this.options,m=v.spanGaps,g=v.segment,y=QG(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||a||"none"===r,x=t>0&&this.getParsed(t-1),k=t;k<t+n;++k){var w=e[k],S=this.getParsed(k),E=b?w:{},T=yG(S[p]),_=E[d]=o.getPixelForValue(S[d],k),C=E[p]=a||T?s.getBasePixel():s.getPixelForValue(u?this.applyStack(s,S,u):S[p],k);E.skip=isNaN(_)||isNaN(C)||T,E.stop=k>0&&S[d]-x[d]>y,g&&(E.parsed=S,E.raw=c.data[k]),f&&(E.options=h||this.resolveDataElementOptions(k,w.active?"active":r)),b||this.updateElement(w,k,E,r),x=S}this.updateSharedOptions(h,r,l)}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;var a=r[0].size(this.resolveDataElementOptions(0)),i=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,a,i)/2}},{key:"draw",value:function(){var e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),NI(Po(n.prototype),"draw",this).call(this)}}]),n}(GX);rY.id="line",rY.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},rY.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};var aY=function(e){Mo(n,e);var t=Uo(n);function n(e,r){var a;return wn(this,n),(a=t.call(this,e,r)).innerRadius=void 0,a.outerRadius=void 0,a}return En(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=mX(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:a}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}},{key:"_updateRadius",value:function(){var e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(r/2,0),i=(a-Math.max(n.cutoutPercentage?a/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-i*this.index,this.innerRadius=this.outerRadius-i}},{key:"updateElements",value:function(e,t,n,r){var a,i="reset"===r,o=this.chart,s=this.getDataset(),u=o.options.animation,c=this._cachedMeta.rScale,l=c.xCenter,h=c.yCenter,f=c.getIndexAngle(0)-.5*UG,d=f,p=360/this.countVisibleElements();for(a=0;a<t;++a)d+=this._computeAngle(a,r,p);for(a=t;a<t+n;a++){var v=e[a],m=d,g=d+this._computeAngle(a,r,p),y=o.getDataVisibility(a)?c.getDistanceFromCenterForValue(s.data[a]):0;d=g,i&&(u.animateScale&&(y=0),u.animateRotate&&(m=g=f));var b={x:l,y:h,innerRadius:0,outerRadius:y,startAngle:m,endAngle:g,options:this.resolveDataElementOptions(a,v.active?"active":r)};this.updateElement(v,a,b,r)}}},{key:"countVisibleElements",value:function(){var e=this,t=this.getDataset(),n=this._cachedMeta,r=0;return n.data.forEach((function(n,a){!isNaN(t.data[a])&&e.chart.getDataVisibility(a)&&r++})),r}},{key:"_computeAngle",value:function(e,t,n){return this.chart.getDataVisibility(e)?eK(this.resolveDataElementOptions(e,t).angle||n):0}}]),n}(GX);aY.id="polarArea",aY.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},aY.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels.pointStyle;return t.labels.map((function(t,r){var a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};var iY=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n)}(nY);iY.id="pie",iY.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};var oY=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data||[],a=t.iScale.getLabels();if(n.points=r,"resize"!==e){var i=this.resolveDatasetElementOptions(e);this.options.showLine||(i.borderWidth=0);var o={_loop:!0,_fullLoop:a.length===r.length,options:i};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a=this.getDataset(),i=this._cachedMeta.rScale,o="reset"===r,s=t;s<t+n;s++){var u=e[s],c=this.resolveDataElementOptions(s,u.active?"active":r),l=i.getPointPositionForValue(s,a.data[s]),h=o?i.xCenter:l.x,f=o?i.yCenter:l.y,d={x:h,y:f,angle:l.angle,skip:isNaN(h)||isNaN(f),options:c};this.updateElement(u,s,d,r)}}}]),n}(GX);oY.id="radar",oY.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},oY.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};var sY=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n)}(rY);sY.id="scatter",sY.defaults={showLine:!1,fill:!1},sY.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:function(){return""},label:function(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function uY(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var cY=function(){function e(t){wn(this,e),this.options=t||{}}return En(e,[{key:"formats",value:function(){return uY()}},{key:"parse",value:function(e,t){return uY()}},{key:"format",value:function(e,t){return uY()}},{key:"add",value:function(e,t,n){return uY()}},{key:"diff",value:function(e,t,n){return uY()}},{key:"startOf",value:function(e,t,n){return uY()}},{key:"endOf",value:function(e,t){return uY()}}]),e}();cY.override=function(e){Object.assign(cY.prototype,e)};var lY={_date:cY};function hY(e,t){return"native"in e?{x:e.x,y:e.y}:oX(e,t)}function fY(e,t,n,r){var a=e.controller,i=e.data,o=e._sorted,s=a._cachedMeta.iScale;if(s&&t===s.axis&&"r"!==t&&o&&i.length){var u=s._reversePixels?Iq:Cq;if(!r)return u(i,t,n);if(a._sharedOptions){var c=i[0],l="function"===typeof c.getRange&&c.getRange(t);if(l){var h=u(i,t,n-l),f=u(i,t,n+l);return{lo:h.lo,hi:f.hi}}}}return{lo:0,hi:i.length-1}}function dY(e,t,n,r,a){for(var i=e.getSortedVisibleDatasetMetas(),o=n[t],s=0,u=i.length;s<u;++s)for(var c=i[s],l=c.index,h=c.data,f=fY(i[s],t,o,a),d=f.lo,p=f.hi,v=d;v<=p;++v){var m=h[v];m.skip||r(m,l,v)}}function pY(e,t,n,r){var a=[];if(!oq(t,e.chartArea,e._minPadding))return a;return dY(e,n,t,(function(e,n,i){e.inRange(t.x,t.y,r)&&a.push({element:e,datasetIndex:n,index:i})}),!0),a}function vY(e,t,n,r,a){var i=[],o=function(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){var a=t?Math.abs(e.x-r.x):0,i=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(i,2))}}(n),s=Number.POSITIVE_INFINITY;return dY(e,n,t,(function(n,u,c){var l=n.inRange(t.x,t.y,a);if(!r||l){var h=n.getCenterPoint(a);if(oq(h,e.chartArea,e._minPadding)||l){var f=o(t,h);f<s?(i=[{element:n,datasetIndex:u,index:c}],s=f):f===s&&i.push({element:n,datasetIndex:u,index:c})}}})),i}function mY(e,t,n,r,a){return oq(t,e.chartArea,e._minPadding)?"r"!==n||r?vY(e,t,n,r,a):function(e,t,n,r){var a=[];return dY(e,n,t,(function(e,n,i){var o=e.getProps(["startAngle","endAngle"],r),s=o.startAngle,u=o.endAngle;sK(rK(e,{x:t.x,y:t.y}).angle,s,u)&&a.push({element:e,datasetIndex:n,index:i})})),a}(e,t,n,a):[]}function gY(e,t,n,r){var a=hY(t,e),i=[],o=n.axis,s="x"===o?"inXRange":"inYRange",u=!1;return function(e,t){for(var n,r,a,i=e.getSortedVisibleDatasetMetas(),o=0,s=i.length;o<s;++o){var u=i[o];n=u.index;for(var c=0,l=(r=u.data).length;c<l;++c)(a=r[c]).skip||t(a,n,c)}}(e,(function(e,t,n){e[s](a[o],r)&&i.push({element:e,datasetIndex:t,index:n}),e.inRange(a.x,a.y,r)&&(u=!0)})),n.intersect&&!u?[]:i}var yY={modes:{index:function(e,t,n,r){var a=hY(t,e),i=n.axis||"x",o=n.intersect?pY(e,a,i,r):mY(e,a,i,!1,r),s=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((function(e){var t=o[0].index,n=e.data[t];n&&!n.skip&&s.push({element:n,datasetIndex:e.index,index:t})})),s):[]},dataset:function(e,t,n,r){var a=hY(t,e),i=n.axis||"xy",o=n.intersect?pY(e,a,i,r):mY(e,a,i,!1,r);if(o.length>0){var s=o[0].datasetIndex,u=e.getDatasetMeta(s).data;o=[];for(var c=0;c<u.length;++c)o.push({element:u[c],datasetIndex:s,index:c})}return o},point:function(e,t,n,r){return pY(e,hY(t,e),n.axis||"xy",r)},nearest:function(e,t,n,r){return mY(e,hY(t,e),n.axis||"xy",n.intersect,r)},x:function(e,t,n,r){return gY(e,t,{axis:"x",intersect:n.intersect},r)},y:function(e,t,n,r){return gY(e,t,{axis:"y",intersect:n.intersect},r)}}},bY=["left","top","right","bottom"];function xY(e,t){return e.filter((function(e){return e.pos===t}))}function kY(e,t){return e.filter((function(e){return-1===bY.indexOf(e.pos)&&e.box.axis===t}))}function wY(e,t){return e.sort((function(e,n){var r=t?n:e,a=t?e:n;return r.weight===a.weight?r.index-a.index:r.weight-a.weight}))}function SY(e,t){var n,r,a,i=function(e){var t,n={},r=bn(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.stack,o=a.pos,s=a.stackWeight;if(i&&bY.includes(o)){var u=n[i]||(n[i]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=s}}}catch(BZ){r.e(BZ)}finally{r.f()}return n}(e),o=t.vBoxMaxWidth,s=t.hBoxMaxHeight;for(n=0,r=e.length;n<r;++n){var u=(a=e[n]).box.fullSize,c=i[a.stack],l=c&&a.stackWeight/c.weight;a.horizontal?(a.width=l?l*o:u&&t.availableWidth,a.height=s):(a.width=o,a.height=l?l*s:u&&t.availableHeight)}return i}function EY(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function TY(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function _Y(e,t,n,r){var a=n.pos,i=n.box,o=e.maxPadding;if(!xG(a)){n.size&&(e[a]-=n.size);var s=r[n.stack]||{size:0,count:1};s.size=Math.max(s.size,n.horizontal?i.height:i.width),n.size=s.size/s.count,e[a]+=n.size}i.getPadding&&TY(o,i.getPadding());var u=Math.max(0,t.outerWidth-EY(o,e,"left","right")),c=Math.max(0,t.outerHeight-EY(o,e,"top","bottom")),l=u!==e.w,h=c!==e.h;return e.w=u,e.h=c,n.horizontal?{same:l,other:h}:{same:h,other:l}}function CY(e,t){var n=t.maxPadding;function r(e){var r={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function IY(e,t,n,r){var a,i,o,s,u,c,l=[];for(a=0,i=e.length,u=0;a<i;++a){(s=(o=e[a]).box).update(o.width||t.w,o.height||t.h,CY(o.horizontal,t));var h=_Y(t,n,o,r),f=h.same,d=h.other;u|=f&&l.length,c=c||d,s.fullSize||l.push(o)}return u&&IY(l,t,n,r)||c}function NY(e,t,n,r,a){e.top=n,e.left=t,e.right=t+r,e.bottom=n+a,e.width=r,e.height=a}function AY(e,t,n,r){var a,i=n.padding,o=t.x,s=t.y,u=bn(e);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=c.box,h=r[c.stack]||{count:1,placed:0,weight:1},f=c.stackWeight/h.weight||1;if(c.horizontal){var d=t.w*f,p=h.size||l.height;FG(h.start)&&(s=h.start),l.fullSize?NY(l,i.left,s,n.outerWidth-i.right-i.left,p):NY(l,t.left+h.placed,s,d,p),h.start=s,h.placed+=d,s=l.bottom}else{var v=t.h*f,m=h.size||l.width;FG(h.start)&&(o=h.start),l.fullSize?NY(l,o,i.top,m,n.outerHeight-i.bottom-i.top):NY(l,o,t.top+h.placed,m,v),h.start=o,h.placed+=v,o=l.right}}}catch(BZ){u.e(BZ)}finally{u.f()}t.x=o,t.y=s}eq.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var RY=function(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(e){t.draw(e)}}]},e.boxes.push(t)},OY=function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},DY=function(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},MY=function(e,t,n,r){if(e){var a=wq(e.options.layout.padding),i=Math.max(t-a.width,0),o=Math.max(n-a.height,0),s=function(e){var t=function(e){var t,n,r,a,i,o,s=[];for(t=0,n=(e||[]).length;t<n;++t){var u=r=e[t];a=u.position;var c=u.options;i=c.stack;var l=c.stackWeight;o=void 0===l?1:l,s.push({index:t,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:i&&a+i,stackWeight:o})}return s}(e),n=wY(t.filter((function(e){return e.box.fullSize})),!0),r=wY(xY(t,"left"),!0),a=wY(xY(t,"right")),i=wY(xY(t,"top"),!0),o=wY(xY(t,"bottom")),s=kY(t,"x"),u=kY(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:a.concat(u).concat(o).concat(s),chartArea:xY(t,"chartArea"),vertical:r.concat(a).concat(u),horizontal:i.concat(o).concat(s)}}(e.boxes),u=s.vertical,c=s.horizontal;_G(e.boxes,(function(e){"function"===typeof e.beforeLayout&&e.beforeLayout()}));var l=u.reduce((function(e,t){return t.box.options&&!1===t.box.options.display?e:e+1}),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:a,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/l,hBoxMaxHeight:o/2}),f=Object.assign({},a);TY(f,wq(r));var d=Object.assign({maxPadding:f,w:i,h:o,x:a.left,y:a.top},a),p=SY(u.concat(c),h);IY(s.fullSize,d,h,p),IY(u,d,h,p),IY(c,d,h,p)&&IY(u,d,h,p),function(e){var t=e.maxPadding;function n(n){var r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(d),AY(s.leftAndTop,d,h,p),d.x+=d.w,d.y+=d.h,AY(s.rightAndBottom,d,h,p),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},_G(s.chartArea,(function(t){var n=t.box;Object.assign(n,e.chartArea),n.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})}))}},PY=function(){function e(){wn(this,e)}return En(e,[{key:"acquireContext",value:function(e,t){}},{key:"releaseContext",value:function(e){return!1}},{key:"addEventListener",value:function(e,t,n){}},{key:"removeEventListener",value:function(e,t,n){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}},{key:"isAttached",value:function(e){return!0}},{key:"updateConfig",value:function(e){}}]),e}(),LY=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"acquireContext",value:function(e){return e&&e.getContext&&e.getContext("2d")||null}},{key:"updateConfig",value:function(e){e.options.animation=!1}}]),n}(PY),FY={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},BY=function(e){return null===e||""===e};var VY=!!lX&&{passive:!0};function UY(e,t,n){e.canvas.removeEventListener(t,n,VY)}function jY(e,t){var n,r=bn(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a===t||a.contains(t))return!0}}catch(BZ){r.e(BZ)}finally{r.f()}}function zY(e,t,n){var r=e.canvas,a=new MutationObserver((function(e){var t,a=!1,i=bn(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a=(a=a||jY(o.addedNodes,r))&&!jY(o.removedNodes,r)}}catch(BZ){i.e(BZ)}finally{i.f()}a&&n()}));return a.observe(document,{childList:!0,subtree:!0}),a}function WY(e,t,n){var r=e.canvas,a=new MutationObserver((function(e){var t,a=!1,i=bn(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a=(a=a||jY(o.removedNodes,r))&&!jY(o.addedNodes,r)}}catch(BZ){i.e(BZ)}finally{i.f()}a&&n()}));return a.observe(document,{childList:!0,subtree:!0}),a}var HY=new Map,GY=0;function KY(){var e=window.devicePixelRatio;e!==GY&&(GY=e,HY.forEach((function(t,n){n.currentDevicePixelRatio!==e&&t()})))}function qY(e,t,n){var r=e.canvas,a=r&&tX(r);if(a){var i=dG((function(e,t){var r=a.clientWidth;n(e,t),r<a.clientWidth&&n()}),window),o=new ResizeObserver((function(e){var t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||i(n,r)}));return o.observe(a),function(e,t){HY.size||window.addEventListener("resize",KY),HY.set(e,t)}(e,i),o}}function XY(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){HY.delete(e),HY.size||window.removeEventListener("resize",KY)}(e)}function YY(e,t,n){var r=e.canvas,a=dG((function(t){null!==e.ctx&&n(function(e,t){var n=FY[e.type]||e.type,r=oX(e,t),a=r.x,i=r.y;return{type:n,chart:t,native:e,x:void 0!==a?a:null,y:void 0!==i?i:null}}(t,e))}),e,(function(e){var t=e[0];return[t,t.offsetX,t.offsetY]}));return function(e,t,n){e.addEventListener(t,n,VY)}(r,t,a),a}var $Y=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"acquireContext",value:function(e,t){var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){var n=e.style,r=e.getAttribute("height"),a=e.getAttribute("width");if(e.$chartjs={initial:{height:r,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",BY(a)){var i=hX(e,"width");void 0!==i&&(e.width=i)}if(BY(r))if(""===e.style.height)e.height=e.width/(t||2);else{var o=hX(e,"height");void 0!==o&&(e.height=o)}}(e,t),n):null}},{key:"releaseContext",value:function(e){var t=e.canvas;if(!t.$chartjs)return!1;var n=t.$chartjs.initial;["height","width"].forEach((function(e){var r=n[e];yG(r)?t.removeAttribute(e):t.setAttribute(e,r)}));var r=n.style||{};return Object.keys(r).forEach((function(e){t.style[e]=r[e]})),t.width=t.width,delete t.$chartjs,!0}},{key:"addEventListener",value:function(e,t,n){this.removeEventListener(e,t);var r=e.$proxies||(e.$proxies={}),a={attach:zY,detach:WY,resize:qY}[t]||YY;r[t]=a(e,t,n)}},{key:"removeEventListener",value:function(e,t){var n=e.$proxies||(e.$proxies={}),r=n[t];r&&(({attach:XY,detach:XY,resize:XY}[t]||UY)(e,t,r),n[t]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(e,t,n,r){return uX(e,t,n,r)}},{key:"isAttached",value:function(e){var t=tX(e);return!(!t||!t.isConnected)}}]),n}(PY);var QY=function(){function e(){wn(this,e),this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}return En(e,[{key:"tooltipPosition",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"hasValue",value:function(){return QG(this.x)&&QG(this.y)}},{key:"getProps",value:function(e,t){var n=this,r=this.$animations;if(!t||!r)return this;var a={};return e.forEach((function(e){a[e]=r[e]&&r[e].active()?r[e]._to:n[e]})),a}}]),e}();QY.defaults={},QY.defaultRoutes=void 0;var JY={values:function(e){return bG(e)?e:""+e},numeric:function(e,t,n){if(0===e)return"0";var r,a=this.chart.options.locale,i=e;if(n.length>1){var o=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(o<1e-4||o>1e15)&&(r="scientific"),i=function(e,t){var n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}var s=XG(Math.abs(i)),u=Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(c,this.options.ticks.format),mX(e,a,c)},logarithmic:function(e,t,n){if(0===e)return"0";var r=e/Math.pow(10,Math.floor(XG(e)));return 1===r||2===r||5===r?JY.numeric.call(this,e,t,n):""}};var ZY={formatters:JY};function e$(e,t){var n=e.options.ticks,r=n.maxTicksLimit||function(e){var t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),a=e._maxLength/n;return Math.floor(Math.min(r,a))}(e),a=n.major.enabled?function(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++)e[t].major&&r.push(t);return r}(t):[],i=a.length,o=a[0],s=a[i-1],u=[];if(i>r)return function(e,t,n,r){var a,i=0,o=n[0];for(r=Math.ceil(r),a=0;a<e.length;a++)a===o&&(t.push(e[a]),o=n[++i*r])}(t,u,a,i/r),u;var c=function(e,t,n){var r=function(e){var t,n,r=e.length;if(r<2)return!1;for(n=e[0],t=1;t<r;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),a=t.length/n;if(!r)return Math.max(a,1);for(var i=function(e){var t,n=[],r=Math.sqrt(e);for(t=1;t<r;t++)e%t===0&&(n.push(t),n.push(e/t));return r===(0|r)&&n.push(r),n.sort((function(e,t){return e-t})).pop(),n}(r),o=0,s=i.length-1;o<s;o++){var u=i[o];if(u>a)return u}return Math.max(a,1)}(a,t,r);if(i>0){var l,h,f=i>1?Math.round((s-o)/(i-1)):null;for(t$(t,u,c,yG(f)?0:o-f,o),l=0,h=i-1;l<h;l++)t$(t,u,c,a[l],a[l+1]);return t$(t,u,c,s,yG(f)?t.length:s+f),u}return t$(t,u,c),u}function t$(e,t,n,r,a){var i,o,s,u=SG(r,0),c=Math.min(SG(a,e.length),e.length),l=0;for(n=Math.ceil(n),a&&(n=(i=a-r)/Math.floor(i/n)),s=u;s<0;)l++,s=Math.round(u+l*n);for(o=Math.max(u,0);o<c;o++)o===s&&(t.push(e[o]),l++,s=Math.round(u+l*n))}eq.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(e,t){return t.lineWidth},tickColor:function(e,t){return t.color},offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ZY.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),eq.route("scale.ticks","color","","color"),eq.route("scale.grid","color","","borderColor"),eq.route("scale.grid","borderColor","","borderColor"),eq.route("scale.title","color","","color"),eq.describe("scale",{_fallback:!1,_scriptable:function(e){return!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e},_indexable:function(e){return"borderDash"!==e&&"tickBorderDash"!==e}}),eq.describe("scales",{_fallback:"scale"}),eq.describe("scale.ticks",{_scriptable:function(e){return"backdropPadding"!==e&&"callback"!==e},_indexable:function(e){return"backdropPadding"!==e}});var n$=function(e,t,n){return"top"===t||"left"===t?e[t]+n:e[t]-n};function r$(e,t){for(var n=[],r=e.length/t,a=e.length,i=0;i<a;i+=r)n.push(e[Math.floor(i)]);return n}function a$(e,t,n){var r,a=e.ticks.length,i=Math.min(t,a-1),o=e._startPixel,s=e._endPixel,u=1e-6,c=e.getPixelForTick(i);if(!(n&&(r=1===a?Math.max(c-o,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,(c+=i<t?r:-r)<o-u||c>s+u)))return c}function i$(e){return e.drawTicks?e.tickLength:0}function o$(e,t){if(!e.display)return 0;var n=Sq(e.font,t),r=wq(e.padding);return(bG(e.text)?e.text.length:1)*n.lineHeight+r.height}function s$(e,t,n){var r=pG(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=function(e){return"left"===e?"right":"right"===e?"left":e}(r)),r}var u$=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).id=e.id,r.type=e.type,r.options=void 0,r.ctx=e.ctx,r.chart=e.chart,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r._margins={left:0,right:0,top:0,bottom:0},r.maxWidth=void 0,r.maxHeight=void 0,r.paddingTop=void 0,r.paddingBottom=void 0,r.paddingLeft=void 0,r.paddingRight=void 0,r.axis=void 0,r.labelRotation=void 0,r.min=void 0,r.max=void 0,r._range=void 0,r.ticks=[],r._gridLineItems=null,r._labelItems=null,r._labelSizes=null,r._length=0,r._maxLength=0,r._longestTextCache={},r._startPixel=void 0,r._endPixel=void 0,r._reversePixels=!1,r._userMax=void 0,r._userMin=void 0,r._suggestedMax=void 0,r._suggestedMin=void 0,r._ticksLength=0,r._borderValue=0,r._cache={},r._dataLimitsCached=!1,r.$context=void 0,r}return En(n,[{key:"init",value:function(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}},{key:"parse",value:function(e,t){return e}},{key:"getUserBounds",value:function(){var e=this._userMin,t=this._userMax,n=this._suggestedMin,r=this._suggestedMax;return e=wG(e,Number.POSITIVE_INFINITY),t=wG(t,Number.NEGATIVE_INFINITY),n=wG(n,Number.POSITIVE_INFINITY),r=wG(r,Number.NEGATIVE_INFINITY),{min:wG(e,n),max:wG(t,r),minDefined:kG(e),maxDefined:kG(t)}}},{key:"getMinMax",value:function(e){var t,n=this.getUserBounds(),r=n.min,a=n.max,i=n.minDefined,o=n.maxDefined;if(i&&o)return{min:r,max:a};for(var s=this.getMatchingVisibleMetas(),u=0,c=s.length;u<c;++u)t=s[u].controller.getMinMax(this,e),i||(r=Math.min(r,t.min)),o||(a=Math.max(a,t.max));return{min:wG(r=o&&r>a?a:r,wG(a=i&&r>a?r:a,r)),max:wG(a,wG(r,a))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){TG(this.options.beforeUpdate,[this])}},{key:"update",value:function(e,t,n){var r=this.options,a=r.beginAtZero,i=r.grace,o=r.ticks,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){var r=e.min,a=e.max,i=EG(t,(a-r)/2),o=function(e,t){return n&&0===e?0:e+t};return{min:o(r,-Math.abs(i)),max:o(a,i)}}(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var u=s<this.ticks.length;this._convertTicksToLabels(u?r$(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=e$(this,this.ticks),this._labelSizes=null),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){TG(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){TG(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){TG(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(e){this.chart.notifyPlugins(e,this.getContext()),TG(this.options[e],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){TG(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(e){var t,n,r,a=this.options.ticks;for(t=0,n=e.length;t<n;t++)(r=e[t]).label=TG(a.callback,[r.value,t,e],this)}},{key:"afterTickToLabelConversion",value:function(){TG(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){TG(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var e,t,n,r=this.options,a=r.ticks,i=this.ticks.length,o=a.minRotation||0,s=a.maxRotation,u=o;if(!this._isVisible()||!a.display||o>=s||i<=1||!this.isHorizontal())this.labelRotation=o;else{var c=this._getLabelSizes(),l=c.widest.width,h=c.highest.height,f=uK(this.chart.width-l,0,this.maxWidth);l+6>(e=r.offset?this.maxWidth/i:f/(i-1))&&(e=f/(i-(r.offset?.5:1)),t=this.maxHeight-i$(r.grid)-a.padding-o$(r.title,this.chart.options.font),n=Math.sqrt(l*l+h*h),u=tK(Math.min(Math.asin(uK((c.highest.height+6)/e,-1,1)),Math.asin(uK(t/n,-1,1))-Math.asin(uK(h/n,-1,1)))),u=Math.max(o,Math.min(s,u))),this.labelRotation=u}}},{key:"afterCalculateLabelRotation",value:function(){TG(this.options.afterCalculateLabelRotation,[this])}},{key:"beforeFit",value:function(){TG(this.options.beforeFit,[this])}},{key:"fit",value:function(){var e={width:0,height:0},t=this.chart,n=this.options,r=n.ticks,a=n.title,i=n.grid,o=this._isVisible(),s=this.isHorizontal();if(o){var u=o$(a,t.options.font);if(s?(e.width=this.maxWidth,e.height=i$(i)+u):(e.height=this.maxHeight,e.width=i$(i)+u),r.display&&this.ticks.length){var c=this._getLabelSizes(),l=c.first,h=c.last,f=c.widest,d=c.highest,p=2*r.padding,v=eK(this.labelRotation),m=Math.cos(v),g=Math.sin(v);if(s){var y=r.mirror?0:g*f.width+m*d.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{var b=r.mirror?0:m*f.width+g*d.height;e.width=Math.min(this.maxWidth,e.width+b+p)}this._calculatePadding(l,h,g,m)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(e,t,n,r){var a=this.options,i=a.ticks,o=i.align,s=i.padding,u=a.position,c=0!==this.labelRotation,l="top"!==u&&"x"===this.axis;if(this.isHorizontal()){var h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),d=0,p=0;c?l?(d=r*e.width,p=n*t.height):(d=n*e.height,p=r*t.width):"start"===o?p=t.width:"end"===o?d=e.width:(d=e.width/2,p=t.width/2),this.paddingLeft=Math.max((d-h+s)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-f+s)*this.width/(this.width-f),0)}else{var v=t.height/2,m=e.height/2;"start"===o?(v=0,m=e.height):"end"===o&&(v=t.height,m=0),this.paddingTop=v+s,this.paddingBottom=m+s}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){TG(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var e=this.options,t=e.axis,n=e.position;return"top"===n||"bottom"===n||"x"===t}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(e){var t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)yG(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var e=this._labelSizes;if(!e){var t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=r$(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}},{key:"_computeLabelSizes",value:function(e,t){var n,r,a,i,o,s,u,c,l,h,f,d=this.ctx,p=this._longestTextCache,v=[],m=[],g=0,y=0;for(n=0;n<t;++n){if(i=e[n].label,o=this._resolveTickFontOptions(n),d.font=s=o.string,u=p[s]=p[s]||{data:{},gc:[]},c=o.lineHeight,l=h=0,yG(i)||bG(i)){if(bG(i))for(r=0,a=i.length;r<a;++r)yG(f=i[r])||bG(f)||(l=tq(d,u.data,u.gc,l,f),h+=c)}else l=tq(d,u.data,u.gc,l,i),h=c;v.push(l),m.push(h),g=Math.max(l,g),y=Math.max(h,y)}!function(e,t){_G(e,(function(e){var n,r=e.gc,a=r.length/2;if(a>t){for(n=0;n<a;++n)delete e.data[r[n]];r.splice(0,a)}}))}(p,t);var b=v.indexOf(g),x=m.indexOf(y),k=function(e){return{width:v[e]||0,height:m[e]||0}};return{first:k(0),last:k(t-1),widest:k(b),highest:k(x),widths:v,heights:m}}},{key:"getLabelForValue",value:function(e){return e}},{key:"getPixelForValue",value:function(e,t){return NaN}},{key:"getValueForPixel",value:function(e){}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getPixelForDecimal",value:function(e){this._reversePixels&&(e=1-e);var t=this._startPixel+e*this._length;return uK(this._alignToPixels?rq(this.chart,t,0):t,-32768,32767)}},{key:"getDecimalForPixel",value:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var e=this.min,t=this.max;return e<0&&t<0?t:e>0&&t>0?e:0}},{key:"getContext",value:function(e){var t=this.ticks||[];if(e>=0&&e<t.length){var n=t[e];return n.$context||(n.$context=function(e,t,n){return Tq(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Tq(this.chart.getContext(),{scale:this,type:"scale"}))}},{key:"_tickSize",value:function(){var e=this.options.ticks,t=eK(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),i=e.autoSkipPadding||0,o=a?a.widest.width+i:0,s=a?a.highest.height+i:0;return this.isHorizontal()?s*n>o*r?o/n:s/r:s*r<o*n?s/n:o/r}},{key:"_isVisible",value:function(){var e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(e){var t,n,r,a,i,o,s,u,c,l,h,f,d=this.axis,p=this.chart,v=this.options,m=v.grid,g=v.position,y=m.offset,b=this.isHorizontal(),x=this.ticks.length+(y?1:0),k=i$(m),w=[],S=m.setContext(this.getContext()),E=S.drawBorder?S.borderWidth:0,T=E/2,_=function(e){return rq(p,e,E)};if("top"===g)t=_(this.bottom),o=this.bottom-k,u=t-T,l=_(e.top)+T,f=e.bottom;else if("bottom"===g)t=_(this.top),l=e.top,f=_(e.bottom)-T,o=t+T,u=this.top+k;else if("left"===g)t=_(this.right),i=this.right-k,s=t-T,c=_(e.left)+T,h=e.right;else if("right"===g)t=_(this.left),c=e.left,h=_(e.right)-T,i=t+T,s=this.left+k;else if("x"===d){if("center"===g)t=_((e.top+e.bottom)/2+.5);else if(xG(g)){var C=Object.keys(g)[0],I=g[C];t=_(this.chart.scales[C].getPixelForValue(I))}l=e.top,f=e.bottom,u=(o=t+T)+k}else if("y"===d){if("center"===g)t=_((e.left+e.right)/2);else if(xG(g)){var N=Object.keys(g)[0],A=g[N];t=_(this.chart.scales[N].getPixelForValue(A))}s=(i=t-T)-k,c=e.left,h=e.right}var R=SG(v.ticks.maxTicksLimit,x),O=Math.max(1,Math.ceil(x/R));for(n=0;n<x;n+=O){var D=m.setContext(this.getContext(n)),M=D.lineWidth,P=D.color,L=m.borderDash||[],F=D.borderDashOffset,B=D.tickWidth,V=D.tickColor,U=D.tickBorderDash||[],j=D.tickBorderDashOffset;void 0!==(r=a$(this,n,y))&&(a=rq(p,r,M),b?i=s=c=h=a:o=u=l=f=a,w.push({tx1:i,ty1:o,tx2:s,ty2:u,x1:c,y1:l,x2:h,y2:f,width:M,color:P,borderDash:L,borderDashOffset:F,tickWidth:B,tickColor:V,tickBorderDash:U,tickBorderDashOffset:j}))}return this._ticksLength=x,this._borderValue=t,w}},{key:"_computeLabelItems",value:function(e){var t,n,r,a,i,o,s,u,c,l,h,f=this.axis,d=this.options,p=d.position,v=d.ticks,m=this.isHorizontal(),g=this.ticks,y=v.align,b=v.crossAlign,x=v.padding,k=v.mirror,w=i$(d.grid),S=w+x,E=k?-x:S,T=-eK(this.labelRotation),_=[],C="middle";if("top"===p)i=this.bottom-E,o=this._getXAxisLabelAlignment();else if("bottom"===p)i=this.top+E,o=this._getXAxisLabelAlignment();else if("left"===p){var I=this._getYAxisLabelAlignment(w);o=I.textAlign,a=I.x}else if("right"===p){var N=this._getYAxisLabelAlignment(w);o=N.textAlign,a=N.x}else if("x"===f){if("center"===p)i=(e.top+e.bottom)/2+S;else if(xG(p)){var A=Object.keys(p)[0],R=p[A];i=this.chart.scales[A].getPixelForValue(R)+S}o=this._getXAxisLabelAlignment()}else if("y"===f){if("center"===p)a=(e.left+e.right)/2-S;else if(xG(p)){var O=Object.keys(p)[0],D=p[O];a=this.chart.scales[O].getPixelForValue(D)}o=this._getYAxisLabelAlignment(w).textAlign}"y"===f&&("start"===y?C="top":"end"===y&&(C="bottom"));var M=this._getLabelSizes();for(t=0,n=g.length;t<n;++t){r=g[t].label;var P=v.setContext(this.getContext(t));s=this.getPixelForTick(t)+v.labelOffset,c=(u=this._resolveTickFontOptions(t)).lineHeight;var L=(l=bG(r)?r.length:1)/2,F=P.color,B=P.textStrokeColor,V=P.textStrokeWidth;m?(a=s,h="top"===p?"near"===b||0!==T?-l*c+c/2:"center"===b?-M.highest.height/2-L*c+c:-M.highest.height+c/2:"near"===b||0!==T?c/2:"center"===b?M.highest.height/2-L*c:M.highest.height-l*c,k&&(h*=-1)):(i=s,h=(1-l)*c/2);var U=void 0;if(P.showLabelBackdrop){var j=wq(P.backdropPadding),z=M.heights[t],W=M.widths[t],H=i+h-j.top,G=a-j.left;switch(C){case"middle":H-=z/2;break;case"bottom":H-=z}switch(o){case"center":G-=W/2;break;case"right":G-=W}U={left:G,top:H,width:W+j.width,height:z+j.height,color:P.backdropColor}}_.push({rotation:T,label:r,font:u,color:F,strokeColor:B,strokeWidth:V,textOffset:h,textAlign:o,textBaseline:C,translation:[a,i],backdrop:U})}return _}},{key:"_getXAxisLabelAlignment",value:function(){var e=this.options,t=e.position,n=e.ticks;if(-eK(this.labelRotation))return"top"===t?"left":"right";var r="center";return"start"===n.align?r="left":"end"===n.align&&(r="right"),r}},{key:"_getYAxisLabelAlignment",value:function(e){var t,n,r=this.options,a=r.position,i=r.ticks,o=i.crossAlign,s=i.mirror,u=i.padding,c=e+u,l=this._getLabelSizes().widest.width;return"left"===a?s?(n=this.right+u,"near"===o?t="left":"center"===o?(t="center",n+=l/2):(t="right",n+=l)):(n=this.right-c,"near"===o?t="right":"center"===o?(t="center",n-=l/2):(t="left",n=this.left)):"right"===a?s?(n=this.left+u,"near"===o?t="right":"center"===o?(t="center",n-=l/2):(t="left",n-=l)):(n=this.left+c,"near"===o?t="left":"center"===o?(t="center",n+=l/2):(t="right",n=this.right)):t="right",{textAlign:t,x:n}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}}},{key:"drawBackground",value:function(){var e=this.ctx,t=this.options.backgroundColor,n=this.left,r=this.top,a=this.width,i=this.height;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,a,i),e.restore())}},{key:"getLineWidthForValue",value:function(e){var t=this.options.grid;if(!this._isVisible()||!t.display)return 0;var n=this.ticks.findIndex((function(t){return t.value===e}));return n>=0?t.setContext(this.getContext(n)).lineWidth:0}},{key:"drawGrid",value:function(e){var t,n,r=this.options.grid,a=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o=function(e,t,n){n.width&&n.color&&(a.save(),a.lineWidth=n.width,a.strokeStyle=n.color,a.setLineDash(n.borderDash||[]),a.lineDashOffset=n.borderDashOffset,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.stroke(),a.restore())};if(r.display)for(t=0,n=i.length;t<n;++t){var s=i[t];r.drawOnChartArea&&o({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),r.drawTicks&&o({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var e=this.chart,t=this.ctx,n=this.options.grid,r=n.setContext(this.getContext()),a=n.drawBorder?r.borderWidth:0;if(a){var i,o,s,u,c=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;this.isHorizontal()?(i=rq(e,this.left,a)-a/2,o=rq(e,this.right,c)+c/2,s=u=l):(s=rq(e,this.top,a)-a/2,u=rq(e,this.bottom,c)+c/2,i=o=l),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(i,s),t.lineTo(o,u),t.stroke(),t.restore()}}},{key:"drawLabels",value:function(e){if(this.options.ticks.display){var t=this.ctx,n=this._computeLabelArea();n&&sq(t,n);var r,a,i=this._labelItems||(this._labelItems=this._computeLabelItems(e));for(r=0,a=i.length;r<a;++r){var o=i[r],s=o.font,u=o.label;o.backdrop&&(t.fillStyle=o.backdrop.color,t.fillRect(o.backdrop.left,o.backdrop.top,o.backdrop.width,o.backdrop.height)),hq(t,u,0,o.textOffset,s,o)}n&&uq(t)}}},{key:"drawTitle",value:function(){var e=this.ctx,t=this.options,n=t.position,r=t.title,a=t.reverse;if(r.display){var i=Sq(r.font),o=wq(r.padding),s=r.align,u=i.lineHeight/2;"bottom"===n||"center"===n||xG(n)?(u+=o.bottom,bG(r.text)&&(u+=i.lineHeight*(r.text.length-1))):u+=o.top;var c=function(e,t,n,r){var a,i,o,s=e.top,u=e.left,c=e.bottom,l=e.right,h=e.chart,f=h.chartArea,d=h.scales,p=0,v=c-s,m=l-u;if(e.isHorizontal()){if(i=vG(r,u,l),xG(n)){var g=Object.keys(n)[0],y=n[g];o=d[g].getPixelForValue(y)+v-t}else o="center"===n?(f.bottom+f.top)/2+v-t:n$(e,n,t);a=l-u}else{if(xG(n)){var b=Object.keys(n)[0],x=n[b];i=d[b].getPixelForValue(x)-m+t}else i="center"===n?(f.left+f.right)/2-m+t:n$(e,n,t);o=vG(r,c,s),p="left"===n?-GG:GG}return{titleX:i,titleY:o,maxWidth:a,rotation:p}}(this,u,n,s),l=c.titleX,h=c.titleY,f=c.maxWidth,d=c.rotation;hq(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:d,textAlign:s$(s,n,a),textBaseline:"middle",translation:[l,h]})}}},{key:"draw",value:function(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}},{key:"_layers",value:function(){var e=this,t=this.options,r=t.ticks&&t.ticks.z||0,a=SG(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===n.prototype.draw?[{z:a,draw:function(t){e.drawBackground(),e.drawGrid(t),e.drawTitle()}},{z:a+1,draw:function(){e.drawBorder()}},{z:r,draw:function(t){e.drawLabels(t)}}]:[{z:r,draw:function(t){e.draw(t)}}]}},{key:"getMatchingVisibleMetas",value:function(e){var t,n,r=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",i=[];for(t=0,n=r.length;t<n;++t){var o=r[t];o[a]!==this.id||e&&o.type!==e||i.push(o)}return i}},{key:"_resolveTickFontOptions",value:function(e){return Sq(this.options.ticks.setContext(this.getContext(e)).font)}},{key:"_maxDigits",value:function(){var e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}]),n}(QY),c$=function(){function e(t,n,r){wn(this,e),this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}return En(e,[{key:"isForType",value:function(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}},{key:"register",value:function(e){var t,n=Object.getPrototypeOf(e);(function(e){return"id"in e&&"defaults"in e})(n)&&(t=this.register(n));var r=this.items,a=e.id,i=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,function(e,t,n){var r=RG(Object.create(null),[n?eq.get(n):{},eq.get(t),e.defaults]);eq.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((function(n){var r=n.split("."),a=r.pop(),i=[e].concat(r).join("."),o=t[n].split("."),s=o.pop(),u=o.join(".");eq.route(i,a,u,s)}))}(t,e.defaultRoutes);e.descriptors&&eq.describe(t,e.descriptors)}(e,i,t),this.override&&eq.override(e.id,e.overrides)),i}},{key:"get",value:function(e){return this.items[e]}},{key:"unregister",value:function(e){var t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in eq[r]&&(delete eq[r][n],this.override&&delete YK[n])}}]),e}();var l$=function(){function e(){wn(this,e),this.controllers=new c$(GX,"datasets",!0),this.elements=new c$(QY,"elements"),this.plugins=new c$(Object,"plugins"),this.scales=new c$(u$,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}return En(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}},{key:"addControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}},{key:"addElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}},{key:"addPlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}},{key:"addScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}},{key:"getController",value:function(e){return this._get(e,this.controllers,"controller")}},{key:"getElement",value:function(e){return this._get(e,this.elements,"element")}},{key:"getPlugin",value:function(e){return this._get(e,this.plugins,"plugin")}},{key:"getScale",value:function(e){return this._get(e,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}},{key:"removeElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}},{key:"removePlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}},{key:"removeScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}},{key:"_each",value:function(e,t,n){var r=this;kn(t).forEach((function(t){var a=n||r._getRegistryForType(t);n||a.isForType(t)||a===r.plugins&&t.id?r._exec(e,a,t):_G(t,(function(t){var a=n||r._getRegistryForType(t);r._exec(e,a,t)}))}))}},{key:"_exec",value:function(e,t,n){var r=LG(e);TG(n["before"+r],[],n),t[e](n),TG(n["after"+r],[],n)}},{key:"_getRegistryForType",value:function(e){for(var t=0;t<this._typedRegistries.length;t++){var n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}},{key:"_get",value:function(e,t,n){var r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}]),e}(),h$=new l$,f$=function(){function e(){wn(this,e),this._init=[]}return En(e,[{key:"notify",value:function(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));var a=r?this._descriptors(e).filter(r):this._descriptors(e),i=this._notify(a,e,t,n);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),i}},{key:"_notify",value:function(e,t,n,r){r=r||{};var a,i=bn(e);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o.plugin;if(!1===TG(s[n],[t,r,o.options],s)&&r.cancelable)return!1}}catch(BZ){i.e(BZ)}finally{i.f()}return!0}},{key:"invalidate",value:function(){yG(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(e){if(this._cache)return this._cache;var t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}},{key:"_createDescriptors",value:function(e,t){var n=e&&e.config,r=SG(n.options&&n.options.plugins,{}),a=function(e){for(var t=[],n=Object.keys(h$.plugins.items),r=0;r<n.length;r++)t.push(h$.getPlugin(n[r]));for(var a=e.plugins||[],i=0;i<a.length;i++){var o=a[i];-1===t.indexOf(o)&&t.push(o)}return t}(n);return!1!==r||t?function(e,t,n,r){for(var a=[],i=e.getContext(),o=0;o<t.length;o++){var s=t[o],u=d$(n[s.id],r);null!==u&&a.push({plugin:s,options:p$(e.config,s,u,i)})}return a}(e,a,r,t):[]}},{key:"_notifyStateChanges",value:function(e){var t=this._oldCache||[],n=this._cache,r=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.plugin.id===t.plugin.id}))}))};this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}]),e}();function d$(e,t){return t||!1!==e?!0===e?{}:e:null}function p$(e,t,n,r){var a=e.pluginScopeKeys(t),i=e.getOptionScopes(n,a);return e.createResolver(i,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function v$(e,t){var n=eq.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function m$(e,t){return"x"===e||"y"===e?e:t.axis||("top"===(n=t.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.charAt(0).toLowerCase();var n}function g$(e){var t=e.options||(e.options={});t.plugins=SG(t.plugins,{}),t.scales=function(e,t){var n=YK[e.type]||{scales:{}},r=t.scales||{},a=v$(e.type,t),i=Object.create(null),o=Object.create(null);return Object.keys(r).forEach((function(e){var t=r[e];if(!xG(t))return console.error("Invalid scale configuration for scale: ".concat(e));if(t._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));var s=m$(e,t),u=function(e,t){return e===t?"_index_":"_value_"}(s,a),c=n.scales||{};i[s]=i[s]||e,o[e]=OG(Object.create(null),[{axis:s},t,c[s],c[u]])})),e.data.datasets.forEach((function(n){var a=n.type||e.type,s=n.indexAxis||v$(a,t),u=(YK[a]||{}).scales||{};Object.keys(u).forEach((function(e){var t=function(e,t){var n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),a=n[t+"AxisID"]||i[t]||t;o[a]=o[a]||Object.create(null),OG(o[a],[{axis:t},r[a],u[e]])}))})),Object.keys(o).forEach((function(e){var t=o[e];OG(t,[eq.scales[t.type],eq.scale])})),o}(e,t)}function y$(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}var b$=new Map,x$=new Set;function k$(e,t){var n=b$.get(e);return n||(n=t(),b$.set(e,n),x$.add(n)),n}var w$=function(e,t,n){var r=PG(t,n);void 0!==r&&e.add(r)},S$=function(){function e(t){wn(this,e),this._config=function(e){return(e=e||{}).data=y$(e.data),g$(e),e}(t),this._scopeCache=new Map,this._resolverCache=new Map}return En(e,[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(e){this._config.type=e}},{key:"data",get:function(){return this._config.data},set:function(e){this._config.data=y$(e)}},{key:"options",get:function(){return this._config.options},set:function(e){this._config.options=e}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var e=this._config;this.clearCache(),g$(e)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(e){return k$(e,(function(){return[["datasets.".concat(e),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(e,t){return k$("".concat(e,".transition.").concat(t),(function(){return[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]}))}},{key:"datasetElementScopeKeys",value:function(e,t){return k$("".concat(e,"-").concat(t),(function(){return[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]}))}},{key:"pluginScopeKeys",value:function(e){var t=e.id,n=this.type;return k$("".concat(n,"-plugin-").concat(t),(function(){return[["plugins.".concat(t)].concat(kn(e.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(e,t){var n=this._scopeCache,r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}},{key:"getOptionScopes",value:function(e,t,n){var r=this.options,a=this.type,i=this._cachedScopes(e,n),o=i.get(t);if(o)return o;var s=new Set;t.forEach((function(t){e&&(s.add(e),t.forEach((function(t){return w$(s,e,t)}))),t.forEach((function(e){return w$(s,r,e)})),t.forEach((function(e){return w$(s,YK[a]||{},e)})),t.forEach((function(e){return w$(s,eq,e)})),t.forEach((function(e){return w$(s,$K,e)}))}));var u=Array.from(s);return 0===u.length&&u.push(Object.create(null)),x$.has(t)&&i.set(t,u),u}},{key:"chartOptionScopes",value:function(){var e=this.options,t=this.type;return[e,YK[t]||{},eq.datasets[t]||{},{type:t},eq,$K]}},{key:"resolveNamedOptions",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],a={$shared:!0},i=E$(this._resolverCache,e,r),o=i.resolver,s=i.subPrefixes,u=o;if(_$(o,t)){a.$shared=!1,n=BG(n)?n():n;var c=this.createResolver(e,n,s);u=Dq(o,n,c)}var l,h=bn(t);try{for(h.s();!(l=h.n()).done;){var f=l.value;a[f]=u[f]}}catch(BZ){h.e(BZ)}finally{h.f()}return a}},{key:"createResolver",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0,a=E$(this._resolverCache,e,n),i=a.resolver;return xG(t)?Dq(i,t,void 0,r):i}}]),e}();function E$(e,t,n){var r=e.get(t);r||(r=new Map,e.set(t,r));var a=n.join(),i=r.get(a);i||(i={resolver:Oq(t,n),subPrefixes:n.filter((function(e){return!e.toLowerCase().includes("hover")}))},r.set(a,i));return i}var T$=function(e){return xG(e)&&Object.getOwnPropertyNames(e).reduce((function(t,n){return t||BG(e[n])}),!1)};function _$(e,t){var n,r=Mq(e),a=r.isScriptable,i=r.isIndexable,o=bn(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=a(s),c=i(s),l=(c||u)&&e[s];if(u&&(BG(l)||T$(l))||c&&bG(l))return!0}}catch(BZ){o.e(BZ)}finally{o.f()}return!1}var C$=["top","bottom","left","right","chartArea"];function I$(e,t){return"top"===e||"bottom"===e||-1===C$.indexOf(e)&&"x"===t}function N$(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function A$(e){var t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),TG(n&&n.onComplete,[e],t)}function R$(e){var t=e.chart,n=t.options.animation;TG(n&&n.onProgress,[e],t)}function O$(e){return eX()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var D$={},M$=function(e){var t=O$(e);return Object.values(D$).filter((function(e){return e.canvas===t})).pop()};function P$(e,t,n){for(var r=0,a=Object.keys(e);r<a.length;r++){var i=a[r],o=+i;if(o>=t){var s=e[i];delete e[i],(n>0||o>t)&&(e[o+n]=s)}}}var L$=function(){function e(t,n){var r=this;wn(this,e);var a=this.config=new S$(n),i=O$(t),o=M$(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas can be reused.");var s=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||function(e){return!eX()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?LY:$Y}(i)),this.platform.updateConfig(a);var u=this.platform.acquireContext(i,s.aspectRatio),c=u&&u.canvas,l=c&&c.height,h=c&&c.width;this.id=gG(),this.ctx=u,this.canvas=c,this.width=h,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new f$,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t?(clearTimeout(n),n=setTimeout(e,t,a)):e.apply(this,a),t}}((function(e){return r.update(e)}),s.resizeDelay||0),this._dataChanges=[],D$[this.id]=this,u&&c?(IX.listen(this,"complete",A$),IX.listen(this,"progress",R$),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}return En(e,[{key:"aspectRatio",get:function(){var e=this.options,t=e.aspectRatio,n=e.maintainAspectRatio,r=this.width,a=this.height,i=this._aspectRatio;return yG(t)?n&&i?i:a?r/a:null:t}},{key:"data",get:function(){return this.config.data},set:function(e){this.config.data=e}},{key:"options",get:function(){return this._options},set:function(e){this.config.options=e}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():cX(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return aq(this.canvas,this.ctx),this}},{key:"stop",value:function(){return IX.stop(this),this}},{key:"resize",value:function(e,t){IX.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}},{key:"_resize",value:function(e,t){var n=this.options,r=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(r,e,t,a),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,cX(this,o,!0)&&(this.notifyPlugins("resize",{size:i}),TG(n.onResize,[this,i],this),this.attached&&this._doResize(s)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){_G(this.options.scales||{},(function(e,t){e.id=t}))}},{key:"buildOrUpdateScales",value:function(){var e=this,t=this.options,n=t.scales,r=this.scales,a=Object.keys(r).reduce((function(e,t){return e[t]=!1,e}),{}),i=[];n&&(i=i.concat(Object.keys(n).map((function(e){var t=n[e],r=m$(e,t),a="r"===r,i="x"===r;return{options:t,dposition:a?"chartArea":i?"bottom":"left",dtype:a?"radialLinear":i?"category":"linear"}})))),_G(i,(function(n){var i=n.options,o=i.id,s=m$(o,i),u=SG(i.type,n.dtype);void 0!==i.position&&I$(i.position,s)===I$(n.dposition)||(i.position=n.dposition),a[o]=!0;var c=null;o in r&&r[o].type===u?c=r[o]:(c=new(h$.getScale(u))({id:o,type:u,ctx:e.ctx,chart:e}),r[c.id]=c);c.init(i,t)})),_G(a,(function(e,t){e||delete r[t]})),_G(r,(function(t){DY(e,t,t.options),RY(e,t)}))}},{key:"_updateMetasets",value:function(){var e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((function(e,t){return e.index-t.index})),n>t){for(var r=t;r<n;++r)this._destroyDatasetMeta(r);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(N$("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var e=this,t=this._metasets,n=this.data.datasets;t.length>n.length&&delete this._stacks,t.forEach((function(t,r){0===n.filter((function(e){return e===t._dataset})).length&&e._destroyDatasetMeta(r)}))}},{key:"buildOrUpdateControllers",value:function(){var e,t,n=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=r.length;e<t;e++){var a=r[e],i=this.getDatasetMeta(e),o=a.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(e),i=this.getDatasetMeta(e)),i.type=o,i.indexAxis=a.indexAxis||v$(o,this.options),i.order=a.order||0,i.index=e,i.label=""+a.label,i.visible=this.isDatasetVisible(e),i.controller)i.controller.updateIndex(e),i.controller.linkScales();else{var s=h$.getController(o),u=eq.datasets[o],c=u.datasetElementType,l=u.dataElementType;Object.assign(s.prototype,{dataElementType:h$.getElement(l),datasetElementType:c&&h$.getElement(c)}),i.controller=new s(this,e),n.push(i.controller)}}return this._updateMetasets(),n}},{key:"_resetElements",value:function(){var e=this;_G(this.data.datasets,(function(t,n){e.getDatasetMeta(n).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(e){var t=this.config;t.update();var n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})){var a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var i=0,o=0,s=this.data.datasets.length;o<s;o++){var u=this.getDatasetMeta(o).controller,c=!r&&-1===a.indexOf(u);u.buildOrUpdateElements(c),i=Math.max(+u.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),r||_G(a,(function(e){e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(N$("z","_idx"));var l=this._active,h=this._lastEvent;h?this._eventHandler(h,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}}},{key:"_updateScales",value:function(){var e=this;_G(this.scales,(function(t){OY(e,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);VG(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var e,t=this._hiddenIndices,n=bn(this._getUniformDataChanges()||[]);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.method,i=r.start,o=r.count;P$(t,i,"_removeElements"===a?-o:o)}}catch(BZ){n.e(BZ)}finally{n.f()}}},{key:"_getUniformDataChanges",value:function(){var e=this._dataChanges;if(e&&e.length){this._dataChanges=[];for(var t=this.data.datasets.length,n=function(t){return new Set(e.filter((function(e){return e[0]===t})).map((function(e,t){return t+","+e.splice(1).join(",")})))},r=n(0),a=1;a<t;a++)if(!VG(r,n(a)))return;return Array.from(r).map((function(e){return e.split(",")})).map((function(e){return{method:e[1],start:+e[2],count:+e[3]}}))}}},{key:"_updateLayout",value:function(e){var t=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){MY(this,this.width,this.height,e);var n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],_G(this.boxes,(function(e){var n;r&&"chartArea"===e.position||(e.configure&&e.configure(),(n=t._layers).push.apply(n,kn(e._layers())))}),this),this._layers.forEach((function(e,t){e._idx=t})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(var t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(var r=0,a=this.data.datasets.length;r<a;++r)this._updateDataset(r,BG(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}},{key:"_updateDataset",value:function(e,t){var n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(IX.has(this)?this.attached&&!IX.running(this)&&IX.start(this):(this.draw(),A$({chart:this})))}},{key:"draw",value:function(){var e;if(this._resizeBeforeDraw){var t=this._resizeBeforeDraw,n=t.width,r=t.height;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var a=this._layers;for(e=0;e<a.length&&a[e].z<=0;++e)a[e].draw(this.chartArea);for(this._drawDatasets();e<a.length;++e)a[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(e){var t,n,r=this._sortedMetasets,a=[];for(t=0,n=r.length;t<n;++t){var i=r[t];e&&!i.visible||a.push(i)}return a}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var e=this.getSortedVisibleDatasetMetas(),t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(e){var t=this.ctx,n=e._clip,r=!n.disabled,a=this.chartArea,i={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(r&&sq(t,{left:!1===n.left?0:a.left-n.left,right:!1===n.right?this.width:a.right+n.right,top:!1===n.top?0:a.top-n.top,bottom:!1===n.bottom?this.height:a.bottom+n.bottom}),e.controller.draw(),r&&uq(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}},{key:"getElementsAtEventForMode",value:function(e,t,n,r){var a=yY.modes[t];return"function"===typeof a?a(this,e,n,r):[]}},{key:"getDatasetMeta",value:function(e){var t=this.data.datasets[e],n=this._metasets,r=n.filter((function(e){return e&&e._dataset===t})).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}},{key:"getContext",value:function(){return this.$context||(this.$context=Tq(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(e){var t=this.data.datasets[e];if(!t)return!1;var n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}},{key:"setDatasetVisibility",value:function(e,t){this.getDatasetMeta(e).hidden=!t}},{key:"toggleDataVisibility",value:function(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}},{key:"getDataVisibility",value:function(e){return!this._hiddenIndices[e]}},{key:"_updateVisibility",value:function(e,t,n){var r=n?"show":"hide",a=this.getDatasetMeta(e),i=a.controller._resolveAnimations(void 0,r);FG(t)?(a.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(a,{visible:n}),this.update((function(t){return t.datasetIndex===e?r:void 0})))}},{key:"hide",value:function(e,t){this._updateVisibility(e,t,!1)}},{key:"show",value:function(e,t){this._updateVisibility(e,t,!0)}},{key:"_destroyDatasetMeta",value:function(e){var t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}},{key:"_stop",value:function(){var e,t;for(this.stop(),IX.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var e=this.canvas,t=this.ctx;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),aq(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete D$[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){var e;return(e=this.canvas).toDataURL.apply(e,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var e=this,t=this._listeners,n=this.platform,r=function(t,n,r){t.offsetX=n,t.offsetY=r,e._eventHandler(t)};_G(this.options.events,(function(a){return function(r,a){n.addEventListener(e,r,a),t[r]=a}(a,r)}))}},{key:"bindResponsiveEvents",value:function(){var e=this;this._responsiveListeners||(this._responsiveListeners={});var t,n=this._responsiveListeners,r=this.platform,a=function(t,a){r.addEventListener(e,t,a),n[t]=a},i=function(t,a){n[t]&&(r.removeEventListener(e,t,a),delete n[t])},o=function(t,n){e.canvas&&e.resize(t,n)},s=function n(){i("attach",n),e.attached=!0,e.resize(),a("resize",o),a("detach",t)};t=function(){e.attached=!1,i("resize",o),e._stop(),e._resize(0,0),a("attach",s)},r.isAttached(this.canvas)?s():t()}},{key:"unbindEvents",value:function(){var e=this;_G(this._listeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._listeners={},_G(this._responsiveListeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(e,t,n){var r,a,i,o=n?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),a=0,i=e.length;a<i;++a){var s=(r=e[a])&&this.getDatasetMeta(r.datasetIndex).controller;s&&s[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e){var t=this,n=this._active||[],r=e.map((function(e){var n=e.datasetIndex,r=e.index,a=t.getDatasetMeta(n);if(!a)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:a.data[r],index:r}}));!CG(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}},{key:"notifyPlugins",value:function(e,t,n){return this._plugins.notify(this,e,t,n)}},{key:"_updateHoverStyles",value:function(e,t,n){var r=this.options.hover,a=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.datasetIndex===t.datasetIndex&&e.index===t.index}))}))},i=a(t,e),o=n?e:a(e,t);i.length&&this.updateHoverStyle(i,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}},{key:"_eventHandler",value:function(e,t){var n=this,r={event:e,replay:t,cancelable:!0,inChartArea:oq(e,this.chartArea,this._minPadding)},a=function(t){return(t.options.events||n.options.events).includes(e.native.type)};if(!1!==this.notifyPlugins("beforeEvent",r,a)){var i=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,a),(i||r.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(e,t,n){var r=this._active,a=void 0===r?[]:r,i=this.options,o=t,s=this._getActiveElements(e,a,n,o),u=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),c=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,u);n&&(this._lastEvent=null,TG(i.onHover,[e,s,this],this),u&&TG(i.onClick,[e,s,this],this));var l=!CG(s,a);return(l||t)&&(this._active=s,this._updateHoverStyles(s,a,t)),this._lastEvent=c,l}},{key:"_getActiveElements",value:function(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;var a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}}]),e}(),F$=function(){return _G(L$.instances,(function(e){return e._plugins.invalidate()}))},B$=!0;function V$(e,t,n){var r=t.startAngle,a=t.pixelMargin,i=t.x,o=t.y,s=t.outerRadius,u=t.innerRadius,c=a/s;e.beginPath(),e.arc(i,o,s,r-c,n+c),u>a?(c=a/u,e.arc(i,o,u,n+c,r-c,!0)):e.arc(i,o,a,n+GG,r-GG),e.closePath(),e.clip()}function U$(e,t,n,r){var a=bq(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),i=(n-t)/2,o=Math.min(i,r*t/2),s=function(e){var t=(n-Math.min(i,e))*r/2;return uK(e,0,Math.min(i,t))};return{outerStart:s(a.outerStart),outerEnd:s(a.outerEnd),innerStart:uK(a.innerStart,0,o),innerEnd:uK(a.innerEnd,0,o)}}function j$(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function z$(e,t,n,r,a){var i=t.x,o=t.y,s=t.startAngle,u=t.pixelMargin,c=t.innerRadius,l=Math.max(t.outerRadius+r+n-u,0),h=c>0?c+r+n+u:0,f=0,d=a-s;if(r){var p=((c>0?c-r:0)+(l>0?l-r:0))/2;f=(d-(0!==p?d*p/(p+r):d))/2}var v=(d-Math.max(.001,d*l-n/UG)/l)/2,m=s+v+f,g=a-v-f,y=U$(t,h,l,g-m),b=y.outerStart,x=y.outerEnd,k=y.innerStart,w=y.innerEnd,S=l-b,E=l-x,T=m+b/S,_=g-x/E,C=h+k,I=h+w,N=m+k/C,A=g-w/I;if(e.beginPath(),e.arc(i,o,l,T,_),x>0){var R=j$(E,_,i,o);e.arc(R.x,R.y,x,_,g+GG)}var O=j$(I,g,i,o);if(e.lineTo(O.x,O.y),w>0){var D=j$(I,A,i,o);e.arc(D.x,D.y,w,g+GG,A+Math.PI)}if(e.arc(i,o,h,g-w/h,m+k/h,!0),k>0){var M=j$(C,N,i,o);e.arc(M.x,M.y,k,N+Math.PI,m-GG)}var P=j$(S,m,i,o);if(e.lineTo(P.x,P.y),b>0){var L=j$(S,T,i,o);e.arc(L.x,L.y,b,m-GG,T)}e.closePath()}function W$(e,t,n,r,a){var i=t.options,o=i.borderWidth,s=i.borderJoinStyle,u="inner"===i.borderAlign;o&&(u?(e.lineWidth=2*o,e.lineJoin=s||"round"):(e.lineWidth=o,e.lineJoin=s||"bevel"),t.fullCircles&&function(e,t,n){var r,a=t.x,i=t.y,o=t.startAngle,s=t.pixelMargin,u=t.fullCircles,c=Math.max(t.outerRadius-s,0),l=t.innerRadius+s;for(n&&V$(e,t,o+jG),e.beginPath(),e.arc(a,i,l,o+jG,o,!0),r=0;r<u;++r)e.stroke();for(e.beginPath(),e.arc(a,i,c,o,o+jG),r=0;r<u;++r)e.stroke()}(e,t,u),u&&V$(e,t,a),z$(e,t,n,r,a),e.stroke())}Object.defineProperties(L$,{defaults:{enumerable:B$,value:eq},instances:{enumerable:B$,value:D$},overrides:{enumerable:B$,value:YK},registry:{enumerable:B$,value:h$},version:{enumerable:B$,value:"3.7.1"},getChart:{enumerable:B$,value:M$},register:{enumerable:B$,value:function(){h$.add.apply(h$,arguments),F$()}},unregister:{enumerable:B$,value:function(){h$.remove.apply(h$,arguments),F$()}}});var H$=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).options=void 0,r.circumference=void 0,r.startAngle=void 0,r.endAngle=void 0,r.innerRadius=void 0,r.outerRadius=void 0,r.pixelMargin=0,r.fullCircles=0,e&&Object.assign(Bo(r),e),r}return En(n,[{key:"inRange",value:function(e,t,n){var r=rK(this.getProps(["x","y"],n),{x:e,y:t}),a=r.angle,i=r.distance,o=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),s=o.startAngle,u=o.endAngle,c=o.innerRadius,l=o.outerRadius,h=o.circumference,f=this.options.spacing/2,d=SG(h,u-s)>=jG||sK(a,s,u),p=cK(i,c+f,l+f);return d&&p}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),n=t.x,r=t.y,a=t.startAngle,i=t.endAngle,o=t.innerRadius,s=t.outerRadius,u=this.options,c=u.offset,l=(a+i)/2,h=(o+s+u.spacing+c)/2;return{x:n+Math.cos(l)*h,y:r+Math.sin(l)*h}}},{key:"tooltipPosition",value:function(e){return this.getCenterPoint(e)}},{key:"draw",value:function(e){var t=this.options,n=this.circumference,r=(t.offset||0)/2,a=(t.spacing||0)/2;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>jG?Math.floor(n/jG):0,!(0===n||this.innerRadius<0||this.outerRadius<0)){e.save();var i=0;if(r){i=r/2;var o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i),this.circumference>=UG&&(i=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;var s=function(e,t,n,r){var a=t.fullCircles,i=t.startAngle,o=t.circumference,s=t.endAngle;if(a){z$(e,t,n,r,i+jG);for(var u=0;u<a;++u)e.fill();isNaN(o)||(s=i+o%jG,o%jG===0&&(s+=jG))}return z$(e,t,n,r,s),e.fill(),s}(e,this,i,a);W$(e,this,i,a,s),e.restore()}}}]),n}(QY);function G$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=SG(n.borderCapStyle,t.borderCapStyle),e.setLineDash(SG(n.borderDash,t.borderDash)),e.lineDashOffset=SG(n.borderDashOffset,t.borderDashOffset),e.lineJoin=SG(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=SG(n.borderWidth,t.borderWidth),e.strokeStyle=SG(n.borderColor,t.borderColor)}function K$(e,t,n){e.lineTo(n.x,n.y)}function q$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.length,a=n.start,i=void 0===a?0:a,o=n.end,s=void 0===o?r-1:o,u=t.start,c=t.end,l=Math.max(i,u),h=Math.min(s,c),f=i<u&&s<u||i>c&&s>c;return{count:r,start:l,loop:t.loop,ilen:h<l&&!f?r+h-l:h-l}}function X$(e,t,n,r){var a,i,o,s=t.points,u=t.options,c=q$(s,n,r),l=c.count,h=c.start,f=c.loop,d=c.ilen,p=function(e){return e.stepped?cq:e.tension||"monotone"===e.cubicInterpolationMode?lq:K$}(u),v=r||{},m=v.move,g=void 0===m||m,y=v.reverse;for(a=0;a<=d;++a)(i=s[(h+(y?d-a:a))%l]).skip||(g?(e.moveTo(i.x,i.y),g=!1):p(e,o,i,y,u.stepped),o=i);return f&&p(e,o,i=s[(h+(y?d:0))%l],y,u.stepped),!!f}function Y$(e,t,n,r){var a,i,o,s,u,c,l=t.points,h=q$(l,n,r),f=h.count,d=h.start,p=h.ilen,v=r||{},m=v.move,g=void 0===m||m,y=v.reverse,b=0,x=0,k=function(e){return(d+(y?p-e:e))%f},w=function(){s!==u&&(e.lineTo(b,u),e.lineTo(b,s),e.lineTo(b,c))};for(g&&(i=l[k(0)],e.moveTo(i.x,i.y)),a=0;a<=p;++a)if(!(i=l[k(a)]).skip){var S=i.x,E=i.y,T=0|S;T===o?(E<s?s=E:E>u&&(u=E),b=(x*b+S)/++x):(w(),e.lineTo(S,E),o=T,x=0,s=u=E),c=E}w()}function $$(e){var t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Y$:X$}H$.id="arc",H$.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},H$.defaultRoutes={backgroundColor:"backgroundColor"};var Q$="function"===typeof Path2D;function J$(e,t,n,r){Q$&&!t.options.segment?function(e,t,n,r){var a=t._path;a||(a=t._path=new Path2D,t.path(a,n,r)&&a.closePath()),G$(e,t.options),e.stroke(a)}(e,t,n,r):function(e,t,n,r){var a,i=t.segments,o=t.options,s=$$(t),u=bn(i);try{for(u.s();!(a=u.n()).done;){var c=a.value;G$(e,o,c.style),e.beginPath(),s(e,t,c,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}}catch(BZ){u.e(BZ)}finally{u.f()}}(e,t,n,r)}var Z$=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).animated=!0,r.options=void 0,r._chart=void 0,r._loop=void 0,r._fullLoop=void 0,r._path=void 0,r._points=void 0,r._segments=void 0,r._decimated=!1,r._pointsUpdated=!1,r._datasetIndex=void 0,e&&Object.assign(Bo(r),e),r}return En(n,[{key:"updateControlPoints",value:function(e,t){var n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){var r=n.spanGaps?this._loop:this._fullLoop;Zq(this._points,n,e,r,t),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(e,t){var n=e.points,r=e.options.spanGaps,a=n.length;if(!a)return[];var i=!!e._loop,o=function(e,t,n,r){var a=0,i=t-1;if(n&&!r)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,n&&(i+=a);i>a&&e[i%t].skip;)i--;return{start:a,end:i%=t}}(n,a,i,r),s=o.start,u=o.end;return EX(e,!0===r?[{start:s,end:u,loop:i}]:function(e,t,n,r){var a,i=e.length,o=[],s=t,u=e[t];for(a=t+1;a<=n;++a){var c=e[a%i];c.skip||c.stop?u.skip||(r=!1,o.push({start:t%i,end:(a-1)%i,loop:r}),t=s=c.stop?a:null):(s=a,u.skip&&(t=a)),u=c}return null!==s&&o.push({start:t%i,end:s%i,loop:r}),o}(n,s,u<s?u+a:u,!!e._fullLoop&&0===s&&u===a-1),n,t)}(this,this.options.segment))}},{key:"first",value:function(){var e=this.segments,t=this.points;return e.length&&t[e[0].start]}},{key:"last",value:function(){var e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}},{key:"interpolate",value:function(e,t){var n=this.options,r=e[t],a=this.points,i=SX(this,{property:t,start:r,end:r});if(i.length){var o,s,u=[],c=function(e){return e.stepped?dX:e.tension||"monotone"===e.cubicInterpolationMode?pX:fX}(n);for(o=0,s=i.length;o<s;++o){var l=i[o],h=l.start,f=l.end,d=a[h],p=a[f];if(d!==p){var v=c(d,p,Math.abs((r-d[t])/(p[t]-d[t])),n.stepped);v[t]=e[t],u.push(v)}else u.push(d)}return 1===u.length?u[0]:u}}},{key:"pathSegment",value:function(e,t,n){return $$(this)(e,this,t,n)}},{key:"path",value:function(e,t,n){var r=this.segments,a=$$(this),i=this._loop;t=t||0,n=n||this.points.length-t;var o,s=bn(r);try{for(s.s();!(o=s.n()).done;){i&=a(e,this,o.value,{start:t,end:t+n-1})}}catch(BZ){s.e(BZ)}finally{s.f()}return!!i}},{key:"draw",value:function(e,t,n,r){var a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),J$(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}]),n}(QY);function eQ(e,t,n,r){var a=e.options,i=e.getProps([n],r)[n];return Math.abs(t-i)<a.radius+a.hitRadius}Z$.id="line",Z$.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},Z$.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},Z$.descriptors={_scriptable:!0,_indexable:function(e){return"borderDash"!==e&&"fill"!==e}};var tQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).options=void 0,r.parsed=void 0,r.skip=void 0,r.stop=void 0,e&&Object.assign(Bo(r),e),r}return En(n,[{key:"inRange",value:function(e,t,n){var r=this.options,a=this.getProps(["x","y"],n),i=a.x,o=a.y;return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}},{key:"inXRange",value:function(e,t){return eQ(this,e,"x",t)}},{key:"inYRange",value:function(e,t){return eQ(this,e,"y",t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"size",value:function(e){var t=(e=e||this.options||{}).radius||0;return 2*((t=Math.max(t,t&&e.hoverRadius||0))+(t&&e.borderWidth||0))}},{key:"draw",value:function(e,t){var n=this.options;this.skip||n.radius<.1||!oq(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,iq(e,n,this.x,this.y))}},{key:"getRange",value:function(){var e=this.options||{};return e.radius+e.hitRadius}}]),n}(QY);function nQ(e,t){var n,r,a,i,o,s=e.getProps(["x","y","base","width","height"],t),u=s.x,c=s.y,l=s.base,h=s.width,f=s.height;return e.horizontal?(o=f/2,n=Math.min(u,l),r=Math.max(u,l),a=c-o,i=c+o):(n=u-(o=h/2),r=u+o,a=Math.min(c,l),i=Math.max(c,l)),{left:n,top:a,right:r,bottom:i}}function rQ(e,t,n,r){return e?0:uK(t,n,r)}function aQ(e){var t=nQ(e),n=t.right-t.left,r=t.bottom-t.top,a=function(e,t,n){var r=e.options.borderWidth,a=e.borderSkipped,i=xq(r);return{t:rQ(a.top,i.top,0,n),r:rQ(a.right,i.right,0,t),b:rQ(a.bottom,i.bottom,0,n),l:rQ(a.left,i.left,0,t)}}(e,n/2,r/2),i=function(e,t,n){var r=e.getProps(["enableBorderRadius"]).enableBorderRadius,a=e.options.borderRadius,i=kq(a),o=Math.min(t,n),s=e.borderSkipped,u=r||xG(a);return{topLeft:rQ(!u||s.top||s.left,i.topLeft,0,o),topRight:rQ(!u||s.top||s.right,i.topRight,0,o),bottomLeft:rQ(!u||s.bottom||s.left,i.bottomLeft,0,o),bottomRight:rQ(!u||s.bottom||s.right,i.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+a.l,y:t.top+a.t,w:n-a.l-a.r,h:r-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function iQ(e,t,n,r){var a=null===t,i=null===n,o=e&&!(a&&i)&&nQ(e,r);return o&&(a||cK(t,o.left,o.right))&&(i||cK(n,o.top,o.bottom))}function oQ(e,t){e.rect(t.x,t.y,t.w,t.h)}function sQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.x!==n.x?-t:0,a=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-a;return{x:e.x+r,y:e.y+a,w:e.w+i,h:e.h+o,radius:e.radius}}tQ.id="point",tQ.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},tQ.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var uQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).options=void 0,r.horizontal=void 0,r.base=void 0,r.width=void 0,r.height=void 0,r.inflateAmount=void 0,e&&Object.assign(Bo(r),e),r}return En(n,[{key:"draw",value:function(e){var t,n=this.inflateAmount,r=this.options,a=r.borderColor,i=r.backgroundColor,o=aQ(this),s=o.inner,u=o.outer,c=(t=u.radius).topLeft||t.topRight||t.bottomLeft||t.bottomRight?pq:oQ;e.save(),u.w===s.w&&u.h===s.h||(e.beginPath(),c(e,sQ(u,n,s)),e.clip(),c(e,sQ(s,-n,u)),e.fillStyle=a,e.fill("evenodd")),e.beginPath(),c(e,sQ(s,n)),e.fillStyle=i,e.fill(),e.restore()}},{key:"inRange",value:function(e,t,n){return iQ(this,e,t,n)}},{key:"inXRange",value:function(e,t){return iQ(this,e,null,t)}},{key:"inYRange",value:function(e,t){return iQ(this,null,e,t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","base","horizontal"],e),n=t.x,r=t.y,a=t.base,i=t.horizontal;return{x:i?(n+a)/2:n,y:i?r:(r+a)/2}}},{key:"getRange",value:function(e){return"x"===e?this.width/2:this.height/2}}]),n}(QY);uQ.id="bar",uQ.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},uQ.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var cQ=function(e,t){var n=e.boxHeight,r=void 0===n?t:n,a=e.boxWidth,i=void 0===a?t:a;return e.usePointStyle&&(r=Math.min(r,t),i=Math.min(i,t)),{boxWidth:i,boxHeight:r,itemHeight:Math.max(t,r)}},lQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this))._added=!1,r.legendHitBoxes=[],r._hoveredItem=null,r.doughnutMode=!1,r.chart=e.chart,r.options=e.options,r.ctx=e.ctx,r.legendItems=void 0,r.columnSizes=void 0,r.lineWidths=void 0,r.maxHeight=void 0,r.maxWidth=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.height=void 0,r.width=void 0,r._margins=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return En(n,[{key:"update",value:function(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var e=this,t=this.options.labels||{},n=TG(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter((function(n){return t.filter(n,e.chart.data)}))),t.sort&&(n=n.sort((function(n,r){return t.sort(n,r,e.chart.data)}))),this.options.reverse&&n.reverse(),this.legendItems=n}},{key:"fit",value:function(){var e=this.options,t=this.ctx;if(e.display){var n,r,a=e.labels,i=Sq(a.font),o=i.size,s=this._computeTitleHeight(),u=cQ(a,o),c=u.boxWidth,l=u.itemHeight;t.font=i.string,this.isHorizontal()?(n=this.maxWidth,r=this._fitRows(s,o,c,l)+10):(r=this.maxHeight,n=this._fitCols(s,o,c,l)+10),this.width=Math.min(n,e.maxWidth||this.maxWidth),this.height=Math.min(r,e.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(e,t,n,r){var a=this.ctx,i=this.maxWidth,o=this.options.labels.padding,s=this.legendHitBoxes=[],u=this.lineWidths=[0],c=r+o,l=e;a.textAlign="left",a.textBaseline="middle";var h=-1,f=-c;return this.legendItems.forEach((function(e,d){var p=n+t/2+a.measureText(e.text).width;(0===d||u[u.length-1]+p+2*o>i)&&(l+=c,u[u.length-(d>0?0:1)]=0,f+=c,h++),s[d]={left:0,top:f,row:h,width:p,height:r},u[u.length-1]+=p+o})),l}},{key:"_fitCols",value:function(e,t,n,r){var a=this.ctx,i=this.maxHeight,o=this.options.labels.padding,s=this.legendHitBoxes=[],u=this.columnSizes=[],c=i-e,l=o,h=0,f=0,d=0,p=0;return this.legendItems.forEach((function(e,i){var v=n+t/2+a.measureText(e.text).width;i>0&&f+r+2*o>c&&(l+=h+o,u.push({width:h,height:f}),d+=h+o,p++,h=f=0),s[i]={left:d,top:f,col:p,width:v,height:r},h=Math.max(h,v),f+=r+o})),l+=h,u.push({width:h,height:f}),l}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var e=this._computeTitleHeight(),t=this.legendHitBoxes,n=this.options,r=n.align,a=n.labels.padding,i=gX(n.rtl,this.left,this.width);if(this.isHorizontal()){var o,s=0,u=vG(r,this.left+a,this.right-this.lineWidths[s]),c=bn(t);try{for(c.s();!(o=c.n()).done;){var l=o.value;s!==l.row&&(s=l.row,u=vG(r,this.left+a,this.right-this.lineWidths[s])),l.top+=this.top+e+a,l.left=i.leftForLtr(i.x(u),l.width),u+=l.width+a}}catch(BZ){c.e(BZ)}finally{c.f()}}else{var h,f=0,d=vG(r,this.top+e+a,this.bottom-this.columnSizes[f].height),p=bn(t);try{for(p.s();!(h=p.n()).done;){var v=h.value;v.col!==f&&(f=v.col,d=vG(r,this.top+e+a,this.bottom-this.columnSizes[f].height)),v.top=d,v.left+=this.left+a,v.left=i.leftForLtr(i.x(v.left),v.width),d+=v.height+a}}catch(BZ){p.e(BZ)}finally{p.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var e=this.ctx;sq(e,this),this._draw(),uq(e)}}},{key:"_draw",value:function(){var e,t=this,n=this.options,r=this.columnSizes,a=this.lineWidths,i=this.ctx,o=n.align,s=n.labels,u=eq.color,c=gX(n.rtl,this.left,this.width),l=Sq(s.font),h=s.color,f=s.padding,d=l.size,p=d/2;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;var v=cQ(s,d),m=v.boxWidth,g=v.boxHeight,y=v.itemHeight,b=this.isHorizontal(),x=this._computeTitleHeight();e=b?{x:vG(o,this.left+f,this.right-a[0]),y:this.top+f+x,line:0}:{x:this.left+f,y:vG(o,this.top+x+f,this.bottom-r[0].height),line:0},yX(this.ctx,n.textDirection);var k=y+f;this.legendItems.forEach((function(v,w){i.strokeStyle=v.fontColor||h,i.fillStyle=v.fontColor||h;var S=i.measureText(v.text).width,E=c.textAlign(v.textAlign||(v.textAlign=s.textAlign)),T=m+p+S,_=e.x,C=e.y;c.setWidth(t.width),b?w>0&&_+T+f>t.right&&(C=e.y+=k,e.line++,_=e.x=vG(o,t.left+f,t.right-a[e.line])):w>0&&C+k>t.bottom&&(_=e.x=_+r[e.line].width+f,e.line++,C=e.y=vG(o,t.top+x+f,t.bottom-r[e.line].height)),function(e,t,n){if(!(isNaN(m)||m<=0||isNaN(g)||g<0)){i.save();var r=SG(n.lineWidth,1);if(i.fillStyle=SG(n.fillStyle,u),i.lineCap=SG(n.lineCap,"butt"),i.lineDashOffset=SG(n.lineDashOffset,0),i.lineJoin=SG(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=SG(n.strokeStyle,u),i.setLineDash(SG(n.lineDash,[])),s.usePointStyle){var a={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},o=c.xPlus(e,m/2);iq(i,a,o,t+p)}else{var l=t+Math.max((d-g)/2,0),h=c.leftForLtr(e,m),f=kq(n.borderRadius);i.beginPath(),Object.values(f).some((function(e){return 0!==e}))?pq(i,{x:h,y:l,w:m,h:g,radius:f}):i.rect(h,l,m,g),i.fill(),0!==r&&i.stroke()}i.restore()}}(c.x(_),C,v),_=function(e,t,n,r){return e===(r?"left":"right")?n:"center"===e?(t+n)/2:t}(E,_+m+p,b?_+T:t.right,n.rtl),function(e,t,n){hq(i,n.text,e,t+y/2,l,{strikethrough:n.hidden,textAlign:c.textAlign(n.textAlign)})}(c.x(_),C,v),b?e.x+=T+f:e.y+=k})),bX(this.ctx,n.textDirection)}},{key:"drawTitle",value:function(){var e=this.options,t=e.title,n=Sq(t.font),r=wq(t.padding);if(t.display){var a,i=gX(e.rtl,this.left,this.width),o=this.ctx,s=t.position,u=n.size/2,c=r.top+u,l=this.left,h=this.width;if(this.isHorizontal())h=Math.max.apply(Math,kn(this.lineWidths)),a=this.top+c,l=vG(e.align,l,this.right-h);else{var f=this.columnSizes.reduce((function(e,t){return Math.max(e,t.height)}),0);a=c+vG(e.align,this.top,this.bottom-f-e.labels.padding-this._computeTitleHeight())}var d=vG(s,l,l+h);o.textAlign=i.textAlign(pG(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,hq(o,t.text,d,a,n)}}},{key:"_computeTitleHeight",value:function(){var e=this.options.title,t=Sq(e.font),n=wq(e.padding);return e.display?t.lineHeight+n.height:0}},{key:"_getLegendItemAt",value:function(e,t){var n,r,a;if(cK(e,this.left,this.right)&&cK(t,this.top,this.bottom))for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(cK(e,(r=a[n]).left,r.left+r.width)&&cK(t,r.top,r.top+r.height))return this.legendItems[n];return null}},{key:"handleEvent",value:function(e){var t=this.options;if(function(e,t){if("mousemove"===e&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t)){var n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type){var r=this._hoveredItem,a=function(e,t){return null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index}(r,n);r&&!a&&TG(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!a&&TG(t.onHover,[e,n,this],this)}else n&&TG(t.onClick,[e,n,this],this)}}}]),n}(QY);var hQ={id:"legend",_element:lQ,start:function(e,t,n){var r=e.legend=new lQ({ctx:e.ctx,options:n,chart:e});DY(e,r,n),RY(e,r)},stop:function(e){OY(e,e.legend),delete e.legend},beforeUpdate:function(e,t,n){var r=e.legend;DY(e,r,n),r.options=n},afterUpdate:function(e){var t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent:function(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(e,t,n){var r=t.datasetIndex,a=n.chart;a.isDatasetVisible(r)?(a.hide(r),t.hidden=!0):(a.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(e){return e.chart.options.color},boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.legend.options.labels,r=n.usePointStyle,a=n.pointStyle,i=n.textAlign,o=n.color;return e._getSortedDatasetMetas().map((function(e){var n=e.controller.getStyle(r?0:void 0),s=wq(n.borderWidth);return{text:t[e.index].label,fillStyle:n.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(s.width+s.height)/4,strokeStyle:n.borderColor,pointStyle:a||n.pointStyle,rotation:n.rotation,textAlign:i||n.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:function(e){return e.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(e){return!e.startsWith("on")},labels:{_scriptable:function(e){return!["generateLabels","filter","sort"].includes(e)}}}},fQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).chart=e.chart,r.options=e.options,r.ctx=e.ctx,r._padding=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return En(n,[{key:"update",value:function(e,t){var n=this.options;if(this.left=0,this.top=0,n.display){this.width=this.right=e,this.height=this.bottom=t;var r=bG(n.text)?n.text.length:1;this._padding=wq(n.padding);var a=r*Sq(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}else this.width=this.height=this.right=this.bottom=0}},{key:"isHorizontal",value:function(){var e=this.options.position;return"top"===e||"bottom"===e}},{key:"_drawArgs",value:function(e){var t,n,r,a=this.top,i=this.left,o=this.bottom,s=this.right,u=this.options,c=u.align,l=0;return this.isHorizontal()?(n=vG(c,i,s),r=a+e,t=s-i):("left"===u.position?(n=i+e,r=vG(c,o,a),l=-.5*UG):(n=s-e,r=vG(c,a,o),l=.5*UG),t=o-a),{titleX:n,titleY:r,maxWidth:t,rotation:l}}},{key:"draw",value:function(){var e=this.ctx,t=this.options;if(t.display){var n=Sq(t.font),r=n.lineHeight/2+this._padding.top,a=this._drawArgs(r),i=a.titleX,o=a.titleY,s=a.maxWidth,u=a.rotation;hq(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:u,textAlign:pG(t.align),textBaseline:"middle",translation:[i,o]})}}}]),n}(QY);var dQ={id:"title",_element:fQ,start:function(e,t,n){!function(e,t){var n=new fQ({ctx:e.ctx,options:t,chart:e});DY(e,n,t),RY(e,n),e.titleBlock=n}(e,n)},stop:function(e){var t=e.titleBlock;OY(e,t),delete e.titleBlock},beforeUpdate:function(e,t,n){var r=e.titleBlock;DY(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},pQ=(new WeakMap,{average:function(e){if(!e.length)return!1;var t,n,r=0,a=0,i=0;for(t=0,n=e.length;t<n;++t){var o=e[t].element;if(o&&o.hasValue()){var s=o.tooltipPosition();r+=s.x,a+=s.y,++i}}return{x:r/i,y:a/i}},nearest:function(e,t){if(!e.length)return!1;var n,r,a,i=t.x,o=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var u=e[n].element;if(u&&u.hasValue()){var c=aK(t,u.getCenterPoint());c<s&&(s=c,a=u)}}if(a){var l=a.tooltipPosition();i=l.x,o=l.y}return{x:i,y:o}}});function vQ(e,t){return t&&(bG(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function mQ(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function gQ(e,t){var n=t.element,r=t.datasetIndex,a=t.index,i=e.getDatasetMeta(r).controller,o=i.getLabelAndValue(a),s=o.label,u=o.value;return{chart:e,label:s,parsed:i.getParsed(a),raw:e.data.datasets[r].data[a],formattedValue:u,dataset:i.getDataset(),dataIndex:a,datasetIndex:r,element:n}}function yQ(e,t){var n=e.chart.ctx,r=e.body,a=e.footer,i=e.title,o=t.boxWidth,s=t.boxHeight,u=Sq(t.bodyFont),c=Sq(t.titleFont),l=Sq(t.footerFont),h=i.length,f=a.length,d=r.length,p=wq(t.padding),v=p.height,m=0,g=r.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);(g+=e.beforeBody.length+e.afterBody.length,h&&(v+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),g)&&(v+=d*(t.displayColors?Math.max(s,u.lineHeight):u.lineHeight)+(g-d)*u.lineHeight+(g-1)*t.bodySpacing);f&&(v+=t.footerMarginTop+f*l.lineHeight+(f-1)*t.footerSpacing);var y=0,b=function(e){m=Math.max(m,n.measureText(e).width+y)};return n.save(),n.font=c.string,_G(e.title,b),n.font=u.string,_G(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?o+2+t.boxPadding:0,_G(r,(function(e){_G(e.before,b),_G(e.lines,b),_G(e.after,b)})),y=0,n.font=l.string,_G(e.footer,b),n.restore(),{width:m+=p.width,height:v}}function bQ(e,t,n,r){var a=n.x,i=n.width,o=e.width,s=e.chartArea,u=s.left,c=s.right,l="center";return"center"===r?l=a<=(u+c)/2?"left":"right":a<=i/2?l="left":a>=o-i/2&&(l="right"),function(e,t,n,r){var a=r.x,i=r.width,o=n.caretSize+n.caretPadding;return"left"===e&&a+i+o>t.width||"right"===e&&a-i-o<0||void 0}(l,e,t,n)&&(l="center"),l}function xQ(e,t,n){var r=n.yAlign||t.yAlign||function(e,t){var n=t.y,r=t.height;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||bQ(e,t,n,r),yAlign:r}}function kQ(e,t,n,r){var a=e.caretSize,i=e.caretPadding,o=e.cornerRadius,s=n.xAlign,u=n.yAlign,c=a+i,l=kq(o),h=l.topLeft,f=l.topRight,d=l.bottomLeft,p=l.bottomRight,v=function(e,t){var n=e.x,r=e.width;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,s),m=function(e,t,n){var r=e.y,a=e.height;return"top"===t?r+=n:r-="bottom"===t?a+n:a/2,r}(t,u,c);return"center"===u?"left"===s?v+=c:"right"===s&&(v-=c):"left"===s?v-=Math.max(h,d)+a:"right"===s&&(v+=Math.max(f,p)+a),{x:uK(v,0,r.width-t.width),y:uK(m,0,r.height-t.height)}}function wQ(e,t,n){var r=wq(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function SQ(e){return vQ([],mQ(e))}function EQ(e,t){var n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}var TQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this)).opacity=0,r._active=[],r._eventPosition=void 0,r._size=void 0,r._cachedAnimations=void 0,r._tooltipItems=[],r.$animations=void 0,r.$context=void 0,r.chart=e.chart||e._chart,r._chart=r.chart,r.options=e.options,r.dataPoints=void 0,r.title=void 0,r.beforeBody=void 0,r.body=void 0,r.afterBody=void 0,r.footer=void 0,r.xAlign=void 0,r.yAlign=void 0,r.x=void 0,r.y=void 0,r.height=void 0,r.width=void 0,r.caretX=void 0,r.caretY=void 0,r.labelColors=void 0,r.labelPointStyles=void 0,r.labelTextColors=void 0,r}return En(n,[{key:"initialize",value:function(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var e=this._cachedAnimations;if(e)return e;var t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,a=new DX(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}},{key:"getContext",value:function(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Tq(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}},{key:"getTitle",value:function(e,t){var n=t.callbacks,r=n.beforeTitle.apply(this,[e]),a=n.title.apply(this,[e]),i=n.afterTitle.apply(this,[e]),o=[];return o=vQ(o,mQ(r)),o=vQ(o,mQ(a)),o=vQ(o,mQ(i))}},{key:"getBeforeBody",value:function(e,t){return SQ(t.callbacks.beforeBody.apply(this,[e]))}},{key:"getBody",value:function(e,t){var n=this,r=t.callbacks,a=[];return _G(e,(function(e){var t={before:[],lines:[],after:[]},i=EQ(r,e);vQ(t.before,mQ(i.beforeLabel.call(n,e))),vQ(t.lines,i.label.call(n,e)),vQ(t.after,mQ(i.afterLabel.call(n,e))),a.push(t)})),a}},{key:"getAfterBody",value:function(e,t){return SQ(t.callbacks.afterBody.apply(this,[e]))}},{key:"getFooter",value:function(e,t){var n=t.callbacks,r=n.beforeFooter.apply(this,[e]),a=n.footer.apply(this,[e]),i=n.afterFooter.apply(this,[e]),o=[];return o=vQ(o,mQ(r)),o=vQ(o,mQ(a)),o=vQ(o,mQ(i))}},{key:"_createItems",value:function(e){var t,n,r=this,a=this._active,i=this.chart.data,o=[],s=[],u=[],c=[];for(t=0,n=a.length;t<n;++t)c.push(gQ(this.chart,a[t]));return e.filter&&(c=c.filter((function(t,n,r){return e.filter(t,n,r,i)}))),e.itemSort&&(c=c.sort((function(t,n){return e.itemSort(t,n,i)}))),_G(c,(function(t){var n=EQ(e.callbacks,t);o.push(n.labelColor.call(r,t)),s.push(n.labelPointStyle.call(r,t)),u.push(n.labelTextColor.call(r,t))})),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=u,this.dataPoints=c,c}},{key:"update",value:function(e,t){var n,r=this.options.setContext(this.getContext()),a=this._active,i=[];if(a.length){var o=pQ[r.position].call(this,a,this._eventPosition);i=this._createItems(r),this.title=this.getTitle(i,r),this.beforeBody=this.getBeforeBody(i,r),this.body=this.getBody(i,r),this.afterBody=this.getAfterBody(i,r),this.footer=this.getFooter(i,r);var s=this._size=yQ(this,r),u=Object.assign({},o,s),c=xQ(this.chart,r,u),l=kQ(r,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,n={opacity:1,x:l.x,y:l.y,width:s.width,height:s.height,caretX:o.x,caretY:o.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=i,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}},{key:"drawCaret",value:function(e,t,n,r){var a=this.getCaretPosition(e,n,r);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}},{key:"getCaretPosition",value:function(e,t,n){var r,a,i,o,s,u,c=this.xAlign,l=this.yAlign,h=n.caretSize,f=kq(n.cornerRadius),d=f.topLeft,p=f.topRight,v=f.bottomLeft,m=f.bottomRight,g=e.x,y=e.y,b=t.width,x=t.height;return"center"===l?(s=y+x/2,"left"===c?(a=(r=g)-h,o=s+h,u=s-h):(a=(r=g+b)+h,o=s-h,u=s+h),i=r):(a="left"===c?g+Math.max(d,v)+h:"right"===c?g+b-Math.max(p,m)-h:this.caretX,"top"===l?(s=(o=y)-h,r=a-h,i=a+h):(s=(o=y+x)+h,r=a+h,i=a-h),u=o),{x1:r,x2:a,x3:i,y1:o,y2:s,y3:u}}},{key:"drawTitle",value:function(e,t,n){var r,a,i,o=this.title,s=o.length;if(s){var u=gX(n.rtl,this.x,this.width);for(e.x=wQ(this,n.titleAlign,n),t.textAlign=u.textAlign(n.titleAlign),t.textBaseline="middle",r=Sq(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=r.string,i=0;i<s;++i)t.fillText(o[i],u.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,i+1===s&&(e.y+=n.titleMarginBottom-a)}}},{key:"_drawColorBox",value:function(e,t,n,r,a){var i=this.labelColors[n],o=this.labelPointStyles[n],s=a.boxHeight,u=a.boxWidth,c=a.boxPadding,l=Sq(a.bodyFont),h=wQ(this,"left",a),f=r.x(h),d=s<l.lineHeight?(l.lineHeight-s)/2:0,p=t.y+d;if(a.usePointStyle){var v={radius:Math.min(u,s)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},m=r.leftForLtr(f,u)+u/2,g=p+s/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,iq(e,v,m,g),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,iq(e,v,m,g)}else{e.lineWidth=i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;var y=r.leftForLtr(f,u-c),b=r.leftForLtr(r.xPlus(f,1),u-c-2),x=kq(i.borderRadius);Object.values(x).some((function(e){return 0!==e}))?(e.beginPath(),e.fillStyle=a.multiKeyBackground,pq(e,{x:y,y:p,w:u,h:s,radius:x}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),pq(e,{x:b,y:p+1,w:u-2,h:s-2,radius:x}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(y,p,u,s),e.strokeRect(y,p,u,s),e.fillStyle=i.backgroundColor,e.fillRect(b,p+1,u-2,s-2))}e.fillStyle=this.labelTextColors[n]}},{key:"drawBody",value:function(e,t,n){var r,a,i,o,s,u,c,l=this.body,h=n.bodySpacing,f=n.bodyAlign,d=n.displayColors,p=n.boxHeight,v=n.boxWidth,m=n.boxPadding,g=Sq(n.bodyFont),y=g.lineHeight,b=0,x=gX(n.rtl,this.x,this.width),k=function(n){t.fillText(n,x.x(e.x+b),e.y+y/2),e.y+=y+h},w=x.textAlign(f);for(t.textAlign=f,t.textBaseline="middle",t.font=g.string,e.x=wQ(this,w,n),t.fillStyle=n.bodyColor,_G(this.beforeBody,k),b=d&&"right"!==w?"center"===f?v/2+m:v+2+m:0,o=0,u=l.length;o<u;++o){for(r=l[o],a=this.labelTextColors[o],t.fillStyle=a,_G(r.before,k),i=r.lines,d&&i.length&&(this._drawColorBox(t,e,o,x,n),y=Math.max(g.lineHeight,p)),s=0,c=i.length;s<c;++s)k(i[s]),y=g.lineHeight;_G(r.after,k)}b=0,y=g.lineHeight,_G(this.afterBody,k),e.y-=h}},{key:"drawFooter",value:function(e,t,n){var r,a,i=this.footer,o=i.length;if(o){var s=gX(n.rtl,this.x,this.width);for(e.x=wQ(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",r=Sq(n.footerFont),t.fillStyle=n.footerColor,t.font=r.string,a=0;a<o;++a)t.fillText(i[a],s.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}},{key:"drawBackground",value:function(e,t,n,r){var a=this.xAlign,i=this.yAlign,o=e.x,s=e.y,u=n.width,c=n.height,l=kq(r.cornerRadius),h=l.topLeft,f=l.topRight,d=l.bottomLeft,p=l.bottomRight;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+h,s),"top"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+u-f,s),t.quadraticCurveTo(o+u,s,o+u,s+f),"center"===i&&"right"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+u,s+c-p),t.quadraticCurveTo(o+u,s+c,o+u-p,s+c),"bottom"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+d,s+c),t.quadraticCurveTo(o,s+c,o,s+c-d),"center"===i&&"left"===a&&this.drawCaret(e,t,n,r),t.lineTo(o,s+h),t.quadraticCurveTo(o,s,o+h,s),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}},{key:"_updateAnimationTarget",value:function(e){var t=this.chart,n=this.$animations,r=n&&n.x,a=n&&n.y;if(r||a){var i=pQ[e.position].call(this,this._active,this._eventPosition);if(!i)return;var o=this._size=yQ(this,e),s=Object.assign({},i,this._size),u=xQ(t,e,s),c=kQ(e,s,u,t);r._to===c.x&&a._to===c.y||(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,c))}}},{key:"draw",value:function(e){var t=this.options.setContext(this.getContext()),n=this.opacity;if(n){this._updateAnimationTarget(t);var r={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;var i=wq(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,r,t),yX(e,t.textDirection),a.y+=i.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),bX(e,t.textDirection),e.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e,t){var n=this,r=this._active,a=e.map((function(e){var t=e.datasetIndex,r=e.index,a=n.chart.getDatasetMeta(t);if(!a)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:a.data[r],index:r}})),i=!CG(r,a),o=this._positionChanged(a,t);(i||o)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var r=this.options,a=this._active||[],i=this._getActiveElements(e,a,t,n),o=this._positionChanged(i,e),s=t||!CG(i,a)||o;return s&&(this._active=i,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}},{key:"_getActiveElements",value:function(e,t,n,r){var a=this.options;if("mouseout"===e.type)return[];if(!r)return t;var i=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&i.reverse(),i}},{key:"_positionChanged",value:function(e,t){var n=this.caretX,r=this.caretY,a=this.options,i=pQ[a.position].call(this,e,t);return!1!==i&&(n!==i.x||r!==i.y)}}]),n}(QY);TQ.positioners=pQ;var _Q={id:"tooltip",_element:TQ,positioners:pQ,afterInit:function(e,t,n){n&&(e.tooltip=new TQ({chart:e,options:n}))},beforeUpdate:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw:function(e){var t=e.tooltip,n={tooltip:t};!1!==e.notifyPlugins("beforeTooltipDraw",n)&&(t&&t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n))},afterEvent:function(e,t){if(e.tooltip){var n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(e,t){return t.bodyFont.size},boxWidth:function(e,t){return t.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:mG,title:function(e){if(e.length>0){var t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:mG,beforeBody:mG,beforeLabel:mG,label:function(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;var t=e.dataset.label||"";t&&(t+=": ");var n=e.formattedValue;return yG(n)||(t+=n),t},labelColor:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:mG,afterBody:mG,beforeFooter:mG,footer:mG,afterFooter:mG}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(e){return"filter"!==e&&"itemSort"!==e&&"external"!==e},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function CQ(e,t,n,r){var a=e.indexOf(t);return-1===a?function(e,t,n,r){return"string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n}(e,t,n,r):a!==e.lastIndexOf(t)?n:a}var IQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this,e))._startValue=void 0,r._valueRange=0,r._addedLabels=[],r}return En(n,[{key:"init",value:function(e){var t=this._addedLabels;if(t.length){var r,a=this.getLabels(),i=bn(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.index,u=o.label;a[s]===u&&a.splice(s,1)}}catch(BZ){i.e(BZ)}finally{i.f()}this._addedLabels=[]}NI(Po(n.prototype),"init",this).call(this,e)}},{key:"parse",value:function(e,t){if(yG(e))return null;var n=this.getLabels();return function(e,t){return null===e?null:uK(Math.round(e),0,t)}(t=isFinite(t)&&n[t]===e?t:CQ(n,e,SG(t,e),this._addedLabels),n.length-1)}},{key:"determineDataLimits",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.getMinMax(!0),a=r.min,i=r.max;"ticks"===this.options.bounds&&(t||(a=0),n||(i=this.getLabels().length-1)),this.min=a,this.max=i}},{key:"buildTicks",value:function(){var e=this.min,t=this.max,n=this.options.offset,r=[],a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(var i=e;i<=t;i++)r.push({value:i});return r}},{key:"getLabelForValue",value:function(e){var t=this.getLabels();return e>=0&&e<t.length?t[e]:e}},{key:"configure",value:function(){NI(Po(n.prototype),"configure",this).call(this),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getValueForPixel",value:function(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}]),n}(u$);function NQ(e,t){var n,r,a,i,o=[],s=e.bounds,u=e.step,c=e.min,l=e.max,h=e.precision,f=e.count,d=e.maxTicks,p=e.maxDigits,v=e.includeBounds,m=u||1,g=d-1,y=t.min,b=t.max,x=!yG(c),k=!yG(l),w=!yG(f),S=(b-y)/(p+1),E=$G((b-y)/g/m)*m;if(E<1e-14&&!x&&!k)return[{value:y},{value:b}];(i=Math.ceil(b/E)-Math.floor(y/E))>g&&(E=$G(i*E/g/m)*m),yG(h)||(n=Math.pow(10,h),E=Math.ceil(E*n)/n),"ticks"===s?(r=Math.floor(y/E)*E,a=Math.ceil(b/E)*E):(r=y,a=b),x&&k&&u&&function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e}((l-c)/u,E/1e3)?(E=(l-c)/(i=Math.round(Math.min((l-c)/E,d))),r=c,a=l):w?E=((a=k?l:a)-(r=x?c:r))/(i=f-1):i=JG(i=(a-r)/E,Math.round(i),E/1e3)?Math.round(i):Math.ceil(i);var T=Math.max(nK(E),nK(r));n=Math.pow(10,yG(h)?T:h),r=Math.round(r*n)/n,a=Math.round(a*n)/n;var _=0;for(x&&(v&&r!==c?(o.push({value:c}),r<c&&_++,JG(Math.round((r+_*E)*n)/n,c,AQ(c,S,e))&&_++):r<c&&_++);_<i;++_)o.push({value:Math.round((r+_*E)*n)/n});return k&&v&&a!==l?o.length&&JG(o[o.length-1].value,l,AQ(l,S,e))?o[o.length-1].value=l:o.push({value:l}):k&&a!==l||o.push({value:a}),o}function AQ(e,t,n){var r=n.horizontal,a=eK(n.minRotation),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}IQ.id="category",IQ.defaults={ticks:{callback:IQ.prototype.getLabelForValue}};var RQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this,e)).start=void 0,r.end=void 0,r._startValue=void 0,r._endValue=void 0,r._valueRange=0,r}return En(n,[{key:"parse",value:function(e,t){return yG(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}},{key:"handleTickRangeOptions",value:function(){var e=this.options.beginAtZero,t=this.getUserBounds(),n=t.minDefined,r=t.maxDefined,a=this.min,i=this.max,o=function(e){return a=n?a:e},s=function(e){return i=r?i:e};if(e){var u=YG(a),c=YG(i);u<0&&c<0?s(0):u>0&&c>0&&o(0)}if(a===i){var l=1;(i>=Number.MAX_SAFE_INTEGER||a<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(.05*i)),s(i+l),e||o(a-l)}this.min=a,this.max=i}},{key:"getTickLimit",value:function(){var e,t=this.options.ticks,n=t.maxTicksLimit,r=t.stepSize;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var e=this.options,t=e.ticks,n=this.getTickLimit(),r=NQ({maxTicks:n=Math.max(2,n),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&ZG(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}},{key:"configure",value:function(){var e=this.ticks,t=this.min,r=this.max;if(NI(Po(n.prototype),"configure",this).call(this),this.options.offset&&e.length){var a=(r-t)/Math.max(e.length-1,1)/2;t-=a,r+=a}this._startValue=t,this._endValue=r,this._valueRange=r-t}},{key:"getLabelForValue",value:function(e){return mX(e,this.chart.options.locale,this.options.ticks.format)}}]),n}(u$),OQ=function(e){Mo(n,e);var t=Uo(n);function n(){return wn(this,n),t.apply(this,arguments)}return En(n,[{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=kG(t)?t:0,this.max=kG(n)?n:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var e=this.isHorizontal(),t=e?this.width:this.height,n=eK(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/r))}},{key:"getPixelForValue",value:function(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}]),n}(RQ);function DQ(e){return 1===e/Math.pow(10,Math.floor(XG(e)))}OQ.id="linear",OQ.defaults={ticks:{callback:ZY.formatters.numeric}};var MQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this,e)).start=void 0,r.end=void 0,r._startValue=void 0,r._valueRange=0,r}return En(n,[{key:"parse",value:function(e,t){var n=RQ.prototype.parse.apply(this,[e,t]);if(0!==n)return kG(n)&&n>0?n:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=kG(t)?Math.max(0,t):null,this.max=kG(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.min,a=this.max,i=function(e){return r=t?r:e},o=function(e){return a=n?a:e},s=function(e,t){return Math.pow(10,Math.floor(XG(e))+t)};r===a&&(r<=0?(i(1),o(10)):(i(s(r,-1)),o(s(a,1)))),r<=0&&i(s(a,-1)),a<=0&&o(s(r,1)),this._zero&&this.min!==this._suggestedMin&&r===s(this.min,0)&&i(s(r,-1)),this.min=r,this.max=a}},{key:"buildTicks",value:function(){var e=this.options,t=function(e,t){var n=Math.floor(XG(t.max)),r=Math.ceil(t.max/Math.pow(10,n)),a=[],i=wG(e.min,Math.pow(10,Math.floor(XG(t.min)))),o=Math.floor(XG(i)),s=Math.floor(i/Math.pow(10,o)),u=o<0?Math.pow(10,Math.abs(o)):1;do{a.push({value:i,major:DQ(i)}),10===++s&&(s=1,u=++o>=0?1:u),i=Math.round(s*Math.pow(10,o)*u)/u}while(o<n||o===n&&s<r);var c=wG(e.max,i);return a.push({value:c,major:DQ(i)}),a}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&ZG(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}},{key:"getLabelForValue",value:function(e){return void 0===e?"0":mX(e,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var e=this.min;NI(Po(n.prototype),"configure",this).call(this),this._startValue=XG(e),this._valueRange=XG(this.max)-XG(e)}},{key:"getPixelForValue",value:function(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(XG(e)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){var t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}]),n}(u$);function PQ(e){var t=e.ticks;if(t.display&&e.display){var n=wq(t.backdropPadding);return SG(t.font&&t.font.size,eq.font.size)+n.height}return 0}function LQ(e,t,n,r,a){return e===r||e===a?{start:t-n/2,end:t+n/2}:e<r||e>a?{start:t-n,end:t}:{start:t,end:t+n}}function FQ(e){for(var t,n,r,a={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},a),o=[],s=[],u=e._pointLabels.length,c=e.options.pointLabels,l=c.centerPointLabels?UG/u:0,h=0;h<u;h++){var f=c.setContext(e.getPointLabelContext(h));s[h]=f.padding;var d=e.getPointPosition(h,e.drawingArea+s[h],l),p=Sq(f.font),v=(t=e.ctx,n=p,r=bG(r=e._pointLabels[h])?r:[r],{w:nq(t,n.string,r),h:r.length*n.lineHeight});o[h]=v;var m=oK(e.getIndexAngle(h)+l),g=Math.round(tK(m));BQ(i,a,m,LQ(g,d.x,v.w,0,180),LQ(g,d.y,v.h,90,270))}e.setCenterPoint(a.l-i.l,i.r-a.r,a.t-i.t,i.b-a.b),e._pointLabelItems=function(e,t,n){for(var r=[],a=e._pointLabels.length,i=e.options,o=PQ(i)/2,s=e.drawingArea,u=i.pointLabels.centerPointLabels?UG/a:0,c=0;c<a;c++){var l=e.getPointPosition(c,s+o+n[c],u),h=Math.round(tK(oK(l.angle+GG))),f=t[c],d=jQ(l.y,f.h,h),p=VQ(h),v=UQ(l.x,f.w,p);r.push({x:l.x,y:d,textAlign:p,left:v,top:d,right:v+f.w,bottom:d+f.h})}return r}(e,o,s)}function BQ(e,t,n,r,a){var i=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n)),s=0,u=0;r.start<t.l?(s=(t.l-r.start)/i,e.l=Math.min(e.l,t.l-s)):r.end>t.r&&(s=(r.end-t.r)/i,e.r=Math.max(e.r,t.r+s)),a.start<t.t?(u=(t.t-a.start)/o,e.t=Math.min(e.t,t.t-u)):a.end>t.b&&(u=(a.end-t.b)/o,e.b=Math.max(e.b,t.b+u))}function VQ(e){return 0===e||180===e?"center":e<180?"left":"right"}function UQ(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function jQ(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function zQ(e,t,n,r){var a=e.ctx;if(n)a.arc(e.xCenter,e.yCenter,t,0,jG);else{var i=e.getPointPosition(0,t);a.moveTo(i.x,i.y);for(var o=1;o<r;o++)i=e.getPointPosition(o,t),a.lineTo(i.x,i.y)}}MQ.id="logarithmic",MQ.defaults={ticks:{callback:ZY.formatters.logarithmic,major:{enabled:!0}}};var WQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this,e)).xCenter=void 0,r.yCenter=void 0,r.drawingArea=void 0,r._pointLabels=[],r._pointLabelItems=[],r}return En(n,[{key:"setDimensions",value:function(){var e=this._padding=wq(PQ(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!1),t=e.min,n=e.max;this.min=kG(t)&&!isNaN(t)?t:0,this.max=kG(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/PQ(this.options))}},{key:"generateTickLabels",value:function(e){var t=this;RQ.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((function(e,n){var r=TG(t.options.pointLabels.callback,[e,n],t);return r||0===r?r:""})).filter((function(e,n){return t.chart.getDataVisibility(n)}))}},{key:"fit",value:function(){var e=this.options;e.display&&e.pointLabels.display?FQ(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}},{key:"getIndexAngle",value:function(e){return oK(e*(jG/(this._pointLabels.length||1))+eK(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(e){if(yG(e))return NaN;var t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}},{key:"getValueForDistanceFromCenter",value:function(e){if(yG(e))return NaN;var t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}},{key:"getPointLabelContext",value:function(e){var t=this._pointLabels||[];if(e>=0&&e<t.length){var n=t[e];return function(e,t,n){return Tq(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}},{key:"getPointPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getIndexAngle(e)-GG+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}},{key:"getPointPositionForValue",value:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}},{key:"getBasePosition",value:function(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(e){var t=this._pointLabelItems[e];return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}},{key:"drawBackground",value:function(){var e=this.options,t=e.backgroundColor,n=e.grid.circular;if(t){var r=this.ctx;r.save(),r.beginPath(),zQ(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}},{key:"drawGrid",value:function(){var e,t,n,r=this,a=this.ctx,i=this.options,o=i.angleLines,s=i.grid,u=this._pointLabels.length;if(i.pointLabels.display&&function(e,t){for(var n=e.ctx,r=e.options.pointLabels,a=t-1;a>=0;a--){var i=r.setContext(e.getPointLabelContext(a)),o=Sq(i.font),s=e._pointLabelItems[a],u=s.x,c=s.y,l=s.textAlign,h=s.left,f=s.top,d=s.right,p=s.bottom,v=i.backdropColor;if(!yG(v)){var m=wq(i.backdropPadding);n.fillStyle=v,n.fillRect(h-m.left,f-m.top,d-h+m.width,p-f+m.height)}hq(n,e._pointLabels[a],u,c+o.lineHeight/2,o,{color:i.color,textAlign:l,textBaseline:"middle"})}}(this,u),s.display&&this.ticks.forEach((function(e,n){if(0!==n){t=r.getDistanceFromCenterForValue(e.value);var a=s.setContext(r.getContext(n-1));!function(e,t,n,r){var a=e.ctx,i=t.circular,o=t.color,s=t.lineWidth;!i&&!r||!o||!s||n<0||(a.save(),a.strokeStyle=o,a.lineWidth=s,a.setLineDash(t.borderDash),a.lineDashOffset=t.borderDashOffset,a.beginPath(),zQ(e,n,i,r),a.closePath(),a.stroke(),a.restore())}(r,a,t,u)}})),o.display){for(a.save(),e=u-1;e>=0;e--){var c=o.setContext(this.getPointLabelContext(e)),l=c.color,h=c.lineWidth;h&&l&&(a.lineWidth=h,a.strokeStyle=l,a.setLineDash(c.borderDash),a.lineDashOffset=c.borderDashOffset,t=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),n=this.getPointPosition(e,t),a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(n.x,n.y),a.stroke())}a.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var e=this,t=this.ctx,n=this.options,r=n.ticks;if(r.display){var a,i,o=this.getIndexAngle(0);t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((function(o,s){if(0!==s||n.reverse){var u=r.setContext(e.getContext(s)),c=Sq(u.font);if(a=e.getDistanceFromCenterForValue(e.ticks[s].value),u.showLabelBackdrop){t.font=c.string,i=t.measureText(o.label).width,t.fillStyle=u.backdropColor;var l=wq(u.backdropPadding);t.fillRect(-i/2-l.left,-a-c.size/2-l.top,i+l.width,c.size+l.height)}hq(t,o.label,0,-a,c,{color:u.color})}})),t.restore()}}},{key:"drawTitle",value:function(){}}]),n}(RQ);WQ.id="radialLinear",WQ.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ZY.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(e){return e},padding:5,centerPointLabels:!1}},WQ.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},WQ.descriptors={angleLines:{_fallback:"grid"}};var HQ={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},GQ=Object.keys(HQ);function KQ(e,t){return e-t}function qQ(e,t){if(yG(t))return null;var n=e._adapter,r=e._parseOpts,a=r.parser,i=r.round,o=r.isoWeekday,s=t;return"function"===typeof a&&(s=a(s)),kG(s)||(s="string"===typeof a?n.parse(s,a):n.parse(s)),null===s?null:(i&&(s="week"!==i||!QG(o)&&!0!==o?n.startOf(s,i):n.startOf(s,"isoWeek",o)),+s)}function XQ(e,t,n,r){for(var a=GQ.length,i=GQ.indexOf(e);i<a-1;++i){var o=HQ[GQ[i]],s=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(s*o.size))<=r)return GQ[i]}return GQ[a-1]}function YQ(e,t,n){if(n){if(n.length){var r=_q(n,t),a=r.lo,i=r.hi;e[n[a]>=t?n[a]:n[i]]=!0}}else e[t]=!0}function $Q(e,t,n){var r,a,i=[],o={},s=t.length;for(r=0;r<s;++r)o[a=t[r]]=r,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,r){var a,i,o=e._adapter,s=+o.startOf(t[0].value,r),u=t[t.length-1].value;for(a=s;a<=u;a=+o.add(a,1,r))(i=n[a])>=0&&(t[i].major=!0);return t}(e,i,o,n):i}var QQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this,e))._cache={data:[],labels:[],all:[]},r._unit="day",r._majorUnit=void 0,r._offsets={},r._normalized=!1,r._parseOpts=void 0,r}return En(n,[{key:"init",value:function(e,t){var r=e.time||(e.time={}),a=this._adapter=new lY._date(e.adapters.date);OG(r.displayFormats,a.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},NI(Po(n.prototype),"init",this).call(this,e),this._normalized=t.normalized}},{key:"parse",value:function(e,t){return void 0===e?null:qQ(this,e)}},{key:"beforeLayout",value:function(){NI(Po(n.prototype),"beforeLayout",this).call(this),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var e=this.options,t=this._adapter,n=e.time.unit||"day",r=this.getUserBounds(),a=r.min,i=r.max,o=r.minDefined,s=r.maxDefined;function u(e){o||isNaN(e.min)||(a=Math.min(a,e.min)),s||isNaN(e.max)||(i=Math.max(i,e.max))}o&&s||(u(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||u(this.getMinMax(!1))),a=kG(a)&&!isNaN(a)?a:+t.startOf(Date.now(),n),i=kG(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}},{key:"_getLabelBounds",value:function(){var e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}},{key:"buildTicks",value:function(){var e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);var a=this.min,i=function(e,t,n){for(var r=0,a=e.length;r<a&&e[r]<t;)r++;for(;a>r&&e[a-1]>n;)a--;return r>0||a<e.length?e.slice(r,a):e}(r,a,this.max);return this._unit=t.unit||(n.autoSkip?XQ(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,n,r,a){for(var i=GQ.length-1;i>=GQ.indexOf(n);i--){var o=GQ[i];if(HQ[o].common&&e._adapter.diff(a,r,o)>=t-1)return o}return GQ[n?GQ.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(var t=GQ.indexOf(e)+1,n=GQ.length;t<n;++t)if(HQ[GQ[t]].common)return GQ[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&i.reverse(),$Q(this,i,this._majorUnit)}},{key:"initOffsets",value:function(e){var t,n,r=0,a=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),a=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);var i=e.length<3?.5:.25;r=uK(r,0,i),a=uK(a,0,i),this._offsets={start:r,end:a,factor:1/(r+1+a)}}},{key:"_generate",value:function(){var e,t,n=this._adapter,r=this.min,a=this.max,i=this.options,o=i.time,s=o.unit||XQ(o.minUnit,r,a,this._getLabelCapacity(r)),u=SG(o.stepSize,1),c="week"===s&&o.isoWeekday,l=QG(c)||!0===c,h={},f=r;if(l&&(f=+n.startOf(f,"isoWeek",c)),f=+n.startOf(f,l?"day":s),n.diff(a,r,s)>1e5*u)throw new Error(r+" and "+a+" are too far apart with stepSize of "+u+" "+s);var d="data"===i.ticks.source&&this.getDataTimestamps();for(e=f,t=0;e<a;e=+n.add(e,u,s),t++)YQ(h,e,d);return e!==a&&"ticks"!==i.bounds&&1!==t||YQ(h,e,d),Object.keys(h).sort((function(e,t){return e-t})).map((function(e){return+e}))}},{key:"getLabelForValue",value:function(e){var t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}},{key:"_tickFormatFunction",value:function(e,t,n,r){var a=this.options,i=a.time.displayFormats,o=this._unit,s=this._majorUnit,u=o&&i[o],c=s&&i[s],l=n[t],h=s&&c&&l&&l.major,f=this._adapter.format(e,r||(h?c:u)),d=a.ticks.callback;return d?TG(d,[f,t,n],this):f}},{key:"generateTickLabels",value:function(e){var t,n,r;for(t=0,n=e.length;t<n;++t)(r=e[t]).label=this._tickFormatFunction(r.value,t,e)}},{key:"getDecimalForValue",value:function(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(e){var t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}},{key:"_getLabelSize",value:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,r=eK(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(r),i=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*a+o*i,h:n*i+o*a}}},{key:"_getLabelCapacity",value:function(e){var t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,a=this._tickFormatFunction(e,0,$Q(this,[e],this._majorUnit),r),i=this._getLabelSize(a),o=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return o>0?o:1}},{key:"getDataTimestamps",value:function(){var e,t,n=this._cache.data||[];if(n.length)return n;var r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}},{key:"getLabelTimestamps",value:function(){var e,t,n=this._cache.labels||[];if(n.length)return n;var r=this.getLabels();for(e=0,t=r.length;e<t;++e)n.push(qQ(this,r[e]));return this._cache.labels=this._normalized?n:this.normalize(n)}},{key:"normalize",value:function(e){return Rq(e.sort(KQ))}}]),n}(u$);function JQ(e,t,n){var r,a,i,o,s=0,u=e.length-1;if(n){if(t>=e[s].pos&&t<=e[u].pos){var c=Cq(e,"pos",t);s=c.lo,u=c.hi}var l=e[s];r=l.pos,i=l.time;var h=e[u];a=h.pos,o=h.time}else{if(t>=e[s].time&&t<=e[u].time){var f=Cq(e,"time",t);s=f.lo,u=f.hi}var d=e[s];r=d.time,i=d.pos;var p=e[u];a=p.time,o=p.pos}var v=a-r;return v?i+(o-i)*(t-r)/v:i}QQ.id="time",QQ.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};var ZQ=function(e){Mo(n,e);var t=Uo(n);function n(e){var r;return wn(this,n),(r=t.call(this,e))._table=[],r._minPos=void 0,r._tableRange=void 0,r}return En(n,[{key:"initOffsets",value:function(){var e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=JQ(t,this.min),this._tableRange=JQ(t,this.max)-this._minPos,NI(Po(n.prototype),"initOffsets",this).call(this,e)}},{key:"buildLookupTable",value:function(e){var t,n,r,a,i,o=this.min,s=this.max,u=[],c=[];for(t=0,n=e.length;t<n;++t)(a=e[t])>=o&&a<=s&&u.push(a);if(u.length<2)return[{time:o,pos:0},{time:s,pos:1}];for(t=0,n=u.length;t<n;++t)i=u[t+1],r=u[t-1],a=u[t],Math.round((i+r)/2)!==a&&c.push({time:a,pos:t/(n-1)});return c}},{key:"_getTimestampsForTable",value:function(){var e=this._cache.all||[];if(e.length)return e;var t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e}},{key:"getDecimalForValue",value:function(e){return(JQ(this._table,e)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return JQ(this._table,n*this._tableRange+this._minPos,!0)}}]),n}(QQ);ZQ.id="timeseries",ZQ.defaults=QQ.defaults;function eJ(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var tJ=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent"],nJ="label";function rJ(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function aJ(e,t){e.labels=t}function iJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nJ,r=[];e.datasets=t.map((function(t){var a=e.datasets.find((function(e){return e[n]===t[n]}));return a&&t.data&&!r.includes(a)?(r.push(a),Object.assign(a,t),a):uN({},t)}))}function oJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nJ,n={labels:[],datasets:[]};return aJ(n,e.labels),iJ(n,e.datasets,t),n}function sJ(e,t){var n=e.height,r=void 0===n?150:n,a=e.width,i=void 0===a?300:a,o=e.redraw,s=void 0!==o&&o,u=e.datasetIdKey,c=e.type,l=e.data,h=e.options,f=e.plugins,d=void 0===f?[]:f,p=e.fallbackContent,v=eJ(e,tJ),m=(0,w.useRef)(null),g=(0,w.useRef)(),y=function(){m.current&&(g.current=new L$(m.current,{type:c,data:oJ(l,u),options:h,plugins:d}),rJ(t,g.current))},b=function(){rJ(t,null),g.current&&(g.current.destroy(),g.current=null)};return(0,w.useEffect)((function(){var e,t;!s&&g.current&&h&&(e=g.current,t=h,e.options=uN({},t))}),[s,h]),(0,w.useEffect)((function(){!s&&g.current&&aJ(g.current.config.data,l.labels)}),[s,l.labels]),(0,w.useEffect)((function(){!s&&g.current&&l.datasets&&iJ(g.current.config.data,l.datasets,u)}),[s,l.datasets]),(0,w.useEffect)((function(){g.current&&(s?(b(),setTimeout(y)):g.current.update())}),[s,h,l.labels,l.datasets]),(0,w.useEffect)((function(){return y(),function(){return b()}}),[]),w.createElement("canvas",Object.assign({ref:m,role:"img",height:r,width:i},v),p)}var uJ=(0,w.forwardRef)(sJ);function cJ(e,t){return L$.register(t),(0,w.forwardRef)((function(t,n){return w.createElement(uJ,Object.assign({},t,{ref:n,type:e}))}))}var lJ=cJ("line",rY);function hJ(e){var t=e.maximas,n=e.goal,r=function(e){for(var t=new Array(2*e.length+1),n=1,r=0;r<t.length;r++)r%2==0?t[r]=0:r%2!=0&&(t[r]=n,n++);return t}(t),a={labels:r,datasets:[{data:fJ(t),borderColor:"#3e95cd",tension:.5,label:"Range of Motion",fill:!0},{data:dJ(n,t),borderColor:"#97d95f",fill:!1,tension:.5,label:"Goal",pointRadius:0}]};return(0,rt.jsx)(lJ,{options:{plugins:{legend:{display:!0,labels:{font:{size:20,weight:"bold"}}}},scales:{x:{title:{display:!0,text:"Repetitions (count)"},ticks:{callback:function(e,t){return t%2!==0?this.getLabelForValue(e):""}}},y:{title:{display:!0,text:"Angle (degrees)"}}}},data:a})}function fJ(e){for(var t=new Array(2*e.length+1),n=0,r=0;r<t.length;r++)r%2!=0?(t[r]=e[n],n++):t[r]=0;return t}function dJ(e,t){return new Array(2*t.length+1).fill(e)}L$.register(IQ,OQ,tQ,Z$,dQ,_Q,hQ);var pJ,vJ,mJ=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};var gJ=nt.div(pJ||(pJ=E(["\n    font-size: 1.25rem;\n    font-weight: 500;\n    text-align: center;\n    padding: 0.75rem;\n"])));function yJ(e){var t=nt.div(vJ||(vJ=E(["\n        border: 1px solid #4f4f4f;\n        border-radius: 2rem;\n        background: ",";\n        color: #ffffff;\n        margin-right: 1.5rem;\n        margin-left: 1.5rem;\n\n        &:hover {\n            cursor: pointer;\n            background: ",";\n        }\n    "])),e.selected?"#56b679":"#5693B6",e.selected?"#56b679":"#7BB1CF");return(0,rt.jsxs)(t,{children:[(0,rt.jsx)("img",{src:e.url,style:NJ}),(0,rt.jsx)(gJ,{children:e.name})]})}var bJ,xJ,kJ,wJ,SJ,EJ,TJ,_J,CJ,IJ,NJ={width:250,borderRadius:"2rem 2rem 0 0"},AJ=nt.div(bJ||(bJ=E(["\n    margin: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    height: 100vh;\n    background-color: #d4f0ff;\n"]))),RJ=nt.div(xJ||(xJ=E(["\n    font-size: 2rem;\n    font-weight: 400;\n    color: #4f4f4f;\n    margin-top: 4rem;\n"]))),OJ=(nt.input(kJ||(kJ=E(['\n    width: 4rem;\n    border: none;\n    background: none;\n    border-bottom: 2px solid #4f4f4f;\n    color: #4f4f4f;\n    text-align: center;\n    padding: 1rem;\n    font-size: 3rem;\n    font-weight: 400;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    margin-top: 1rem;\n    margin-bottom: 1rem;\n\n    &:focus {\n        outline: none;\n        border-bottom: 2px solid #217bad;\n    }\n    ']))),nt.div(wJ||(wJ=E(["\n    display: flex;\n    margin-top: 2rem;\n"]))));function DJ(e){var t=e.leg,n=e.handleClickLeft,r=e.handleClickRight,a=nt.button(SJ||(SJ=E(['\n        width: 8rem;\n        height: 4rem;\n        padding: 0.25rem;\n        padding-right: 0.5rem;\n        padding-left: 0.5rem;\n        font-size: 2rem;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n        background: ',";\n        color: #ffffff;\n        border: 1px solid #4f4f4f;\n        border-radius: 2rem;\n        font-weight: 400;\n        margin: 1rem;\n\n        &:hover {\n            cursor: pointer;\n            background: ",";\n        }\n    "])),"Left"===t?"#56b679":"#5693B6","Left"===t?"#56b679":"#7BB1CF"),i=nt.button(EJ||(EJ=E(['\n        width: 8rem;\n        height: 4rem;\n        padding: 0.25rem;\n        padding-right: 0.5rem;\n        padding-left: 0.5rem;\n        font-size: 2rem;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n        background: ',";\n        color: #ffffff;\n        border: 1px solid #4f4f4f;\n        border-radius: 2rem;\n        font-weight: 400;\n        margin: 1rem;\n\n        &:hover {\n            cursor: pointer;\n            background: ",";\n        }\n    "])),"Right"===t?"#56b679":"#5693B6","Right"===t?"#56b679":"#7BB1CF");return(0,rt.jsxs)(AJ,{children:[(0,rt.jsx)(RJ,{children:"Select which leg you'd like to use"}),(0,rt.jsxs)(OJ,{children:[(0,rt.jsx)(a,{onClick:n,children:"Left"}),(0,rt.jsx)(i,{onClick:r,children:"Right"})]})]})}var MJ,PJ,LJ,FJ,BJ=nt.div(TJ||(TJ=E(["\n    margin: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    background-color: #d4f0ff;\n"]))),VJ=nt.div(_J||(_J=E(["\n    font-size: 2rem;\n    font-weight: 400;\n    color: #4f4f4f;\n    margin-top: 3rem;\n"]))),UJ=(nt.button(CJ||(CJ=E(['\n        padding: 0.5rem;\n        padding-right: 1.5rem;\n        padding-left: 1.5rem;\n        font-size: 1.75rem;\n        background: #5693B6;\n        color: #ffffff;\n        border: 1px solid #4f4f4f;\n        border-radius: 2rem;\n        width: fit-content;\n        font-weight: 400;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n        margin-top: 1rem;\n\n        &:hover {\n            cursor: pointer;\n            background: #7BB1CF;\n        }\n    ']))),nt.input(IJ||(IJ=E(['\n    width: 4rem;\n    border: none;\n    background: none;\n    border-bottom: 2px solid #4f4f4f;\n    color: #4f4f4f;\n    text-align: center;\n    padding: 0.5rem;\n    font-size: 4rem;\n    font-weight: 400;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    margin-top: 1rem;\n\n    &:focus {\n        outline: none;\n        border-bottom: 2px solid #217bad;\n    }\n    ']))));function jJ(e){var t=e.reps,n=e.updateReps;return(0,rt.jsxs)(BJ,{children:[(0,rt.jsxs)(VJ,{children:["Enter the number of repetitions",(0,rt.jsx)("div",{style:{fontSize:"1.25rem",textAlign:"center",marginTop:"0.5rem"},children:"Recommended: 3-7"})]}),(0,rt.jsx)("form",{children:(0,rt.jsx)("div",{children:(0,rt.jsx)(UJ,{id:"reps",name:"reps",type:"text",onChange:function(e){return n(e.target.value)},value:t})})})]})}var zJ,WJ,HJ,GJ,KJ,qJ=nt.div(MJ||(MJ=E(["\n    margin: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    height: 100vh;\n    background-color: #d4f0ff;\n"]))),XJ=nt.div(PJ||(PJ=E(["\n    font-size: 2rem;\n    font-weight: 400;\n    color: #4f4f4f;\n    margin-top: 3rem;\n"]))),YJ=(nt.button(LJ||(LJ=E(['\n        padding: 0.5rem;\n        padding-right: 1.5rem;\n        padding-left: 1.5rem;\n        font-size: 1.75rem;\n        background: #5693B6;\n        color: #ffffff;\n        border: 1px solid #4f4f4f;\n        border-radius: 2rem;\n        width: fit-content;\n        font-weight: 400;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n        margin-top: 1rem;\n\n        &:hover {\n            cursor: pointer;\n            background: #7BB1CF;\n        }\n    ']))),nt.input(FJ||(FJ=E(['\n    width: 6rem;\n    border: none;\n    background: none;\n    border-bottom: 2px solid #4f4f4f;\n    color: #4f4f4f;\n    text-align: center;\n    padding: 0.5rem;\n    font-size: 4rem;\n    font-weight: 400;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    margin-top: 1rem;\n\n    &:focus {\n        outline: none;\n        border-bottom: 2px solid #217bad;\n    }\n    ']))));function $J(e){var t=e.target,n=e.updateTarget;return(0,rt.jsxs)(qJ,{children:[(0,rt.jsxs)(XJ,{children:["Enter the target leg angle",(0,rt.jsx)("div",{style:{fontSize:"1.25rem",textAlign:"center",marginTop:"0.5rem"},children:"Recommended: 30-75"})]}),(0,rt.jsx)("form",{children:(0,rt.jsx)("div",{children:(0,rt.jsx)(YJ,{id:"reps",name:"reps",type:"text",onChange:function(e){return n(e.target.value)},value:t})})})]})}var QJ,JJ,ZJ,eZ,tZ,nZ,rZ,aZ,iZ,oZ,sZ,uZ,cZ,lZ,hZ,fZ=nt.div(zJ||(zJ=E(["\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    height: 100vh;\n    background-color: #d4f0ff;\n    overflow: scroll;\n"]))),dZ=nt.div(WJ||(WJ=E(["\n    font-size: 3.5rem;\n    font-weight: 500;\n    color: #4f4f4f;\n    margin-top: 4rem;\n"]))),pZ=nt.div(HJ||(HJ=E(["\n    font-size: 2rem;\n    font-weight: 400;\n    color: #4f4f4f;\n    margin-top: 3rem;\n"]))),vZ=nt.div(GJ||(GJ=E(["\n    display: flex;\n    margin-top: 2rem;\n"]))),mZ=nt.button(KJ||(KJ=E(['\n    padding: 0.25rem;\n    padding: 1.5rem;\n    padding-right: 2.5rem;\n    padding-left: 2.5rem;\n    font-size: 3rem;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    background: #5693B6;\n    color: #ffffff;\n    border: 1px solid #4f4f4f;\n    border-radius: 2rem;\n    font-weight: 400;\n    margin-top: 3rem;\n    margin-bottom: 4rem;\n\n\n    &:hover {\n        cursor: pointer;\n        background: #7BB1CF\n    }\n'])));function gZ(e){var t=bt((0,w.useState)(""),2),n=t[0],r=t[1],a=bt((0,w.useState)(""),2),i=a[0],o=a[1],s=bt((0,w.useState)(5),2),u=s[0],c=s[1],l=bt((0,w.useState)(50),2),h=l[0],f=l[1],d=bt((0,w.useState)(""),2),p=d[0],v=d[1],m=Yt();console.log(h),e.name&&(e.name,function(e){throw new TypeError('"'+e+'" is read-only')}("name"));var g=function(){var e=vn(gn().mark((function e(){var t,n;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xj(AH,"sessions","Session 1"),e.next=3,Zj(t);case 3:(n=e.sent).exists()?(console.log("Name:",n.data("userName")),v(n.get("userName"))):console.log("How bro!");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=vn(gn().mark((function e(){var t;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tz(xj(AH,"sessions","Session 1"),{leg:n,exercise:i,targetReps:u,userThreshold:h},{merge:!0});case 3:t=e.sent,console.log("Document written w/ name: ",t.id),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error adding/writing to document: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,w.useEffect)((function(){g()})),(0,rt.jsxs)(fZ,{children:[(0,rt.jsxs)(dZ,{children:["Good Afternoon, ",p]}),(0,rt.jsx)(pZ,{children:"Select the exercise you'd like to peform"}),(0,rt.jsxs)(vZ,{children:[(0,rt.jsx)("div",{onClick:function(){return o("HC")},children:(0,rt.jsx)(yJ,{name:"Hamstring Curl",url:"https://www.marattmd.com/learn/images/rehab/HamstringCurl2Export.jpg",selected:"HC"===i})}),(0,rt.jsx)("div",{onClick:function(){return o("KE")},children:(0,rt.jsx)(yJ,{name:"Knee Extension",url:"https://www.marattmd.com/learn/images/rehab/SeatedKneeExtension2.jpg",selected:"KE"===i})})]}),(0,rt.jsx)(DJ,{handleClickLeft:function(){return r("Left")},handleClickRight:function(){return r("Right")},leg:n}),(0,rt.jsx)(jJ,{reps:u,updateReps:function(e){return c(e)}}),(0,rt.jsx)($J,{target:h,updateTarget:function(e){return f(e)}}),(0,rt.jsx)(mZ,{onClick:function(){console.log("Exercise: ".concat(i)),console.log("Leg: {leg}"),console.log("Reps: ".concat(u)),y(),m("/tutorial")},children:"Start Exercise"})]})}function yZ(){var e=bt((0,w.useState)(!0),2),t=e[0],n=e[1],r=bt((0,w.useState)(!1),2),a=r[0],i=r[1],o=bt((0,w.useState)(""),2),s=o[0],u=o[1];return(0,rt.jsxs)("div",{children:[t&&(0,rt.jsx)(hG,{updateName:function(e){u(e),console.log(s)},name:s}),a&&(0,rt.jsx)(gZ,{name:s,navigateToNext:function(){n(!1),i(!0)}})]})}var bZ=nt.div(QJ||(QJ=E(["\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    width: 100vw;\n    background: #DCF2CA;\n"]))),xZ=nt.div(JJ||(JJ=E(["\n    padding: 0.5rem;\n    padding-right: 1rem;\n    padding-left: 1rem;\n    font-size: 3rem;\n    color: #4f4f4f;\n    border: 1px solid #4f4f4f;\n    border-radius: 1.25rem;\n    font-weight: 400;\n    margin: 1rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]))),kZ=nt(xZ)(ZJ||(ZJ=E(["\n    background: #FFDCBB;\n"]))),wZ=nt(xZ)(eZ||(eZ=E(["\n    background: #BFE89D;\n"]))),SZ=nt(xZ)(tZ||(tZ=E(["\n    background: #d4f0ff;\n"]))),EZ=nt.div(nZ||(nZ=E(["\n    font-size: 1.5rem;\n    color: #4f4f4f;\n"]))),TZ=nt.div(rZ||(rZ=E(["\n    font-size: 3.5rem;\n    font-weight: 600;\n    color: #4f4f4f;\n    margin-right: 3rem;\n"]))),_Z=nt.div(aZ||(aZ=E(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    margin-left: 1rem;\n    margin-right: 1rem;\n"]))),CZ=nt(_Z)(iZ||(iZ=E(["\n    margin-left: 3rem;\n"]))),IZ=nt.div(oZ||(oZ=E(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 1.5rem;\n"]))),NZ=nt.div(sZ||(sZ=E(["\n    width: 50rem;\n    margin-left: auto;\n    margin-right: auto;\n    margin-bottom: 1.5rem;\n"]))),AZ=nt.div(uZ||(uZ=E(["\n    font-size: 3.5rem;\n    color: #4f4f4f;\n    text-align: center;\n    margin-bottom: 3rem;\n    margin-top: 3rem;\n"]))),RZ=nt.div(cZ||(cZ=E(['\n    padding: 0.5rem;\n    padding-right: 1.5rem;\n    padding-left: 1.5rem;\n    font-size: 1.75rem;\n    background: #5693B6;\n    color: #ffffff;\n    border: 1px solid #4f4f4f;\n    border-radius: 2rem;\n    width: fit-content;\n    font-weight: 400;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    margin-top: 1rem;\n    margin-left: auto;\n    margin-right: auto;\n    margin-bottom: 3rem;\n\n    &:hover {\n        cursor: pointer;\n        background: #7BB1CF;\n    }\n'])));function OZ(){var e=bt((0,w.useState)(50),2),t=e[0],n=e[1],r=bt((0,w.useState)([45,45,45,45,45]),2),a=r[0],i=r[1],o=bt((0,w.useState)("Usher"),2),s=o[0],u=o[1],c=bt((0,w.useState)(0),2),l=c[0],h=c[1],f=bt((0,w.useState)(0),2),d=f[0],p=f[1],v=bt((0,w.useState)(0),2),m=v[0],g=v[1],y=bt((0,w.useState)(!1),2),b=y[0],x=y[1],k=bt((0,w.useState)(!1),2),S=k[0],E=k[1],T=bt((0,w.useState)(!1),2),_=T[0],C=T[1],I=function(){var e=vn(gn().mark((function e(){var t,r;return gn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xj(AH,"sessions","Session 1"),e.next=3,Zj(t);case 3:(r=e.sent).exists()?(n(r.get("userThreshold")),i(r.get("maxAnglesIMU")),u(r.get("userName"))):console.log("This session hasn't happened yet!");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.useEffect)((function(){I();for(var e=0,n=0,r=a.reduce((function(e,t){return e+t}),0),i=0;i<a.length;i++)a[i]<t?n++:e++;var o=Math.round(e/(e+n)*100);r>t+10&&o>90?(E(!0),C(!1),x(!1)):r<t-10||o<50?(E(!1),C(!0),x(!1)):(E(!1),C(!1),x(!0)),g(o),h(e),p(n)}),[a]),(0,rt.jsxs)(bZ,{children:[(0,rt.jsxs)(AZ,{children:["Here's how you did today, ",s]}),(0,rt.jsx)(NZ,{children:(0,rt.jsx)(hJ,{maximas:a,goal:t})}),(0,rt.jsxs)(IZ,{children:[(0,rt.jsx)(TZ,{children:"Reps"}),(0,rt.jsxs)(_Z,{children:[(0,rt.jsx)(EZ,{children:"Successful"}),(0,rt.jsx)(wZ,{children:l})]}),(0,rt.jsxs)(_Z,{children:[(0,rt.jsx)(EZ,{children:"Unsuccessful"}),(0,rt.jsx)(kZ,{children:d})]}),(0,rt.jsxs)(CZ,{children:[(0,rt.jsx)(EZ,{children:"Success Rate"}),(0,rt.jsxs)(SZ,{children:[m,"%"]})]})]}),S&&(0,rt.jsx)(LZ,{}),_&&(0,rt.jsx)(FZ,{}),b&&(0,rt.jsx)(PZ,{}),(0,rt.jsx)(sn,{to:"/",style:{textDecoration:"none"},children:(0,rt.jsx)(RZ,{children:"Back to Home"})})]})}var DZ=nt.div(lZ||(lZ=E(["\n    width: 50rem;\n    border-radius: 20px;\n    border: 1px solid #4f4f4f;\n    background: #DCF2CA;\n    color: #4f4f4f;\n    padding: 2rem;\n    font-size: 1.25rem;\n    margin-left: auto;\n    margin-right: auto;\n    margin-bottom: 2rem;\n"]))),MZ=nt.div(hZ||(hZ=E(["\n    font-size: 1.75rem;\n    font-weight: 500;\n    margin-bottom: 1rem;\n"])));function PZ(){return(0,rt.jsxs)(DZ,{children:[(0,rt.jsx)(MZ,{children:"Recommendation"}),"Great job today. We recommend ",(0,rt.jsx)("span",{style:{fontWeight:600},children:"sticking to this target "}),"for a few more sessions until you feel more comfortable, before moving higher. Remember to always consult your physiotherapist."]})}function LZ(){return(0,rt.jsxs)(DZ,{children:[(0,rt.jsx)(MZ,{children:"Recommendation"}),"Your performance was excellent today. We recommend you talk to your physiotherapist about ",(0,rt.jsx)("span",{style:{fontWeight:600},children:"increasing your target by 10 degrees "}),"for the next time you perform this exercise."]})}function FZ(){return(0,rt.jsxs)(DZ,{children:[(0,rt.jsx)(MZ,{children:"Recommendation"}),"Great job as always! Seemed like you struggled a little today. We recommend you talk to your physiotherapist about ",(0,rt.jsx)("span",{style:{fontWeight:600},children:"decreasing your target by 10 degrees "}),"until you're more comfortable at that level."]})}S.render((0,rt.jsx)(w.StrictMode,{children:(0,rt.jsx)(on,{children:(0,rt.jsxs)(en,{children:[(0,rt.jsx)(Jt,{path:"/",element:(0,rt.jsx)(yZ,{})}),(0,rt.jsx)(Jt,{path:"/bluetooth",element:(0,rt.jsx)(bI,{})}),(0,rt.jsx)(Jt,{path:"/webcam",element:(0,rt.jsx)(yI,{})}),(0,rt.jsx)(Jt,{path:"/exercise",element:(0,rt.jsx)(OH,{})}),(0,rt.jsx)(Jt,{path:"/tutorial",element:(0,rt.jsx)(KH,{})}),(0,rt.jsx)(Jt,{path:"/camera-setup",element:(0,rt.jsx)(aG,{})}),(0,rt.jsx)(Jt,{path:"/welcome",element:(0,rt.jsx)(hG,{})}),(0,rt.jsx)(Jt,{path:"/select-exercise",element:(0,rt.jsx)(gZ,{})}),(0,rt.jsx)(Jt,{path:"/configure-exercise",element:(0,rt.jsx)(DJ,{})}),(0,rt.jsx)(Jt,{path:"/configure-reps",element:(0,rt.jsx)(jJ,{})}),(0,rt.jsx)(Jt,{path:"/home-screen",element:(0,rt.jsx)(dn,{})}),(0,rt.jsx)(Jt,{path:"/ending-screen",element:(0,rt.jsx)(OZ,{})}),(0,rt.jsx)(Jt,{path:"/reportcard",element:(0,rt.jsx)(hJ,{})}),(0,rt.jsx)(Jt,{path:"/home",element:(0,rt.jsx)(dn,{})})]})})}),document.getElementById("root")),mJ()}()}();
//# sourceMappingURL=main.71cd1be3.js.map